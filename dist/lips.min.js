/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/ v. DEV
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * dist file generated by Babel includes code
 * Copyright (c) 2014-present, Facebook, Inc.
 * released under MIT license
 *
 * build: Mon, 25 Oct 2021 21:01:31 +0000
 */
var lib=function(){"use strict";function o(e,t){o=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return o(e,t)}function n(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function p(e,t,r){if(n()){p=Reflect.construct}else{p=function e(t,r,n){var i=[null];i.push.apply(i,r);var u=Function.bind.apply(t,i);var a=new u;if(n)o(a,n.prototype);return a}}return p.apply(null,arguments)}function i(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)o(e,t)}function d(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){d=function e(t){return typeof t}}else{d=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return d(e)}function r(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function a(e,t){if(t&&(d(t)==="object"||typeof t==="function")){return t}return r(e)}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return s(e)}function u(e){if(Array.isArray(e))return e}function t(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function f(e,t){if(!e)return;if(typeof e==="string")return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e){return u(e)||t(e)||f(e)||l()}function v(e){if(Array.isArray(e))return c(e)}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e){return v(e)||t(e)||f(e)||_()}function m(e,t,r,n,i,u,a){try{var o=e[u](a);var s=o.value}catch(e){r(e);return}if(o.done){t(s)}else{Promise.resolve(s).then(n,i)}}function k(o){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=o.apply(e,a);function i(e){m(n,t,r,i,u,"next",e)}function u(e){m(n,t,r,i,u,"throw",e)}i(undefined)})}}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function e(e,t,r){if(t)g(e.prototype,t);if(r)g(e,r);return e}function q(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function b(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,u;for(u=0;u<n.length;u++){i=n[u];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function w(e,t){if(e==null)return{};var r=b(e,t);var n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++){n=u[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function D(e,t){var r=e&&(typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"]);if(r==null)return;var n=[];var i=true;var u=false;var a,o;try{for(r=r.call(e);!(i=(a=r.next()).done);i=true){n.push(a.value);if(t&&n.length===t)break}}catch(e){u=true;o=e}finally{try{if(!i&&r["return"]!=null)r["return"]()}finally{if(u)throw o}}return n}function F(e,t){return u(e)||D(e,t)||f(e,t)||l()}function E(e){var t;if(typeof Symbol!=="undefined"){if(Symbol.asyncIterator)t=e[Symbol.asyncIterator];if(t==null&&Symbol.iterator)t=e[Symbol.iterator]}if(t==null)t=e["@@asyncIterator"];if(t==null)t=e["@@iterator"];if(t==null)throw new TypeError("Object is not async iterable");return t.call(e)}function x(e){this.wrapped=e}function A(e){return new x(e)}function M(u){var a,o;function e(n,i){return new Promise(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};if(o){o=o.next=r}else{a=o=r;s(n,i)}})}function s(t,e){try{var r=u[t](e);var n=r.value;var i=n instanceof x;Promise.resolve(i?n.wrapped:n).then(function(e){if(i){s(t==="return"?"return":"next",e);return}c(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:true});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:false});break}a=a.next;if(a){s(a.key,a.arg)}else{o=null}}this._invoke=e;if(typeof u["return"]!=="function"){this["return"]=undefined}}M.prototype[typeof Symbol==="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this};M.prototype.next=function(e){return this._invoke("next",e)};M.prototype["throw"]=function(e){return this._invoke("throw",e)};M.prototype["return"]=function(e){return this._invoke("return",e)};function O(e){return function(){return new M(e.apply(this,arguments))}}var S=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var B={exports:{}};(function(e){var t=function(a){var e=Object.prototype;var f=e.hasOwnProperty;var s;var t=typeof Symbol==="function"?Symbol:{};var i=t.iterator||"@@iterator";var r=t.asyncIterator||"@@asyncIterator";var n=t.toStringTag||"@@toStringTag";function u(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});return e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function o(e,t,r,n){var i=t&&t.prototype instanceof c?t:c;var u=Object.create(i.prototype);var a=new k(n||[]);u._invoke=x(e,r,a);return u}a.wrap=o;function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var h="suspendedStart";var p="suspendedYield";var d="executing";var v="completed";var _={};function c(){}function m(){}function y(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf;var w=b&&b(b(O([])));if(w&&w!==e&&f.call(w,i)){g=w}var D=y.prototype=c.prototype=Object.create(g);m.prototype=D.constructor=y;y.constructor=m;m.displayName=u(y,n,"GeneratorFunction");function F(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}a.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===m||(t.displayName||t.name)==="GeneratorFunction":false};a.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,y)}else{e.__proto__=y;u(e,n,"GeneratorFunction")}e.prototype=Object.create(D);return e};a.awrap=function(e){return{__await:e}};function E(o,s){function c(e,t,r,n){var i=l(o[e],o,t);if(i.type==="throw"){n(i.arg)}else{var u=i.arg;var a=u.value;if(a&&typeof a==="object"&&f.call(a,"__await")){return s.resolve(a.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)})}return s.resolve(a).then(function(e){u.value=e;r(u)},function(e){return c("throw",e,r,n)})}}var t;function e(r,n){function e(){return new s(function(e,t){c(r,n,e,t)})}return t=t?t.then(e,e):e()}this._invoke=e}F(E.prototype);E.prototype[r]=function(){return this};a.AsyncIterator=E;a.async=function(e,t,r,n,i){if(i===void 0)i=Promise;var u=new E(o(e,t,r,n),i);return a.isGeneratorFunction(t)?u:u.next().then(function(e){return e.done?e.value:u.next()})};function x(a,o,s){var c=h;return function e(t,r){if(c===d){throw new Error("Generator is already running")}if(c===v){if(t==="throw"){throw r}return S()}s.method=t;s.arg=r;while(true){var n=s.delegate;if(n){var i=A(n,s);if(i){if(i===_)continue;return i}}if(s.method==="next"){s.sent=s._sent=s.arg}else if(s.method==="throw"){if(c===h){c=v;throw s.arg}s.dispatchException(s.arg)}else if(s.method==="return"){s.abrupt("return",s.arg)}c=d;var u=l(a,o,s);if(u.type==="normal"){c=s.done?v:p;if(u.arg===_){continue}return{value:u.arg,done:s.done}}else if(u.type==="throw"){c=v;s.method="throw";s.arg=u.arg}}}}function A(e,t){var r=e.iterator[t.method];if(r===s){t.delegate=null;if(t.method==="throw"){if(e.iterator["return"]){t.method="return";t.arg=s;A(e,t);if(t.method==="throw"){return _}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var n=l(r,e.iterator,t.arg);if(n.type==="throw"){t.method="throw";t.arg=n.arg;t.delegate=null;return _}var i=n.arg;if(!i){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return _}if(i.done){t[e.resultName]=i.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=s}}else{return i}t.delegate=null;return _}F(D);u(D,n,"Generator");D[i]=function(){return this};D.toString=function(){return"[object Generator]"};function M(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(M,this);this.reset(true)}a.keys=function(r){var n=[];for(var e in r){n.push(e)}n.reverse();return function e(){while(n.length){var t=n.pop();if(t in r){e.value=t;e.done=false;return e}}e.done=true;return e}};function O(t){if(t){var e=t[i];if(e){return e.call(t)}if(typeof t.next==="function"){return t}if(!isNaN(t.length)){var r=-1,n=function e(){while(++r<t.length){if(f.call(t,r)){e.value=t[r];e.done=false;return e}}e.value=s;e.done=true;return e};return n.next=n}}return{next:S}}a.values=O;function S(){return{value:s,done:true}}k.prototype={constructor:k,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=s;this.done=false;this.delegate=null;this.method="next";this.arg=s;this.tryEntries.forEach(C);if(!e){for(var t in this){if(t.charAt(0)==="t"&&f.call(this,t)&&!isNaN(+t.slice(1))){this[t]=s}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(r){if(this.done){throw r}var n=this;function e(e,t){u.type="throw";u.arg=r;n.next=e;if(t){n.method="next";n.arg=s}return!!t}for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];var u=i.completion;if(i.tryLoc==="root"){return e("end")}if(i.tryLoc<=this.prev){var a=f.call(i,"catchLoc");var o=f.call(i,"finallyLoc");if(a&&o){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}else if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else if(a){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}}else if(o){if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}if(i&&(e==="break"||e==="continue")&&i.tryLoc<=t&&t<=i.finallyLoc){i=null}var u=i?i.completion:{};u.type=e;u.arg=t;if(i){this.method="next";this.next=i.finallyLoc;return _}return this.complete(u)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return _},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);C(r);return _}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:O(e),resultName:t,nextLoc:r};if(this.method==="next"){this.arg=s}return _}};return a}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})(B);var j=B.exports;var I;if(Object.freeze){I=Object.freeze}else{I=function e(t){return t}}var N=I;Util.coerceOutputStream=function(e,t){var r={stream:e,retval:e};if(e){if(d(e)==="object"&&"writeByte"in e){return r}else if(typeof t==="number"){console.assert(t>=0);r.stream=new BufferStream(Util.makeU8Buffer(t),false)}else{r.stream=new BufferStream(e,false)}}else{r.stream=new BufferStream(Util.makeU8Buffer(16384),true)}Object.defineProperty(r,"retval",{get:r.stream.getBuffer.bind(r.stream)});return r};Util.compressFileHelper=function(o,s,c){return function(e,t,r){e=Util.coerceInputStream(e);var n=Util.coerceOutputStream(t,t);t=n.stream;var i;for(i=0;i<o.length;i++){t.writeByte(o.charCodeAt(i))}var u;if("size"in e&&e.size>=0){u=e.size}else{u=-1}if(c){var a=Util.coerceOutputStream([]);Util.writeUnsignedNumber(a.stream,u+1);a=a.retval;for(i=0;i<a.length-1;i++){t.writeByte(a[i])}c=a[a.length-1]}else{Util.writeUnsignedNumber(t,u+1)}s(e,t,u,r,c);return n.retval}};Util.decompressFileHelper=function(u,a){return function(e,t){e=Util.coerceInputStream(e);var r;for(r=0;r<u.length;r++){if(u.charCodeAt(r)!==e.readByte()){throw new Error("Bad magic")}}var n=Util.readUnsignedNumber(e)-1;var i=Util.coerceOutputStream(t,n);t=i.stream;a(e,t,n);return i.retval}};Util.compressWithModel=function(e,t,r){var n=0;while(n!==t){var i=e.readByte();if(i===EOF$2){r.encode(256);break}r.encode(i);n++}};Util.decompressWithModel=function(e,t,r){var n=0;while(n!==t){var i=r.decode();if(i===256){break}e.writeByte(i);n++}};Lzjb.compressFile=Util$1.compressFileHelper(Lzjb.MAGIC,function(t,r,e,n){var i,u,a,o,s,c,f;var l=LEMPEL_SIZE_BASE;var h=1;if(typeof n==="number"){l*=2;n=Math.max(1,Math.min(9,n))-1;h=1<<Math.floor(n/2);if(n&1)h=Math.round(h*1.5);if(n>=2&&n<=4)h++}c=Util$1.makeU16Buffer(l*h);var p=Util$1.makeU8Buffer(OFFSET_MASK+1);var d=0;var v=function e(t){p[d++]=t;if(d>=p.length){d=0}return t};var _=Util$1.makeU8Buffer(17);var m=0;var y=function e(){var t;for(t=0;t<m;t++){r.writeByte(_[t])}m=0};var g=[];var b=function e(){if(g.length)return g.pop();return t.readByte()};var w=function e(t){g.push(t)};var D=1<<NBBY-1;var F=[];while(true){var E=b();if(E===EOF$1)break;if((D<<=1)==1<<NBBY){y();D=1;_[0]=0;m=1}var x=b();if(x===EOF$1){_[m++]=v(E);break}var A=b();if(A===EOF$1){_[m++]=v(E);w(x);continue}o=(E<<16)+(x<<8)+A;o^=o>>9;o+=o>>5;o^=E;s=(o&l-1)*h;F.length=0;for(f=0;f<h;f++){a=d-c[s+f]&OFFSET_MASK;i=p.length+d-a;var M=p[i&OFFSET_MASK];var C=p[i+1&OFFSET_MASK];var k=p[i+2&OFFSET_MASK];if(a===0){M=E^1}else if(a==1){C=E;k=x}else if(a==2){k=E}if(E===M&&x===C&&A===k){F.push(a)}}for(f=h-1;f>0;f--){c[s+f]=c[s+f-1]}c[s]=d;if(F.length===0){_[m++]=v(E);w(A);w(x)}else{_[0]|=D;v(E);v(x);v(A);var O=b(),S=F[0];var B=p.length+d;for(u=MATCH_MIN;u<MATCH_MAX;u++,B++){if(O===EOF$1)break;for(f=0;f<F.length;){var j=p[B-F[f]&OFFSET_MASK];if(O!==j){S=F[f];F.splice(f,1)}else{f++}}if(F.length===0)break;v(O);O=b()}if(F.length!==0){S=F[0]}w(O);_[m++]=u-MATCH_MIN<<NBBY-MATCH_BITS|S>>NBBY;_[m++]=S&255}}y()});Lzjb.decompressFile=Util$1.decompressFileHelper(Lzjb.MAGIC,function(e,t,r){var n,i,u,a,o;var s=Util$1.makeU8Buffer(OFFSET_MASK+1);var c=0;var f=1<<NBBY-1;while(r!==0){o=e.readByte();if(o===EOF$1)break;if((f<<=1)==1<<NBBY){f=1;i=o;o=e.readByte()}if(i&f){u=(o>>NBBY-MATCH_BITS)+MATCH_MIN;a=(o<<NBBY|e.readByte())&OFFSET_MASK;n=c-a;if(n<0)n+=s.length;if(r>=0)r-=u;while(--u>=0){o=s[c++]=s[n++];t.writeByte(o);if(c>=s.length){c=0}if(n>=s.length){n=0}}}else{t.writeByte(o);s[c++]=o;if(c>=s.length){c=0}if(r>=0)r--}}});var P={exports:{}};(function(e){(function(e,t){function m(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function y(e,t,r){if(y.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=y}else{t.BN=y}y.BN=y;y.wordSize=26;var n;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){n=window.Buffer}else{n=require("buffer").Buffer}}catch(e){}y.isBN=function e(t){if(t instanceof y){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===y.wordSize&&Array.isArray(t.words)};y.max=function e(t,r){if(t.cmp(r)>0)return t;return r};y.min=function e(t,r){if(t.cmp(r)<0)return t;return r};y.prototype._init=function e(t,r,n){if(typeof t==="number"){return this._initNumber(t,r,n)}if(typeof t==="object"){return this._initArray(t,r,n)}if(r==="hex"){r=16}m(r===(r|0)&&r>=2&&r<=36);t=t.toString().replace(/\s+/g,"");var i=0;if(t[0]==="-"){i++;this.negative=1}if(i<t.length){if(r===16){this._parseHex(t,i,n)}else{this._parseBase(t,r,i);if(n==="le"){this._initArray(this.toArray(),r,n)}}}};y.prototype._initNumber=function e(t,r,n){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{m(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(n!=="le")return;this._initArray(this.toArray(),r,n)};y.prototype._initArray=function e(t,r,n){m(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var u,a;var o=0;if(n==="be"){for(i=t.length-1,u=0;i>=0;i-=3){a=t[i]|t[i-1]<<8|t[i-2]<<16;this.words[u]|=a<<o&67108863;this.words[u+1]=a>>>26-o&67108863;o+=24;if(o>=26){o-=26;u++}}}else if(n==="le"){for(i=0,u=0;i<t.length;i+=3){a=t[i]|t[i+1]<<8|t[i+2]<<16;this.words[u]|=a<<o&67108863;this.words[u+1]=a>>>26-o&67108863;o+=24;if(o>=26){o-=26;u++}}}return this._strip()};function i(e,t){var r=e.charCodeAt(t);if(r>=48&&r<=57){return r-48}else if(r>=65&&r<=70){return r-55}else if(r>=97&&r<=102){return r-87}else{m(false,"Invalid character in "+e)}}function c(e,t,r){var n=i(e,r);if(r-1>=t){n|=i(e,r-1)<<4}return n}y.prototype._parseHex=function e(t,r,n){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var u=0;var a=0;var o;if(n==="be"){for(i=t.length-1;i>=r;i-=2){o=c(t,r,i)<<u;this.words[a]|=o&67108863;if(u>=18){u-=18;a+=1;this.words[a]|=o>>>26}else{u+=8}}}else{var s=t.length-r;for(i=s%2===0?r+1:r;i<t.length;i+=2){o=c(t,r,i)<<u;this.words[a]|=o&67108863;if(u>=18){u-=18;a+=1;this.words[a]|=o>>>26}else{u+=8}}}this._strip()};function h(e,t,r,n){var i=0;var u=0;var a=Math.min(e.length,r);for(var o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=n;if(s>=49){u=s-49+10}else if(s>=17){u=s-17+10}else{u=s}m(s>=0&&u<n,"Invalid character");i+=u}return i}y.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var i=0,u=1;u<=67108863;u*=r){i++}i--;u=u/r|0;var a=t.length-n;var o=a%i;var s=Math.min(a,a-o)+n;var c=0;for(var f=n;f<s;f+=i){c=h(t,f,f+i,r);this.imuln(u);if(this.words[0]+c<67108864){this.words[0]+=c}else{this._iaddn(c)}}if(o!==0){var l=1;c=h(t,f,t.length,r);for(f=0;f<o;f++){l*=r}this.imuln(l);if(this.words[0]+c<67108864){this.words[0]+=c}else{this._iaddn(c)}}this._strip()};y.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};function u(e,t){e.words=t.words;e.length=t.length;e.negative=t.negative;e.red=t.red}y.prototype._move=function e(t){u(t,this)};y.prototype.clone=function e(){var t=new y(null);this.copy(t);return t};y.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};y.prototype._strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};y.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};if(typeof Symbol!=="undefined"&&typeof Symbol.for==="function"){try{y.prototype[Symbol.for("nodejs.util.inspect.custom")]=a}catch(e){y.prototype.inspect=a}}else{y.prototype.inspect=a}function a(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];y.prototype.toString=function e(t,r){t=t||10;r=r|0||1;var n;if(t===16||t==="hex"){n="";var i=0;var u=0;for(var a=0;a<this.length;a++){var o=this.words[a];var s=((o<<i|u)&16777215).toString(16);u=o>>>24-i&16777215;if(u!==0||a!==this.length-1){n=p[6-s.length]+s+n}else{n=s+n}i+=2;if(i>=26){i-=26;a--}}if(u!==0){n=u.toString(16)+n}while(n.length%r!==0){n="0"+n}if(this.negative!==0){n="-"+n}return n}if(t===(t|0)&&t>=2&&t<=36){var c=d[t];var f=v[t];n="";var l=this.clone();l.negative=0;while(!l.isZero()){var h=l.modrn(f).toString(t);l=l.idivn(f);if(!l.isZero()){n=p[c-h.length]+h+n}else{n=h+n}}if(this.isZero()){n="0"+n}while(n.length%r!==0){n="0"+n}if(this.negative!==0){n="-"+n}return n}m(false,"Base should be between 2 and 36")};y.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){m(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};y.prototype.toJSON=function e(){return this.toString(16,2)};if(n){y.prototype.toBuffer=function e(t,r){return this.toArrayLike(n,t,r)}}y.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};var s=function e(t,r){if(t.allocUnsafe){return t.allocUnsafe(r)}return new t(r)};y.prototype.toArrayLike=function e(t,r,n){this._strip();var i=this.byteLength();var u=n||Math.max(1,i);m(i<=u,"byte array longer than desired length");m(u>0,"Requested array length <= 0");var a=s(t,u);var o=r==="le"?"LE":"BE";this["_toArrayLike"+o](a,i);return a};y.prototype._toArrayLikeLE=function e(t,r){var n=0;var i=0;for(var u=0,a=0;u<this.length;u++){var o=this.words[u]<<a|i;t[n++]=o&255;if(n<t.length){t[n++]=o>>8&255}if(n<t.length){t[n++]=o>>16&255}if(a===6){if(n<t.length){t[n++]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n<t.length){t[n++]=i;while(n<t.length){t[n++]=0}}};y.prototype._toArrayLikeBE=function e(t,r){var n=t.length-1;var i=0;for(var u=0,a=0;u<this.length;u++){var o=this.words[u]<<a|i;t[n--]=o&255;if(n>=0){t[n--]=o>>8&255}if(n>=0){t[n--]=o>>16&255}if(a===6){if(n>=0){t[n--]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n>=0){t[n--]=i;while(n>=0){t[n--]=0}}};if(Math.clz32){y.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{y.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}y.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};y.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function o(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var i=r%26;t[r]=e.words[n]>>>i&1}return t}y.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};y.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};y.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};y.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};y.prototype.isNeg=function e(){return this.negative!==0};y.prototype.neg=function e(){return this.clone().ineg()};y.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};y.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this._strip()};y.prototype.ior=function e(t){m((this.negative|t.negative)===0);return this.iuor(t)};y.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};y.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};y.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this._strip()};y.prototype.iand=function e(t){m((this.negative|t.negative)===0);return this.iuand(t)};y.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};y.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};y.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this._strip()};y.prototype.ixor=function e(t){m((this.negative|t.negative)===0);return this.iuxor(t)};y.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};y.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};y.prototype.inotn=function e(t){m(typeof t==="number"&&t>=0);var r=Math.ceil(t/26)|0;var n=t%26;this._expand(r);if(n>0){r--}for(var i=0;i<r;i++){this.words[i]=~this.words[i]&67108863}if(n>0){this.words[i]=~this.words[i]&67108863>>26-n}return this._strip()};y.prototype.notn=function e(t){return this.clone().inotn(t)};y.prototype.setn=function e(t,r){m(typeof t==="number"&&t>=0);var n=t/26|0;var i=t%26;this._expand(n+1);if(r){this.words[n]=this.words[n]|1<<i}else{this.words[n]=this.words[n]&~(1<<i)}return this._strip()};y.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,i;if(this.length>t.length){n=this;i=t}else{n=t;i=this}var u=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+u;this.words[a]=r&67108863;u=r>>>26}for(;u!==0&&a<n.length;a++){r=(n.words[a]|0)+u;this.words[a]=r&67108863;u=r>>>26}this.length=n.length;if(u!==0){this.words[this.length]=u;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};y.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};y.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,u;if(n>0){i=this;u=t}else{i=t;u=this}var a=0;for(var o=0;o<u.length;o++){r=(i.words[o]|0)-(u.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this._strip()};y.prototype.sub=function e(t){return this.clone().isub(t)};function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var i=e.words[0]|0;var u=t.words[0]|0;var a=i*u;var o=a&67108863;var s=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var f=s>>>26;var l=s&67108863;var h=Math.min(c,t.length-1);for(var p=Math.max(0,c-e.length+1);p<=h;p++){var d=c-p|0;i=e.words[d]|0;u=t.words[p]|0;a=i*u+l;f+=a/67108864|0;l=a&67108863}r.words[c]=l|0;s=f|0}if(s!==0){r.words[c]=s|0}else{r.length--}return r._strip()}var l=function e(t,r,n){var i=t.words;var u=r.words;var a=n.words;var o=0;var s;var c;var f;var l=i[0]|0;var h=l&8191;var p=l>>>13;var d=i[1]|0;var v=d&8191;var _=d>>>13;var m=i[2]|0;var y=m&8191;var g=m>>>13;var b=i[3]|0;var w=b&8191;var D=b>>>13;var F=i[4]|0;var E=F&8191;var x=F>>>13;var A=i[5]|0;var M=A&8191;var C=A>>>13;var k=i[6]|0;var O=k&8191;var S=k>>>13;var B=i[7]|0;var j=B&8191;var I=B>>>13;var N=i[8]|0;var P=N&8191;var L=N>>>13;var q=i[9]|0;var R=q&8191;var T=q>>>13;var U=u[0]|0;var $=U&8191;var z=U>>>13;var V=u[1]|0;var Y=V&8191;var Z=V>>>13;var H=u[2]|0;var J=H&8191;var G=H>>>13;var W=u[3]|0;var K=W&8191;var Q=W>>>13;var X=u[4]|0;var ee=X&8191;var te=X>>>13;var re=u[5]|0;var ne=re&8191;var ie=re>>>13;var ue=u[6]|0;var ae=ue&8191;var oe=ue>>>13;var se=u[7]|0;var ce=se&8191;var fe=se>>>13;var le=u[8]|0;var he=le&8191;var pe=le>>>13;var de=u[9]|0;var ve=de&8191;var _e=de>>>13;n.negative=t.negative^r.negative;n.length=19;s=Math.imul(h,$);c=Math.imul(h,z);c=c+Math.imul(p,$)|0;f=Math.imul(p,z);var me=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(me>>>26)|0;me&=67108863;s=Math.imul(v,$);c=Math.imul(v,z);c=c+Math.imul(_,$)|0;f=Math.imul(_,z);s=s+Math.imul(h,Y)|0;c=c+Math.imul(h,Z)|0;c=c+Math.imul(p,Y)|0;f=f+Math.imul(p,Z)|0;var ye=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(ye>>>26)|0;ye&=67108863;s=Math.imul(y,$);c=Math.imul(y,z);c=c+Math.imul(g,$)|0;f=Math.imul(g,z);s=s+Math.imul(v,Y)|0;c=c+Math.imul(v,Z)|0;c=c+Math.imul(_,Y)|0;f=f+Math.imul(_,Z)|0;s=s+Math.imul(h,J)|0;c=c+Math.imul(h,G)|0;c=c+Math.imul(p,J)|0;f=f+Math.imul(p,G)|0;var ge=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;s=Math.imul(w,$);c=Math.imul(w,z);c=c+Math.imul(D,$)|0;f=Math.imul(D,z);s=s+Math.imul(y,Y)|0;c=c+Math.imul(y,Z)|0;c=c+Math.imul(g,Y)|0;f=f+Math.imul(g,Z)|0;s=s+Math.imul(v,J)|0;c=c+Math.imul(v,G)|0;c=c+Math.imul(_,J)|0;f=f+Math.imul(_,G)|0;s=s+Math.imul(h,K)|0;c=c+Math.imul(h,Q)|0;c=c+Math.imul(p,K)|0;f=f+Math.imul(p,Q)|0;var be=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(be>>>26)|0;be&=67108863;s=Math.imul(E,$);c=Math.imul(E,z);c=c+Math.imul(x,$)|0;f=Math.imul(x,z);s=s+Math.imul(w,Y)|0;c=c+Math.imul(w,Z)|0;c=c+Math.imul(D,Y)|0;f=f+Math.imul(D,Z)|0;s=s+Math.imul(y,J)|0;c=c+Math.imul(y,G)|0;c=c+Math.imul(g,J)|0;f=f+Math.imul(g,G)|0;s=s+Math.imul(v,K)|0;c=c+Math.imul(v,Q)|0;c=c+Math.imul(_,K)|0;f=f+Math.imul(_,Q)|0;s=s+Math.imul(h,ee)|0;c=c+Math.imul(h,te)|0;c=c+Math.imul(p,ee)|0;f=f+Math.imul(p,te)|0;var we=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(we>>>26)|0;we&=67108863;s=Math.imul(M,$);c=Math.imul(M,z);c=c+Math.imul(C,$)|0;f=Math.imul(C,z);s=s+Math.imul(E,Y)|0;c=c+Math.imul(E,Z)|0;c=c+Math.imul(x,Y)|0;f=f+Math.imul(x,Z)|0;s=s+Math.imul(w,J)|0;c=c+Math.imul(w,G)|0;c=c+Math.imul(D,J)|0;f=f+Math.imul(D,G)|0;s=s+Math.imul(y,K)|0;c=c+Math.imul(y,Q)|0;c=c+Math.imul(g,K)|0;f=f+Math.imul(g,Q)|0;s=s+Math.imul(v,ee)|0;c=c+Math.imul(v,te)|0;c=c+Math.imul(_,ee)|0;f=f+Math.imul(_,te)|0;s=s+Math.imul(h,ne)|0;c=c+Math.imul(h,ie)|0;c=c+Math.imul(p,ne)|0;f=f+Math.imul(p,ie)|0;var De=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(De>>>26)|0;De&=67108863;s=Math.imul(O,$);c=Math.imul(O,z);c=c+Math.imul(S,$)|0;f=Math.imul(S,z);s=s+Math.imul(M,Y)|0;c=c+Math.imul(M,Z)|0;c=c+Math.imul(C,Y)|0;f=f+Math.imul(C,Z)|0;s=s+Math.imul(E,J)|0;c=c+Math.imul(E,G)|0;c=c+Math.imul(x,J)|0;f=f+Math.imul(x,G)|0;s=s+Math.imul(w,K)|0;c=c+Math.imul(w,Q)|0;c=c+Math.imul(D,K)|0;f=f+Math.imul(D,Q)|0;s=s+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(g,ee)|0;f=f+Math.imul(g,te)|0;s=s+Math.imul(v,ne)|0;c=c+Math.imul(v,ie)|0;c=c+Math.imul(_,ne)|0;f=f+Math.imul(_,ie)|0;s=s+Math.imul(h,ae)|0;c=c+Math.imul(h,oe)|0;c=c+Math.imul(p,ae)|0;f=f+Math.imul(p,oe)|0;var Fe=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Fe>>>26)|0;Fe&=67108863;s=Math.imul(j,$);c=Math.imul(j,z);c=c+Math.imul(I,$)|0;f=Math.imul(I,z);s=s+Math.imul(O,Y)|0;c=c+Math.imul(O,Z)|0;c=c+Math.imul(S,Y)|0;f=f+Math.imul(S,Z)|0;s=s+Math.imul(M,J)|0;c=c+Math.imul(M,G)|0;c=c+Math.imul(C,J)|0;f=f+Math.imul(C,G)|0;s=s+Math.imul(E,K)|0;c=c+Math.imul(E,Q)|0;c=c+Math.imul(x,K)|0;f=f+Math.imul(x,Q)|0;s=s+Math.imul(w,ee)|0;c=c+Math.imul(w,te)|0;c=c+Math.imul(D,ee)|0;f=f+Math.imul(D,te)|0;s=s+Math.imul(y,ne)|0;c=c+Math.imul(y,ie)|0;c=c+Math.imul(g,ne)|0;f=f+Math.imul(g,ie)|0;s=s+Math.imul(v,ae)|0;c=c+Math.imul(v,oe)|0;c=c+Math.imul(_,ae)|0;f=f+Math.imul(_,oe)|0;s=s+Math.imul(h,ce)|0;c=c+Math.imul(h,fe)|0;c=c+Math.imul(p,ce)|0;f=f+Math.imul(p,fe)|0;var Ee=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;s=Math.imul(P,$);c=Math.imul(P,z);c=c+Math.imul(L,$)|0;f=Math.imul(L,z);s=s+Math.imul(j,Y)|0;c=c+Math.imul(j,Z)|0;c=c+Math.imul(I,Y)|0;f=f+Math.imul(I,Z)|0;s=s+Math.imul(O,J)|0;c=c+Math.imul(O,G)|0;c=c+Math.imul(S,J)|0;f=f+Math.imul(S,G)|0;s=s+Math.imul(M,K)|0;c=c+Math.imul(M,Q)|0;c=c+Math.imul(C,K)|0;f=f+Math.imul(C,Q)|0;s=s+Math.imul(E,ee)|0;c=c+Math.imul(E,te)|0;c=c+Math.imul(x,ee)|0;f=f+Math.imul(x,te)|0;s=s+Math.imul(w,ne)|0;c=c+Math.imul(w,ie)|0;c=c+Math.imul(D,ne)|0;f=f+Math.imul(D,ie)|0;s=s+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(g,ae)|0;f=f+Math.imul(g,oe)|0;s=s+Math.imul(v,ce)|0;c=c+Math.imul(v,fe)|0;c=c+Math.imul(_,ce)|0;f=f+Math.imul(_,fe)|0;s=s+Math.imul(h,he)|0;c=c+Math.imul(h,pe)|0;c=c+Math.imul(p,he)|0;f=f+Math.imul(p,pe)|0;var xe=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;s=Math.imul(R,$);c=Math.imul(R,z);c=c+Math.imul(T,$)|0;f=Math.imul(T,z);s=s+Math.imul(P,Y)|0;c=c+Math.imul(P,Z)|0;c=c+Math.imul(L,Y)|0;f=f+Math.imul(L,Z)|0;s=s+Math.imul(j,J)|0;c=c+Math.imul(j,G)|0;c=c+Math.imul(I,J)|0;f=f+Math.imul(I,G)|0;s=s+Math.imul(O,K)|0;c=c+Math.imul(O,Q)|0;c=c+Math.imul(S,K)|0;f=f+Math.imul(S,Q)|0;s=s+Math.imul(M,ee)|0;c=c+Math.imul(M,te)|0;c=c+Math.imul(C,ee)|0;f=f+Math.imul(C,te)|0;s=s+Math.imul(E,ne)|0;c=c+Math.imul(E,ie)|0;c=c+Math.imul(x,ne)|0;f=f+Math.imul(x,ie)|0;s=s+Math.imul(w,ae)|0;c=c+Math.imul(w,oe)|0;c=c+Math.imul(D,ae)|0;f=f+Math.imul(D,oe)|0;s=s+Math.imul(y,ce)|0;c=c+Math.imul(y,fe)|0;c=c+Math.imul(g,ce)|0;f=f+Math.imul(g,fe)|0;s=s+Math.imul(v,he)|0;c=c+Math.imul(v,pe)|0;c=c+Math.imul(_,he)|0;f=f+Math.imul(_,pe)|0;s=s+Math.imul(h,ve)|0;c=c+Math.imul(h,_e)|0;c=c+Math.imul(p,ve)|0;f=f+Math.imul(p,_e)|0;var Ae=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;s=Math.imul(R,Y);c=Math.imul(R,Z);c=c+Math.imul(T,Y)|0;f=Math.imul(T,Z);s=s+Math.imul(P,J)|0;c=c+Math.imul(P,G)|0;c=c+Math.imul(L,J)|0;f=f+Math.imul(L,G)|0;s=s+Math.imul(j,K)|0;c=c+Math.imul(j,Q)|0;c=c+Math.imul(I,K)|0;f=f+Math.imul(I,Q)|0;s=s+Math.imul(O,ee)|0;c=c+Math.imul(O,te)|0;c=c+Math.imul(S,ee)|0;f=f+Math.imul(S,te)|0;s=s+Math.imul(M,ne)|0;c=c+Math.imul(M,ie)|0;c=c+Math.imul(C,ne)|0;f=f+Math.imul(C,ie)|0;s=s+Math.imul(E,ae)|0;c=c+Math.imul(E,oe)|0;c=c+Math.imul(x,ae)|0;f=f+Math.imul(x,oe)|0;s=s+Math.imul(w,ce)|0;c=c+Math.imul(w,fe)|0;c=c+Math.imul(D,ce)|0;f=f+Math.imul(D,fe)|0;s=s+Math.imul(y,he)|0;c=c+Math.imul(y,pe)|0;c=c+Math.imul(g,he)|0;f=f+Math.imul(g,pe)|0;s=s+Math.imul(v,ve)|0;c=c+Math.imul(v,_e)|0;c=c+Math.imul(_,ve)|0;f=f+Math.imul(_,_e)|0;var Me=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Me>>>26)|0;Me&=67108863;s=Math.imul(R,J);c=Math.imul(R,G);c=c+Math.imul(T,J)|0;f=Math.imul(T,G);s=s+Math.imul(P,K)|0;c=c+Math.imul(P,Q)|0;c=c+Math.imul(L,K)|0;f=f+Math.imul(L,Q)|0;s=s+Math.imul(j,ee)|0;c=c+Math.imul(j,te)|0;c=c+Math.imul(I,ee)|0;f=f+Math.imul(I,te)|0;s=s+Math.imul(O,ne)|0;c=c+Math.imul(O,ie)|0;c=c+Math.imul(S,ne)|0;f=f+Math.imul(S,ie)|0;s=s+Math.imul(M,ae)|0;c=c+Math.imul(M,oe)|0;c=c+Math.imul(C,ae)|0;f=f+Math.imul(C,oe)|0;s=s+Math.imul(E,ce)|0;c=c+Math.imul(E,fe)|0;c=c+Math.imul(x,ce)|0;f=f+Math.imul(x,fe)|0;s=s+Math.imul(w,he)|0;c=c+Math.imul(w,pe)|0;c=c+Math.imul(D,he)|0;f=f+Math.imul(D,pe)|0;s=s+Math.imul(y,ve)|0;c=c+Math.imul(y,_e)|0;c=c+Math.imul(g,ve)|0;f=f+Math.imul(g,_e)|0;var Ce=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;s=Math.imul(R,K);c=Math.imul(R,Q);c=c+Math.imul(T,K)|0;f=Math.imul(T,Q);s=s+Math.imul(P,ee)|0;c=c+Math.imul(P,te)|0;c=c+Math.imul(L,ee)|0;f=f+Math.imul(L,te)|0;s=s+Math.imul(j,ne)|0;c=c+Math.imul(j,ie)|0;c=c+Math.imul(I,ne)|0;f=f+Math.imul(I,ie)|0;s=s+Math.imul(O,ae)|0;c=c+Math.imul(O,oe)|0;c=c+Math.imul(S,ae)|0;f=f+Math.imul(S,oe)|0;s=s+Math.imul(M,ce)|0;c=c+Math.imul(M,fe)|0;c=c+Math.imul(C,ce)|0;f=f+Math.imul(C,fe)|0;s=s+Math.imul(E,he)|0;c=c+Math.imul(E,pe)|0;c=c+Math.imul(x,he)|0;f=f+Math.imul(x,pe)|0;s=s+Math.imul(w,ve)|0;c=c+Math.imul(w,_e)|0;c=c+Math.imul(D,ve)|0;f=f+Math.imul(D,_e)|0;var ke=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;s=Math.imul(R,ee);c=Math.imul(R,te);c=c+Math.imul(T,ee)|0;f=Math.imul(T,te);s=s+Math.imul(P,ne)|0;c=c+Math.imul(P,ie)|0;c=c+Math.imul(L,ne)|0;f=f+Math.imul(L,ie)|0;s=s+Math.imul(j,ae)|0;c=c+Math.imul(j,oe)|0;c=c+Math.imul(I,ae)|0;f=f+Math.imul(I,oe)|0;s=s+Math.imul(O,ce)|0;c=c+Math.imul(O,fe)|0;c=c+Math.imul(S,ce)|0;f=f+Math.imul(S,fe)|0;s=s+Math.imul(M,he)|0;c=c+Math.imul(M,pe)|0;c=c+Math.imul(C,he)|0;f=f+Math.imul(C,pe)|0;s=s+Math.imul(E,ve)|0;c=c+Math.imul(E,_e)|0;c=c+Math.imul(x,ve)|0;f=f+Math.imul(x,_e)|0;var Oe=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;s=Math.imul(R,ne);c=Math.imul(R,ie);c=c+Math.imul(T,ne)|0;f=Math.imul(T,ie);s=s+Math.imul(P,ae)|0;c=c+Math.imul(P,oe)|0;c=c+Math.imul(L,ae)|0;f=f+Math.imul(L,oe)|0;s=s+Math.imul(j,ce)|0;c=c+Math.imul(j,fe)|0;c=c+Math.imul(I,ce)|0;f=f+Math.imul(I,fe)|0;s=s+Math.imul(O,he)|0;c=c+Math.imul(O,pe)|0;c=c+Math.imul(S,he)|0;f=f+Math.imul(S,pe)|0;s=s+Math.imul(M,ve)|0;c=c+Math.imul(M,_e)|0;c=c+Math.imul(C,ve)|0;f=f+Math.imul(C,_e)|0;var Se=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;s=Math.imul(R,ae);c=Math.imul(R,oe);c=c+Math.imul(T,ae)|0;f=Math.imul(T,oe);s=s+Math.imul(P,ce)|0;c=c+Math.imul(P,fe)|0;c=c+Math.imul(L,ce)|0;f=f+Math.imul(L,fe)|0;s=s+Math.imul(j,he)|0;c=c+Math.imul(j,pe)|0;c=c+Math.imul(I,he)|0;f=f+Math.imul(I,pe)|0;s=s+Math.imul(O,ve)|0;c=c+Math.imul(O,_e)|0;c=c+Math.imul(S,ve)|0;f=f+Math.imul(S,_e)|0;var Be=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Be>>>26)|0;Be&=67108863;s=Math.imul(R,ce);c=Math.imul(R,fe);c=c+Math.imul(T,ce)|0;f=Math.imul(T,fe);s=s+Math.imul(P,he)|0;c=c+Math.imul(P,pe)|0;c=c+Math.imul(L,he)|0;f=f+Math.imul(L,pe)|0;s=s+Math.imul(j,ve)|0;c=c+Math.imul(j,_e)|0;c=c+Math.imul(I,ve)|0;f=f+Math.imul(I,_e)|0;var je=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(je>>>26)|0;je&=67108863;s=Math.imul(R,he);c=Math.imul(R,pe);c=c+Math.imul(T,he)|0;f=Math.imul(T,pe);s=s+Math.imul(P,ve)|0;c=c+Math.imul(P,_e)|0;c=c+Math.imul(L,ve)|0;f=f+Math.imul(L,_e)|0;var Ie=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;s=Math.imul(R,ve);c=Math.imul(R,_e);c=c+Math.imul(T,ve)|0;f=Math.imul(T,_e);var Ne=(o+s|0)+((c&8191)<<13)|0;o=(f+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;a[0]=me;a[1]=ye;a[2]=ge;a[3]=be;a[4]=we;a[5]=De;a[6]=Fe;a[7]=Ee;a[8]=xe;a[9]=Ae;a[10]=Me;a[11]=Ce;a[12]=ke;a[13]=Oe;a[14]=Se;a[15]=Be;a[16]=je;a[17]=Ie;a[18]=Ne;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){l=f}function _(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var i=0;for(var u=0;u<r.length-1;u++){var a=i;i=0;var o=n&67108863;var s=Math.min(u,t.length-1);for(var c=Math.max(0,u-e.length+1);c<=s;c++){var f=u-c;var l=e.words[f]|0;var h=t.words[c]|0;var p=l*h;var d=p&67108863;a=a+(p/67108864|0)|0;d=d+o|0;o=d&67108863;a=a+(d>>>26)|0;i+=a>>>26;a&=67108863}r.words[u]=o;n=a;a=i}if(n!==0){r.words[u]=n}else{r.length--}return r._strip()}function g(e,t,r){return _(e,t,r)}y.prototype.mulTo=function e(t,r){var n;var i=this.length+t.length;if(this.length===10&&t.length===10){n=l(this,t,r)}else if(i<63){n=f(this,t,r)}else if(i<1024){n=_(this,t,r)}else{n=g(this,t,r)}return n};y.prototype.mul=function e(t){var r=new y(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};y.prototype.mulf=function e(t){var r=new y(null);r.words=new Array(this.length+t.length);return g(this,t,r)};y.prototype.imul=function e(t){return this.clone().mulTo(t,this)};y.prototype.imuln=function e(t){var r=t<0;if(r)t=-t;m(typeof t==="number");m(t<67108864);var n=0;for(var i=0;i<this.length;i++){var u=(this.words[i]|0)*t;var a=(u&67108863)+(n&67108863);n>>=26;n+=u/67108864|0;n+=a>>>26;this.words[i]=a&67108863}if(n!==0){this.words[i]=n;this.length++}return r?this.ineg():this};y.prototype.muln=function e(t){return this.clone().imuln(t)};y.prototype.sqr=function e(){return this.mul(this)};y.prototype.isqr=function e(){return this.imul(this.clone())};y.prototype.pow=function e(t){var r=o(t);if(r.length===0)return new y(1);var n=this;for(var i=0;i<r.length;i++,n=n.sqr()){if(r[i]!==0)break}if(++i<r.length){for(var u=n.sqr();i<r.length;i++,u=u.sqr()){if(r[i]===0)continue;n=n.mul(u)}}return n};y.prototype.iushln=function e(t){m(typeof t==="number"&&t>=0);var r=t%26;var n=(t-r)/26;var i=67108863>>>26-r<<26-r;var u;if(r!==0){var a=0;for(u=0;u<this.length;u++){var o=this.words[u]&i;var s=(this.words[u]|0)-o<<r;this.words[u]=s|a;a=o>>>26-r}if(a){this.words[u]=a;this.length++}}if(n!==0){for(u=this.length-1;u>=0;u--){this.words[u+n]=this.words[u]}for(u=0;u<n;u++){this.words[u]=0}this.length+=n}return this._strip()};y.prototype.ishln=function e(t){m(this.negative===0);return this.iushln(t)};y.prototype.iushrn=function e(t,r,n){m(typeof t==="number"&&t>=0);var i;if(r){i=(r-r%26)/26}else{i=0}var u=t%26;var a=Math.min((t-u)/26,this.length);var o=67108863^67108863>>>u<<u;var s=n;i-=a;i=Math.max(0,i);if(s){for(var c=0;c<a;c++){s.words[c]=this.words[c]}s.length=a}if(a===0);else if(this.length>a){this.length-=a;for(c=0;c<this.length;c++){this.words[c]=this.words[c+a]}}else{this.words[0]=0;this.length=1}var f=0;for(c=this.length-1;c>=0&&(f!==0||c>=i);c--){var l=this.words[c]|0;this.words[c]=f<<26-u|l>>>u;f=l&o}if(s&&f!==0){s.words[s.length++]=f}if(this.length===0){this.words[0]=0;this.length=1}return this._strip()};y.prototype.ishrn=function e(t,r,n){m(this.negative===0);return this.iushrn(t,r,n)};y.prototype.shln=function e(t){return this.clone().ishln(t)};y.prototype.ushln=function e(t){return this.clone().iushln(t)};y.prototype.shrn=function e(t){return this.clone().ishrn(t)};y.prototype.ushrn=function e(t){return this.clone().iushrn(t)};y.prototype.testn=function e(t){m(typeof t==="number"&&t>=0);var r=t%26;var n=(t-r)/26;var i=1<<r;if(this.length<=n)return false;var u=this.words[n];return!!(u&i)};y.prototype.imaskn=function e(t){m(typeof t==="number"&&t>=0);var r=t%26;var n=(t-r)/26;m(this.negative===0,"imaskn works only with positive numbers");if(this.length<=n){return this}if(r!==0){n++}this.length=Math.min(n,this.length);if(r!==0){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this._strip()};y.prototype.maskn=function e(t){return this.clone().imaskn(t)};y.prototype.iaddn=function e(t){m(typeof t==="number");m(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};y.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};y.prototype.isubn=function e(t){m(typeof t==="number");m(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var r=0;r<this.length&&this.words[r]<0;r++){this.words[r]+=67108864;this.words[r+1]-=1}}return this._strip()};y.prototype.addn=function e(t){return this.clone().iaddn(t)};y.prototype.subn=function e(t){return this.clone().isubn(t)};y.prototype.iabs=function e(){this.negative=0;return this};y.prototype.abs=function e(){return this.clone().iabs()};y.prototype._ishlnsubmul=function e(t,r,n){var i=t.length+n;var u;this._expand(i);var a;var o=0;for(u=0;u<t.length;u++){a=(this.words[u+n]|0)+o;var s=(t.words[u]|0)*r;a-=s&67108863;o=(a>>26)-(s/67108864|0);this.words[u+n]=a&67108863}for(;u<this.length-n;u++){a=(this.words[u+n]|0)+o;o=a>>26;this.words[u+n]=a&67108863}if(o===0)return this._strip();m(o===-1);o=0;for(u=0;u<this.length;u++){a=-(this.words[u]|0)+o;o=a>>26;this.words[u]=a&67108863}this.negative=1;return this._strip()};y.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var i=this.clone();var u=t;var a=u.words[u.length-1]|0;var o=this._countBits(a);n=26-o;if(n!==0){u=u.ushln(n);i.iushln(n);a=u.words[u.length-1]|0}var s=i.length-u.length;var c;if(r!=="mod"){c=new y(null);c.length=s+1;c.words=new Array(c.length);for(var f=0;f<c.length;f++){c.words[f]=0}}var l=i.clone()._ishlnsubmul(u,1,s);if(l.negative===0){i=l;if(c){c.words[s]=1}}for(var h=s-1;h>=0;h--){var p=(i.words[u.length+h]|0)*67108864+(i.words[u.length+h-1]|0);p=Math.min(p/a|0,67108863);i._ishlnsubmul(u,p,h);while(i.negative!==0){p--;i.negative=0;i._ishlnsubmul(u,1,h);if(!i.isZero()){i.negative^=1}}if(c){c.words[h]=p}}if(c){c._strip()}i._strip();if(r!=="div"&&n!==0){i.iushrn(n)}return{div:c||null,mod:i}};y.prototype.divmod=function e(t,r,n){m(!t.isZero());if(this.isZero()){return{div:new y(0),mod:new y(0)}}var i,u,a;if(this.negative!==0&&t.negative===0){a=this.neg().divmod(t,r);if(r!=="mod"){i=a.div.neg()}if(r!=="div"){u=a.mod.neg();if(n&&u.negative!==0){u.iadd(t)}}return{div:i,mod:u}}if(this.negative===0&&t.negative!==0){a=this.divmod(t.neg(),r);if(r!=="mod"){i=a.div.neg()}return{div:i,mod:a.mod}}if((this.negative&t.negative)!==0){a=this.neg().divmod(t.neg(),r);if(r!=="div"){u=a.mod.neg();if(n&&u.negative!==0){u.isub(t)}}return{div:a.div,mod:u}}if(t.length>this.length||this.cmp(t)<0){return{div:new y(0),mod:this}}if(t.length===1){if(r==="div"){return{div:this.divn(t.words[0]),mod:null}}if(r==="mod"){return{div:null,mod:new y(this.modrn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new y(this.modrn(t.words[0]))}}return this._wordDiv(t,r)};y.prototype.div=function e(t){return this.divmod(t,"div",false).div};y.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};y.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};y.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var i=t.ushrn(1);var u=t.andln(1);var a=n.cmp(i);if(a<0||u===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};y.prototype.modrn=function e(t){var r=t<0;if(r)t=-t;m(t<=67108863);var n=(1<<26)%t;var i=0;for(var u=this.length-1;u>=0;u--){i=(n*i+(this.words[u]|0))%t}return r?-i:i};y.prototype.modn=function e(t){return this.modrn(t)};y.prototype.idivn=function e(t){var r=t<0;if(r)t=-t;m(t<=67108863);var n=0;for(var i=this.length-1;i>=0;i--){var u=(this.words[i]|0)+n*67108864;this.words[i]=u/t|0;n=u%t}this._strip();return r?this.ineg():this};y.prototype.divn=function e(t){return this.clone().idivn(t)};y.prototype.egcd=function e(t){m(t.negative===0);m(!t.isZero());var r=this;var n=t.clone();if(r.negative!==0){r=r.umod(t)}else{r=r.clone()}var i=new y(1);var u=new y(0);var a=new y(0);var o=new y(1);var s=0;while(r.isEven()&&n.isEven()){r.iushrn(1);n.iushrn(1);++s}var c=n.clone();var f=r.clone();while(!r.isZero()){for(var l=0,h=1;(r.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0){r.iushrn(l);while(l-- >0){if(i.isOdd()||u.isOdd()){i.iadd(c);u.isub(f)}i.iushrn(1);u.iushrn(1)}}for(var p=0,d=1;(n.words[0]&d)===0&&p<26;++p,d<<=1);if(p>0){n.iushrn(p);while(p-- >0){if(a.isOdd()||o.isOdd()){a.iadd(c);o.isub(f)}a.iushrn(1);o.iushrn(1)}}if(r.cmp(n)>=0){r.isub(n);i.isub(a);u.isub(o)}else{n.isub(r);a.isub(i);o.isub(u)}}return{a:a,b:o,gcd:n.iushln(s)}};y.prototype._invmp=function e(t){m(t.negative===0);m(!t.isZero());var r=this;var n=t.clone();if(r.negative!==0){r=r.umod(t)}else{r=r.clone()}var i=new y(1);var u=new y(0);var a=n.clone();while(r.cmpn(1)>0&&n.cmpn(1)>0){for(var o=0,s=1;(r.words[0]&s)===0&&o<26;++o,s<<=1);if(o>0){r.iushrn(o);while(o-- >0){if(i.isOdd()){i.iadd(a)}i.iushrn(1)}}for(var c=0,f=1;(n.words[0]&f)===0&&c<26;++c,f<<=1);if(c>0){n.iushrn(c);while(c-- >0){if(u.isOdd()){u.iadd(a)}u.iushrn(1)}}if(r.cmp(n)>=0){r.isub(n);i.isub(u)}else{n.isub(r);u.isub(i)}}var l;if(r.cmpn(1)===0){l=i}else{l=u}if(l.cmpn(0)<0){l.iadd(t)}return l};y.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var u=r.cmp(n);if(u<0){var a=r;r=n;n=a}else if(u===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};y.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};y.prototype.isEven=function e(){return(this.words[0]&1)===0};y.prototype.isOdd=function e(){return(this.words[0]&1)===1};y.prototype.andln=function e(t){return this.words[0]&t};y.prototype.bincn=function e(t){m(typeof t==="number");var r=t%26;var n=(t-r)/26;var i=1<<r;if(this.length<=n){this._expand(n+1);this.words[n]|=i;return this}var u=i;for(var a=n;u!==0&&a<this.length;a++){var o=this.words[a]|0;o+=u;u=o>>>26;o&=67108863;this.words[a]=o}if(u!==0){this.words[a]=u;this.length++}return this};y.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};y.prototype.cmpn=function e(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this._strip();var n;if(this.length>1){n=1}else{if(r){t=-t}m(t<=67108863,"Number is too big");var i=this.words[0]|0;n=i===t?0:i<t?-1:1}if(this.negative!==0)return-n|0;return n};y.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};y.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var u=t.words[n]|0;if(i===u)continue;if(i<u){r=-1}else if(i>u){r=1}break}return r};y.prototype.gtn=function e(t){return this.cmpn(t)===1};y.prototype.gt=function e(t){return this.cmp(t)===1};y.prototype.gten=function e(t){return this.cmpn(t)>=0};y.prototype.gte=function e(t){return this.cmp(t)>=0};y.prototype.ltn=function e(t){return this.cmpn(t)===-1};y.prototype.lt=function e(t){return this.cmp(t)===-1};y.prototype.lten=function e(t){return this.cmpn(t)<=0};y.prototype.lte=function e(t){return this.cmp(t)<=0};y.prototype.eqn=function e(t){return this.cmpn(t)===0};y.prototype.eq=function e(t){return this.cmp(t)===0};y.red=function e(t){return new A(t)};y.prototype.toRed=function e(t){m(!this.red,"Already a number in reduction context");m(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};y.prototype.fromRed=function e(){m(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};y.prototype._forceRed=function e(t){this.red=t;return this};y.prototype.forceRed=function e(t){m(!this.red,"Already a number in reduction context");return this._forceRed(t)};y.prototype.redAdd=function e(t){m(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};y.prototype.redIAdd=function e(t){m(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};y.prototype.redSub=function e(t){m(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};y.prototype.redISub=function e(t){m(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};y.prototype.redShl=function e(t){m(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};y.prototype.redMul=function e(t){m(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};y.prototype.redIMul=function e(t){m(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};y.prototype.redSqr=function e(){m(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};y.prototype.redISqr=function e(){m(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};y.prototype.redSqrt=function e(){m(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};y.prototype.redInvm=function e(){m(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};y.prototype.redNeg=function e(){m(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};y.prototype.redPow=function e(t){m(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e;this.p=new y(t,16);this.n=this.p.bitLength();this.k=new y(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}w.prototype._tmp=function e(){var t=new y(null);t.words=new Array(Math.ceil(this.n/13));return t};w.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};w.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};w.prototype.imulK=function e(t){return t.imul(this.k)};function D(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(D,w);D.prototype.split=function e(t,r){var n=4194303;var i=Math.min(t.length,9);for(var u=0;u<i;u++){r.words[u]=t.words[u]}r.length=i;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&n;for(u=10;u<t.length;u++){var o=t.words[u]|0;t.words[u-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;t.words[u-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};D.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var i=t.words[n]|0;r+=i*977;t.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function F(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(F,w);function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(E,w);function x(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(x,w);x.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var i=(t.words[n]|0)*19+r;var u=i&67108863;i>>>=26;t.words[n]=u;r=i}if(r!==0){t.words[t.length++]=r}return t};y._prime=function e(t){if(b[t])return b[t];var e;if(t==="k256"){e=new D}else if(t==="p224"){e=new F}else if(t==="p192"){e=new E}else if(t==="p25519"){e=new x}else{throw new Error("Unknown prime "+t)}b[t]=e;return e};function A(e){if(typeof e==="string"){var t=y._prime(e);this.m=t.p;this.prime=t}else{m(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}A.prototype._verify1=function e(t){m(t.negative===0,"red works only with positives");m(t.red,"red works only with red numbers")};A.prototype._verify2=function e(t,r){m((t.negative|r.negative)===0,"red works only with positives");m(t.red&&t.red===r.red,"red works only with red numbers")};A.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);u(t,t.umod(this.m)._forceRed(this));return t};A.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};A.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};A.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};A.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};A.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};A.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};A.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};A.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};A.prototype.isqr=function e(t){return this.imul(t,t.clone())};A.prototype.sqr=function e(t){return this.mul(t,t)};A.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var r=this.m.andln(3);m(r%2===1);if(r===3){var n=this.m.add(new y(1)).iushrn(2);return this.pow(t,n)}var i=this.m.subn(1);var u=0;while(!i.isZero()&&i.andln(1)===0){u++;i.iushrn(1)}m(!i.isZero());var a=new y(1).toRed(this);var o=a.redNeg();var s=this.m.subn(1).iushrn(1);var c=this.m.bitLength();c=new y(2*c*c).toRed(this);while(this.pow(c,s).cmp(o)!==0){c.redIAdd(o)}var f=this.pow(c,i);var l=this.pow(t,i.addn(1).iushrn(1));var h=this.pow(t,i);var p=u;while(h.cmp(a)!==0){var d=h;for(var v=0;d.cmp(a)!==0;v++){d=d.redSqr()}m(v<p);var _=this.pow(f,new y(1).iushln(p-v-1));l=l.redMul(_);f=_.redSqr();h=h.redMul(f);p=v}return l};A.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};A.prototype.pow=function e(t,r){if(r.isZero())return new y(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var i=new Array(1<<n);i[0]=new y(1).toRed(this);i[1]=t;for(var u=2;u<i.length;u++){i[u]=this.mul(i[u-1],t)}var a=i[0];var o=0;var s=0;var c=r.bitLength()%26;if(c===0){c=26}for(u=r.length-1;u>=0;u--){var f=r.words[u];for(var l=c-1;l>=0;l--){var h=f>>l&1;if(a!==i[0]){a=this.sqr(a)}if(h===0&&o===0){s=0;continue}o<<=1;o|=h;s++;if(s!==n&&(u!==0||l!==0))continue;a=this.mul(a,i[o]);s=0;o=0}c=26}return a};A.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};A.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};y.mont=function e(t){return new M(t)};function M(e){A.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new y(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}r(M,A);M.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};M.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};M.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=n.isub(i).iushrn(this.shift);var a=u;if(u.cmp(this.m)>=0){a=u.isub(this.m)}else if(u.cmpn(0)<0){a=u.iadd(this.m)}return a._forceRed(this)};M.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new y(0)._forceRed(this);var n=t.mul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=n.isub(i).iushrn(this.shift);var a=u;if(u.cmp(this.m)>=0){a=u.isub(this.m)}else if(u.cmpn(0)<0){a=u.iadd(this.m)}return a._forceRed(this)};M.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,S)})(P);var L=P.exports;let R;try{R=new TextDecoder}catch(e){}let T;let U;let $=0;const z=105;const V={};let Y={};let Z;let H;let J=0;let G=0;let W;let K=[];let Q;let X;let ee={useRecords:false,mapsAsObjects:true};let te=false;class re{constructor(e){if(e){if(e.useRecords===false&&e.mapsAsObjects===undefined)e.mapsAsObjects=true;if(e.getStructures&&!e.structures)(e.structures=[]).uninitialized=true}Object.assign(this,e)}decode(e,t){if(T){return Fe(()=>{Ee();return this?this.decode(e,t):re.prototype.decode.call(ee,e,t)})}U=t>-1?t:e.length;$=0;G=0;H=null;T=e;Q=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength));if(this){Y=this;if(this.structures){Z=this.structures;return ne()}else if(!Z||Z.length>0){Z=[]}}else{Y=ee;if(!Z||Z.length>0)Z=[]}return ne()}decodeMultiple(r,n){let i,u=0;try{let e=r.length;te=true;let t=this?this.decode(r,e):Me.decode(r,e);if(n){n(t);while($<e){u=$;if(n(ne())===false){return}}}else{i=[t];while($<e){u=$;i.push(ne())}return i}}catch(e){e.lastPosition=u;e.values=i;throw e}finally{te=false;Ee()}}}function ne(){try{let e=ie();if($==U){Z=null;T=null;if(W)W=null}else if($>U){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}else if(!te){throw new Error("Data read, but end of buffer not reached")}return e}catch(e){Ee();if(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")){e.incomplete=true}throw e}}function ie(){let r=T[$++];let i=r>>5;r=r&31;if(r>23){switch(r){case 24:r=T[$++];break;case 25:if(i==7){return de()}r=Q.getUint16($);$+=2;break;case 26:if(i==7){let t=Q.getFloat32($);if(Y.useFloat32>2){let e=Ae[(T[$]&127)<<1|T[$+1]>>7];$+=4;return(e*t+(t>0?.5:-.5)>>0)/e}$+=4;return t}r=Q.getUint32($);$+=4;break;case 27:if(i==7){let e=Q.getFloat64($);$+=8;return e}if(Y.uint64AsNumber)return T[$++]*72057594037927940+T[$++]*281474976710656+T[$++]*1099511627776+T[$++]*4294967296+T[$++]*16777216+(T[$++]<<16)+(T[$++]<<8)+T[$++];r=Q.getBigUint64($);$+=8;break;case 31:switch(i){case 2:case 3:case 4:let e=[];let t,r=0;while((t=ie())!=V){e[r++]=t}return i==4?e:i==3?e.join(""):Buffer.concat(e);case 5:let n;if(Y.mapsAsObjects){let e={};while((n=_e())!=V)e[n]=ie();return e}else{if(X){Y.mapsAsObjects=true;X=false}let e=new Map;while((n=ie())!=V)e.set(n,ie());return e}case 7:return V;default:throw new Error("Invalid major type for indefinite length "+i)}default:throw new Error("Unknown token "+r)}}switch(i){case 0:return r;case 1:return~r;case 2:return pe(r);case 3:if(G>=$){return H.slice($-J,($+=r)-J)}if(G==0&&U<140&&r<32){let e=r<16?he(r):le(r);if(e!=null)return e}return se(r);case 4:let t=new Array(r);for(let e=0;e<r;e++){t[e]=ie()}return t;case 5:if(Y.mapsAsObjects){let t={};for(let e=0;e<r;e++){t[_e()]=ie()}return t}else{if(X){Y.mapsAsObjects=true;X=false}let t=new Map;for(let e=0;e<r;e++){t.set(ie(),ie())}return t}case 6:if(r>>8==z){let t=Z[r&255];if(t){if(!t.read)t.read=ae(t);return t.read()}else if(Y.getStructures){let e=Fe(()=>{T=null;return Y.getStructures()});if(Z===true)Y.structures=Z=e;else Z.splice.apply(Z,[0,e.length].concat(e));t=Z[r&255];if(t){if(!t.read)t.read=ae(t);return t.read()}else return r}else return r}else{let e=K[r];if(e){if(e.handlesRead)return e(ie);else return e(ie())}else return new me(ie())}case 7:switch(r){case 20:return false;case 21:return true;case 22:return null;case 23:return;case 31:default:throw new Error("Unknown token "+r)}default:if(isNaN(r)){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}throw new Error("Unknown CBOR token "+r)}}const ue=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function ae(n){let e=n.length;function t(){if(t.count++>2){this.read=new Function("a","r","return function(){a();return {"+n.map(e=>ue.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}}")(oe,ie);return this.read()}oe();let r={};for(let t=0;t<e;t++){let e=n[t];r[e]=ie()}return r}t.count=0;return t}function oe(e){let t=T[$++];t=t&31;if(t>23){switch(t){case 24:$++;break;case 25:$+=2;break;case 26:$+=4}}}let se=ce;function ce(e){let t;if(e<16){if(t=he(e))return t}if(e>64&&R)return R.decode(T.subarray($,$+=e));const r=$+e;const n=[];t="";while($<r){const i=T[$++];if((i&128)===0){n.push(i)}else if((i&224)===192){const u=T[$++]&63;n.push((i&31)<<6|u)}else if((i&240)===224){const u=T[$++]&63;const a=T[$++]&63;n.push((i&31)<<12|u<<6|a)}else if((i&248)===240){const u=T[$++]&63;const a=T[$++]&63;const o=T[$++]&63;let e=(i&7)<<18|u<<12|a<<6|o;if(e>65535){e-=65536;n.push(e>>>10&1023|55296);e=56320|e&1023}n.push(e)}else{n.push(i)}if(n.length>=4096){t+=fe.apply(String,n);n.length=0}}if(n.length>0){t+=fe.apply(String,n)}return t}let fe=String.fromCharCode;function le(t){let r=$;let n=new Array(t);for(let e=0;e<t;e++){const i=T[$++];if((i&128)>0){$=r;return}n[e]=i}return fe.apply(String,n)}function he(v){if(v<4){if(v<2){if(v===0)return"";else{let e=T[$++];if((e&128)>1){$-=1;return}return fe(e)}}else{let e=T[$++];let t=T[$++];if((e&128)>0||(t&128)>0){$-=2;return}if(v<3)return fe(e,t);let r=T[$++];if((r&128)>0){$-=3;return}return fe(e,t,r)}}else{let l=T[$++];let h=T[$++];let p=T[$++];let d=T[$++];if((l&128)>0||(h&128)>0||(p&128)>0||(d&128)>0){$-=4;return}if(v<6){if(v===4)return fe(l,h,p,d);else{let e=T[$++];if((e&128)>0){$-=5;return}return fe(l,h,p,d,e)}}else if(v<8){let e=T[$++];let t=T[$++];if((e&128)>0||(t&128)>0){$-=6;return}if(v<7)return fe(l,h,p,d,e,t);let r=T[$++];if((r&128)>0){$-=7;return}return fe(l,h,p,d,e,t,r)}else{let o=T[$++];let s=T[$++];let c=T[$++];let f=T[$++];if((o&128)>0||(s&128)>0||(c&128)>0||(f&128)>0){$-=8;return}if(v<10){if(v===8)return fe(l,h,p,d,o,s,c,f);else{let e=T[$++];if((e&128)>0){$-=9;return}return fe(l,h,p,d,o,s,c,f,e)}}else if(v<12){let e=T[$++];let t=T[$++];if((e&128)>0||(t&128)>0){$-=10;return}if(v<11)return fe(l,h,p,d,o,s,c,f,e,t);let r=T[$++];if((r&128)>0){$-=11;return}return fe(l,h,p,d,o,s,c,f,e,t,r)}else{let n=T[$++];let i=T[$++];let u=T[$++];let a=T[$++];if((n&128)>0||(i&128)>0||(u&128)>0||(a&128)>0){$-=12;return}if(v<14){if(v===12)return fe(l,h,p,d,o,s,c,f,n,i,u,a);else{let e=T[$++];if((e&128)>0){$-=13;return}return fe(l,h,p,d,o,s,c,f,n,i,u,a,e)}}else{let e=T[$++];let t=T[$++];if((e&128)>0||(t&128)>0){$-=14;return}if(v<15)return fe(l,h,p,d,o,s,c,f,n,i,u,a,e,t);let r=T[$++];if((r&128)>0){$-=15;return}return fe(l,h,p,d,o,s,c,f,n,i,u,a,e,t,r)}}}}}function pe(e){return Y.copyBuffers?Uint8Array.prototype.slice.call(T,$,$+=e):T.subarray($,$+=e)}function de(){let e=T[$++];let t=T[$++];let r=(e<<8)+t;let n=r>>10&31;let i=r&1023;let u;if(n==0)u=Math.exp(i,-24);else if(n!=31)u=Math.exp(i+1024,n-25);else u=i==0?Infinity:NaN;return r&32768?-u:u}let ve=new Array(4096);function _e(){let e=T[$++];if(e>=96&&e<120){e=e-96;if(G>=$)return H.slice($-J,($+=e)-J);else if(!(G==0&&U<180))return se(e)}else{$--;return ie()}let t=(e<<5^(e>1?Q.getUint16($):e>0?T[$]:0))&4095;let r=ve[t];let n=$;let i=$+e-3;let u;let a=0;if(r&&r.bytes==e){while(n<i){u=Q.getUint32(n);if(u!=r[a++]){n=1879048192;break}n+=4}i+=3;while(n<i){u=T[n++];if(u!=r[a++]){n=1879048192;break}}if(n===i){$=n;return r.string}i-=3;n=$}r=[];ve[t]=r;r.bytes=e;while(n<i){u=Q.getUint32(n);r.push(u);n+=4}i+=3;while(n<i){u=T[n++];r.push(u)}let o=e<16?he(e):le(e);if(o!=null)return r.string=o;return r.string=se(e)}class me{constructor(e){this.value=e}}let ye=typeof window=="object"?window:global;K[0]=e=>{return new Date(e)};K[1]=e=>{return new Date(e*1e3)};K[2]=e=>{return new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};K[3]=e=>{return BigInt(-1)-new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};const ge=()=>{let r=ie();let n=r[0];let e=r[1];Z[e&255]=n;n.read=ae(n);let i={};for(let t=2,e=r.length;t<e;t++){let e=n[t-2];i[e]=r[t]}return i};ge.handlesRead=true;K[z]=ge;K[27]=e=>{return(ye[e[0]]||Error)(e[1],e[2])};K[40009]=e=>{if(!W)W=new Map;let t=T[$];let r;if(t>>5==4)r=[];else r={};let n={target:r};W.set(e,n);let i=ie();if(n.used)return Object.assign(r,i);n.target=i;return i};K[40010]=e=>{let t=W.get(e);t.used=true;return t.target};K[258]=e=>new Set(e);(K[259]=e=>{if(Y.mapsAsObjects){Y.mapsAsObjects=false;X=true}return e()}).handlesRead=true;const be=["Uint8","Uint8Clamped","Uint16","Uint32","BigUint64","Int8","Int16","Int32","BigInt64","Float32","Float64"].map(e=>e+"Array");const we=[64,68,69,70,71,72,77,78,79,81,82];for(let e=0;e<be.length;e++){De(be[e],we[e])}function De(t,e){K[e]=e=>{if(!t)throw new Error("Could not find typed array for code "+typeCode);return new ye[t](Uint8Array.prototype.slice.call(e,0).buffer)}}function Fe(e){let t=U;let r=$;let n=J;let i=G;let u=H;let a=W;let o=new Uint8Array(T.slice(0,U));let s=Z;let c=Y;let f=te;let l=e();U=t;$=r;J=n;G=i;H=u;W=a;T=o;te=f;Z=s;Y=c;Q=new DataView(T.buffer,T.byteOffset,T.byteLength);return l}function Ee(){T=null;W=null;Z=null}function xe(e){K[e.tag]=e.decode}let Ae=new Array(147);for(let e=0;e<256;e++){Ae[e]=+("1e"+Math.floor(45.15-e*.30103))}let Me=new re({useRecords:false});Me.decode;Me.decodeMultiple;let Ce;try{Ce=new TextEncoder}catch(e){}let ke,Oe;const Se=typeof Buffer!=="undefined";const Be=Se?Buffer.allocUnsafeSlow:Uint8Array;const je=Se?Buffer:Uint8Array;const Ie=105;const Ne=256;const Pe=Se?4294967296:2144337920;let Le;let qe;let Re=0;let Te;const Ue=Symbol("record-id");class $e extends re{constructor(e){super(e);this.offset=0;let i;let o;let s;let c;let r;let n=0;let t=je.prototype.utf8Write?function(e,t,r){return Le.utf8Write(e,t,r)}:Ce&&Ce.encodeInto?function(e,t){return Ce.encodeInto(e,Le.subarray(t)).written}:false;let u=this;let f=64;let a=e&&e.sequential;if(a){f=0;this.structures=[]}let l=[];let h=0;let p=0;if(this.structures&&this.structures.length>f){throw new Error("Too many shared structures")}this.encode=function(e){if(!Le){Le=new Be(8192);qe=new DataView(Le.buffer,0,8192);Re=0}Te=Le.length-10;if(Te-Re<2048){Le=new Be(Le.length);qe=new DataView(Le.buffer,0,Le.length);Te=Le.length-10;Re=0}i=Re;r=u.structuredClone?new Map:null;o=u.structures;if(o){if(o.uninitialized)u.structures=o=u.getStructures();let t=o.length;if(t>f&&!a)t=f;if(!o.transitions){o.transitions=Object.create(null);for(let e=0;e<t;e++){let r=o[e];if(!r)continue;let n,i=o.transitions;for(let t=0,e=r.length;t<e;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null)}i=n}i[Ue]=e}n=o.length}if(!a)o.nextId=t}if(s)s=false;c=o||[];try{d(e);u.offset=Re;if(r&&r.idsToInsert){Re+=r.idsToInsert.length*8;if(Re>Te)_(Re);u.offset=Re;let e=Ze(Le.subarray(i,Re),r.idsToInsert);r=null;return e}return Le.subarray(i,Re)}finally{if(o){if(p<10)p++;if(h>1e4){o.transitions=null;p=0;h=0;if(l.length>0)l=[]}else if(l.length>0&&!a){for(let e=0,t=l.length;e<t;e++){l[e][Ue]=undefined}l=[]}if(s&&u.saveStructures){if(u.structures.length>f){u.structures=u.structures.slice(0,f)}if(u.saveStructures(u.structures,n)===false){u.structures=u.getStructures()||[];return u.encode(e)}n=u.structures.length}}}};const d=a=>{if(Re>Te)Le=_(Re);var e=typeof a;var o;if(e==="string"){let i=a.length;let u;if(i<32){u=1}else if(i<256){u=2}else if(i<65536){u=3}else{u=5}let e=i*3;if(Re+e>Te)Le=_(Re+e);if(i<64||!t){let e,t,r,n=Re+u;for(e=0;e<i;e++){t=a.charCodeAt(e);if(t<128){Le[n++]=t}else if(t<2048){Le[n++]=t>>6|192;Le[n++]=t&63|128}else if((t&64512)===55296&&((r=a.charCodeAt(e+1))&64512)===56320){t=65536+((t&1023)<<10)+(r&1023);e++;Le[n++]=t>>18|240;Le[n++]=t>>12&63|128;Le[n++]=t>>6&63|128;Le[n++]=t&63|128}else{Le[n++]=t>>12|224;Le[n++]=t>>6&63|128;Le[n++]=t&63|128}}o=n-Re-u}else{o=t(a,Re+u,e)}if(o<24){Le[Re++]=96|o}else if(o<256){if(u<2){Le.copyWithin(Re+2,Re+1,Re+1+o)}Le[Re++]=120;Le[Re++]=o}else if(o<65536){if(u<3){Le.copyWithin(Re+3,Re+2,Re+2+o)}Le[Re++]=121;Le[Re++]=o>>8;Le[Re++]=o&255}else{if(u<5){Le.copyWithin(Re+5,Re+3,Re+3+o)}Le[Re++]=122;qe.setUint32(Re,o);Re+=4}Re+=o}else if(e==="number"){if(a>>>0===a){if(a<24){Le[Re++]=a}else if(a<256){Le[Re++]=24;Le[Re++]=a}else if(a<65536){Le[Re++]=25;Le[Re++]=a>>8;Le[Re++]=a&255}else{Le[Re++]=26;qe.setUint32(Re,a);Re+=4}}else if(a>>0===a){if(a>=-24){Le[Re++]=31-a}else if(a>=-256){Le[Re++]=56;Le[Re++]=~a}else if(a>=-65536){Le[Re++]=57;qe.setUint16(Re,~a);Re+=2}else{Le[Re++]=58;qe.setUint32(Re,~a);Re+=4}}else{let t;if((t=this.useFloat32)>0&&a<4294967296&&a>=-2147483648){Le[Re++]=250;qe.setFloat32(Re,a);let e;if(t<4||(e=a*Ae[(Le[Re]&127)<<1|Le[Re+1]>>7])>>0===e){Re+=4;return}else Re--}Le[Re++]=251;qe.setFloat64(Re,a);Re+=8}}else if(e==="object"){if(!a)Le[Re++]=246;else{if(r){let t=r.get(a);if(t){if(!t.id){let e=r.idsToInsert||(r.idsToInsert=[]);t.id=e.push(t)}Le[Re++]=217;Le[Re++]=40010>>8;Le[Re++]=40010&255;Le[Re++]=26;qe.setUint32(Re,t.id);Re+=4;return}else r.set(a,{offset:Re-i})}let e=a.constructor;if(e===Object){v(a,true)}else if(e===Array){o=a.length;if(o<24){Le[Re++]=128|o}else{ze(o)}for(let e=0;e<o;e++){d(a[e])}}else if(e===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==false:this.useTag259ForMaps){Le[Re++]=217;Le[Re++]=1;Le[Re++]=3}o=a.size;if(o<24){Le[Re++]=160|o}else if(o<256){Le[Re++]=184;Le[Re++]=o}else if(o<65536){Le[Re++]=185;Le[Re++]=o>>8;Le[Re++]=o&255}else{Le[Re++]=186;qe.setUint32(Re,o);Re+=4}for(let[e,t]of a){d(e);d(t)}}else{for(let r=0,e=ke.length;r<e;r++){let e=Oe[r];if(a instanceof e){let e=ke[r];let t=e.tag;if(t<24){Le[Re++]=192|t}else if(t<256){Le[Re++]=216;Le[Re++]=t}else if(t<65536){Le[Re++]=217;Le[Re++]=t>>8;Le[Re++]=t&255}else if(t>-1){Le[Re++]=218;qe.setUint32(Re,t);Re+=4}e.encode.call(this,a,d,_);return}}if(a[Symbol.iterator]){Le[Re++]=159;for(let e of a){d(e)}Le[Re++]=255;return}v(a,!a.hasOwnProperty)}}}else if(e==="boolean"){Le[Re++]=a?245:244}else if(e==="bigint"){if(a<BigInt(1)<<BigInt(64)&&a>=0){Le[Re++]=27;qe.setBigUint64(Re,a)}else if(a>-(BigInt(1)<<BigInt(64))&&a<0){Le[Re++]=59;qe.setBigUint64(Re,-a-BigInt(1))}else{if(this.largeBigIntToFloat){Le[Re++]=251;qe.setFloat64(Re,Number(a))}else{throw new RangeError(a+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64")}}Re+=8}else if(e==="undefined"){Le[Re++]=247}else{throw new Error("Unknown type "+e)}};const v=this.useRecords===false?this.variableMapSize?t=>{let r=Object.keys(t);let n=r.length;if(n<24){Le[Re++]=160|n}else if(n<256){Le[Re++]=184;Le[Re++]=n}else if(n<65536){Le[Re++]=185;Le[Re++]=n>>8;Le[Re++]=n&255}else{Le[Re++]=186;qe.setUint32(Re,n);Re+=4}let i;for(let e=0;e<n;e++){d(i=r[e]);d(t[i])}}:(t,r)=>{Le[Re++]=185;let e=Re-i;Re+=2;let n=0;for(let e in t){if(r||t.hasOwnProperty(e)){d(e);d(t[e]);n++}}Le[e+++i]=n>>8;Le[e+i]=n&255}:t=>{let r=Object.keys(t);let n,i=c.transitions||(c.transitions=Object.create(null));let u=0;let a=r.length;for(let t=0;t<a;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null);u++}i=n}let e=i[Ue];if(e!==undefined){Le[Re++]=217;Le[Re++]=Ie;Le[Re++]=e}else{e=c.nextId++;if(!e){e=0;c.nextId=1}if(e>=Ne){c.nextId=(e=f)+1}i[Ue]=e;c[e]=r;if(o&&o.length<=f){Le[Re++]=217;Le[Re++]=Ie;Le[Re++]=e;s=true}else{Le[Re++]=216;Le[Re++]=Ie;if(u)h+=p*u;if(l.length>=Ne-f)l.shift()[Ue]=undefined;l.push(i);if(a<22)Le[Re++]=130+a;else ze(a+2);d(r);Le[Re++]=25;Le[Re++]=Ie;Le[Re++]=e;for(let e=0;e<a;e++)d(t[r[e]]);return}}if(a<24){Le[Re++]=128|a}else{ze(a)}for(let e=0;e<a;e++)d(t[r[e]])};const _=e=>{let t;if(e>16777216){if(e-i>Pe)throw new Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(Pe,Math.round(Math.max((e-i)*(e>67108864?1.25:2),16777216)/4096)*4096)}else t=(Math.max(e-i<<2,Le.length-1)>>12)+1<<12;let r=new Be(t);qe=new DataView(r.buffer,0,t);if(Le.copy)Le.copy(r,0,i,e);else r.set(Le.slice(i,e));Re-=i;i=0;Te=r.length-10;return Le=r}}useBuffer(e){Le=e;qe=new DataView(Le.buffer,Le.byteOffset,Le.byteLength);Re=0}}function ze(e){if(e<256){Le[Re++]=152;Le[Re++]=e}else if(e<65536){Le[Re++]=153;Le[Re++]=e>>8;Le[Re++]=e&255}else{Le[Re++]=154;qe.setUint32(Re,e);Re+=4}}Oe=[Date,Set,Error,RegExp,ArrayBuffer,je,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,BigUint64Array,Int8Array,Int16Array,Int32Array,BigInt64Array,Float32Array,Float64Array];ke=[{tag:1,encode(e,t){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){Le[Re++]=26;qe.setUint32(Re,r);Re+=4}else{Le[Re++]=251;qe.setFloat64(Re,r);Re+=8}}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{encode(e,t,r){Ye(e,r)}},{encode(e,t,r){Ye(e,r)}},Ve(64),Ve(68),Ve(69),Ve(70),Ve(71),Ve(72),Ve(77),Ve(78),Ve(79),Ve(81),Ve(82)];function Ve(e){return{tag:e,encode:function e(t,r){let n=t.byteLength;let i=t.byteOffset||0;let u=t.buffer||t;r(Se?Buffer.from(u,i,n):new Uint8Array(u,i,n))}}}function Ye(e,t){let r=e.byteLength;if(r<24){Le[Re++]=64+r}else if(r<256){Le[Re++]=88;Le[Re++]=r}else if(r<65536){Le[Re++]=89;Le[Re++]=r>>8;Le[Re++]=r&255}else{Le[Re++]=90;qe.setUint32(Re,r);Re+=4}if(Re+r>=Le.length){t(Re+r)}Le.set(e,Re);Re+=r}function Ze(n,e){let i;let u=e.length*8;let a=n.length-u;e.sort((e,t)=>e.offset>t.offset?1:-1);while(i=e.pop()){let e=i.offset;let t=i.id;n.copyWithin(e+u,e,a);u-=8;let r=e+u;n[r++]=217;n[r++]=40009>>8;n[r++]=40009&255;n[r++]=26;n[r++]=t>>24;n[r++]=t>>16&255;n[r++]=t>>8&255;n[r++]=t&255;a=e}return n}function He(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");Oe.unshift(e.Class);ke.unshift(e)}xe(e)}let Je=new $e({useRecords:false});Je.encode;var Ge=["token"],We=["stderr","stdin","stdout"];function Ke(i){var u=Qe();return function e(){var t=s(i),r;if(u){var n=s(this).constructor;r=Reflect.construct(t,arguments,n)}else{r=t.apply(this,arguments)}return a(this,r)}}function Qe(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function Xe(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=et(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function et(e,t){if(!e)return;if(typeof e==="string")return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}function tt(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){rt(Object(r),true).forEach(function(e){q(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{rt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}var it=typeof global!=="undefined"?global:self;function ut(r,n){var i=false,e=true,u=r.document,a=u.documentElement,t=u.addEventListener,o=t?"addEventListener":"attachEvent",s=t?"removeEventListener":"detachEvent",c=t?"":"on",f=function e(t){if(t.type=="readystatechange"&&u.readyState!="complete")return;(t.type=="load"?r:u)[s](c+t.type,e,false);if(!i&&(i=true))n.call(r,t.type||t)},l=function t(){try{a.doScroll("left")}catch(e){setTimeout(t,50);return}f("poll")};if(u.readyState=="complete")n.call(r,"lazy");else{if(!t&&a.doScroll){try{e=!r.frameElement}catch(e){}if(e)l()}u[o](c+"DOMContentLoaded",f,false);u[o](c+"readystatechange",f,false);r[o](c+"load",f,false)}}function at(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=arguments[1]===true;function t(e){if(!ot()){return}var t=Fu.get("repr")(e);if(r===null||r instanceof RegExp&&r.test(t)){console.log(Fu.get("type")(e)+": "+t)}if(n){console.log(e)}}if(Rn(e)){e.then(t)}else{t(e)}return e}function ot(){return Eu&&Eu.get("DEBUG",{throwError:false})}if(!it.fetch){it.fetch=function(i,u){u=u||{};return new Promise(function(e,t){var r=new XMLHttpRequest;r.open(u.method||"get",i,true);for(var n in u.headers){r.setRequestHeader(n,u.headers[n])}r.withCredentials=u.credentials=="include";r.onload=function(){e(o())};r.onerror=t;r.send(u.body||null);function o(){var n=[],i=[],u={},a;r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){n.push(t=t.toLowerCase());i.push([t,r]);a=u[t];u[t]=a?"".concat(a,",").concat(r):r});return{ok:(r.status/100|0)==2,status:r.status,statusText:r.statusText,url:r.responseURL,clone:o,text:function e(){return Promise.resolve(r.responseText)},json:function e(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function e(){return Promise.resolve(new Blob([r.response]))},headers:{keys:function e(){return n},entries:function e(){return i},get:function e(t){return u[t.toLowerCase()]},has:function e(t){return t.toLowerCase()in u}}}}})}}function st(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function ct(e,t){return"".concat(st(e),"[+-]?").concat(t,"+/").concat(t,"+")}function ft(e,t){return"".concat(st(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function lt(e,t){return"".concat(st(e),"[+-]?").concat(t,"+")}var ht=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/;var pt="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)";var dt="(?:#[ie])?(?:[+-]?(?:[0-9]+/[0-9]+|nan.0|inf.0|".concat(pt,"|[+-]?[0-9]+))?(?:").concat(pt,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i");var vt=new RegExp("^(#[ie])?".concat(pt,"$"),"i");function _t(e,t){var r=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")");var n="";if(e===""){n="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"}return new RegExp("^((?:(?:".concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(r,")?)(").concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}var mt=function(){var u={};[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(e){var t=F(e,3),r=t[0],n=t[1],i=t[2];u[r]=_t(n,i)});return u}();var yt={alarm:"",backspace:"\b",delete:"",escape:"",newline:"\n",null:"\0",return:"\r",space:" ",tab:"\t",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"",etb:"",bs:"\b",can:"",ht:"\t",em:"",lf:"\n",sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};function gt(e){var t=[];var r=0;var n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var u=e.charCodeAt(r++);if((u&64512)===56320){t.push(((i&1023)<<10)+(u&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}var bt=Object.keys(yt).join("|");var wt="#\\\\(?:x[0-9a-f]+|".concat(bt,"|[\\s\\S])");var Dt=new RegExp("^".concat(wt,"$"),"i");function Ft(i){var e=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]];var t=e.map(function(e){var t=F(e,2),r=t[0],n=t[1];return i(r,n)}).join("|");if(i===ft){t=dt+"|"+t}return t}function Et(e){return new RegExp("^(?:"+Ft(e)+")$","i")}var xt=Et(ft);var At=Et(ct);var Mt=Et(lt);var Ct=new RegExp("^(?:"+lt("","[0-9a-f]")+")$","i");var kt=new RegExp("^(?:"+ct("","[0-9a-f]")+")$","i");var Ot=new RegExp("^(?:"+ft("","[0-9a-f]")+")$","i");var St=_t("","[0-9a-fA-F]");var Bt=/((?:#[xodbie]){0,2})(.*)/i;function jt(e){var t=e.match(Bt);var r={};if(t[1]){var n=t[1].replace(/#/g,"").toLowerCase().split("");if(n.includes("x")){r.radix=16}else if(n.includes("o")){r.radix=8}else if(n.includes("b")){r.radix=2}else if(n.includes("d")){r.radix=10}if(n.includes("i")){r.inexact=true}if(n.includes("e")){r.exact=true}}r.number=t[2];return r}function It(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=jt(e);var n=r.number.split("/");var i=Ji({num:Ni([n[0],r.radix||t]),denom:Ni([n[1],r.radix||t])});if(r.inexact){return i.valueOf()}else{return i}}function Nt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=jt(e);if(r.inexact){return zi(parseInt(r.number,r.radix||t))}return Ni([r.number,r.radix||t])}function Pt(e){var t=e.match(/#\\x([0-9a-f]+)$/i);var r;if(t){var n=parseInt(t[1],16);r=String.fromCodePoint(n)}else{t=e.match(/#\\(.+)$/);if(t){r=t[1]}}if(r){return Mi(r)}throw new Error("Parse: invalid character")}function Lt(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;function t(e){var t;if(e==="+"){t=Ni(1)}else if(e==="-"){t=Ni(-1)}else if(e.match(Ct)){t=Ni([e,i])}else if(e.match(kt)){var r=e.split("/");t=Ji({num:Ni([r[0],i]),denom:Ni([r[1],i])})}else if(e.match(vt)){var n=Tt(e);if(u.exact){return n.toRational()}return n}else if(e.match(/nan.0$/)){return Ni(NaN)}else if(e.match(/inf.0$/)){if(e[0]==="-"){return Ni(Number.NEGATIVE_INFINITY)}return Ni(Number.POSITIVE_INFINITY)}else{throw new Error("Internal Parser Error")}if(u.inexact){return zi(t.valueOf())}return t}var u=jt(e);i=u.radix||i;var r;var n=u.number.match(St);if(i!==10&&n){r=n}else{r=u.number.match(mt[i])}var a,o;o=t(r[2]);if(r[1]){a=t(r[1])}else{a=Ni(0)}if(o.cmp(0)===0&&o.__type__==="bigint"){return a}return $i({im:o,re:a})}function qt(e){return parseInt(e.toString(),10)===e}function Rt(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var r=parseInt(t[4],10);var n;var i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length;var u=t[3]&&t[3].length;if(i<Math.abs(r)){n=Ni([t[1].replace(/\./,""),10]);if(u){r-=u}}}return{exponent:r,mantisa:n}}function Tt(e){var t=jt(e);var r=parseFloat(t.number);var n=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&n){return Ni(r)}if(qt(r)&&t.number.match(/e\+?[0-9]/i)){return Ni(r)}var i=Rt(t.number),u=i.mantisa,a=i.exponent;if(u!==undefined&&a!==undefined){var o=Ni(10).pow(Ni(Math.abs(a)));if(t.exact&&a<0){return Ji({num:u,denom:o})}else if(a>0){return Ni(u).mul(o)}}}r=zi(r);if(t.exact){return r.toRational()}return r}function Ut(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(e,t){return"\\u"+t.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0){throw new Error("Invalid string literal, unclosed ".concat(t[2]))}try{return Ci(JSON.parse(e))}catch(e){throw new Error("Invalid string literal")}}function $t(e){if(e.match(/^\|.*\|$/)){e=e.replace(/(^\|)|(\|$)/g,"");var r={t:"\t",r:"\r",n:"\n"};e=e.replace(/\\(x[^;]+);/g,function(e,t){return String.fromCharCode(parseInt("0"+t,16))}).replace(/\\(.)/g,function(e,t){return r[t]||t})}return new nr(e)}function zt(e){if(Du.hasOwnProperty(e)){return Du[e]}if(e.match(/^"[\s\S]*"$/)){return Ut(e)}else if(e[0]==="#"){var t=e.match(ht);if(t){return new RegExp(t[1],t[2])}else if(e.match(Dt)){return Pt(e)}var r=e.match(/#\\(.+)/);if(r&&gt(r[1]).length===1){return Pt(e)}}if(e.match(/[0-9a-f]|[+-]i/i)){if(e.match(Mt)){return Nt(e)}else if(e.match(vt)){return Tt(e)}else if(e.match(At)){return It(e)}else if(e.match(xt)){return Lt(e)}}if(e.match(/^#[iexobd]/)){throw new Error("Invalid numeric constant: "+e)}return $t(e)}function Vt(e){return!(["(",")","[","]"].includes(e)||lr.names().includes(e))}function Yt(e){return Vt(e)&&!(e.match(ht)||e.match(/^"[\s\S]*"$/)||e.match(Mt)||e.match(vt)||e.match(xt)||e.match(At)||e.match(Dt)||["#t","#f","nil","true","false"].includes(e))}var Zt=/"(?:\\[\S\s]|[^"])*"?/g;function Ht(e){if(typeof e==="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function Jt(){this.data=[]}Jt.prototype.push=function(e){this.data.push(e)};Jt.prototype.top=function(){return this.data[this.data.length-1]};Jt.prototype.pop=function(){return this.data.pop()};Jt.prototype.is_empty=function(){return!this.data.length};function Gt(e){if(e instanceof Ci){e=e.valueOf()}var t=new _r(e,{whitespace:true});var r=[];while(true){var n=t.peek(true);if(n===su){break}r.push(n);t.skip()}return r}function Wt(e){var t=e.token,r=w(e,Ge);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var n=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(n,"")}return nt({token:t},r)}function Kt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.fn=e;this.cont=t}Kt.prototype.toString=function(){return"#<Thunk>"};function Qt(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return Xt(n.apply(this,t))}}function Xt(e){while(e instanceof Kt){var t=e;e=e.fn();if(!(e instanceof Kt)){t.cont()}}return e}function er(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof Ci){e=e.toString()}if(t){return Gt(e)}else{var r=Gt(e).map(function(e){if(e.token==="#\\ "){return e.token}return e.token.trim()}).filter(function(e){return e&&!e.match(/^;/)&&!e.match(/^#\|[\s\S]*\|#$/)});return tr(r)}}function tr(e){var t=0;var r=null;var n=[];for(var i=0;i<e.length;++i){var u=e[i];if(u==="#;"){if(["(","["].includes(e[i+1])){t=1;r=i}else{n.push([i,i+2])}i+=1;continue}if(r!==null){if([")","]"].includes(u)){t--}else if(["(","["].includes(u)){t++}if(t===0){n.push([r,i+1]);r=null}}}e=e.slice();n.reverse();for(var a=0,o=n;a<o.length;a++){var s=F(o[a],2),c=s[0],f=s[1];e.splice(c,f-c)}return e}function rr(e){return d(e)==="symbol"||d(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function nr(e){if(typeof this!=="undefined"&&this.constructor!==nr||typeof this==="undefined"){return new nr(e)}if(e instanceof Ci){e=e.valueOf()}if(nr.list[e]instanceof nr){return nr.list[e]}this.__name__=e;if(typeof e==="string"){nr.list[e]=this}}nr.list={};nr.literal=Symbol["for"]("__literal__");nr.object=Symbol["for"]("__object__");nr.is=function(e,t){return e instanceof nr&&(t instanceof nr&&e.__name__===t.__name__||typeof t==="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};nr.prototype.toString=function(e){if(rr(this.__name__)){return ir(this.__name__)}var t=this.valueOf();if(e&&t.match(/(^;|[\s()[\]'])/)){return"|".concat(t,"|")}return t};nr.prototype.literal=function(){if(this.is_gensym()){return this[nr.literal]}return this.valueOf()};nr.prototype.serialize=function(){if(Ci.isString(this.__name__)){return this.__name__}return[ir(this.__name__)]};nr.prototype.valueOf=function(){return this.__name__.valueOf()};nr.prototype.is_gensym=function(){return ur(this.__name__)};function ir(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function ur(e){if(d(e)==="symbol"){return!!e.toString().match(/^Symbol\(#:/)}return false}var ar=function(){var t=0;function r(e,t){var r=new nr(t);ci(r,"__literal__",e);return r}return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e instanceof nr){if(e.is_gensym()){return e}e=e.valueOf()}if(ur(e)){return nr(e)}if(e!==null){return r(e,Symbol("#:".concat(e)))}t++;return r(t,Symbol("#:g".concat(t)))}}();function or(e){var r=this;var n={pending:true,rejected:false,fulfilled:false,reason:undefined,type:undefined};e=e.then(function(e){n.type=Uu(e);n.fulfilled=true;n.pending=false;return e});xr(this,"_promise",e,{hidden:true});if(Pn(e["catch"])){e=e["catch"](function(e){n.rejected=true;n.pending=false;n.reason=e})}Object.keys(n).forEach(function(t){Object.defineProperty(r,"__".concat(t,"__"),{enumerable:true,get:function e(){return n[t]}})});xr(this,"__promise__",e);this.then=false}or.prototype.then=function(e){return new or(this.valueOf().then(e))};or.prototype["catch"]=function(e){return new or(this.valueOf()["catch"](e))};or.prototype.valueOf=function(){if(!this._promise){throw new Error("QuotedPromise: invalid promise created")}return this._promise};or.prototype.toString=function(){if(this.__pending__){return or.pending_str}if(this.__rejected__){return or.rejected_str}return"#<js-promise resolved (".concat(this.__type__,")>")};or.pending_str="#<js-promise (pending)>";or.rejected_str="#<js-promise (rejected)>";function sr(e){if(Array.isArray(e)){return Promise.all(cr(e)).then(fr)}return e}function cr(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof or){t[r]=new pu(n)}else{t[r]=n}}return t}function fr(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof pu){t[r]=n.valueOf()}else{t[r]=n}}return t}var lr={LITERAL:Symbol["for"]("literal"),SPLICE:Symbol["for"]("splice"),SYMBOL:Symbol["for"]("symbol"),names:function e(){return Object.keys(this._specials)},type:function e(t){return this.get(t).type},get:function e(t){return this._specials[t]},off:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(Array.isArray(t)){t.forEach(function(e){return r.off(e,n)})}else if(n===null){delete this._events[t]}else{this._events=this._events.filter(function(e){return e!==n})}},on:function e(t,r){var n=this;if(Array.isArray(t)){t.forEach(function(e){return n.on(e,r)})}else if(!this._events[t]){this._events[t]=[r]}else{this._events[t].push(r)}},trigger:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}if(this._events[t]){this._events[t].forEach(function(e){return e.apply(void 0,n)})}},remove:function e(t){this.trigger("remove");delete this._specials[t]},append:function e(t,r,n){this.trigger("append");this._specials[t]={seq:t,symbol:r,type:n}},_events:{},_specials:{}};function hr(e){return lr.names().includes(e)}function pr(e){return lr.builtin.includes(e)}function dr(e){return lr.type(e)===lr.LITERAL}var vr=[["'",new nr("quote"),lr.LITERAL],["`",new nr("quasiquote"),lr.LITERAL],[",@",new nr("unquote-splicing"),lr.LITERAL],[",",new nr("unquote"),lr.LITERAL],["'>",new nr("quote-promise"),lr.LITERAL]];Object.defineProperty(lr,"builtin",{writable:false,value:vr.map(function(e){return e[0]})});vr.forEach(function(e){var t=F(e,3),r=t[0],n=t[1],i=t[2];lr.append(r,n,i)});var _r=function(){function p(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.whitespace,i=n===void 0?false:n;y(this,p);xr(this,"__input__",e.replace(/\r/g,""));var u={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(r){Object.defineProperty(t,r,{configurable:false,enumerable:false,get:function e(){return u[r]},set:function e(t){u[r]=t}})});this._whitespace=i;this._i=this._line=this._col=this._newline=0;this._state=this._next=this._token=null;this._prev_char=""}e(p,[{key:"get",value:function e(t){return this.__internal[t]}},{key:"set",value:function e(t,r){this.__internal[t]=r}},{key:"token",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){var r=this._line;if(this._whitespace&&this._token==="\n"){--r}return{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._i>=this.__input__.length){return su}if(this._token){return this.token(t)}var r=this.next_token();if(r){this._token=this.__input__.substring(this._i,this._next);return this.token(t)}return su}},{key:"skip",value:function e(){if(this._next!==null){this._token=null;this._i=this._next}}},{key:"read_line",value:function e(){var t=this.__input__.length;if(this._i>=t){return su}for(var r=this._i;r<t;++r){var n=this.__input__[r];if(n==="\n"){var i=this.__input__.substring(this._i,r);this._i=r+1;++this._line;return i}}return this.read_rest()}},{key:"read_rest",value:function e(){var t=this._i;this._i=this.__input__.length;return this.__input__.substring(t)}},{key:"read_string",value:function e(t){var r=this.__input__.length;if(this._i>=r){return su}if(t+this._i>=r){return this.read_rest()}var n=this._i+t;var i=this.__input__.substring(this._i,n);var u=i.match(/\n/g);if(u){this._line+=u.length}this._i=n;return i}},{key:"peek_char",value:function e(){if(this._i>=this.__input__.length){return su}return Mi(this.__input__[this._i])}},{key:"read_char",value:function e(){var t=this.peek_char();this.skip_char();return t}},{key:"skip_char",value:function e(){if(this._i<this.__input__.length){++this._i;this._token=null}}},{key:"match_rule",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.prev_char,i=r["char"],u=r.next_char;var a=F(t,4),o=a[0],s=a[1],c=a[2],f=a[3];if(t.length!==5){throw new Error("Lexer: Invald rule of length ".concat(t.length))}if(!i.match(o)){return false}if(!mr(s,n)){return false}if(!mr(c,u)){return false}if(f!==this._state){return false}return true}},{key:"next_token",value:function e(){if(this._i>=this.__input__.length){return false}var t=true;e:for(var r=this._i,n=this.__input__.length;r<n;++r){var i=this.__input__[r];var u=this.__input__[r-1]||"";var a=this.__input__[r+1]||"";if(i==="\n"){++this._line;var o=this._newline;if(this._state===null){this._newline=r+1}if(this._whitespace&&this._state===null){this._next=r+1;this._col=this._i-o;return true}}if(t&&this._state===null&&i.match(/\s/)){if(this._whitespace){if(!a.match(/\s/)){this._next=r+1;this._col=this._i-this._newline;return true}else{continue}}else{this._i=r+1;continue}}t=false;var s=Xe(p.rules),c;try{for(s.s();!(c=s.n()).done;){var f=c.value;if(this.match_rule(f,{prev_char:u,char:i,next_char:a})){var l=f[f.length-1];this._state=l;if(this._state===null){this._next=r+1;this._col=this._i-this._newline;return true}continue e}}}catch(e){s.e(e)}finally{s.f()}if(this._state!==null){continue e}var h=this.__input__.split("\n")[this._line];throw new Error("Invalid Syntax at line ".concat(this._line,"\n").concat(h))}}}]);return p}();_r.symbol_rule=function e(t,r){var n=_r.literal_rule(t,r,_r.boundary,/\S/);return n.concat([[/\S/,/\S/,_r.boundary,null,null],[/\S/,/\S/,null,null,_r.symbol],[/\S/,null,_r.boundary,_r.symbol,null]])};_r.literal_rule=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(t.length===0){throw new Error("Lexer: invalid literal rule")}if(t.length===1){return[[t,n,i,null,null]]}var u=[];for(var a=0,o=t.length;a<o;++a){var s=[];s.push(t[a]);s.push(t[a-1]||n);s.push(t[a+1]||i);if(a===0){s.push(null);s.push(r)}else if(a===o-1){s.push(r);s.push(null)}else{s.push(r);s.push(r)}u.push(s)}return u};_r.string=Symbol["for"]("string");_r.symbol=Symbol["for"]("symbol");_r.comment=Symbol["for"]("comment");_r.regex=Symbol["for"]("regex");_r.regex_class=Symbol["for"]("regex_class");_r.character=Symbol["for"]("character");_r.bracket=Symbol["for"]("bracket");_r.b_symbol=Symbol["for"]("b_symbol");_r.b_comment=Symbol["for"]("b_comment");_r.i_comment=Symbol["for"]("i_comment");_r.l_datum=Symbol["for"]("l_datum");_r.dot=Symbol["for"]("dot");_r.boundary=/^$|[\s()[\]']/;_r._rules=[[/"/,/^$|[^\\]/,null,null,_r.string],[/"/,/^$|[^\\]/,null,_r.string,null],[/#/,null,/[bdxoeitf]/i,null,_r.symbol],[/#/,null,/\\/,null,_r.character],[/\\/,/#/,/\s/,_r.character,_r.character],[/\\/,/#/,/[()[\]]/,_r.character,_r.character],[/\s/,/\\/,null,_r.character,null],[/\S/,null,_r.boundary,_r.character,null],[/#/,_r.boundary,/\//,null,_r.regex],[/[ \t]/,null,null,_r.regex,_r.regex],[/\[/,null,null,_r.regex,_r.regex_class],[/\]/,/[^\\]/,null,_r.regex_class,_r.regex],[/[()[\]]/,null,null,_r.regex,_r.regex],[/\//,/\\/,null,_r.regex,_r.regex],[/\//,/[^#]/,_r.boundary,_r.regex,null],[/[gimyus]/,/\//,_r.boundary,_r.regex,null],[/[gimyus]/,/\//,/[gimyus]/,_r.regex,_r.regex],[/[gimyus]/,/[gimyus]/,_r.boundary,_r.regex,null],[/;/,/^$|[^#]/,null,null,_r.comment],[/[\s\S]/,null,/\n/,_r.comment,null],[/\s/,null,null,_r.comment,_r.comment],[/#/,null,/\|/,null,_r.b_comment],[/\s/,null,null,_r.b_comment,_r.b_comment],[/#/,/\|/,null,_r.b_comment,null],[/#/,null,/;/,null,_r.i_comment],[/;/,/#/,null,_r.i_comment,null],[/#/,null,/[0-9]/,null,_r.l_datum],[/=/,/[0-9]/,null,_r.l_datum,null],[/#/,/[0-9]/,null,_r.l_datum,null],[/\./,_r.boundary,/,/,null,null],[/\|/,null,null,null,_r.b_symbol],[/\s/,null,null,_r.b_symbol,_r.b_symbol],[/\|/,null,_r.boundary,_r.b_symbol,null]];_r._brackets=[[/[()[\]]/,null,null,null,null]];_r._symbol_rules=[[/\S/,_r.boundary,_r.boundary,null,null],[/\S/,_r.boundary,null,null,_r.symbol],[/\S/,null,_r.boundary,null,null],[/\S/,null,null,null,_r.symbol],[/\S/,null,_r.boundary,_r.symbol,null]];_r._cache={valid:false,rules:null};lr.on(["remove","append"],function(){_r._cache.valid=false;_r._cache.rules=null});Object.defineProperty(_r,"rules",{get:function e(){if(_r._cache.valid){return _r._cache.rules}var t=lr.names().sort(function(e,t){return t.length-e.length||e.localeCompare(t)});var r=t.reduce(function(e,t){var r=lr.get(t),n=r.type,i=r.symbol;var u;var a;if(t[0]==="#"){if(t.length===1){a=Symbol["for"](t)}else{a=Symbol["for"](t[1])}}else{a=i}if(n===lr.SYMBOL){u=_r.symbol_rule(t,a)}else{u=_r.literal_rule(t,a)}return e.concat(u)},[]);_r._cache.rules=_r._rules.concat(_r._brackets,r,_r._symbol_rules);_r._cache.valid=true;return _r._cache.rules}});function mr(e,t){return e===null||t.match(e)}var yr=function(){function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.env,n=t.meta,i=n===void 0?false:n,u=t.formatter,a=u===void 0?Wt:u;y(this,o);if(e instanceof Ci){e=e.toString()}xr(this,"_formatter",a,{hidden:true});xr(this,"__lexer__",new _r(e));xr(this,"__env__",r);xr(this,"_meta",i,{hidden:true});xr(this,"_refs",[],{hidden:true})}e(o,[{key:"resolve",value:function e(t){return this.__env__&&this.__env__.get(t,{throwError:false})}},{key:"peek",value:function(){var e=k(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=this.__lexer__.peek(true);if(!(r===su)){t.next=4;break}return t.abrupt("return",su);case 4:if(!this.is_comment(r.token)){t.next=7;break}this.skip();return t.abrupt("continue",0);case 7:if(!(r.token==="#;")){t.next=14;break}this.skip();if(!(this.__lexer__.peek()===su)){t.next=11;break}throw new Error("Lexer: syntax error eof found after comment");case 11:t.next=13;return this._read_object();case 13:return t.abrupt("continue",0);case 14:return t.abrupt("break",17);case 17:r=this._formatter(r);if(!this._meta){t.next=20;break}return t.abrupt("return",r);case 20:return t.abrupt("return",r.token);case 21:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function e(){this._refs.length=0}},{key:"skip",value:function e(){this.__lexer__.skip()}},{key:"read",value:function(){var e=k(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"match_datum_label",value:function e(t){var r=t.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"match_datum_ref",value:function e(t){var r=t.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"is_open",value:function e(t){return["(","["].includes(t)}},{key:"is_close",value:function e(t){return[")","]"].includes(t)}},{key:"read_list",value:function(){var e=k(j.mark(function e(){var r,n,i,u;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=Xr,n=r;case 1:t.next=4;return this.peek();case 4:i=t.sent;if(!(i===su)){t.next=7;break}return t.abrupt("break",27);case 7:if(!this.is_close(i)){t.next=10;break}this.skip();return t.abrupt("break",27);case 10:if(!(i==="."&&r!==Xr)){t.next=17;break}this.skip();t.next=14;return this._read_object();case 14:n.cdr=t.sent;t.next=25;break;case 17:t.t0=en;t.next=20;return this._read_object();case 20:t.t1=t.sent;t.t2=Xr;u=new t.t0(t.t1,t.t2);if(r===Xr){r=u}else{n.cdr=u}n=u;case 25:t.next=1;break;case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"read_value",value:function(){var e=k(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.read();case 2:r=t.sent;if(!(r===su)){t.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return t.abrupt("return",zt(r));case 6:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"is_comment",value:function e(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function e(t){return Wu(t,{env:this.__env__,error:function e(t){throw t}})}},{key:"read_object",value:function(){var e=k(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:this.reset();t.next=3;return this._read_object();case 3:r=t.sent;if(r instanceof gr){r=r.valueOf()}if(!this._refs.length){t.next=7;break}return t.abrupt("return",this._resolve_object(r));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_resolve_object",value:function(){var t=k(j.mark(function e(r){var n=this;var i;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!Array.isArray(r)){t.next=2;break}return t.abrupt("return",r.map(function(e){return n._resolve_object(e)}));case 2:if(!nn(r)){t.next=6;break}i={};Object.keys(r).forEach(function(e){i[e]=n._resolve_object(r[e])});return t.abrupt("return",i);case 6:if(!(r instanceof en)){t.next=8;break}return t.abrupt("return",this._resolve_pair(r));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_resolve_pair",value:function(){var t=k(j.mark(function e(r){return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof en)){t.next=15;break}if(!(r.car instanceof gr)){t.next=7;break}t.next=4;return r.car.valueOf();case 4:r.car=t.sent;t.next=8;break;case 7:this._resolve_pair(r.car);case 8:if(!(r.cdr instanceof gr)){t.next=14;break}t.next=11;return r.cdr.valueOf();case 11:r.cdr=t.sent;t.next=15;break;case 14:this._resolve_pair(r.cdr);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_read_object",value:function(){var e=k(j.mark(function e(){var r,n,i,u,a,o,s,c,f;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;if(!(r===su)){t.next=5;break}return t.abrupt("return",r);case 5:if(!hr(r)){t.next=35;break}n=lr.get(r);i=pr(r);this.skip();t.next=11;return this._read_object();case 11:a=t.sent;if(i){t.next=22;break}o=this.__env__.get(n.symbol);if(!(typeof o==="function")){t.next=22;break}if(!dr(r)){t.next=19;break}return t.abrupt("return",o.call(this.__env__,a));case 19:if(!(a instanceof en)){t.next=21;break}return t.abrupt("return",o.apply(this.__env__,a.to_array(false)));case 21:throw new Error("Parse Error: Invalid parser extension "+"invocation ".concat(n.symbol));case 22:if(dr(r)){u=new en(n.symbol,new en(a,Xr))}else{u=new en(n.symbol,a)}if(!i){t.next=25;break}return t.abrupt("return",u);case 25:if(!(o instanceof An)){t.next=34;break}t.next=28;return this.evaluate(u);case 28:s=t.sent;if(!(s instanceof en||s instanceof nr)){t.next=31;break}return t.abrupt("return",en.fromArray([nr("quote"),s]));case 31:return t.abrupt("return",s);case 34:throw new Error("Parse Error: invlid parser extension: "+n.symbol);case 35:c=this.match_datum_ref(r);if(!(c!==null)){t.next=41;break}this.skip();if(!this._refs[c]){t.next=40;break}return t.abrupt("return",new gr(c,this._refs[c]));case 40:throw new Error("Parse Error: invalid datum label #".concat(c,"#"));case 41:f=this.match_datum_label(r);if(!(f!==null)){t.next=48;break}this.skip();this._refs[f]=this._read_object();return t.abrupt("return",this._refs[f]);case 48:if(!this.is_open(r)){t.next=53;break}this.skip();return t.abrupt("return",this.read_list());case 53:return t.abrupt("return",this.read_value());case 54:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return o}();var gr=function(){function r(e,t){y(this,r);this.name=e;this.data=t}e(r,[{key:"valueOf",value:function e(){return this.data}}]);return r}();function br(e,t){return wr.apply(this,arguments)}function wr(){wr=O(j.mark(function e(r,n){var i,u;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!n){if(Fu){n=Fu.get("**interaction-environment**",{throwError:false})}else{n=Eu}}i=new yr(r,{env:n});case 2:t.next=5;return A(i.read_object());case 5:u=t.sent;if(!(u===su)){t.next=8;break}return t.abrupt("break",12);case 8:t.next=10;return u;case 10:t.next=2;break;case 12:case"end":return t.stop()}}},e)}));return wr.apply(this,arguments)}function Dr(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(Rn(e)){var n=e.then(t);if(r===null){return n}else{return n["catch"](r)}}if(e instanceof Array){return Fr(e,t,r)}if(nn(e)){return Er(e,t,r)}return t(e)}function Fr(t,e,r){if(t.find(Rn)){return Dr(sr(t),function(e){if(Object.isFrozen(t)){Object.freeze(e)}return e},r)}return e(t)}function Er(t,e,r){var i=Object.keys(t);var n=[],u=[];var a=i.length;while(a--){var o=i[a];var s=t[o];n[a]=s;if(Rn(s)){u.push(s)}}if(u.length){return Dr(sr(n),function(e){var n={};e.forEach(function(e,t){var r=i[t];n[r]=e});if(Object.isFrozen(t)){Object.freeze(n)}return n},r)}return e(t)}function xr(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=n.hidden,u=i===void 0?false:i;Object.defineProperty(e,t,{value:r,configurable:true,enumerable:!u})}function Ar(r){var n,i,u,a,o,s,c,f;return j.async(function e(t){while(1){switch(t.prev=t.next){case 0:n=[];i=true;u=false;t.prev=3;o=E(r);case 5:t.next=7;return j.awrap(o.next());case 7:s=t.sent;i=s.done;t.next=11;return j.awrap(s.value);case 11:c=t.sent;if(i){t.next=18;break}f=c;n.push(f);case 15:i=true;t.next=5;break;case 18:t.next=24;break;case 20:t.prev=20;t.t0=t["catch"](3);u=true;a=t.t0;case 24:t.prev=24;t.prev=25;if(!(!i&&o["return"]!=null)){t.next=29;break}t.next=29;return j.awrap(o["return"]());case 29:t.prev=29;if(!u){t.next=32;break}throw a;case 32:return t.finish(29);case 33:return t.finish(24);case 34:return t.abrupt("return",n);case 35:case"end":return t.stop()}}},null,null,[[3,20,24,34],[25,,29,33]],Promise)}function Mr(e,t){if(t instanceof RegExp){return function(e){return String(e).match(t)}}else if(Pn(t)){return t}throw new Error("Invalid matcher")}function Cr(e,t,r,n){if(typeof e!=="string"){t=arguments[0];r=arguments[1];n=arguments[2];e=null}if(r){if(n){t.__doc__=r}else{t.__doc__=kr(r)}}if(e){t.__name__=e}else if(t.name&&!li(t)){t.__name__=t.name}return t}function kr(e){return e.split("\n").map(function(e){return e.trim()}).join("\n")}function Or(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=e.length;if(t<=0){throw Error("previousSexp: Invalid argument sexp = ".concat(t))}e:while(t--&&r>=0){var n=1;while(n>0){var i=e[--r];if(!i){break e}if(i==="("||i.token==="("){n--}else if(i===")"||i.token===")"){n++}}r--}return e.slice(r+1)}function Sr(e){if(!e||!e.length){return 0}var t=e.length;if(e[t-1].token==="\n"){return 0}while(--t){if(e[t].token==="\n"){var r=(e[t+1]||{}).token;if(r){return r.length}}}return 0}function Br(e,t){return f(e,t)===t.length;function f(r,n){function e(e,t){var r=Xe(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;var u=f(i,t);if(u!==-1){return u}}}catch(e){r.e(e)}finally{r.f()}return-1}function t(){return r[u]===Symbol["for"]("symbol")&&!Yt(n[o])}function i(){var e=r[u+1];var t=n[o+1];if(e!==undefined&&t!==undefined){return f([e],[t])}}var u=0;var a={};for(var o=0;o<n.length;++o){if(typeof r[u]==="undefined"){return o}if(r[u]instanceof Nr){var s;if(["+","*"].includes(r[u].flag)){while(o<n.length){s=e(r[u].patterns,n.slice(o));if(s===-1){break}o+=s}o-=1;u++;continue}else if(r[u].flag==="?"){s=e(r[u].patterns,n.slice(o));if(s===-1){o-=2}else{u++}continue}}else if(r[u]instanceof RegExp){if(!n[o].match(r[u])){return-1}}else if(Ca.LString.isString(r[u])){if(r[u].valueOf()!==n[o]){return-1}}else if(d(r[u])==="symbol"){if(r[u]===Symbol["for"]("*")){a[u]=a[u]||0;if(["(","["].includes(n[o])){a[u]++}else if([")","]"].includes(n[o])){a[u]--}if(typeof r[u+1]!=="undefined"&&a[u]===0&&i()===-1||a[u]>0){continue}}else if(t()){return-1}}else if(r[u]instanceof Array){var c=f(r[u],n.slice(o));if(c===-1||c+o>n.length){return-1}o+=c-1;u++;continue}else{return-1}u++}if(r.length!==u){return-1}return n.length}}function jr(e){this.__code__=e.replace(/\r/g,"")}jr.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*)?)$/],shift:{1:["&","#"]}}};jr.match=Br;jr.prototype._options=function e(t){var r=jr.defaults;if(typeof t==="undefined"){return Object.assign({},r)}var n=t&&t.exceptions||{};var i=n.specials||[];var u=n.shift||{1:[]};return nt(nt(nt({},r),t),{},{exceptions:{specials:[].concat(C(r.exceptions.specials),C(i)),shift:nt(nt({},u),{},{1:[].concat(C(r.exceptions.shift[1]),C(u[1]))})}})};jr.prototype.indent=function e(t){var r=er(this.__code__,true);return this._indent(r,t)};jr.exception_shift=function(u,e){function t(e){if(!e.length){return false}if(e.indexOf(u)!==-1){return true}else{var t=e.filter(function(e){return e instanceof RegExp});if(!t.length){return false}var r=Xe(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(u.match(i)){return true}}}catch(e){r.e(e)}finally{r.f()}}return false}if(t(e.exceptions.specials)){return e.indent}var r=e.exceptions.shift;for(var n=0,i=Object.entries(r);n<i.length;n++){var a=F(i[n],2),o=a[0],s=a[1];if(t(s)){return+o}}return-1};jr.prototype._indent=function e(t,r){var n=this._options(r);var i=Sr(t);var u=Or(t);var a=t[t.length-u.length-1];var o=t[t.length-1];if(o.token.match(/^"[\S\s]+[^"]$/)){return i+n.indent}if(u&&u.length){if(u[0].line>0){n.offset=0}if(u.toString()===t.toString()&&ea(u)){return n.offset+u[0].col}else if(u.length===1){return n.offset+u[0].col+1}else{var s=-1;if(a){var c=jr.exception_shift(a.token,n);if(c!==-1){s=c}}if(s===-1){s=jr.exception_shift(u[1].token,n)}if(s!==-1){return n.offset+u[0].col+s}else if(u[0].line<u[1].line){return n.offset+u[0].col+1}else if(u.length>3&&u[1].line===u[3].line){if(u[1].token==="("||u[1].token==="["){return n.offset+u[1].col}return n.offset+u[3].col}else if(u[0].line===u[1].line){return n.offset+n.indent+u[0].col}else{var f=u.slice(2);for(var l=0;l<f.length;++l){var h=f[l];if(h.token.trim()){return h.col}}}}}else{return 0}return i+n.indent};function Ir(e){this.pattern=e}Ir.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};Ir.prototype.match=function(e){return e.match(this.pattern)};function Nr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t.pop();this.patterns=t;this.flag=n}Nr.prototype.toString=function(){var e=this.patterns.map(function(e){return mn(e)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};jr.Pattern=Nr;jr.Ahead=Ir;var Pr=/^[[(]$/;var Lr=/^[\])]$/;var qr=/[^()[\]]/;var Rr=new Ir(/[^)\]]/);var Tr=Symbol["for"]("*");var Ur=new Nr([Pr,Tr,Lr],[qr],"+");var $r=new Nr([Pr,Tr,Lr],"+");var zr=new Nr([Symbol["for"]("symbol")],"?");var Vr=new Nr([Symbol["for"]("symbol")],"*");var Yr=[Pr,Vr,Lr];var Zr=new Nr([Pr,Symbol["for"]("symbol"),Tr,Lr],"+");var Hr=Wr("define","lambda","define-macro","syntax-rules");var Jr=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/;var Gr=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;function Wr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}jr.rules=[[[$r],0,Rr],[[Pr,Wr("begin","cond-expand")],1],[[Pr,Gr,zr,Pr,Zr,Lr],1],[[Pr,Gr,zr,Ur],1,Rr],[[Pr,Gr,Pr,Zr],1,Rr],[[Pr,Jr,new Nr([/[^()[\]]/],"+"),$r],1,Rr],[[Pr,$r],1,Rr],[[Pr,qr,$r],1,Rr],[[Pr,Wr("lambda","if"),qr],1,Rr],[[Pr,Wr("while"),qr,$r],1,Rr],[[Pr,Wr("if"),qr,Tr],1],[[Pr,Hr,Yr],0,Rr],[[Pr,Hr,Yr,Zt],0,Rr],[[Pr,Hr,Yr,Zt,$r],0,Rr],[[Pr,Hr,Yr,$r],0,Rr]];jr.prototype["break"]=function(){var e=this.__code__.replace(/\n[ \t]*/g,"\n ").replace(/^\s+/,"");var t=function e(t){if(t.token.match(Zt)||t.token.match(ht)){return t.token}else{return t.token.replace(/\s+/," ")}};var r=function e(t){for(var r=t.length;r--;){var n=t[r];if(n.trim()&&!hr(n)){return t.length-r-1}}};var n=er(e,true).map(t).filter(function(e){return e!=="\n"});var i=jr.rules;e:for(var u=1;u<n.length;++u){if(!n[u].trim()){continue}var a=n.slice(0,u);var o={};i.map(function(e){return e[1]}).forEach(function(e){e=e.valueOf();if(e>0&&!o[e]){o[e]=Or(a,e)}});var s=Xe(i),c;try{for(s.s();!(c=s.n()).done;){var f=F(c.value,3),l=f[0],h=f[1],p=f[2];h=h.valueOf();var d=h>0?o[h]:a;var v=d.filter(function(e){return e.trim()&&!hr(e)});var _=r(d);var m=Br(l,v);var y=n.slice(u).find(function(e){return e.trim()&&!hr(e)});if(m&&(p instanceof Ir&&p.match(y)||!p)){var g=u-_;if(n[g]!=="\n"){if(!n[g].trim()){n[g]="\n"}else{n.splice(g,0,"\n");u++}}u+=_;continue e}}}catch(e){s.e(e)}finally{s.f()}}this.__code__=n.join("");return this};jr.prototype._spaces=function(e){return new Array(e+1).join(" ")};jr.prototype.format=function e(t){var r=this.__code__.replace(/[ \t]*\n[ \t]*/g,"\n ");var n=er(r,true);var i=this._options(t);var u=0;var a=0;for(var o=0;o<n.length;++o){var s=n[o];if(s.token==="\n"){u=this._indent(n.slice(0,o),i);a+=u;if(n[o+1]){n[o+1].token=this._spaces(u);u--;a--;for(var c=o+2;c<n.length;++c){n[c].offset+=a;n[c].col+=u;if(n[c].token==="\n"){o=c-1;break}}}}}return n.map(function(e){if(e.token.match(Zt)){if(e.token.match(/\n/)){var t=new Array(e.col+1).join(" ");var r=e.token.split("\n");e.token=[r[0]].concat(r.slice(1).map(function(e){return t+e})).join("\n")}}return e.token}).join("")};function Kr(e,t){var r=Object.prototype.toString;var n="[object Array]";var i=[];var u=t&&e||e.slice();var a;if(!e.length){return i}a=u.pop();do{if(r.call(a)===n){u.push.apply(u,a)}else{i.push(a)}}while(u.length&&(a=u.pop())!==undefined);i.reverse();return i}function Qr(){}Qr.prototype.toString=function(){return"()"};Qr.prototype.valueOf=function(){return undefined};Qr.prototype.serialize=function(){return 0};Qr.prototype.to_object=function(){return{}};Qr.prototype.append=function(e){return new en(e,Xr)};Qr.prototype.to_array=function(){return[]};var Xr=new Qr;function en(e,t){if(typeof this!=="undefined"&&this.constructor!==en||typeof this==="undefined"){return new en(e,t)}this.car=e;this.cdr=t}function tn(u,a){return function e(t){Pu(u,t,["pair","nil"]);if(t===Xr){return[]}var r=[];var n=t;while(true){if(n instanceof en){if(n.haveCycles("cdr")){break}var i=n.car;if(a&&i instanceof en){i=this.get(u).call(this,i)}r.push(i);n=n.cdr}else if(n===Xr){break}else{throw new Error("".concat(u,": can't convert improper list"))}}return r}}en.prototype.flatten=function(){return en.fromArray(Kr(this.to_array()))};en.prototype.length=function(){var e=0;var t=this;while(true){if(!t||t===Xr||!(t instanceof en)||t.haveCycles("cdr")){break}e++;t=t.cdr}return e};en.match=function(e,t){if(e instanceof nr){return nr.is(e,t)}else if(e instanceof en){return en.match(e.car,t)||en.match(e.cdr,t)}else if(Array.isArray(e)){return e.some(function(e){return en.match(e,t)})}else if(nn(e)){return Object.values(e).some(function(e){return en.match(e,t)})}return false};en.prototype.find=function(e){return en.match(this,e)};en.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=new Map;function i(e){if(e instanceof en){if(n.has(e)){return n.get(e)}var t=new en;n.set(e,t);if(r){t.car=i(e.car)}else{t.car=e.car}t.cdr=i(e.cdr);t[ri]=e[ri];return t}return e}return i(this)};en.prototype.last_pair=function(){var e=this;while(true){if(e.cdr===Xr){return e}e=e.cdr}};en.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=[];if(this.car instanceof en){if(e){t.push(this.car.to_array())}else{t.push(this.car)}}else{t.push(this.car.valueOf())}if(this.cdr instanceof en){t=t.concat(this.cdr.to_array())}return t};en.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof en||r&&e instanceof Array&&e[ei]){return e}if(t===false){var n=Xr;for(var i=e.length;i--;){n=new en(e[i],n)}return n}if(e.length&&!(e instanceof Array)){e=C(e)}var u=Xr;var a=e.length;while(a--){var o=e[a];if(o instanceof Array){o=en.fromArray(o,t,r)}else if(typeof o==="string"){o=Ci(o)}else if(typeof o==="number"&&!Number.isNaN(o)){o=Ni(o)}u=new en(o,u)}return u};en.prototype.to_object=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this;var r={};while(true){if(t instanceof en&&t.car instanceof en){var n=t.car;var i=n.car;if(i instanceof nr){i=i.__name__}if(i instanceof Ci){i=i.valueOf()}var u=n.cdr;if(u instanceof en){u=u.to_object(e)}if(qu(u)){if(!e){u=u.valueOf()}}r[i]=u;t=t.cdr}else{break}}return r};en.fromPairs=function(e){return e.reduce(function(e,t){return new en(new en(new nr(t[0]),t[1]),e)},Xr)};en.fromObject=function(t){var e=Object.keys(t).map(function(e){return[e,t[e]]});return en.fromPairs(e)};en.prototype.reduce=function(e){var t=this;var r=Xr;while(true){if(t!==Xr){r=e(r,t.car);t=t.cdr}else{break}}return r};en.prototype.reverse=function(){if(this.haveCycles()){throw new Error("You can't reverse list that have cycles")}var e=this;var t=Xr;while(e!==Xr){var r=e.cdr;e.cdr=t;t=e;e=r}return t};en.prototype.transform=function(n){function i(e){if(e instanceof en){if(e.replace){delete e.replace;return e}var t=n(e.car);if(t instanceof en){t=i(t)}var r=n(e.cdr);if(r instanceof en){r=i(r)}return new en(t,r)}return e}return i(this)};en.prototype.map=function(e){if(typeof this.car!=="undefined"){return new en(e(this.car),this.cdr===Xr?Xr:this.cdr.map(e))}else{return Xr}};var rn=new Map;function nn(e){return e&&d(e)==="object"&&e.constructor===Object}var un=Object.getOwnPropertyNames(Array.prototype);var an=[];un.forEach(function(e){an.push(Array[e],Array.prototype[e])});function on(e){e=Yn(e);return an.includes(e)}function sn(e){return Pn(e)&&(li(e)||e.__doc__)}function cn(r){var e=r.constructor||Object;var n=nn(r);var i=Pn(r[Symbol.asyncIterator])||Pn(r[Symbol.iterator]);var u;if(rn.has(e)){u=rn.get(e)}else{rn.forEach(function(e,t){t=Yn(t);if(r.constructor===t&&(t===Object&&n&&!i||t!==Object)){u=e}})}return u}var fn=new Map;[[true,"#t"],[false,"#f"],[null,"null"],[undefined,"#<undefined>"]].forEach(function(e){var t=F(e,2),r=t[0],n=t[1];fn.set(r,n)});function ln(r){if(r&&d(r)==="object"){var n={};var e=Object.getOwnPropertySymbols(r);e.forEach(function(e){var t=e.toString().replace(/Symbol\(([^)]+)\)/,"$1");n[t]=mn(r[e])});var t=Object.getOwnPropertyNames(r);t.forEach(function(e){var t=r[e];if(t&&d(t)==="object"&&t.constructor===Object){n[e]=ln(t)}else{n[e]=mn(t)}});return n}return r}function hn(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function pn(e,t){return e.hasOwnProperty(t)&&Pn(e.toString)}function dn(e){if(di(e)){return"#<procedure(native)>"}var t=e.prototype&&e.prototype.constructor;if(Pn(t)&&li(t)){if(e[ni]&&t.hasOwnProperty("__name__")){var r=t.__name__;if(Ci.isString(r)){r=r.toString();return"#<class:".concat(r,">")}return"#<class>"}}if(e.hasOwnProperty("__name__")){var n=e.__name__;if(d(n)==="symbol"){n=ir(n)}if(typeof n==="string"){return"#<procedure:".concat(n,">")}}if(pn(e,"toString")){return e.toString()}else if(e.name&&!li(e)){return"#<procedure:".concat(e.name.trim(),">")}else{return"#<procedure>"}}var vn=new Map;[[Error,function(e){return e.message}],[en,function(e,t){var r=t.quote,n=t.skip_cycles,i=t.pair_args;if(!n){e.markCycles()}return e.toString.apply(e,[r].concat(C(i)))}],[Mi,function(e,t){var r=t.quote;if(r){return e.toString()}return e.valueOf()}],[Ci,function(e,t){var r=t.quote;e=e.toString();if(r){return JSON.stringify(e).replace(/\\n/g,"\n")}return e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=F(e,2),r=t[0],n=t[1];vn.set(r,n)});var _n=[nr,Ni,An,du,Wi,Ki,hu,or];function mn(e,t,r){if(typeof jQuery!=="undefined"&&e instanceof jQuery.fn.init){return"#<jQuery("+e.length+")>"}if(fn.has(e)){return fn.get(e)}if(yn(e)){return"#<prototype>"}if(e){var n=e.constructor;if(vn.has(n)){for(var i=arguments.length,u=new Array(i>3?i-3:0),a=3;a<i;a++){u[a-3]=arguments[a]}return vn.get(n)(e,{quote:t,skip_cycles:r,pair_args:u})}}var o=Xe(_n),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;if(e instanceof c){return e.toString(t)}}}catch(e){o.e(e)}finally{o.f()}if([Xr,su].includes(e)){return e.toString()}if(Pn(e)){return dn(e)}if(e===it){return"#<js:global>"}if(e===null){return"null"}if(d(e)==="object"){var f=e.constructor;if(!f){f=Object}var l;if(typeof f.__class__==="string"){l=f.__class__}else{var h=cn(e);if(h){if(Pn(h)){return h(e,t)}else{throw new Error("toString: Invalid repr value")}}l=f.name}if(Pn(e.toString)&&li(e.toString)){return e.toString().valueOf()}if(Uu(e)==="instance"){if(li(f)&&f.__name__){l=f.__name__.valueOf()}else if(!di(f)){l="instance"}}if(Tu(e,Symbol.iterator)){if(l){return"#<iterator(".concat(l,")>")}return"#<iterator>"}if(Tu(e,Symbol.asyncIterator)){if(l){return"#<asyncIterator(".concat(l,")>")}return"#<asyncIterator>"}if(l!==""){return"#<"+l+">"}return"#<Object>"}if(typeof e!=="string"){return e.toString()}return e}function yn(e){return e&&d(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor==="function"&&e.constructor.prototype===e}en.prototype.markCycles=function(){gn(this);return this};en.prototype.haveCycles=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){return this.haveCycles("car")||this.haveCycles("cdr")}return!!(this[ri]&&this[ri][e])};function gn(e){var t=[];var i=[];var u=[];function a(e){if(!t.includes(e)){t.push(e)}}function o(e,t,r,n){if(r instanceof en){if(n.includes(r)){if(!u.includes(r)){u.push(r)}if(!e[ri]){e[ri]={}}e[ri][t]=r;if(!i.includes(e)){i.push(e)}return true}}}var s=Qt(function e(t,r){if(t instanceof en){delete t.ref;delete t[ri];a(t);r.push(t);var n=o(t,"car",t.car,r);var i=o(t,"cdr",t.cdr,r);if(!n){s(t.car,r.slice())}if(!i){return new Kt(function(){return e(t.cdr,r.slice())})}}});function r(e,t){if(e[ri][t]instanceof en){var r=n.indexOf(e[ri][t]);e[ri][t]="#".concat(r,"#")}}s(e,[]);var n=t.filter(function(e){return u.includes(e)});n.forEach(function(e,t){e[ti]="#".concat(t,"=")});i.forEach(function(e){r(e,"car");r(e,"cdr")})}en.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.nested,n=r===void 0?false:r;var i=[];if(this[ti]){i.push(this[ti]+"(")}else if(!n){i.push("(")}var u;if(this[ri]&&this[ri].car){u=this[ri].car}else{u=mn(this.car,e,true)}if(u!==undefined){i.push(u)}if(this.cdr instanceof en){if(this[ri]&&this[ri].cdr){i.push(" . ");i.push(this[ri].cdr)}else{if(this.cdr[ti]){i.push(" . ")}else{i.push(" ")}var a=this.cdr.toString(e,{nested:true});i.push(a)}}else if(this.cdr!==Xr){i=i.concat([" . ",mn(this.cdr,e,true)])}if(!n||this[ti]){i.push(")")}return i.join("")};en.prototype.set=function(e,t){this[e]=t;if(t instanceof en){this.markCycles()}};en.prototype.append=function(e){if(e instanceof Array){return this.append(en.fromArray(e))}var t=this;if(t.car===undefined){if(e instanceof en){this.car=e.car;this.cdr=e.cdr}else{this.car=e}}else if(e!==Xr){while(true){if(t instanceof en&&t.cdr!==Xr){t=t.cdr}else{break}}t.cdr=e}return this};en.prototype.serialize=function(){return[this.car,this.cdr]};en.prototype[Symbol.iterator]=function(){var r=this;return{next:function e(){var t=r;r=t.cdr;if(t===Xr){return{value:undefined,done:true}}else{return{value:t.car,done:false}}}}};function bn(e){return e<0?-e:e}function wn(e,t){var r=h(t),n=r[0],i=r.slice(1);while(i.length>0){var u=i,a=F(u,1),o=a[0];if(!e(n,o)){return false}var s=i;var c=h(s);n=c[0];i=c.slice(1)}return true}function Dn(e,t){if(Pn(e)){return Pn(t)&&Yn(e)===Yn(t)}else if(e instanceof Ni){if(!(t instanceof Ni)){return false}var r;if(e.__type__===t.__type__){if(e.__type__==="complex"){r=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__}else{r=true}if(r&&e.cmp(t)===0){if(e.valueOf()===0){return Object.is(e.valueOf(),t.valueOf())}return true}}return false}else if(typeof e==="number"){if(typeof t!=="number"){return false}if(Number.isNaN(e)){return Number.isNaN(t)}if(e===Number.NEGATIVE_INFINITY){return t===Number.NEGATIVE_INFINITY}if(e===Number.POSITIVE_INFINITY){return t===Number.POSITIVE_INFINITY}return Dn(Ni(e),Ni(t))}else if(e instanceof Mi){if(!(t instanceof Mi)){return false}return e.__char__===t.__char__}else{return e===t}}function Fn(e,t){if(Uu(e)!==Uu(t)){return false}if(!En(e)){return false}if(e instanceof RegExp){return e.source===t.source}if(e instanceof Ci){return e.valueOf()===t.valueOf()}return Dn(e,t)}function En(e){return e instanceof nr||Ci.isString(e)||e===Xr||e===null||e instanceof Mi||e instanceof Ni||e===true||e===false}var xn=function(){if(Math.trunc){return Math.trunc}else{return function(e){if(e===0){return 0}else if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}}}();function An(e,t,r,n){if(typeof this!=="undefined"&&this.constructor!==An||typeof this==="undefined"){return new An(e,t)}Pu("Macro",e,"string",1);Pu("Macro",t,"function",2);if(r){if(n){this.__doc__=r}else{this.__doc__=kr(r)}}this.__name__=e;this.__fn__=t}An.defmacro=function(e,t,r,n){var i=new An(e,t,r,n);i.__defmacro__=true;return i};An.prototype.invoke=function(e,t,r){var n=t.env,i=t.dynamic_scope,u=t.error;var a={dynamic_scope:i,error:u,macro_expand:r};var o=this.__fn__.call(n,e,a,this.__name__);return o};An.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var Mn="define-macro";var Cn=-1e4;function kn(c){return function(){var r=k(j.mark(function e(r,y){var u,g,n,i,a,b,w,D,F,E,x,A,o,M,s;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:s=function e(){s=k(j.mark(function e(r,n,i){var u,a,o,s,c,f,l,h,p,d,v,_,m;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof en&&r.car instanceof nr)){t.next=50;break}if(!r[ei]){t.next=3;break}return t.abrupt("return",r);case 3:u=r.car.valueOf();a=i.get(r.car,{throwError:false});o=b(r.car);s=o||w(a,r)||D(a);if(!(s&&r.cdr.car instanceof en)){t.next=28;break}if(!o){t.next=15;break}g=E(r.cdr.car);t.next=12;return A(r.cdr.car,n);case 12:c=t.sent;t.next=17;break;case 15:g=F(r.cdr.car);c=r.cdr.car;case 17:t.t0=en;t.t1=r.car;t.t2=en;t.t3=c;t.next=23;return M(r.cdr.cdr,n,i);case 23:t.t4=t.sent;t.t5=new t.t2(t.t3,t.t4);return t.abrupt("return",new t.t0(t.t1,t.t5));case 28:if(!x(u,a)){t.next=50;break}f=a instanceof On?r:r.cdr;t.next=32;return a.invoke(f,nt(nt({},y),{},{env:i}),true);case 32:l=t.sent;if(!(a instanceof On)){t.next=41;break}h=l,p=h.expr,d=h.scope;if(!(p instanceof en)){t.next=40;break}if(!(n!==-1&&n<=1||n<Cn)){t.next=38;break}return t.abrupt("return",p);case 38:if(n!==-1){n=n-1}return t.abrupt("return",M(p,n,d));case 40:l=p;case 41:if(!(l instanceof nr)){t.next=43;break}return t.abrupt("return",vu(l));case 43:if(!(l instanceof en)){t.next=48;break}if(!(n!==-1&&n<=1||n<Cn)){t.next=46;break}return t.abrupt("return",l);case 46:if(n!==-1){n=n-1}return t.abrupt("return",M(l,n,i));case 48:if(!En(l)){t.next=50;break}return t.abrupt("return",l);case 50:v=r.car;if(!(v instanceof en)){t.next=55;break}t.next=54;return M(v,n,i);case 54:v=t.sent;case 55:_=r.cdr;if(!(_ instanceof en)){t.next=60;break}t.next=59;return M(_,n,i);case 59:_=t.sent;case 60:m=new en(v,_);return t.abrupt("return",m);case 62:case"end":return t.stop()}}},e)}));return s.apply(this,arguments)};M=function e(t,r,n){return s.apply(this,arguments)};o=function e(){o=k(j.mark(function e(r,n){var i;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r===Xr)){t.next=2;break}return t.abrupt("return",Xr);case 2:i=r.car;t.t0=en;t.t1=en;t.t2=i.car;t.next=8;return M(i.cdr,n,u);case 8:t.t3=t.sent;t.t4=new t.t1(t.t2,t.t3);t.next=12;return A(r.cdr);case 12:t.t5=t.sent;return t.abrupt("return",new t.t0(t.t4,t.t5));case 14:case"end":return t.stop()}}},e)}));return o.apply(this,arguments)};A=function e(t,r){return o.apply(this,arguments)};x=function e(t,r){return r instanceof An&&r.__defmacro__&&!g.includes(t)};E=function e(t){return[].concat(C(g),C(t.to_array(false).map(function(e){if(e instanceof en){return e.car.valueOf()}throw new Error("macroexpand: Invalid let binding")})))};F=function e(t){var r=[];while(true){if(t!==Xr){if(t instanceof nr){r.push(t.valueOf());break}r.push(t.car.valueOf());t=t.cdr}else{break}}return[].concat(C(g),r)};D=function e(t){return t===i};w=function e(t,r){return t===a&&r.cdr.car instanceof en};b=function e(t){var r=t.valueOf();return n.includes(r)};u=y["env"]=this;g=[];n=["let","let*","letrec"];i=Fu.get("lambda");a=Fu.get("define");if(!(r.cdr instanceof en&&Ni.isNumber(r.cdr.car))){t.next=21;break}t.t0=vu;t.next=19;return M(r,r.cdr.car.valueOf(),u);case 19:t.t1=t.sent.car;return t.abrupt("return",(0,t.t0)(t.t1));case 21:if(!c){t.next=27;break}t.t2=vu;t.next=25;return M(r,1,u);case 25:t.t3=t.sent.car;return t.abrupt("return",(0,t.t2)(t.t3));case 27:t.t4=vu;t.next=30;return M(r,-1,u);case 30:t.t5=t.sent.car;return t.abrupt("return",(0,t.t4)(t.t5));case 32:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()}function On(e,t){this.__env__=t;this.__fn__=e;this.__defmacro__=true}On.__merge_env__=Symbol["for"]("merge");On.prototype=Object.create(An.prototype);On.prototype.invoke=function(e,t,r){var n=t.error,i=t.env;var u={error:n,env:i,dynamic_scope:this.__env__,macro_expand:r};return this.__fn__.call(i,e,u,this.__name__||"syntax")};On.prototype.constructor=On;On.prototype.toString=function(){if(this.__name__){return"#<syntax:".concat(this.__name__,">")}return"#<syntax>"};On.className="syntax";var Sn=function(e){i(r,e);var t=Ke(r);function r(){y(this,r);return t.apply(this,arguments)}return r}(On);On.Parameter=Sn;function Bn(e,t,w,D){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var F={"...":{symbols:{},lists:[]},symbols:{}};var E=r.expansion,x=r.define;function A(e){if(ot()){console.log(e)}}A(w);function M(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;A({code:t&&mn(t,true),pattern:e&&mn(e,true)});if(En(e)&&!(e instanceof nr)){return Fn(e,t)}if(e instanceof nr&&w.includes(e.literal())){var i=E.ref(t);if(nr.is(t,e)){if(typeof i==="undefined"){return true}return i===x||i===Fu}return false}if(e instanceof en&&e.car instanceof en&&e.car.cdr instanceof en&&nr.is(e.car.cdr.car,D)){A(">> 0");if(t===Xr){A({pattern:e.toString()});if(e.car.car instanceof nr){if(e.car.cdr instanceof en&&nr.is(e.car.cdr.car,D)){var u=e.car.car.valueOf();var a=e.last_pair();if(nr.is(a.car,D)){F["..."].symbols[u]=null;return true}else{return false}}var o=e.car.car.valueOf();if(F["..."].symbols[o]){throw new Error("syntax: named ellipsis can only "+"appear onces")}F["..."].symbols[o]=t}}}if(e instanceof en&&e.cdr instanceof en&&nr.is(e.cdr.car,D)){if(e.cdr.cdr!==Xr){if(e.cdr.cdr instanceof en){var s=e.cdr.cdr.length();var c=t.length();var f=t;while(c-1>s){f=f.cdr;c--}var l=f.cdr;f.cdr=Xr;if(!M(e.cdr.cdr,l,r,n)){return false}}}if(e.car instanceof nr){var h=e.car.__name__;if(F["..."].symbols[h]&&!r.includes(h)&&!n){throw new Error("syntax: named ellipsis can only appear onces")}A(">> 1");if(t===Xr){A(">> 2");if(n){A("NIL");F["..."].symbols[h]=Xr}else{A("NULL");F["..."].symbols[h]=null}}else if(t instanceof en&&(t.car instanceof en||t.car===Xr)){A(">> 3 "+n);if(n){if(F["..."].symbols[h]){var p=F["..."].symbols[h];if(p===Xr){p=new en(Xr,new en(t,Xr))}else{p=p.append(new en(t,Xr))}F["..."].symbols[h]=p}else{F["..."].symbols[h]=new en(t,Xr)}}else{A(">> 4");F["..."].symbols[h]=new en(t,Xr)}}else{A(">> 6");if(t instanceof en){A(">> 7 "+n);r.push(h);if(!F["..."].symbols[h]){F["..."].symbols[h]=new en(t,Xr)}else{var d=F["..."].symbols[h];F["..."].symbols[h]=d.append(new en(t,Xr))}A({IIIIII:F["..."].symbols[h].toString()})}else{A(">> 8");return false}}return true}else if(e.car instanceof en){var v=C(r);if(t===Xr){A(">> 9");F["..."].lists.push(Xr);return true}A(">> 10");var _=t;while(_ instanceof en){if(!M(e.car,_.car,v,true)){return false}_=_.cdr}return true}return false}if(e instanceof nr){if(nr.is(e,D)){throw new Error("syntax: invalid usage of ellipsis")}A(">> 11");var m=e.__name__;if(w.includes(m)){return true}A({name:m,ellipsis:n});if(n){F["..."].symbols[m]=F["..."].symbols[m]||[];F["..."].symbols[m].push(t)}F.symbols[m]=t;if(!F.symbols[m]);return true}if(e instanceof en&&t instanceof en){A(">> 12");A({a:12,code:t&&t.toString(),pattern:e.toString()});if(t.cdr===Xr){var y=e.car instanceof nr&&e.cdr instanceof nr;if(y){if(!M(e.car,t.car,r,n)){return false}A(">> 12 | 1");var g=e.cdr.valueOf();if(!(g in F.symbols)){F.symbols[g]=Xr}g=e.car.valueOf();if(!(g in F.symbols)){F.symbols[g]=t.car}return true}}A({pattern:e.toString(),code:t.toString()});if(e.cdr instanceof en&&e.car instanceof nr&&e.cdr.cdr instanceof en&&e.cdr.car instanceof nr&&nr.is(e.cdr.cdr.car,D)&&e.cdr.cdr.cdr instanceof en&&!nr.is(e.cdr.cdr.cdr.car,D)&&M(e.car,t.car,r,n)&&M(e.cdr.cdr.cdr,t.cdr,r,n)){var b=e.cdr.car.__name__;A({pattern:e.car.toString(),code:t.car.toString(),name:b});if(w.includes(b)){return true}F["..."].symbols[b]=null;return true}A("recur");if(M(e.car,t.car,r,n)&&M(e.cdr,t.cdr,r,n)){return true}}else if(e===Xr&&(t===Xr||t===undefined)){return true}else if(e.car instanceof en&&nr.is(e.car.car,D)){throw new Error("syntax: invalid usage of ellipsis")}else{return false}}if(M(e,t)){return F}}function jn(e,i){function u(t){if(t instanceof en){if(!i.length){return t}var e=u(t.car);var r=u(t.cdr);return new en(e,r)}else if(t instanceof nr){var n=i.find(function(e){return e.gensym===t});if(n){return nr(n.name)}return t}else{return t}}return u(e)}function In(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var k=e.bindings,t=e.expr,O=e.scope,a=e.symbols,c=e.names,S=e.ellipsis;var f={};function o(e){if(e instanceof nr){return true}return["string","symbol"].includes(d(e))}function B(e){if(!o(e)){var t=Uu(e);throw new Error("syntax: internal error, need symbol got ".concat(t))}var r=e.valueOf();if(r===S){throw new Error("syntax: internal error, ellipis not transformed")}var n=d(r);if(["string","symbol"].includes(n)){if(r in k.symbols){return k.symbols[r]}else if(n==="string"&&r.match(/\./)){var i=r.split(".");var u=i[0];if(u in k.symbols){return en.fromArray([nr("."),k.symbols[u]].concat(i.slice(1).map(function(e){return Ci(e)})))}}}if(a.includes(r)){return nr(r)}return s(r)}function j(e){if(ot()){console.log(e)}}function s(e){if(!f[e]){var t=O.ref(e);var r=ar(e);if(t){var n=O.get(e);O.set(r,n)}else{var i=O.get(e,{throwError:false});if(typeof i!=="undefined"){O.set(r,i)}}c.push({name:e,gensym:r});f[e]=r;if(typeof e==="string"&&e.match(/\./)){var u=e.split(".").filter(Boolean),a=h(u),o=a[0],s=a.slice(1);if(f[o]){ci(r,"__object__",[f[o]].concat(C(s)))}}}return f[e]}function I(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var i=r.nested;j(" ==> "+e.toString(true));j(t);if(e instanceof nr){var u=e.valueOf();j("[t 1");if(t[u]){if(t[u]instanceof en){var a=t[u],o=a.car,s=a.cdr;if(i){var c=o.car,f=o.cdr;if(f!==Xr){n(u,new en(f,Xr))}return c}if(s!==Xr){n(u,s)}return o}else if(t[u]instanceof Array){n(u,t[u].slice(1));return t[u][0]}}return B(u)}if(e instanceof en){if(e.car instanceof nr&&e.cdr instanceof en&&nr.is(e.cdr.car,S)){j("[t 2");var l=e.car.valueOf();var h=t[l];j({expr:e.toString(true),name:l,bindings:t,item:h});if(h===null){return}else if(h){j({b:t[l].toString()});if(h instanceof en){j("[t 2 Pair "+i);j({______:h.toString()});var p=h.car,d=h.cdr;if(i){if(d!==Xr){j("|| next 1");n(l,d)}j({car:p.toString()});return p}else{if(p.cdr!==Xr){j("|| next 2");n(l,new en(p.cdr,d))}j({car:p.car.toString()});return p.car}}else if(h instanceof Array){j("[t 2 Array "+i);if(i){n(l,h.slice(1));return en.fromArray(h)}else{var v=h.slice(1);if(v.length){n(l,v)}return h[0]}}else{return h}}}j("[t 3 recur "+e.toString());var _=I(e.car,t,r,n);var m=I(e.cdr,t,r,n);return new en(_,m)}return e}function N(t,r){var e=Object.values(t);var n=Object.getOwnPropertySymbols(t);if(n.length){e.push.apply(e,C(n.map(function(e){return t[e]})))}return e.length&&e.every(function(e){if(e===null){return!r}return e instanceof en||e===Xr||e instanceof Array&&e.length})}function P(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function L(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},t=e.disabled;j("traverse>> "+i.toString());if(i instanceof en){if(!t&&i.car instanceof en&&nr.is(i.car.car,S)){return L(i.car.cdr,{disabled:true})}if(i.cdr instanceof en&&nr.is(i.cdr.car,S)&&!t){j(">> 1");var r=k["..."].symbols;var n=Object.values(r);if(n.length&&n.every(function(e){return e===null})){return L(i.cdr.cdr,{disabled:t})}var u=P(r);var a=i.car instanceof nr&&nr.is(i.cdr.cdr.car,S);if(i.car instanceof en||a){if(k["..."].lists[0]===Xr){return Xr}var o=i.car;if(a){o=new en(i.car,new en(i.cdr.car,Xr))}j(">> 2");var s;if(u.length){j(">> 2 (a)");var c=nt({},r);s=Xr;var f=function e(){if(!N(c)){return"break"}var n={};var t=function e(t,r){n[t]=r};var r=I(o,c,{nested:true},t);if(r!==undefined){if(a){if(s===Xr){s=r}else{s=s.append(r)}}else{s=new en(r,s)}}c=n};while(true){var l=f();if(l==="break")break}if(s!==Xr&&!a){s=s.reverse()}if(i.cdr.cdr!==Xr&&!nr.is(i.cdr.cdr.car,S)){var h=L(i.cdr.cdr,{disabled:t});return s.append(h)}return s}else{j(">> 3");var p=I(i.car,r,{nested:true});if(p){return new en(p,Xr)}return Xr}}else if(i.car instanceof nr){j(">> 4");if(nr.is(i.cdr.cdr.car,S)){j(">> 4 (a)")}else{j(">> 4 (b)")}var d=i.car.__name__;var v=q({},d,r[d]);var _=r[d]===null;var m=Xr;var y=function e(){if(!N(v,true)){j({bind:v});return"break"}var n={};var t=function e(t,r){n[t]=r};var r=I(i,v,{nested:false},t);j({value:r.toString()});if(typeof r!=="undefined"){m=new en(r,m)}v=n};while(true){var g=y();if(g==="break")break}if(m!==Xr){m=m.reverse()}if(i.cdr instanceof en){if(i.cdr.cdr instanceof en||i.cdr.cdr instanceof nr){var b=L(i.cdr.cdr,{disabled:t});if(_){return b}j("<<<< 1");m.append(b)}}j("<<<< 2");return m}}var w=L(i.car,{disabled:t});var D;var F;if(i.car instanceof nr){var E=O.get(i.car,{throwError:false});F=E instanceof An&&E.__name__==="syntax-rules"}if(F){if(i.cdr.car instanceof nr){D=new en(L(i.cdr.car,{disabled:t}),new en(i.cdr.cdr.car,L(i.cdr.cdr.cdr,{disabled:t})))}else{D=new en(i.cdr.car,L(i.cdr.cdr,{disabled:t}))}j("REST >>>> "+D.toString())}else{D=L(i.cdr,{disabled:t})}j({a:true,car:mn(i.car),cdr:mn(i.cdr),head:mn(w),rest:mn(D)});return new en(w,D)}if(i instanceof nr){if(t&&nr.is(i,S)){return i}var x=Object.keys(k["..."].symbols);var A=i.literal();if(x.includes(A)){var M="missing ellipsis symbol next to name `".concat(A,"'");throw new Error("syntax-rules: ".concat(M))}var C=B(i);if(typeof C!=="undefined"){return C}}return i}return L(t,{})}function Nn(e){return Tn(e)||e===Xr||e===null}function Pn(e){return typeof e==="function"&&typeof e.bind==="function"}function Ln(e){return e instanceof Ju}function qn(e){return Pn(e)||Ln(e)}function Rn(e){if(e instanceof or){return false}if(e instanceof Promise){return true}return e&&Pn(e.then)}function Tn(e){return typeof e==="undefined"}function Un(e){switch(d(e)){case"string":return Ci(e);case"bigint":return Ni(e);case"number":if(Number.isNaN(e)){return wu}else{return Ni(e)}}return e}function $n(n,i){var e=Object.getOwnPropertyNames(n);var t=Object.getOwnPropertySymbols(n);e.concat(t).forEach(function(e){var t=i(n[e]);var r=Object.getOwnPropertyDescriptor(n,e);if(!r||r.writable&&n[e]!==t){n[e]=t}});return n}function zn(t){var e=[Ci,Mi,Ni].some(function(e){return t instanceof e});if(e){return t.valueOf()}if(t instanceof Array){return t.map(zn)}if(t instanceof or){delete t.then}if(nn(t)){return $n(t,zn)}return t}function Vn(e,t){if(e instanceof en){e.markCycles();return vu(e)}if(Pn(e)){if(t){return Zn(e,t)}}return Un(e)}function Yn(e){if(Jn(e)){return e[Xn]}return e}function Zn(e,t){if(e[Symbol["for"]("__bound__")]){return e}var r=e.bind(t);var n=Object.getOwnPropertyNames(e);var i=Xe(n),u;try{for(i.s();!(u=i.n()).done;){var a=u.value;if(si(a)){try{r[a]=e[a]}catch(e){}}}}catch(e){i.e(e)}finally{i.f()}ci(r,"__fn__",e);ci(r,"__context__",t);ci(r,"__bound__",true);if(di(e)){ci(r,"__native__",true)}if(nn(t)&&li(e)){ci(r,"__method__",true)}r.valueOf=function(){return e};return r}function Hn(e){return Jn(e)&&e[Symbol["for"]("__context__")]===Object}function Jn(e){return!!(Pn(e)&&e[Xn])}function Gn(e){if(Pn(e)){var t=e[Qn];if(t&&(t===Ca||t.constructor&&t.constructor.__class__)){return true}}return false}function Wn(e){return e instanceof Wi||e instanceof Ki}function Kn(e){if(Pn(e)){if(Wn(e[Qn])){return true}}return false}var Qn=Symbol["for"]("__context__");var Xn=Symbol["for"]("__fn__");var ei=Symbol["for"]("__data__");var ti=Symbol["for"]("__ref__");var ri=Symbol["for"]("__cycles__");var ni=Symbol["for"]("__class__");var ii=Symbol["for"]("__method__");var ui=Symbol["for"]("__prototype__");var ai=Symbol["for"]("__lambda__");var oi=["name","length","caller","callee","arguments","prototype"];function si(e){return!oi.includes(e)}function ci(e,t,r){Object.defineProperty(e,Symbol["for"](t),{get:function e(){return r},set:function e(){},configurable:false,enumerable:false})}function fi(t,r){try{Object.defineProperty(t,"length",{get:function e(){return r}});return t}catch(e){var n=new Array(r).fill(0).map(function(e,t){return"a"+t}).join(",");var i=new Function("f","return function(".concat(n,") {\n                return f.apply(this, arguments);\n            };"));return i(t)}}function li(e){return e&&e[ai]}function hi(e){return e&&e[ii]}function pi(e){return li(e)&&!e[ui]&&!hi(e)&&!Kn(e)}function di(e){var t=Symbol["for"]("__native__");return Pn(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===true||!e.name.match(/^bound /)&&!e[t])}function vi(e){var g;switch(e){case Symbol["for"]("letrec"):g="letrec";break;case Symbol["for"]("let"):g="let";break;case Symbol["for"]("let*"):g="let*";break;default:throw new Error("Invalid let_macro value")}return An.defmacro(g,function(t,e){var f=e.dynamic_scope,l=e.error,r=e.macro_expand;var h;if(t.car instanceof nr){if(!(t.cdr.car instanceof en||t.cdr.car===Xr)){throw new Error("let require list of pairs")}var n;if(t.cdr.car===Xr){h=Xr;n=Xr}else{n=t.cdr.car.map(function(e){return e.car});h=t.cdr.car.map(function(e){return e.cdr.car})}return en.fromArray([nr("letrec"),[[t.car,en(nr("lambda"),en(n,t.cdr.cdr))]],en(t.car,h)])}else if(r){return}var p=this;h=Fu.get("list->array")(t.car);var d=p.inherit(g);var v,_;if(g==="let*"){_=d}else if(g==="let"){v=[]}var m=0;function y(){var e=new en(new nr("begin"),t.cdr);return Wu(e,{env:d,dynamic_scope:f,error:l})}return function t(){var r=h[m++];if(f){f=g==="let*"?d:p}if(!r){if(v&&v.length){var e=v.map(function(e){return e.value});var n=e.filter(Rn);if(n.length){return sr(e).then(function(e){for(var t=0,r=e.length;t<r;++t){d.set(v[t].name,e[t])}}).then(y)}else{var i=Xe(v),u;try{for(i.s();!(u=i.n()).done;){var a=u.value,o=a.name,s=a.value;d.set(o,s)}}catch(e){i.e(e)}finally{i.f()}}}return y()}else{if(g==="let"){_=p}else if(g==="letrec"){_=d}var c=Wu(r.cdr.car,{env:_,dynamic_scope:f,error:l});if(g==="let*"){_=d=_.inherit("let*["+m+"]")}if(v){v.push({name:r.car,value:c});return t()}else{return Dr(c,function(e){d.set(r.car,e);return t()})}}}()})}function _i(e,s){return new An(e,function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;var i=this;if(r){r=this}var u=e;var a=[];while(u instanceof en){a.push(Wu(u.car,{env:i,dynamic_scope:r,error:n}));u=u.cdr}var o=a.filter(Rn).length;if(o){return sr(a).then(s.bind(this))}else{return s.call(this,a)}})}function mi(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(e){Pu("",e,"number")});return e.apply(void 0,r)}function yi(){var n=this;for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}i.forEach(function(e,t){Pu("pipe",e,"function",t+1)});return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.reduce(function(e,t){return[t.apply(n,e)]},t)[0]}}function gi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e,t){Pu("compose",e,"function",t+1)});return yi.apply(void 0,C(t.reverse()))}function bi(a,o){var s=this;return function e(t,r){Pu(a,t,"function");for(var n=arguments.length,i=new Array(n>2?n-2:0),u=2;u<n;u++){i[u-2]=arguments[u]}if(i.some(Nn)){if(typeof r==="number"){return Ni(r)}return r}else{return o.call.apply(o,[s,e,t,r].concat(i))}}}function wi(e,t){return Ai(e+1,xi(mi,t))}var Di=xi(wi,1);var Fi=xi(wi,2);function Ei(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(i!==null){t=[i].concat(C(t))}return t.reduce(Fi(n))}}function xi(u){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}Pu("curry",u,"function");var a=u.length;return function(){var n=t.slice();function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}n=n.concat(t);if(n.length>=a){return u.apply(this,n)}else{return i}}return i.apply(this,arguments)}}function Ai(n,i){Pu("limit",i,"function",2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.apply(void 0,C(t.slice(0,n)))}}function Mi(e){if(typeof this!=="undefined"&&!(this instanceof Mi)||typeof this==="undefined"){return new Mi(e)}if(e instanceof Ci){e=e.valueOf()}var t;if(Array.from(e).length>1){e=e.toLowerCase();if(Mi.__names__[e]){t=e;e=Mi.__names__[e]}else{throw new Error("Internal: Unknown named character")}}else{t=Mi.__rev_names__[e]}Object.defineProperty(this,"__char__",{value:e,enumerable:true});if(t){Object.defineProperty(this,"__name__",{value:t,enumerable:true})}}Mi.__names__=yt;Mi.__rev_names__={};Object.keys(Mi.__names__).forEach(function(e){var t=Mi.__names__[e];Mi.__rev_names__[t]=e});Mi.prototype.toUpperCase=function(){return Mi(this.__char__.toUpperCase())};Mi.prototype.toLowerCase=function(){return Mi(this.__char__.toLowerCase())};Mi.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};Mi.prototype.valueOf=Mi.prototype.serialize=function(){return this.__char__};function Ci(e){if(typeof this!=="undefined"&&!(this instanceof Ci)||typeof this==="undefined"){return new Ci(e)}if(e instanceof Array){this.__string__=e.map(function(e,t){Pu("LString",e,"character",t+1);return e.toString()}).join("")}else{this.__string__=e.valueOf()}}{var ki=["length","constructor"];var Oi=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!ki.includes(e)});var Si=function e(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(this.__string__,t)}};var Bi=Xe(Oi),ji;try{for(Bi.s();!(ji=Bi.n()).done;){var Ii=ji.value;Ci.prototype[Ii]=Si(String.prototype[Ii])}}catch(e){Bi.e(e)}finally{Bi.f()}}Ci.prototype.serialize=function(){return this.valueOf()};Ci.isString=function(e){return e instanceof Ci||typeof e==="string"};Ci.prototype.get=function(e){Pu("LString::get",e,"number");return Array.from(this.__string__)[e.valueOf()]};Ci.prototype.cmp=function(e){Pu("LString::cmp",e,"string");var t=this.valueOf();var r=e.valueOf();if(t<r){return-1}else if(t===r){return 0}else{return 1}};Ci.prototype.lower=function(){return Ci(this.__string__.toLowerCase())};Ci.prototype.upper=function(){return Ci(this.__string__.toUpperCase())};Ci.prototype.set=function(e,t){Pu("LString::set",e,"number");Pu("LString::set",t,["string","character"]);e=e.valueOf();if(t instanceof Mi){t=t.__char__}var r=[];if(e>0){r.push(this.__string__.substring(0,e))}r.push(t);if(e<this.__string__.length-1){r.push(this.__string__.substring(e+1))}this.__string__=r.join("")};Object.defineProperty(Ci.prototype,"length",{get:function e(){return this.__string__.length}});Ci.prototype.clone=function(){return Ci(this.valueOf())};Ci.prototype.fill=function(e){Pu("LString::fill",e,["string","character"]);if(e instanceof Mi){e=e.toString()}var t=this.__string__.length;this.__string__=new Array(t+1).join(e)};function Ni(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof Ni){return e}if(typeof this!=="undefined"&&!(this instanceof Ni)||typeof this==="undefined"){return new Ni(e,t)}if(typeof e==="undefined"){throw new Error("Invalid LNumber constructor call")}var r=Ni.getType(e);if(Ni.types[r]){return Ni.types[r](e,t)}var n=e instanceof Array&&Ci.isString(e[0])&&Ni.isNumber(e[1]);if(e instanceof Ni){return Ni(e.value)}if(!Ni.isNumber(e)&&!n){throw new Error("You can't create LNumber from ".concat(Uu(e)))}if(e===null){e=0}var i;if(n){var u=e,a=F(u,2),o=a[0],s=a[1];if(o instanceof Ci){o=o.valueOf()}if(s instanceof Ni){s=s.valueOf()}var c=o.match(/^([+-])/);var f=false;if(c){o=o.replace(/^[+-]/,"");if(c[1]==="-"){f=true}}}if(Number.isNaN(e)){return zi(e)}else if(typeof BigInt!=="undefined"){if(typeof e!=="bigint"){if(n){var l;switch(s){case 8:l="0o";break;case 16:l="0x";break;case 2:l="0b";break;case 10:l="";break}if(typeof l==="undefined"){var h=BigInt(s);i=C(o).map(function(e,t){return BigInt(parseInt(e,s))*Ti(h,BigInt(t))}).reduce(function(e,t){return e+t})}else{i=BigInt(l+o)}}else{i=BigInt(e)}if(f){i*=BigInt(-1)}}else{i=e}return Gi(i,true)}else if(typeof L!=="undefined"&&!(e instanceof L)){if(e instanceof Array){return Gi(p(L,C(e)))}return Gi(new L(e))}else if(n){this.constant(parseInt(o,s),"integer")}else{this.constant(e,"integer")}}Ni.prototype.constant=function(e,t){Object.defineProperty(this,"__value__",{value:e,enumerable:true});Object.defineProperty(this,"__type__",{value:t,enumerable:true})};Ni.types={float:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new zi(t,r)},complex:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!Ni.isComplex(t)){t={im:0,re:t}}return new $i(t,r)},rational:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!Ni.isRational(t)){t={num:t,denom:1}}return new Ji(t,r)}};Ni.prototype.serialize=function(){return this.__value__};Ni.prototype.isNaN=function(){return Number.isNaN(this.__value__)};Ni.prototype.gcd=function(e){var t=this.abs();e=e.abs();if(e.cmp(t)===1){var r=t;t=e;e=r}while(true){t=t.rem(e);if(t.cmp(0)===0){return e}e=e.rem(t);if(e.cmp(0)===0){return t}}};Ni.isFloat=function e(t){return t instanceof zi||Number(t)===t&&t%1!==0};Ni.isNumber=function(e){return e instanceof Ni||Ni.isNative(e)||Ni.isBN(e)};Ni.isComplex=function(e){if(!e){return false}var t=e instanceof $i||(Ni.isNumber(e.im)||Number.isNaN(e.im))&&(Ni.isNumber(e.re)||Number.isNaN(e.re));return t};Ni.isRational=function(e){if(!e){return false}return e instanceof Ji||Ni.isNumber(e.num)&&Ni.isNumber(e.denom)};Ni.isInteger=function(e){if(!(Ni.isNative(e)||e instanceof Ni)){return false}if(Ni.isFloat(e)){return false}if(Ni.isRational(e)){return false}if(Ni.isComplex(e)){return false}return true};Ni.isNative=function(e){return typeof e==="bigint"||typeof e==="number"};Ni.isBigInteger=function(e){return e instanceof Gi||typeof e==="bigint"||Ni.isBN(e)};Ni.isBN=function(e){return typeof L!=="undefined"&&e instanceof L};Ni.getArgsType=function(e,t){if(e instanceof zi||t instanceof zi){return zi}if(e instanceof Gi||t instanceof Gi){return Gi}return Ni};Ni.prototype.toString=function(e){if(Number.isNaN(this.__value__)){return"+nan.0"}if(e>2&&e<36){return this.__value__.toString(e)}return this.__value__.toString()};Ni.prototype.asType=function(e){var t=Ni.getType(this);return Ni.types[t]?Ni.types[t](e):Ni(e)};Ni.prototype.isBigNumber=function(){return typeof this.__value__==="bigint"||typeof L!=="undefined"&&!(this.value instanceof L)};["floor","ceil","round"].forEach(function(e){Ni.prototype[e]=function(){if(this["float"]||Ni.isFloat(this.__value__)){return Ni(Math[e](this.__value__))}else{return Ni(Math[e](this.valueOf()))}}});Ni.prototype.valueOf=function(){if(Ni.isNative(this.__value__)){return Number(this.__value__)}else if(Ni.isBN(this.__value__)){return this.__value__.toNumber()}};var Pi=function(){var e=function e(t,r){return[t,r]};return{bigint:{bigint:e,float:function e(t,r){return[zi(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},integer:{integer:e,float:function e(t,r){return[zi(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},float:{bigint:function e(t,r){return[t,r&&zi(r.valueOf())]},integer:function e(t,r){return[t,r&&zi(r.valueOf())]},float:e,rational:function e(t,r){return[t,r&&zi(r.valueOf())]},complex:function e(t,r){return[{re:t,im:zi(0)},r]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function e(t,r){var n=Ni.coerce(t.__re__,r.__re__),i=F(n,2),u=i[0],a=i[1];var o=Ni.coerce(t.__im__,r.__im__),s=F(o,2),c=s[0],f=s[1];return[{im:c,re:u},{im:f,re:a}]}},rational:{bigint:function e(t,r){return[t,r&&{num:r,denom:1}]},integer:function e(t,r){return[t,r&&{num:r,denom:1}]},float:function e(t,r){return[zi(t.valueOf()),r]},rational:e,complex:function e(t,r){return[{im:Li(t.__type__,r.__im__.__type__,0)[0],re:Li(t.__type__,r.__re__.__type__,t)[0]},{im:Li(t.__type__,r.__im__.__type__,r.__im__)[0],re:Li(t.__type__,r.__re__.__type__,r.__re__)[0]}]}}};function t(r){return function(e,t){return[{im:Li(r,e.__im__.__type__,0,e.__im__)[1],re:Li(r,e.__re__.__type__,0,e.__re__)[1]},{im:Li(r,e.__im__.__type__,0,0)[1],re:Li(r,t.__type__,0,t)[1]}]}}}();function Li(e,t,r,n){return Pi[e][t](r,n)}Ni.coerce=function(e,t){var r=Ni.getType(e);var n=Ni.getType(t);if(!Pi[r]){throw new Error("LNumber::coerce unknown lhs type ".concat(r))}else if(!Pi[r][n]){throw new Error("LNumber::coerce unknown rhs type ".concat(n))}var i=Pi[r][n](e,t);return i.map(function(e){return Ni(e,true)})};Ni.prototype.coerce=function(e){if(!(typeof e==="number"||e instanceof Ni)){throw new Error("LNumber: you can't coerce ".concat(Uu(e)))}if(typeof e==="number"){e=Ni(e)}return Ni.coerce(this,e)};Ni.getType=function(e){if(e instanceof Ni){return e.__type__}if(Ni.isFloat(e)){return"float"}if(Ni.isComplex(e)){return"complex"}if(Ni.isRational(e)){return"rational"}if(typeof e==="number"){return"integer"}if(typeof BigInt!=="undefined"&&typeof e!=="bigint"||typeof L!=="undefined"&&!(e instanceof L)){return"bigint"}};Ni.prototype.isFloat=function(){return!!(Ni.isFloat(this.__value__)||this["float"])};var qi={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"};var Ri={};Object.keys(qi).forEach(function(t){Ri[qi[t]]=t;Ni.prototype[t]=function(e){return this.op(qi[t],e)}});Ni._ops={"*":function e(t,r){return t*r},"+":function e(t,r){return t+r},"-":function e(t,r){if(typeof r==="undefined"){return-t}return t-r},"/":function e(t,r){return t/r},"%":function e(t,r){return t%r},"|":function e(t,r){return t|r},"&":function e(t,r){return t&r},"~":function e(t){return~t},">>":function e(t,r){return t>>r},"<<":function e(t,r){return t<<r}};Ni.prototype.op=function(e,t){if(typeof t==="undefined"){return Ni(Ni._ops[e](this.valueOf()))}if(typeof t==="number"){t=Ni(t)}if(Number.isNaN(this.__value__)&&!Ni.isComplex(t)||!Ni.isComplex(this)&&Number.isNaN(t.__value__)){return Ni(NaN)}var r=this.coerce(t),n=F(r,2),i=n[0],u=n[1];if(i._op){return i._op(e,u)}return Ni(Ni._ops[e](i,u))};Ni.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return $i({re:0,im:t})}return Ni(Math.sqrt(e))};var Ti=function e(t,r){var n=typeof t==="bigint"?BigInt(1):1;return new Array(Number(r)).fill(0).reduce(function(e){return e*t},n)};var Ui=new Function("a,b","return a ** b");try{if(Ui(2,2)===4){Ti=Ui}}catch(e){}Ni.prototype.pow=function(e){var t;if(Ni.isBN(this.__value__)){t=this.__value__.pow(e.__value__)}else{t=Ti(this.__value__,e.__value__)}return Ni(t)};Ni.prototype.abs=function(){var e=this.__value__;if(Ni.isNative(this.__value__)){if(e<0){e=-e}}else if(Ni.isBN(e)){e.iabs()}return new Ni(e)};Ni.prototype.isOdd=function(){if(Ni.isNative(this.__value__)){if(this.isBigNumber()){return this.__value__%BigInt(2)===BigInt(1)}return this.__value__%2===1}else if(Ni.isBN(this.__value__)){return this.__value__.isOdd()}};Ni.prototype.isEven=function(){return!this.isOdd()};Ni.prototype.cmp=function(e){var t=this.coerce(e),r=F(t,2),n=r[0],i=r[1];function u(e,t){if(e.__value__<t.__value__){return-1}else if(e.__value__===t.__value__){return 0}else{return 1}}if(n.__type__==="bigint"){if(Ni.isNative(n.__value__)){return u(n,i)}else if(Ni.isBN(n.__value__)){return this.__value__.cmp(i.__value__)}}else if(n instanceof zi){return u(n,i)}};function $i(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof $i)||typeof this==="undefined"){return new $i(e,t)}if(e instanceof $i){return $i({im:e.__im__,re:e.__re__})}if(Ni.isNumber(e)&&t){if(!t){return Number(e)}}else if(!Ni.isComplex(e)){throw new Error("Invalid constructor call for LComplex")}var r=e.im instanceof Ni?e.im:Ni(e.im);var n=e.re instanceof Ni?e.re:Ni(e.re);this.constant(r,n)}$i.prototype=Object.create(Ni.prototype);$i.prototype.constructor=$i;$i.prototype.constant=function(e,t){Object.defineProperty(this,"__im__",{value:e,enumerable:true});Object.defineProperty(this,"__re__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"complex",enumerable:true})};$i.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};$i.prototype.toRational=function(e){if(Ni.isFloat(this.__im__)&&Ni.isFloat(this.__re__)){var t=zi(this.__im__).toRational(e);var r=zi(this.__re__).toRational(e);return $i({im:t,re:r})}return this};$i.prototype.add=function(e){return this.complex_op("add",e,function(e,t,r,n){return{re:e.add(t),im:r.add(n)}})};$i.prototype.factor=function(){if(this.__im__ instanceof zi||this.__im__ instanceof zi){var e=this.__re__,t=this.__im__;var r,n;if(e instanceof zi){r=e.toRational().mul(e.toRational())}else{r=e.mul(e)}if(t instanceof zi){n=t.toRational().mul(t.toRational())}else{n=t.mul(t)}return r.add(n)}else{return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))}};$i.prototype.modulus=function(){return this.factor().sqrt()};$i.prototype.conjugate=function(){return $i({re:this.__re__,im:this.__im__.sub()})};$i.prototype.sqrt=function(){var e=this.modulus();var t,r;if(e.cmp(0)===0){t=r=e}else if(this.__re__.cmp(0)===1){t=zi(.5).mul(e.add(this.__re__)).sqrt();r=this.__im__.div(t).div(2)}else{r=zi(.5).mul(e.sub(this.__re__)).sqrt();if(this.__im__.cmp(0)===-1){r=r.sub()}t=this.__im__.div(r).div(2)}return $i({im:r,re:t})};$i.prototype.div=function(e){if(Ni.isNumber(e)&&!Ni.isComplex(e)){if(!(e instanceof Ni)){e=Ni(e)}var t=this.__re__.div(e);var r=this.__im__.div(e);return $i({re:t,im:r})}else if(!Ni.isComplex(e)){throw new Error("[LComplex::div] Invalid value")}var n=this.coerce(e),i=F(n,2),u=i[0],a=i[1];var o=a.factor();var s=u.mul(a.conjugate());var c=s.__re__.op("/",o);var f=s.__im__.op("/",o);return $i({re:c,im:f})};$i.prototype.sub=function(e){return this.complex_op("sub",e,function(e,t,r,n){return{re:e.sub(t),im:r.sub(n)}})};$i.prototype.mul=function(e){return this.complex_op("mul",e,function(e,t,r,n){var i={re:e.mul(t).sub(r.mul(n)),im:e.mul(n).add(t.mul(r))};return i})};$i.prototype.complex_op=function(e,t,i){var u=this;var r=function e(t,r){var n=i(u.__re__,t,u.__im__,r);if("im"in n&&"re"in n){if(n.im.cmp(0)===0&&!Ni.isFloat(n.im)){return n.re}return $i(n,true)}return n};if(typeof t==="undefined"){return r()}if(Ni.isNumber(t)&&!Ni.isComplex(t)){if(!(t instanceof Ni)){t=Ni(t)}var n=t.asType(0);t={__im__:n,__re__:t}}else if(!Ni.isComplex(t)){throw new Error("[LComplex::".concat(e,"] Invalid value"))}var a=t.__re__ instanceof Ni?t.__re__:this.__re__.asType(t.__re__);var o=t.__im__ instanceof Ni?t.__im__:this.__im__.asType(t.__im__);return r(a,o)};$i._op={"+":"add","-":"sub","*":"mul","/":"div"};$i.prototype._op=function(e,t){var r=$i._op[e];return this[r](t)};$i.prototype.cmp=function(e){var t=this.coerce(e),r=F(t,2),n=r[0],i=r[1];var u=n.__re__.coerce(i.__re__),a=F(u,2),o=a[0],s=a[1];var c=o.cmp(s);if(c!==0){return c}else{var f=n.__im__.coerce(i.__im__),l=F(f,2),h=l[0],p=l[1];return h.cmp(p)}};$i.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};$i.prototype.toString=function(){var e;if(this.__re__.cmp(0)!==0){e=[mn(this.__re__)]}else{e=[]}var t=this.__im__.valueOf();var r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t);var n=mn(this.__im__);if(!r&&!Number.isNaN(t)){var i=this.__im__.cmp(0);if(i<0||i===0&&this.__im__._minus){e.push("-")}else{e.push("+")}n=n.replace(/^-/,"")}e.push(n);e.push("i");return e.join("")};function zi(e){if(typeof this!=="undefined"&&!(this instanceof zi)||typeof this==="undefined"){return new zi(e)}if(!Ni.isNumber(e)){throw new Error("Invalid constructor call for LFloat")}if(e instanceof Ni){return zi(e.valueOf())}if(typeof e==="number"){if(Object.is(e,-0)){Object.defineProperty(this,"_minus",{value:true})}this.constant(e,"float")}}zi.prototype=Object.create(Ni.prototype);zi.prototype.constructor=zi;zi.prototype.toString=function(){if(this.__value__===Number.NEGATIVE_INFINITY){return"-inf.0"}if(this.__value__===Number.POSITIVE_INFINITY){return"+inf.0"}if(Number.isNaN(this.__value__)){return"+nan.0"}var e=this.__value__.toString();if(!Ni.isFloat(this.__value__)&&!e.match(/e/i)){var t=e+".0";return this._minus?"-"+t:t}return e.replace(/^([0-9]+)e/,"$1.0e")};zi.prototype._op=function(e,t){if(t instanceof Ni){t=t.__value__}var r=Ni._ops[e];if(e==="/"&&this.__value__===0&&t===0){return NaN}return zi(r(this.__value__,t))};zi.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){return Vi(this.__value__.valueOf())}return Yi(e.valueOf())(this.__value__.valueOf())};zi.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=zi(Math.sqrt(-e));return $i({re:0,im:t})}return zi(Math.sqrt(e))};zi.prototype.abs=function(){var e=this.valueOf();if(e<0){e=-e}return zi(e)};var Vi=Yi(1e-10);function Yi(n){return function(e){var t=function e(n,t,r){var i=function e(t,r){return r<n?t:e(r,t%r)};if(Number.isNaN(t)||Number.isNaN(r)){return NaN}return i(Math.abs(t),Math.abs(r))},r=t(n?n:1/1e4,1,e);return Ji({num:Math.floor(e/r),denom:Math.floor(1/r)})}}function Zi(e,t){var r=e.sub(t);var n=e.add(t);var i;if(r.cmp(n)>0){i=Hi(n,r)}else if(n.cmp(r)<=0){i=r}else if(r.cmp(0)>0){i=Hi(r,n)}else if(t.cmp(0)<0){i=Ni(Hi(n.sub(),r.sub())).sub()}else{i=Ni(0)}if(Ni.isFloat(t)||Ni.isFloat(e)){return zi(i)}return i}function Hi(e,t){var r=Ni(e).floor();var n=Ni(t).floor();if(e.cmp(r)<1){return r}else if(r.cmp(n)===0){var i=Ni(1).div(t.sub(n));var u=Ni(1).div(e.sub(r));return r.add(Ni(1).div(Hi(i,u)))}else{return r.add(Ni(1))}}function Ji(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof Ji)||typeof this==="undefined"){return new Ji(e,t)}if(!Ni.isRational(e)){throw new Error("Invalid constructor call for LRational")}var r,n;if(e instanceof Ji){r=Ni(e.__num__);n=Ni(e.__denom__)}else{r=Ni(e.num);n=Ni(e.denom)}if(!t&&n.cmp(0)!==0){var i=r.op("%",n).cmp(0)===0;if(i){return Ni(r.div(n))}}this.constant(r,n)}Ji.prototype=Object.create(Ni.prototype);Ji.prototype.constructor=Ji;Ji.prototype.constant=function(e,t){Object.defineProperty(this,"__num__",{value:e,enumerable:true});Object.defineProperty(this,"__denom__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"rational",enumerable:true})};Ji.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};Ji.prototype.pow=function(e){var t=e.cmp(0);if(t===0){return Ni(1)}if(t===-1){e=e.sub();var r=this.__denom__.pow(e);var n=this.__num__.pow(e);return Ji({num:r,denom:n})}var i=this;e=e.valueOf();while(e>1){i=i.mul(this);e--}return i};Ji.prototype.sqrt=function(){var e=this.__num__.sqrt();var t=this.__denom__.sqrt();if(e instanceof zi||t instanceof zi){return e.div(t)}return Ji({num:e,denom:t})};Ji.prototype.abs=function(){var e=this.__num__;var t=this.__denom__;if(e.cmp(0)===-1){e=e.sub()}if(t.cmp(0)!==1){t=t.sub()}return Ji({num:e,denom:t})};Ji.prototype.cmp=function(e){return Ni(this.valueOf(),true).cmp(e)};Ji.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__);var t,r;if(e.cmp(1)!==0){t=this.__num__.div(e);if(t instanceof Ji){t=Ni(t.valueOf(true))}r=this.__denom__.div(e);if(r instanceof Ji){r=Ni(r.valueOf(true))}}else{t=this.__num__;r=this.__denom__}var n=this.cmp(0)<0;if(n){if(t.abs().cmp(r.abs())===0){return t.toString()}}else if(t.cmp(r)===0){return t.toString()}return t.toString()+"/"+r.toString()};Ji.prototype.valueOf=function(e){if(this.__denom__.cmp(0)===0){if(this.__num__.cmp(0)<0){return Number.NEGATIVE_INFINITY}return Number.POSITIVE_INFINITY}if(e){return Ni._ops["/"](this.__num__.value,this.__denom__.value)}return zi(this.__num__.valueOf()).div(this.__denom__.valueOf())};Ji.prototype.mul=function(e){if(!(e instanceof Ni)){e=Ni(e)}if(Ni.isRational(e)){var t=this.__num__.mul(e.__num__);var r=this.__denom__.mul(e.__denom__);return Ji({num:t,denom:r})}var n=Ni.coerce(this,e),i=F(n,2),u=i[0],a=i[1];return u.mul(a)};Ji.prototype.div=function(e){if(!(e instanceof Ni)){e=Ni(e)}if(Ni.isRational(e)){var t=this.__num__.mul(e.__denom__);var r=this.__denom__.mul(e.__num__);return Ji({num:t,denom:r})}var n=Ni.coerce(this,e),i=F(n,2),u=i[0],a=i[1];var o=u.div(a);return o};Ji.prototype._op=function(e,t){return this[Ri[e]](t)};Ji.prototype.sub=function(e){if(typeof e==="undefined"){return this.mul(-1)}if(!(e instanceof Ni)){e=Ni(e)}if(Ni.isRational(e)){var t=e.__num__.sub();var r=e.__denom__;return this.add(Ji({num:t,denom:r}))}if(!(e instanceof Ni)){e=Ni(e).sub()}else{e=e.sub()}var n=Ni.coerce(this,e),i=F(n,2),u=i[0],a=i[1];return u.add(a)};Ji.prototype.add=function(e){if(!(e instanceof Ni)){e=Ni(e)}if(Ni.isRational(e)){var t=this.__denom__;var r=e.__denom__;var n=this.__num__;var i=e.__num__;var u,a;if(t!==r){a=r.mul(n).add(i.mul(t));u=t.mul(r)}else{a=n.add(i);u=t}return Ji({num:a,denom:u})}if(Ni.isFloat(e)){return zi(this.valueOf()).add(e)}var o=Ni.coerce(this,e),s=F(o,2),c=s[0],f=s[1];return c.add(f)};function Gi(e,t){if(typeof this!=="undefined"&&!(this instanceof Gi)||typeof this==="undefined"){return new Gi(e,t)}if(e instanceof Gi){return Gi(e.__value__,e._native)}if(!Ni.isBigInteger(e)){throw new Error("Invalid constructor call for LBigInteger")}this.constant(e,"bigint");Object.defineProperty(this,"_native",{value:t})}Gi.prototype=Object.create(Ni.prototype);Gi.prototype.constructor=Gi;Gi.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};Gi.prototype.serialize=function(){return this.__value__.toString()};Gi.prototype._op=function(e,t){if(typeof t==="undefined"){if(Ni.isBN(this.__value__)){e=Gi.bn_op[e];return Gi(this.__value__.clone()[e](),false)}return Gi(Ni._ops[e](this.__value__),true)}if(Ni.isBN(this.__value__)&&Ni.isBN(t.__value__)){e=Gi.bn_op[e];return Gi(this.__value__.clone()[e](t),false)}var r=Ni._ops[e](this.__value__,t.__value__);if(e==="/"){var n=this.op("%",t).cmp(0)===0;if(n){return Ni(r)}return Ji({num:this,denom:t})}return Gi(r,true)};Gi.prototype.sqrt=function(){var e;var t=this.cmp(0)<0;if(Ni.isNative(this.__value__)){e=Ni(Math.sqrt(t?-this.valueOf():this.valueOf()))}else if(Ni.isBN(this.__value__)){e=t?this.__value__.neg().sqrt():this.__value__.sqrt()}if(t){return $i({re:0,im:e})}return e};Ni.NaN=Ni(NaN);function Wi(e){var n=this;if(typeof this!=="undefined"&&!(this instanceof Wi)||typeof this==="undefined"){return new Wi(e)}Pu("InputPort",e,"function");xr(this,"__type__",ou);var i;Object.defineProperty(this,"__parser__",{enumerable:true,get:function e(){return i},set:function e(t){Pu("InputPort::__parser__",t,"parser");i=t}});this._read=e;this._with_parser=this._with_init_parser.bind(this,k(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(n.char_ready()){t.next=5;break}t.next=3;return n._read();case 3:r=t.sent;i=new yr(r,{env:n});case 5:return t.abrupt("return",n.__parser__);case 6:case"end":return t.stop()}}},e)})));this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==su};this._make_defaults()}Wi.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()});this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()});this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()});this.read_string=this._with_parser(function(e,t){if(!Ni.isInteger(t)){var r=Ni.getType(t);ju("read-string",r,"integer")}return e.__lexer__.read_string(t.valueOf())});this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};Wi.prototype._with_init_parser=function(o,s){var c=this;return function(){var e=k(j.mark(function e(){var r,n,i,u,a=arguments;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return o.call(c);case 2:r=t.sent;for(n=a.length,i=new Array(n),u=0;u<n;u++){i[u]=a[u]}return t.abrupt("return",s.apply(void 0,[r].concat(i)));case 5:case"end":return t.stop()}}},e)}));return function(){return e.apply(this,arguments)}}()};Wi.prototype.is_open=function(){return this._with_parser!==null};Wi.prototype.close=function(){var t=this;this.__parser__=null;this._with_parser=null;["read","close","read_char","peek-char","read_line"].forEach(function(e){t[e]=function(){throw new Error("input-port: port is closed")}});this.char_ready=function(){return false}};Wi.prototype.toString=function(){return"#<input-port>"};function Ki(e){if(typeof this!=="undefined"&&!(this instanceof Ki)||typeof this==="undefined"){return new Ki(e)}Pu("OutputPort",e,"function");xr(this,"__type__",ou);this.write=e}Ki.prototype.is_open=function(){return this._closed!==true};Ki.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function e(){return true},set:function e(){},configurable:false,enumerable:false});this.write=function(){throw new Error("output-port: port is closed")}};Ki.prototype.toString=function(){return"#<output-port>"};function Qi(t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Qi)||typeof this==="undefined"){return new Qi(t)}Pu("OutputStringPort",t,"function");xr(this,"__type__",ou);xr(this,"__buffer__",[]);this.write=function(e){if(!Ci.isString(e)){e=t(e)}else{e=e.valueOf()}r.__buffer__.push(e)}}Qi.prototype=Object.create(Ki.prototype);Qi.prototype.constructor=Qi;Qi.prototype.toString=function(){return"#<output-port (string)>"};Qi.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function Xi(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Xi)||typeof this==="undefined"){return new Xi(e,t)}Pu("OutputFilePort",e,"string");xr(this,"__filename__",e);xr(this,"_fd",t.valueOf(),{hidden:true});xr(this,"__type__",ou);this.write=function(e){if(!Ci.isString(e)){e=mn(e)}else{e=e.valueOf()}r.fs().write(r._fd,e,function(e){if(e){throw e}})}}Xi.prototype=Object.create(Ki.prototype);Xi.prototype.constructor=Xi;Xi.prototype.fs=function(){if(!this._fs){this._fs=this.internal("fs")}return this._fs};Xi.prototype.internal=function(e){return Eu.get("**internal-env**").get(e)};Xi.prototype.close=function(){var n=this;return new Promise(function(t,r){n.fs().close(n._fd,function(e){if(e){r(e)}else{xr(n,"_fd",null,{hidden:true});Ki.prototype.close.call(n);t()}})})};Xi.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function eu(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof eu)||typeof this==="undefined"){return new eu(e)}Pu("InputStringPort",e,"string");t=t||Fu;e=e.valueOf();this._with_parser=this._with_init_parser.bind(this,function(){if(!r.__parser__){r.__parser__=new yr(e,{env:t})}return r.__parser__});xr(this,"__type__",ou);this._make_defaults()}eu.prototype.char_ready=function(){return true};eu.prototype=Object.create(Wi.prototype);eu.prototype.constructor=eu;eu.prototype.toString=function(){return"#<input-port (string)>"};function tu(e){if(typeof this!=="undefined"&&!(this instanceof tu)||typeof this==="undefined"){return new tu(e)}Pu("InputByteVectorPort",e,"uint8array");xr(this,"__vector__",e);xr(this,"__type__",au);var r=0;Object.defineProperty(this,"__index__",{enumerable:true,get:function e(){return r},set:function e(t){Pu("InputByteVectorPort::__index__",t,"number");if(t instanceof Ni){t=t.valueOf()}if(typeof t==="bigint"){t=Number(t)}if(Math.floor(t)!==t){throw new Error("InputByteVectorPort::__index__ value is "+"not integer")}r=t}})}tu.prototype=Object.create(Wi.prototype);tu.prototype.constructor=tu;tu.prototype.toString=function(){return"#<input-port (bytevector)>"};tu.prototype.close=function(){var t=this;xr(this,"__vector__",Xr);["read_u8","close","peek_u8","read_u8_vector"].forEach(function(e){t[e]=function(){throw new Error("Input-binary-port: port is closed")}});this.char_ready=function(){return false}};tu.prototype.u8_ready=function(){return true};tu.prototype.peek_u8=function(){if(this.__index__>=this.__vector__.length){return su}return this.__vector__[this.__index__]};tu.prototype.skip=function(){if(this.__index__<=this.__vector__.length){++this.__index__}};tu.prototype.read_u8=function(){var e=this.peek_u8();this.skip();return e};tu.prototype.read_u8_vector=function(e){if(typeof e==="undefined"){e=this.__vector__.length}else if(e>this.__index__+this.__vector__.length){e=this.__index__+this.__vector__.length}if(this.peek_u8()===su){return su}return this.__vector__.slice(this.__index__,e)};function ru(){if(typeof this!=="undefined"&&!(this instanceof ru)||typeof this==="undefined"){return new ru}xr(this,"__type__",au);xr(this,"_buffer",[],{hidden:true});this.write=function(e){Pu("write",e,["number","uint8array"]);if(Ni.isNumber(e)){this._buffer.push(e.valueOf())}else{var t;(t=this._buffer).push.apply(t,C(Array.from(e)))}};Object.defineProperty(this,"__buffer__",{enumerable:true,get:function e(){return Uint8Array.from(this._buffer)}})}ru.prototype=Object.create(Ki.prototype);ru.prototype.constructor=ru;ru.prototype.close=function(){Ki.prototype.close.call(this);xr(this,"_buffer",null,{hidden:true})};ru.prototype._close_guard=function(){if(this._closed){throw new Error("output-port: binary port is closed")}};ru.prototype.write_u8=function(e){Pu("OutputByteVectorPort::write_u8",e,"number");this.write(e)};ru.prototype.write_u8_vector=function(e){Pu("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};ru.prototype.toString=function(){return"#<output-port (bytevector)>"};ru.prototype.valueOf=function(){return this.__buffer__};function nu(e,t){if(typeof this!=="undefined"&&!(this instanceof nu)||typeof this==="undefined"){return new nu(e,t)}eu.call(this,e);Pu("InputFilePort",t,"string");xr(this,"__filename__",t)}nu.prototype=Object.create(eu.prototype);nu.prototype.constructor=nu;nu.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function iu(e,t){if(typeof this!=="undefined"&&!(this instanceof iu)||typeof this==="undefined"){return new iu(e,t)}tu.call(this,e);Pu("InputBinaryFilePort",t,"string");xr(this,"__filename__",t)}iu.prototype=Object.create(tu.prototype);iu.prototype.constructor=iu;iu.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function uu(e,t){if(typeof this!=="undefined"&&!(this instanceof uu)||typeof this==="undefined"){return new uu(e,t)}Pu("OutputBinaryFilePort",e,"string");xr(this,"__filename__",e);xr(this,"_fd",t.valueOf(),{hidden:true});xr(this,"__type__",au);var u,r;this.write=function(e){var n=this;Pu("write",e,["number","uint8array"]);var i;if(!u){u=this.internal("fs")}if(!r){r=this.internal("Buffer")}if(Ni.isNumber(e)){i=r.from([e.valueOf()])}else{i=r.from(Array.from(e))}return new Promise(function(t,r){u.write(n._fd,i,function(e){if(e){r(e)}else{t()}})})}}uu.prototype=Object.create(Xi.prototype);uu.prototype.constructor=uu;uu.prototype.write_u8=function(e){Pu("OutputByteVectorPort::write_u8",e,"number");this.write(e)};uu.prototype.write_u8_vector=function(e){Pu("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};var au=Symbol["for"]("binary");var ou=Symbol["for"]("text");var su=new cu;function cu(){}cu.prototype.toString=function(){return"#<eof>"};function fu(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.stderr,i=r.stdin,u=r.stdout,a=w(r,We);if(typeof this!=="undefined"&&!(this instanceof fu)||typeof this==="undefined"){return new fu(e,nt({stdin:i,stdout:u,stderr:n},a))}if(typeof e==="undefined"){e="anonymous"}this.__env__=Eu.inherit(e,a);this.__env__.set("parent.frame",Cr("parent.frame",function(){return t.__env__},Fu.__env__["parent.frame"].__doc__));var o="**interaction-environment-defaults**";this.set(o,hn(a).concat(o));var s=bu.inherit("internal-".concat(e));if(Wn(i)){s.set("stdin",i)}if(Wn(n)){s.set("stderr",n)}if(Wn(u)){s.set("stdout",u)}xu(this.__env__,s)}fu.prototype.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;Pu("Interpreter::exec",e,["string","array"],1);Pu("Interpreter::exec",t,"boolean",2);Fu.set("**interaction-environment**",this.__env__);if(r===null){r=this.__env__}return Qu(e,r,t?r:false)};fu.prototype.get=function(e){var t=this.__env__.get(e);if(Pn(t)){return t.bind(this.__env__)}return t};fu.prototype.set=function(e,t){return this.__env__.set(e,t)};fu.prototype.constant=function(e,t){return this.__env__.constant(e,t)};function lu(e,t){this.name="LipsError";this.message=e;this.args=t;this.stack=(new Error).stack}lu.prototype=new Error;lu.prototype.constructor=lu;function hu(e,t,r){if(arguments.length===1){if(d(arguments[0])==="object"){e=arguments[0];t=null}else if(typeof arguments[0]==="string"){e={};t=null;r=arguments[0]}}this.__docs__=new Map;this.__env__=e;this.__parent__=t;this.__name__=r||"anonymous"}hu.prototype.list=function(){return hn(this.__env__)};hu.prototype.fs=function(){return this.get("**fs**")};hu.prototype.unset=function(e){if(e instanceof nr){e=e.valueOf()}if(e instanceof Ci){e=e.valueOf()}delete this.__env__[e]};hu.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(d(e)==="object"){t=e}if(!e||d(e)==="object"){e="child of "+(this.__name__||"unknown")}return new hu(t||{},this,e)};hu.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof nr){e=e.__name__}if(e instanceof Ci){e=e.valueOf()}if(t){if(!r){t=kr(t)}this.__docs__.set(e,t);return this}if(this.__docs__.has(e)){return this.__docs__.get(e)}if(this.__parent__){return this.__parent__.doc(e)}};hu.prototype.newFrame=function(e,t){var n=this.inherit("__frame__");n.set("parent.frame",Cr("parent.frame",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;e=e.valueOf();var t=n.__parent__;if(!(t instanceof hu)){return Xr}if(e<=0){return t}var r=t.get("parent.frame");return r(e-1)},Fu.__env__["parent.frame"].__doc__));t.callee=e;n.set("arguments",t);return n};hu.prototype._lookup=function(e){if(e instanceof nr){e=e.__name__}if(e instanceof Ci){e=e.valueOf()}if(this.__env__.hasOwnProperty(e)){return pu(this.__env__[e])}if(this.__parent__){return this.__parent__._lookup(e)}};hu.prototype.toString=function(){return"#<environment:"+this.__name__+">"};hu.prototype.clone=function(){var t=this;var r={};Object.keys(this.__env__).forEach(function(e){r[e]=t.__env__[e]});return new hu(r,this.__parent__,this.__name__)};hu.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"merge";Pu("Environment::merge",e,"environment");return this.inherit(t,e.__env__)};function pu(e){if(typeof this!=="undefined"&&!(this instanceof pu)||typeof this==="undefined"){return new pu(e)}this.value=e}pu.isUndefined=function(e){return e instanceof pu&&typeof e.value==="undefined"};pu.prototype.valueOf=function(){return this.value};function du(e){if(e.length){if(e.length===1){return e[0]}}if(typeof this!=="undefined"&&!(this instanceof du)||typeof this==="undefined"){return new du(e)}this.__values__=e}du.prototype.toString=function(){return this.__values__.map(function(e){return mn(e)}).join("\n")};du.prototype.valueOf=function(){return this.__values__};hu.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Pu("Environment::get",e,["symbol","string"]);var r=t.throwError,n=r===void 0?true:r;var i=e;if(i instanceof nr||i instanceof Ci){i=i.valueOf()}var u=this._lookup(i);if(u instanceof pu){if(pu.isUndefined(u)){return undefined}return Vn(u.valueOf())}var a;if(e instanceof nr&&e[nr.object]){a=e[nr.object]}else if(typeof i==="string"){a=i.split(".").filter(Boolean)}if(a&&a.length>0){var o=a,s=h(o),c=s[0],f=s.slice(1);u=this._lookup(c);if(f.length){try{if(u instanceof pu){u=u.valueOf()}else{u=mu(it,c);if(Pn(u)){u=Yn(u)}}if(typeof u!=="undefined"){return mu.apply(void 0,[u].concat(C(f)))}}catch(e){throw e}}else if(u instanceof pu){return Vn(u.valueOf())}u=mu(it,i)}if(typeof u!=="undefined"){return u}if(n){throw new Error("Unbound variable `"+i.toString()+"'")}};hu.prototype.set=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;Pu("Environment::set",e,["string","symbol"]);if(Ni.isNumber(t)){t=Ni(t)}if(e instanceof nr){e=e.__name__}if(e instanceof Ci){e=e.valueOf()}this.__env__[e]=t;if(r){this.doc(e,r,true)}return this};hu.prototype.constant=function(t,e){var r=this;if(this.__env__.hasOwnProperty(t)){throw new Error("Environment::constant: ".concat(t," already exists"))}if(arguments.length===1&&nn(arguments[0])){var n=arguments[0];Object.keys(n).forEach(function(e){r.constant(t,n[e])})}else{Object.defineProperty(this.__env__,t,{value:e,enumerable:true})}return this};hu.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};hu.prototype.ref=function(e){var t=this;while(true){if(!t){break}if(t.has(e)){return t}t=t.__parent__}};hu.prototype.parents=function(){var e=this;var t=[];while(e){t.unshift(e);e=e.__parent__}return t};function vu(e){if(Rn(e)){return e.then(vu)}if(e instanceof en||e instanceof nr){e[ei]=true}return e}var _u=br(er('(lambda ()\n                                          "[native code]"\n                                          (throw "Invalid Invocation"))'))[0];var mu=Cr("get",function e(t){var r;for(var n=arguments.length,i=new Array(n>1?n-1:0),u=1;u<n;u++){i[u-1]=arguments[u]}var a=i.length;while(i.length){if(Pn(t)&&d(i[0])!=="symbol"){t=Yn(t)}var o=i.shift();var s=zn(o);if(s==="then"&&t instanceof or){r=or.prototype.then}else if(s==="__code__"&&Pn(t)&&typeof t.__code__==="undefined"){r=_u}else{r=t[s]}if(typeof r==="undefined"){if(i.length){throw new Error("Try to get ".concat(i[0]," from undefined"))}return r}else{var c;if(i.length-1<a){c=t}r=Vn(r,c)}t=r}return r},"(. obj . args)\n        (get obj . args)\n\n        Function use object as base and keep using arguments to get the\n        property of JavaScript object. Arguments need to be a strings.\n        e.g. `(. console \"log\")` if you use any function inside LIPS is\n        will be weakly bind (can be rebind), so you can call this log function\n        without problem unlike in JavaScript when you use\n       `var log = console.log`.\n       `get` is an alias because . don't work in every place, e.g. you can't\n        pass it as argument.");function yu(e,t){var r=gu(e,"**internal-env**");return r.get(t)}function gu(e,t){var r=e.get("**interaction-environment**");return r.get(t)}var bu=new hu({stdout:new Ki(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new Ki(function(){var e;(e=console).error.apply(e,arguments)}),stdin:Wi(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined,"internal");var wu=Ni(NaN);var Du={true:true,false:false,"#true":true,"#false":false,"#t":true,"#f":false,nil:Xr,undefined:undefined,null:null,NaN:wu,"+nan.0":wu,"-nan.0":wu};var Fu=new hu({eof:su,undefined:undefined,"peek-char":Cr("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=yu(this,"stdin")}Nu("peek-char",e,"input-port");return e.peek_char()},"(peek-char port)\n\n            Function get character from string port or EOF object if no more\n            data in string port."),"read-line":Cr("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=yu(this,"stdin")}Nu("read-line",e,"input-port");return e.read_line()},"(read-char port)\n\n            Function read next character from input port."),"read-char":Cr("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=yu(this,"stdin")}Nu("read-char",e,"input-port");return e.read_char()},"(read-char port)\n\n            Function read next character from input port."),read:Cr("read",function(){var e=k(j.mark(function e(){var r,n,i,u,a,o,s,c,f,l=arguments;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=l.length>0&&l[0]!==undefined?l[0]:null;if(!Ci.isString(r)){t.next=35;break}n=true;i=false;t.prev=4;a=E(br(r,this));case 6:t.next=8;return a.next();case 8:o=t.sent;n=o.done;t.next=12;return o.value;case 12:s=t.sent;if(n){t.next=19;break}c=s;return t.abrupt("return",c);case 16:n=true;t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21;t.t0=t["catch"](4);i=true;u=t.t0;case 25:t.prev=25;t.prev=26;if(!(!n&&a["return"]!=null)){t.next=30;break}t.next=30;return a["return"]();case 30:t.prev=30;if(!i){t.next=33;break}throw u;case 33:return t.finish(30);case 34:return t.finish(25);case 35:if(r===null){f=yu(this,"stdin")}else{f=r}Nu("read",f,"input-port");return t.abrupt("return",f.read.call(this));case 38:case"end":return t.stop()}}},e,this,[[4,21,25,35],[26,,30,34]])}));function t(){return e.apply(this,arguments)}return t}(),"(read [string])\n\n            Function if used with string will parse the string and return\n            list structure of LIPS code. If called without an argument it\n            will read string from standard input (using browser prompt or\n            user defined way) and call itself with that string (parse is)\n            function can be used together with eval to evaluate code from\n            string"),pprint:Cr("pprint",function e(t){if(t instanceof en){t=new Ca.Formatter(t.toString(true))["break"]().format();Fu.get("display").call(Fu,t)}else{Fu.get("write").call(Fu,t)}Fu.get("newline").call(Fu)},"(pprint expression)\n\n           Pretty print list expression, if called with non-pair it just call\n           print function with passed argument."),print:Cr("print",function e(){var t=Fu.get("display");var r=Fu.get("newline");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}i.forEach(function(e){t.call(Fu,e);r.call(Fu)})},"(print . args)\n\n            Function convert each argument to string and print the result to\n            standard output (by default it's console but it can be defined\n            it user code), the function call newline after printing each arg."),format:Cr("format",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}Pu("format",t,"string");var u=/(~[as%~])/g;var a=t.match(/(~[as])/g);if(a&&a.length>n.length){throw new Error("Not enough arguments")}var o=0;var s=Fu.get("repr");t=t.replace(u,function(e){var t=e[1];if(t==="~"){return"~"}else if(t==="%"){return"\n"}else{var r=n[o++];if(t==="a"){return s(r)}else{return s(r,true)}}});a=t.match(/~([\S])/);if(a){throw new Error("format: Unrecognized escape seqence ".concat(a[1]))}return t},"(format string n1 n2 ...)\n\n            Function accepts string template and replacing any escape sequences\n            by arguments:\n\n            * ~a value as if printed with display\n            * ~s value as if printed with write\n            * ~% newline character\n            * ~~ literal tilde '~' is inserted\n\n            if there missing arguments or other escape character it throw exception."),display:Cr("display",function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r===null){r=yu(this,"stdout")}else{Pu("display",r,"output-port")}var n=Fu.get("repr")(t);r.write.call(Fu,n)},"(display arg [port])\n\n            Function send string to standard output or provied port."),"display-error":Cr("display-error",function e(){var t=yu(this,"stderr");var r=Fu.get("repr");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}var a=i.map(r).join(" ");t.write.call(Fu,a);Fu.get("newline")(t)},"(display-error . args)\n\n            Display error message."),"%same-functions":Cr("%same-functions",function(e,t){if(!Pn(e)){return false}if(!Pn(t)){return false}return Yn(e)===Yn(t)},"(%same-functions a b)\n\n            Helper function that check if two bound functions are the same"),help:Cr(new An("help",function(e,t){var r=t.dynamic_scope,n=t.error;var i;if(e.car instanceof nr){i=e.car}else if(e.car instanceof en&&e.car.car instanceof nr){i=e.car.car}else{var u=this;if(r){r=this}var a=Wu(e.car,{env:u,error:n,dynamic_scope:r});if(a&&a.__doc__){return a.__doc__}return}var o;var s=this.get(i);o=s&&s.__doc__;if(o){return o}var c=this.ref(i);if(c){o=c.doc(i);if(o){return o}}}),"(help object)\n\n             Macro returns documentation for function or macro. You can save the function\n             or macro in variable and use it in context. But help for variable require\n             to pass the symbol itself."),cons:Cr("cons",function e(t,r){return new en(t,r)},"(cons left right)\n\n            Function return new Pair out of two arguments."),car:Cr("car",function e(t){Pu("car",t,"pair");return t.car},"(car pair)\n\n            Function returns car (head) of the list/pair."),cdr:Cr("cdr",function e(t){Pu("cdr",t,"pair");return t.cdr},"(cdr pair)\n\n            Function returns cdr (tail) of the list/pair."),"set!":Cr(new An("set!",function(e){var u=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;if(r){r=this}var i=this;var a;var o=Wu(e.cdr.car,{env:this,dynamic_scope:r,error:n});o=$u(o);function s(t,r,n){if(Rn(t)){return t.then(function(e){return s(t,e,n)})}if(Rn(r)){return r.then(function(e){return s(t,e,n)})}if(Rn(n)){return n.then(function(e){return s(t,r,e)})}i.get("set-obj!").call(i,t,r,n);return n}if(e.car instanceof en&&nr.is(e.car.car,".")){var c=e.car.cdr.car;var f=e.car.cdr.cdr.car;var l=Wu(c,{env:this,dynamic_scope:r,error:n});var h=Wu(f,{env:this,dynamic_scope:r,error:n});return s(l,h,o)}if(!(e.car instanceof nr)){throw new Error("set! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var p=e.car.valueOf();a=this.ref(e.car.__name__);return Dr(o,function(e){if(!a){var t=p.split(".");if(t.length>1){var r=t.pop();var n=t.join(".");var i=u.get(n,{throwError:false});if(i){s(i,r,e);return}}throw new Error("Unbound variable `"+p+"'")}a.set(p,e)})}),"(set! name value)\n\n            Macro that can be used to set the value of the variable (mutate)\n            it search the scope chain until it finds first non emtpy slot and set it."),"unset!":Cr(new An("set!",function(e){if(!(e.car instanceof nr)){throw new Error("unset! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var t=e.car;var r=this.ref(t);if(r){delete r.__env__[t.__name__]}}),"(unset! name)\n\n            Function delete specified name from environment."),"set-car!":Cr("set-car!",function(e,t){Pu("set-car!",e,"pair");e.car=t},"(set-car! obj value)\n\n            Function that set car (head) of the list/pair to specified value.\n            It can destroy the list. Old value is lost."),"set-cdr!":Cr("set-cdr!",function(e,t){Pu("set-cdr!",e,"pair");e.cdr=t},"(set-cdr! obj value)\n\n            Function that set cdr (tail) of the list/pair to specified value.\n            It can destroy the list. Old value is lost."),"empty?":Cr("empty?",function(e){return typeof e==="undefined"||e===Xr},"(empty? object)\n\n            Function return true if value is undfined empty list."),gensym:Cr("gensym",ar,"(gensym)\n\n             Function generate unique symbol, to use with macros as meta name."),load:Cr("load",function e(t,r){Pu("load",t,"string");var n=this;if(n.__name__==="__frame__"){n=n.__parent__}if(!(r instanceof hu)){if(n===Fu){r=n}else{r=this.get("**interaction-environment**")}}var i="**module-path**";var u=Fu.get(i,{throwError:false});t=t.valueOf();if(!t.match(/.[^.]+$/)){t+=".scm"}var a=t.match(/\.xcb$/);function o(e){if(a){e=Fa(e)}else{if(Uu(e)==="buffer"){e=e.toString()}e=e.replace(/^#!.*/,"");if(e.match(/\{/)){e=_a(e)}}return Qu(e,r)}function s(e){return it.fetch(e).then(function(e){return a?e.arrayBuffer():e.text()}).then(function(e){if(a){e=new Uint8Array(e)}return e})}if(Ou()){return new Promise(function(r,n){var e=nodeRequire("path");if(u){u=u.valueOf();t=e.join(u,t)}Fu.set(i,e.dirname(t));nodeRequire("fs").readFile(t,function(e,t){if(e){n(e);Fu.set(i,u)}else{try{o(t).then(function(){r();Fu.set(i,u)})["catch"](n)}catch(e){n(e)}}})})}if(u){u=u.valueOf();t=u+"/"+t.replace(/^\.?\/?/,"")}return s(t).then(function(e){Fu.set(i,t.replace(/\/[^/]*$/,""));return o(e)}).then(function(){})["finally"](function(){Fu.set(i,u)})},"(load filename)\n            (load filename environment)\n\n            Function fetch the file and evaluate its content as LIPS code,\n            If second argument is provided and it's environment the evaluation\n            will happen in that environment."),do:Cr(new An("do",function(){var r=k(j.mark(function e(r,n){var i,u,a,o,s,c,f,l,h,p,d;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:i=n.dynamic_scope,u=n.error;a=this;if(i){i=a}o=a.inherit("do");s=r.car;c=r.cdr.car;f=r.cdr.cdr;if(f!==Xr){f=new en(nr("begin"),f)}l={env:a,dynamic_scope:i,error:u};h=s;case 10:if(!(h!==Xr)){t.next=21;break}p=h.car;t.t0=o;t.t1=p.car;t.next=16;return Wu(p.cdr.car,l);case 16:t.t2=t.sent;t.t0.set.call(t.t0,t.t1,t.t2);h=h.cdr;t.next=10;break;case 21:l={env:o,dynamic_scope:i,error:u};d=j.mark(function e(){var r,n,i,u,a;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(f!==Xr)){t.next=3;break}t.next=3;return Ca.evaluate(f,l);case 3:r=s;n={};case 5:if(!(r!==Xr)){t.next=15;break}i=r.car;if(!(i.cdr.cdr!==Xr)){t.next=12;break}t.next=10;return Wu(i.cdr.cdr.car,l);case 10:u=t.sent;n[i.car.valueOf()]=u;case 12:r=r.cdr;t.next=5;break;case 15:a=Object.getOwnPropertySymbols(n);Object.keys(n).concat(a).forEach(function(e){o.set(e,n[e])});case 17:case"end":return t.stop()}}},e)});case 23:t.next=25;return Wu(c.car,l);case 25:t.t3=t.sent;if(!(t.t3===false)){t.next=30;break}return t.delegateYield(d(),"t4",28);case 28:t.next=23;break;case 30:if(!(c.cdr!==Xr)){t.next=34;break}t.next=33;return Wu(c.cdr.car,l);case 33:return t.abrupt("return",t.sent);case 34:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()),"(do ((<var> <init> <next>)) (test expression) . body)\n\n             Iteration macro that evaluate the expression body in scope of the variables.\n             On Eeach loop it increase the variables according to next expression and run\n             test to check if the loop should continue. If test is signle call the macro\n             will not return anything. If the test is pair of expression and value the\n             macro will return that value after finish."),if:Cr(new An("if",function(r,e){var n=e.dynamic_scope,i=e.error;if(n){n=this}var u=this;var t=function e(t){if(t===false){return Wu(r.cdr.cdr.car,{env:u,dynamic_scope:n,error:i})}else{return Wu(r.cdr.car,{env:u,dynamic_scope:n,error:i})}};if(r===Xr){throw new Error("too few expressions for `if`")}var a=Wu(r.car,{env:u,dynamic_scope:n,error:i});return Dr(a,t)}),"(if cond true-expr false-expr)\n\n            Macro evaluate condition expression and if the value is true, it\n            evaluate and return true expression if not it evaluate and return\n            false expression"),"let-env":new An("let-env",function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=e.dynamic_scope,n=e.error;Pu("let-env",t,"pair");var i=Wu(t.car,{env:this,dynamic_scope:r,error:n});return Dr(i,function(e){Pu("let-env",e,"environment");return Wu(en(nr("begin"),t.cdr),{env:e,dynamic_scope:r,error:n})})},"(let-env env . body)\n\n            Special macro that evaluate body in context of given environment\n            object."),letrec:Cr(vi(Symbol["for"]("letrec")),"(letrec ((a value-a) (b value-b)) body)\n\n             Macro that creates new environment, then evaluate and assign values to\n             names and then evaluate the body in context of that environment.\n             Values are evaluated sequentialy and next value can access to\n             previous values/names."),"letrec*":Cr(vi(Symbol["for"]("letrec")),"(letrec* ((a value-a) (b value-b)) body)\n\n             Same as letrec but the order of execution of the binding is guaranteed,\n             so use can use recursive code as well as reference previous binding.\n             In LIPS both letrec and letrec* behave the same."),"let*":Cr(vi(Symbol["for"]("let*")),"(let* ((a value-a) (b value-b)) body)\n\n             Macro similar to `let` but next argument get environment\n             from previous let variable, so they you can define one variable,\n             and use in next argument."),let:Cr(vi(Symbol["for"]("let")),"(let ((a value-a) (b value-b)) body)\n\n             Macro that creates new environment, then evaluate and assign values to\n             names and then evaluate the body in context of that environment.\n             Values are evaluated sequentialy but you can't access\n             previous values/names when next are evaluated. You can only get them\n             from body of let expression."),"begin*":Cr(_i("begin*",function(e){return e.pop()}),"(begin* . expr)\n\n             This macro is parallel version of begin. It evaluate each expression and\n             if it's a promise it will evaluate it in parallel and return value\n             of last expression."),begin:Cr(new An("begin",function(e,t){var n=Object.assign({},t);var i=Fu.get("list->array")(e);if(n.dynamic_scope){n.dynamic_scope=this}n.env=this;var u;return function t(){if(i.length){var e=i.shift();var r=Wu(e,n);return Dr(r,function(e){u=e;return t()})}else{return u}}()}),"(begin . args)\n\n             Macro runs list of expression and return valuate of the list one.\n             It can be used in place where you can only have single exression,\n             like if expression."),ignore:new An("ignore",function(e,t){var r=t.dynamic_scope,n=t.error;var i={env:this,error:n};if(r){i.dynamic_scope=this}Wu(new en(new nr("begin"),e),i)},"(ignore expression)\n\n            Macro that will evaluate expression and swallow any promises that may\n            be created. It wil run and ignore any value that may be returned by\n            expression. The code should have side effects and/or when it's promise\n            it should resolve to undefined."),"call/cc":Cr(An.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=nt({env:this},t);return Dr(Wu(e.car,r),function(e){if(Pn(e)){return e(new Ju(null))}})}),"(call/cc proc)\n\n              TODO"),define:Cr(An.defmacro("define",function(r,e){var n=this;if(r.car instanceof en&&r.car.car instanceof nr){var t=new en(new nr("define"),new en(r.car.car,new en(new en(new nr("lambda"),new en(r.car.cdr,r.cdr)))));return t}else if(e.macro_expand){return}if(e.dynamic_scope){e.dynamic_scope=this}e.env=n;var i=r.cdr.car;var u;if(i instanceof en){i=Wu(i,e);u=true}else if(i instanceof nr){i=n.get(i)}Pu("define",r.car,"symbol");return Dr(i,function(e){if(n.__name__===On.__merge_env__){n=n.__parent__}if(u&&(Pn(e)&&li(e)||e instanceof On)){e.__name__=r.car.valueOf();if(e.__name__ instanceof Ci){e.__name__=e.__name__.valueOf()}}var t;if(r.cdr.cdr instanceof en&&Ci.isString(r.cdr.cdr.car)){t=r.cdr.cdr.car.valueOf()}n.set(r.car,e,t,true)})}),'(define name expression)\n             (define name expression "doc string")\n             (define (function-name . args) body)\n\n             Macro for defining values. It can be used to define variables,\n             or function. If first argument is list it will create function\n             with name beeing first element of the list. The macro evalute\n             code `(define function (lambda args body))`'),"set-obj!":Cr("set-obj!",function(e,t,r){var n=d(e);if(Nn(e)||n!=="object"&&n!=="function"){var i=ju("set-obj!",Uu(e),["object","function"]);throw new Error(i)}Pu("set-obj!",t,["string","symbol","number"]);e=Yn(e);t=t.valueOf();if(arguments.length===2){delete e[t]}else if(yn(e)&&Pn(r)){e[t]=Yn(r);e[t][ui]=true}else if(Pn(r)||qu(r)||r===Xr){e[t]=r}else{e[t]=r&&!yn(r)?r.valueOf():r}},"(set-obj! obj key value)\n\n            Function set property of JavaScript object"),"null-environment":Cr("null-environment",function(){return Fu.inherit("null")},"(null-environment)\n\n            Function return new base environment with std lib."),values:Cr("values",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return du(r)},"(values a1 a2 ...)\n\n            If called with more then one elment it will create special\n            Values object that can be used in call-with-values function"),"call-with-values":Cr("call-with-values",function(e,t){Pu("call-with-values",e,"function",1);Pu("call-with-values",t,"function",2);var r=e();if(r instanceof du){return t.apply(void 0,C(r.valueOf()))}return t(r)},"(call-with-values producer consumer)\n\n            Calls its producer argument with no values and a continuation that,\n            when passed some values, calls the consumer procedure with those\n            values as arguments."),"current-environment":Cr("current-environment",function(){if(this.__name__==="__frame__"){return this.__parent__}return this},"(current-environment)\n\n            Function return current environement."),"parent.frame":Cr("parent.frame",function(){return Eu},"(parent.frame)\n\n            Return parent environment if called from inside function.\n            If no parent frame found it return nil."),eval:Cr("eval",function(e,t){var n=this;t=t||this.get("current-environment").call(this);return Wu(e,{env:t,error:function e(t){var e=Fu.get("display-error");e.call(n,t.message);if(t.code){var r=t.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}).join("\n");e.call(n,r)}}})},"(eval expr)\n            (eval expr environment)\n\n            Function evalute LIPS Scheme code."),lambda:new An("lambda",function(l){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},h=e.dynamic_scope,p=e.error;var d=this;var v;if(l.cdr instanceof en&&Ci.isString(l.cdr.car)&&l.cdr.cdr!==Xr){v=l.cdr.car.valueOf()}function _(){var e;if(h){if(!(this instanceof hu)){e=d}else{e=this}}else{e=d}e=e.inherit("lambda");var t=l.car;var r=0;var n;if(typeof this!=="undefined"&&!(this instanceof hu)){if(this&&!this.__instance__){Object.defineProperty(this,"__instance__",{enumerable:false,get:function e(){return true},set:function e(){},configurable:false})}e.set("this",this)}for(var i=arguments.length,u=new Array(i),a=0;a<i;a++){u[a]=arguments[a]}if(this instanceof hu){var o={throwError:false};e.set("arguments",this.get("arguments",o));e.set("parent.frame",this.get("parent.frame",o))}else{var s=u.slice();s.callee=_;s.env=e;e.set("arguments",s)}if(t instanceof nr||t!==Xr){while(true){if(t.car!==Xr){if(t instanceof nr){n=vu(en.fromArray(u.slice(r),false));e.__env__[t.__name__]=n;break}else{n=u[r];e.__env__[t.car.__name__]=n}}if(t.cdr===Xr){break}r++;t=t.cdr}}if(h){h=e}var c=v?l.cdr.cdr:l.cdr;var f=new en(new nr("begin"),c);return Wu(f,{env:e,dynamic_scope:h,error:p})}var t=l.car instanceof en?l.car.length():null;_.__code__=new en(new nr("lambda"),l);_[ai]=true;if(!(l.car instanceof en)){return Cr(_,v,true)}return Cr(fi(_,t),v,true)},"(lambda (a b) body)\n            (lambda args body)\n            (lambda (a b . rest) body)\n\n            Macro lambda create new anonymous function, if first element of the body\n            is string and there is more elements it will be documentation, that can\n            be read using (help fn)"),macroexpand:new An("macroexpand",kn()),"macroexpand-1":new An("macroexpand-1",kn(true)),"define-macro":Cr(new An(Mn,function(o,e){var s=e.dynamic_scope,c=e.error;if(o.car instanceof en&&o.car.car instanceof nr){var t=o.car.car.__name__;var f;if(Ci.isString(o.cdr.car)&&o.cdr.cdr instanceof en){f=o.cdr.car.valueOf()}var r=An.defmacro(t,function(e){var t=new hu({},this,"defmacro");var r=o.car.cdr;var n=e;while(true){if(r===Xr){break}if(r instanceof nr){t.__env__[r.__name__]=n;break}else if(r.car!==Xr){if(n===Xr){t.__env__[r.car.__name__]=Xr}else{if(n.car instanceof en){n.car[ei]=true}t.__env__[r.car.__name__]=n.car}}if(r.cdr===Xr){break}if(n!==Xr){n=n.cdr}r=r.cdr}if(s){s=t}var i={env:t,dynamic_scope:s,error:c};if(o.cdr instanceof en){var u=f?o.cdr.cdr:o.cdr;var a=u.reduce(function(e,t){return Wu(t,i)});return Dr(a,function(e){if(d(e)==="object"){delete e[ei]}return e})}},f,true);r.__code__=new en(new nr("define-macro"),o);this.set(t,r)}}),"(define-macro (name . args) body)\n\n             Meta macro, macro that create new macros, if return value is list structure\n             it will be evaluated when macro is invoked. You can use quasiquote ` and\n             unquote , and unquote-splicing ,@ inside to create expression that will be\n             evaluated on runtime. Macros works like this: if you pass any expression to\n             macro the arguments will not be evaluated unless macro itself evaluate it.\n             Because of this macro can manipulate expression (arguments) as lists."),"syntax-rules":new An("syntax-rules",function(m,e){var y=e.dynamic_scope,g=e.error;var b=this;function w(e){var t=[];while(e!==Xr){var r=e.car;t.push(r.valueOf());e=e.cdr}return t}function t(e){while(e!==Xr){var t=e.car;if(!(t instanceof nr)){throw new Error("syntax-rules: wrong identifier")}e=e.cdr}}if(m.car instanceof nr){t(m.cdr.car)}else{t(m.car)}var r=new On(function(e,t){var r=t.macro_expand;var n=b.inherit("syntax");if(y){y=n}var i=this;if(i.__name__===On.__merge_env__){var u=Object.getOwnPropertySymbols(i.__env__);u.forEach(function(e){i.__parent__.set(e,i.__env__[e])});i=i.__parent__}var a={env:n,dynamic_scope:y,error:g};var o,s,c;if(m.car instanceof nr){o=m.car;c=w(m.cdr.car);s=m.cdr.cdr}else{o="...";c=w(m.car);s=m.cdr}try{while(s!==Xr){var f=s.car.car;var l=s.car.cdr.car;at(f);var h=Bn(f,e,c,o,{expansion:this,define:b});if(h){if(ot()){console.log(JSON.stringify(ln(h),true,2));console.log("PATTERN: "+f.toString(true));console.log("MACRO: "+e.toString(true))}var p=[];var d=In({bindings:h,expr:l,symbols:c,scope:n,lex_scope:i,names:p,ellipsis:o});at("OUPUT>>> "+d.toString());if(d){l=d}var v=i.merge(n,On.__merge_env__);if(r){return{expr:l,scope:v}}var _=Wu(l,nt(nt({},a),{},{env:v}));return jn(_,p)}s=s.cdr}}catch(e){e.message+=" in macro: ".concat(m.toString(true));throw e}throw new Error("Invalid Syntax ".concat(e.toString(true)))},b);r.__code__=m;return r},"(syntax-rules () (pattern expression) ...)\n\n            Base of Hygienic macro, it will return new syntax expander\n            that works like lisp macros."),quote:Cr(new An("quote",function(e){return vu(e.car)}),"(quote expression)\n\n             Macro that return single lips expression as data (it don't evaluate its\n             argument). It will return list of pairs if put in front of lips code.\n             And if put in fron of symbol it will return that symbol not value\n             associated with that name."),"unquote-splicing":Cr("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},"(unquote-splicing code)\n\n            Special form to be used in quasiquote macro, parser is processing special\n            characters ,@ and create call to this pseudo function. It can be used\n            to evalute expression inside and return the value without parenthesis.\n            the value will be joined to the output list structure."),unquote:Cr("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},"(unquote code)\n\n            Special form to be used in quasiquote macro, parser is processing special\n            characters , and create call to this pseudo function. It can be used\n            to evalute expression inside and return the value, the output is inserted\n            into list structure created by queasiquote."),quasiquote:An.defmacro("quasiquote",function(e,t){var o=t.dynamic_scope,s=t.error;var c=this;if(o){o=c}function u(e){return e instanceof en||nn(e)||Array.isArray(e)}function f(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:u;if(e instanceof en){var n=e.car;var i=e.cdr;if(r(n)){n=t(n)}if(r(i)){i=t(i)}if(Rn(n)||Rn(i)){return sr([n,i]).then(function(e){var t=F(e,2),r=t[0],n=t[1];return new en(r,n)})}else{return new en(n,i)}}return e}function a(e,t){if(e instanceof en){if(t!==Xr){e.append(t)}}else{e=new en(e,t)}return e}function r(e){return!!e.filter(function(e){return e instanceof en&&nr.is(e.car,/^(unquote|unquote-splicing)$/)}).length}function l(e,n,i){return e.reduce(function(e,t){if(!(t instanceof en)){e.push(t);return e}if(nr.is(t.car,"unquote-splicing")){var r;if(n+1<i){r=v(t.cdr,n+1,i)}else{r=Wu(t.cdr.car,{env:c,dynamic_scope:o,error:s})}if(!(r instanceof en)){throw new Error("Expecting list ".concat(Uu(t)," found"))}return e.concat(r.to_array())}e.push(v(t,n,i));return e},[])}function h(n,i,u){var a={};i++;Object.keys(n).forEach(function(e){var t=n[e];if(t instanceof en){if(nr.is(t.car,"unquote-splicing")){throw new Error("You can't call `unquote-splicing` "+"inside object")}var r;if(i<u){r=v(t.cdr.car,i,u)}else{r=Wu(t.cdr.car,{env:c,dynamic_scope:o,error:s})}a[e]=r}else{a[e]=t}});if(Object.isFrozen(n)){Object.freeze(a)}return a}function p(i,e,t){if(e<t){return new en(new en(i.car.car,v(i.car.cdr,e,t)),Xr)}var n=[];return function e(t){var r=Wu(t.car,{env:c,dynamic_scope:o,error:s});n.push(r);if(t.cdr instanceof en){return e(t.cdr)}return Dr(n,function(r){if(r.some(function(e){return!(e instanceof en)})){if(i.cdr instanceof en&&nr.is(i.cdr.car,".")&&i.cdr.cdr instanceof en&&i.cdr.cdr.cdr===Xr){return i.cdr.cdr.car}if(!(i.cdr===Xr||i.cdr instanceof en)){var e="You can't splice atom inside list";throw new Error(e)}if(r.length>1){var t="You can't splice multiple atoms inside list";throw new Error(t)}if(!(i.cdr instanceof en&&r[0]===Xr)){return r[0]}}r=r.map(function(e){if(d.has(e)){return e.clone()}else{d.add(e);return e}});var n=v(i.cdr,0,1);if(n===Xr&&r[0]===Xr){return undefined}return Dr(n,function(e){if(r[0]===Xr){return e}if(r.length===1){return a(r[0],e)}var t=r.reduce(function(e,t){return a(e,t)});return a(t,e)})})}(i.car.cdr)}var d=new Set;function v(e,t,r){if(e instanceof en){if(e.car instanceof en){if(nr.is(e.car.car,"unquote-splicing")){return p(e,t+1,r)}if(nr.is(e.car.car,"unquote")){if(t+2===r&&e.car.cdr instanceof en&&e.car.cdr.car instanceof en&&nr.is(e.car.cdr.car.car,"unquote-splicing")){var n=e.car.cdr;return new en(new en(new nr("unquote"),p(n,t+2,r)),Xr)}else if(e.car.cdr instanceof en&&e.car.cdr.cdr!==Xr){if(e.car.cdr.car instanceof en){var i=[];return function t(r){if(r===Xr){return en.fromArray(i)}return Dr(Wu(r.car,{env:c,dynamic_scope:o,error:s}),function(e){i.push(e);return t(r.cdr)})}(e.car.cdr)}else{return e.car.cdr}}}}if(nr.is(e.car,"quasiquote")){var u=v(e.cdr,t,r+1);return new en(e.car,u)}if(nr.is(e.car,"quote")){return new en(e.car,v(e.cdr,t,r))}if(nr.is(e.car,"unquote")){t++;if(t<r){return new en(new nr("unquote"),v(e.cdr,t,r))}if(t>r){throw new Error("You can't call `unquote` outside "+"of quasiquote")}if(e.cdr instanceof en){if(e.cdr.cdr!==Xr){if(e.cdr.car instanceof en){var a=[];return function t(r){if(r===Xr){return en.fromArray(a)}return Dr(Wu(r.car,{env:c,dynamic_scope:o,error:s}),function(e){a.push(e);return t(r.cdr)})}(e.cdr)}else{return e.cdr}}else{return Wu(e.cdr.car,{env:c,dynamic_scope:o,error:s})}}else{return e.cdr}}return f(e,function(e){return v(e,t,r)})}else if(nn(e)){return h(e,t,r)}else if(e instanceof Array){return l(e,t,r)}return e}function n(e){if(e instanceof en){delete e[ei];if(!e.haveCycles("car")){n(e.car)}if(!e.haveCycles("cdr")){n(e.cdr)}}}if(nn(e.car)&&!r(Object.values(e.car))){return vu(e.car)}if(Array.isArray(e.car)&&!r(e.car)){return vu(e.car)}if(e.car instanceof en&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote")){return vu(e.car)}var i=v(e.car,0,1);return Dr(i,function(e){n(e);return vu(e)})},"(quasiquote list ,value ,@value)\n\n            Similar macro to `quote` but inside it you can use special\n            expressions unquote abbreviated to , that will evaluate expresion inside\n            and return its value or unquote-splicing abbreviated to ,@ that will\n            evaluate expression but return value without parenthesis (it will join)\n            the list with its value. Best used with macros but it can be used outside"),clone:Cr("clone",function e(t){Pu("clone",t,"pair");return t.clone()},"(clone list)\n\n            Function return clone of the list."),append:Cr("append",function e(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n=n.map(function(e){if(e instanceof en){return e.clone()}return e});return(t=Fu.get("append!")).call.apply(t,[this].concat(C(n)))},"(append item ...)\n\n            Function will create new list with eac argument appended to the end.\n            It will always return new list and not modify it's arguments."),"append!":Cr("append!",function(){var r=Fu.get("list?");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.reduce(function(e,t){Pu("append!",e,["nil","pair"]);if((t instanceof en||t===Xr)&&!r(t)){throw new Error("append!: Invalid argument, value is not a list")}if(Nn(t)){return e}if(e===Xr){if(t===Xr){return Xr}return t}return e.append(t)},Xr)},"(append! arg1 ...)\n\n             Destructive version of append, it modify the list in place. It return\n             new list where each argument is appened to the end. It may modify\n             lists added as arguments."),reverse:Cr("reverse",function e(t){Pu("reverse",t,["array","pair","nil"]);if(t===Xr){return Xr}if(t instanceof en){var r=Fu.get("list->array")(t).reverse();return Fu.get("array->list")(r)}else if(!(t instanceof Array)){throw new Error(ju("reverse",Uu(t),"array or pair"))}else{return t.reverse()}},"(reverse list)\n\n            Function will reverse the list or array. If value is not a list\n            or array it will throw exception."),nth:Cr("nth",function e(t,r){Pu("nth",t,"number");Pu("nth",r,["array","pair"]);if(r instanceof en){var n=r;var i=0;while(i<t){if(!n.cdr||n.cdr===Xr||n.haveCycles("cdr")){return Xr}n=n.cdr;i++}return n.car}else if(r instanceof Array){return r[t]}else{throw new Error(ju("nth",Uu(r),"array or pair",2))}},"(nth index obj)\n\n            Function return nth element of the list or array. If used with different\n            value it will throw exception"),list:Cr("list",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return r.reverse().reduce(function(e,t){return new en(t,e)},Xr)},"(list . args)\n\n            Function create new list out of its arguments."),substring:Cr("substring",function e(t,r,n){Pu("substring",t,"string");Pu("substring",r,"number");Pu("substring",n,["number","undefined"]);return t.substring(r.valueOf(),n&&n.valueOf())},"(substring string start end)\n\n            Function return part of the string starting at start ending with end."),concat:Cr("concat",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(function(e,t){return Pu("concat",e,"string",t+1)});return r.join("")},"(concat . strings)\n\n            Function create new string by joining its arguments"),join:Cr("join",function e(t,r){Pu("join",t,"string");Pu("join",r,["pair","nil"]);return Fu.get("list->array")(r).join(t)},"(join separator list)\n\n            Function return string by joining elements of the list"),split:Cr("split",function e(t,r){Pu("split",t,["regex","string"]);Pu("split",r,"string");return Fu.get("array->list")(r.split(t))},"(split separator string)\n\n            Function create list by splitting string by separatar that can\n            be a string or regular expression."),replace:Cr("replace",function e(t,r,n){Pu("replace",t,["regex","string"]);Pu("replace",r,["string","function"]);Pu("replace",n,"string");return n.replace(t,r)},"(replace pattern replacement string)\n\n            Function change pattern to replacement inside string. Pattern can be string\n            or regex and replacement can be function or string."),match:Cr("match",function e(t,r){Pu("match",t,["regex","string"]);Pu("match",r,"string");var n=r.match(t);return n?Fu.get("array->list")(n):false},"(match pattern string)\n\n            function return match object from JavaScript as list or #f if not match."),search:Cr("search",function e(t,r){Pu("search",t,["regex","string"]);Pu("search",r,"string");return r.search(t)},"(search pattern string)\n\n            Function return first found index of the pattern inside a string"),repr:Cr("repr",function e(t,r){return mn(t,r)},"(repr obj)\n\n            Function return string LIPS representation of an object as string."),"escape-regex":Cr("escape-regex",function(e){Pu("escape-regex",e,"string");return Ht(e.valueOf())},"(escape-regex string)\n\n            Function return new string where all special operators used in regex,\n            are escaped with slash so they can be used in RegExp constructor\n            to match literal string"),env:Cr("env",function e(e){e=e||this;var t=Object.keys(e.__env__).map(nr);var r;if(t.length){r=en.fromArray(t)}else{r=Xr}if(e.__parent__ instanceof hu){return Fu.get("env")(e.__parent__).append(r)}return r},"(env)\n            (env obj)\n\n            Function return list of values (functions, macros and variables)\n            inside environment and it's parents."),new:Cr("new",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var i=p(Yn(e),C(r.map(function(e){return zn(e)})));return i},"(new obj . args)\n\n            Function create new JavaScript instance of an object."),typecheck:Cr(Pu,"(typecheck label value type [position])\n\n             Function check type and throw exception if type don't match.\n             Type can be string or list of strings. Position optional argument\n             is used to created proper error message."),"unset-special!":Cr("unset-special!",function(e){Pu("remove-special!",e,"string");delete lr.remove(e.valueOf())},"(unset-special! name)\n\n            Function remove special symbol from parser. Added by `set-special!`,\n            name must be a string."),"set-special!":Cr("set-special!",function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:lr.LITERAL;Pu("set-special!",e,"string",1);Pu("set-special!",t,"symbol",2);lr.append(e.valueOf(),t,r)},'(set-special! symbol name [type])\n\n            Add special symbol to the list of transforming operators by the parser.\n            e.g.: `(add-special! "#" \'x)` will allow to use `#(1 2 3)` and it will be\n            transformed into (x (1 2 3)) so you can write x macro that will process\n            the list. 3rd argument is optional and it can be constant value\n            lips.specials.SPLICE if this constant is used it will transform\n            `#(1 2 3)` into (x 1 2 3) that is required by # that define vectors.'),get:mu,".":mu,unbind:Cr(Yn,"(unbind fn)\n\n             Function remove bidning from function so you can get props from it."),type:Cr(Uu,"(type object)\n\n             Function return type of an object as string."),debugger:Cr("debugger",function(){debugger},"(debugger)\n\n            Function stop JavaScript code in debugger."),in:Cr("in",function(e,t){if(e instanceof nr||e instanceof Ci||e instanceof Ni){e=e.valueOf()}return e in zn(t)},"(in key value)\n\n            Function use is in operator to check if value is in object."),instanceof:Cr("instanceof",function(e,t){return t instanceof Yn(e)},"(instanceof type obj)\n\n            Function check of object is instance of object."),"prototype?":Cr("prototype?",yn,"(prototype? obj)\n\n             Function check if value is JavaScript Object prototype."),"macro?":Cr("macro?",function(e){return e instanceof An},"(macro? expression)\n\n            Function check if value is a macro."),"function?":Cr("function?",Pn,"(function? expression)\n\n             Function check if value is a function."),"real?":Cr("real?",function(e){if(Uu(e)!=="number"){return false}if(e instanceof Ni){return e.isFloat()}return Ni.isFloat(e)},"(real? number)\n\n            Function check if value is real number."),"number?":Cr("number?",function(e){return Number.isNaN(e)||Ni.isNumber(e)},"(number? expression)\n\n            Function check if value is a number or NaN value."),"string?":Cr("string?",function(e){return Ci.isString(e)},"(string? expression)\n\n            Function check if value is a string."),"pair?":Cr("pair?",function(e){return e instanceof en},"(pair? expression)\n\n            Function check if value is a pair or list structure."),"regex?":Cr("regex?",function(e){return e instanceof RegExp},"(regex? expression)\n\n            Function check if value is regular expression."),"null?":Cr("null?",function(e){return Nn(e)},"(null? expression)\n\n            Function check if value is nulish."),"boolean?":Cr("boolean?",function(e){return typeof e==="boolean"},"(boolean? expression)\n\n            Function check if value is boolean."),"symbol?":Cr("symbol?",function(e){return e instanceof nr},"(symbol? expression)\n\n            Function check if value is LIPS symbol"),"array?":Cr("array?",function(e){return e instanceof Array},"(array? expression)\n\n            Function check if value is an arrray."),"object?":Cr("object?",function(e){return e!==Xr&&e!==null&&!(e instanceof Mi)&&!(e instanceof RegExp)&&!(e instanceof Ci)&&!(e instanceof en)&&!(e instanceof Ni)&&d(e)==="object"&&!(e instanceof Array)},"(object? expression)\n\n            Function check if value is an plain object."),flatten:Cr("flatten",function e(t){Pu("flatten",t,"pair");return t.flatten()},"(flatten list)\n\n            Return shallow list from tree structure (pairs)."),"array->list":Cr("array->list",function(e){Pu("array->list",e,"array");return en.fromArray(e)},"(array->list array)\n\n            Function convert JavaScript array to LIPS list."),"tree->array":Cr("tree->array",tn("tree->array",true),"(tree->array list)\n\n             Function convert LIPS list structure into JavaScript array."),"list->array":Cr("list->array",tn("list->array"),"(list->array list)\n\n             Function convert LIPS list into JavaScript array."),apply:Cr("apply",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}Pu("apply",t,"function",1);var u=n.pop();Pu("apply",u,["pair","nil"],n.length+2);n=n.concat(Fu.get("list->array").call(this,u));return t.apply(this,Zu(t,n))},"(apply fn list)\n\n            Function that call function with list of arguments."),length:Cr("length",function e(t){if(!t||t===Xr){return 0}if(t instanceof en){return t.length()}if("length"in t){return t.length}},"(length expression)\n\n            Function return length of the object, the object can be list\n            or any object that have length property."),"string->number":Cr("string->number",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;Pu("string->number",e,"string",1);Pu("string->number",t,"number",2);e=e.valueOf();t=t.valueOf();if(e.match(kt)||e.match(At)){return It(e,t)}else if(e.match(Ot)||e.match(xt)){return Lt(e,t)}else{var r=t===10&&!e.match(/e/i)||t===16;if(e.match(Ct)&&r||e.match(Mt)){return Nt(e,t)}if(e.match(vt)){return Tt(e)}}return false},"(string->number number [radix])\n\n           Function convert string to number."),try:Cr(new An("try",function(t,e){var c=this;var f=e.dynamic_scope,l=e.error;return new Promise(function(i,n){var u,a;if(nr.is(t.cdr.car.car,"catch")){u=t.cdr.car;if(t.cdr.cdr instanceof en&&nr.is(t.cdr.cdr.car.car,"finally")){a=t.cdr.cdr.car}}else if(nr.is(t.cdr.car.car,"finally")){a=t.cdr.car}if(!(a||u)){throw new Error("try: invalid syntax")}var o=i;if(a){o=function e(t,r){o=n;Dr(Wu(new en(new nr("begin"),a.cdr),s),function(){r(t)})}}var s={env:c,error:function e(t){var r=c.inherit("try");if(u){r.set(u.cdr.car.car,t);var n={env:r,error:l};if(f){n.dynamic_scope=c}Dr(Wu(new en(new nr("begin"),u.cdr.cdr),n),function(e){o(e,i)})}else{o(t,l)}}};if(f){s.dynamic_scope=c}var e=Wu(t.car,s);if(Rn(e)){e.then(function(e){o(e,i)})["catch"](s.error)}else{o(e,i)}})}),"(try expr (catch (e) code))\n             (try expr (catch (e) code) (finally code))\n             (try expr (finally code))\n\n             Macro execute user code and catch exception. If catch is provided\n             it's executed when expression expr throw error. If finally is provide\n             it's always executed at the end."),raise:Cr("raise",function(e){throw e},"(raise obj)\n\n            Throws new exception with given object."),throw:Cr("throw",function(e){throw new Error(e)},"(throw string)\n\n            Throws new expection."),find:Cr("find",function t(r,n){Pu("find",r,["regex","function"]);Pu("find",n,["pair","nil"]);if(Nn(n)){return Xr}var e=Mr("find",r);return Dr(e(n.car),function(e){if(e&&e!==Xr){return n.car}return t(r,n.cdr)})},"(find fn list)\n            (find regex list)\n\n            Higher order Function find first value for which function return true.\n            If called with regex it will create matcher function."),"for-each":Cr("for-each",function(e){var t;Pu("for-each",e,"function");for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}n.forEach(function(e,t){Pu("for-each",e,["pair","nil"],t+1)});var u=(t=Fu.get("map")).call.apply(t,[this,e].concat(n));if(Rn(u)){return u.then(function(){})}},"(for-each fn . lists)\n\n            Higher order function that call function `fn` by for each\n            value of the argument. If you provide more then one list as argument\n            it will take each value from each list and call `fn` function\n            with that many argument as number of list arguments."),map:Cr("map",function e(r){var n=this;for(var t=arguments.length,i=new Array(t>1?t-1:0),u=1;u<t;u++){i[u-1]=arguments[u]}Pu("map",r,"function");var a=Fu.get("list?");i.forEach(function(e,t){Pu("map",e,["pair","nil"],t+1);if(e instanceof en&&!a.call(n,e)){throw new Error("map: argument ".concat(t+1," is not a list"))}});if(i.length===0){return Xr}if(i.some(function(e){return e===Xr})){return Xr}var o=i.map(function(e){return e.car});var s=this.get("parent.frame");var c=this.newFrame(r,o);c.set("parent.frame",s);return Dr(r.call.apply(r,[c].concat(C(o))),function(t){return Dr(e.call.apply(e,[n,r].concat(C(i.map(function(e){return e.cdr})))),function(e){return new en(t,e)})})},"(map fn . lists)\n\n            Higher order function that call function `fn` by for each\n            value of the argument. If you provide more then one list as argument\n            it will take each value from each list and call `fn` function\n            with that many argument as number of list arguments. The return\n            values of the function call is acumulated in result list and\n            returned by the call to map."),"list?":Cr("list?",function(e){var t=e;while(true){if(t===Xr){return true}if(!(t instanceof en)){return false}if(t.haveCycles("cdr")){return false}t=t.cdr}},'(list? obj)\n\n            Function test if value is proper linked list structure.\n            The car of each pair can be any value. It return false on cycles."'),some:Cr("some",function t(r,n){Pu("some",r,"function");Pu("some",n,["pair","nil"]);if(Nn(n)){return false}else{return Dr(r(n.car),function(e){return e||t(r,n.cdr)})}},"(some fn list)\n\n            Higher order function that call argument on each element of the list.\n            It stops when function fn return true for a value if so it will\n            return true. If none of the values give true, the function return false"),fold:Cr("fold",bi("fold",function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),u=3;u<n;u++){i[u-3]=arguments[u]}Pu("fold",t,"function");i.forEach(function(e,t){Pu("fold",e,["pair","nil"],t+1)});if(i.some(function(e){return e===Xr})){return r}var a=e.call.apply(e,[this,t,r].concat(C(i.map(function(e){return e.cdr}))));return Dr(a,function(e){return t.apply(void 0,C(i.map(function(e){return e.car})).concat([e]))})}),"(fold fn init . lists)\n\n             Function fold is reverse of the reduce. it call function `fn`\n             on each elements of the list and return single value.\n             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))\n             for: (fold fn '() alist blist)"),pluck:Cr("pluck",function e(){for(var t=arguments.length,u=new Array(t),r=0;r<t;r++){u[r]=arguments[r]}return function(t){u=u.map(function(e){return e instanceof nr?e.__name__:e});if(u.length===0){return Xr}else if(u.length===1){var e=u,r=F(e,1),n=r[0];return t[n]}var i={};u.forEach(function(e){i[e]=t[e]});return i}},"(pluck . string)\n\n            If called with single string it will return function that will return\n            key from object. If called with more then one argument function will\n            return new object by taking all properties from given object."),reduce:Cr("reduce",bi("reduce",function(t,r,e){var n=this;for(var i=arguments.length,u=new Array(i>3?i-3:0),a=3;a<i;a++){u[a-3]=arguments[a]}Pu("reduce",r,"function");u.forEach(function(e,t){Pu("reduce",e,["pair","nil"],t+1)});if(u.some(function(e){return e===Xr})){return e}return Dr(r.apply(void 0,C(u.map(function(e){return e.car})).concat([e])),function(e){return t.call.apply(t,[n,r,e].concat(C(u.map(function(e){return e.cdr}))))})}),"(reduce fn init list . lists)\n\n             Higher order function take each element of the list and call\n             the function with result of previous call or init and next element\n             on the list until each element is processed and return single value\n             as result of last call to `fn` function.\n             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))\n             for (reduce fn init alist blist)"),filter:Cr("filter",function e(t,r){Pu("filter",t,["regex","function"]);Pu("filter",r,["pair","nil"]);var i=Fu.get("list->array")(r);var u=[];var a=Mr("filter",t);return function t(r){function e(e){if(e&&e!==Xr){u.push(n)}return t(++r)}if(r===i.length){return en.fromArray(u)}var n=i[r];return Dr(a(n),e)}(0)},"(filter fn list)\n            (filter regex list)\n\n            Higher order function that call `fn` for each element of the list\n            and return list for only those elements for which funtion return\n            true value. If called with regex it will create matcher function."),compose:Cr(gi,"(compose . fns)\n\n             Higher order function and create new function that apply all functions\n             From right to left and return it's value. Reverse of compose.\n             e.g.:\n             ((compose (curry + 2) (curry * 3)) 3)\n             11\n            "),pipe:Cr(yi,"(pipe . fns)\n\n             Higher order function and create new function that apply all functions\n             From left to right and return it's value. Reverse of compose.\n             e.g.:\n             ((pipe (curry + 2) (curry * 3)) 3)\n             15"),curry:Cr(xi,"(curry fn . args)\n\n             Higher order function that create curried version of the function.\n             The result function will have parially applied arguments and it\n             will keep returning functions until all arguments are added\n\n             e.g.:\n             (define (add a b c d) (+ a b c d))\n             (define add1 (curry add 1))\n             (define add12 (add 2))\n             (display (add12 3 4))"),gcd:Cr("gcd",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Iu("lcm",r,"number");return r.reduce(function(e,t){return e.gcd(t)})},"(gcd n1 n2 ...)\n\n            Function return the greatest common divisor of their arguments."),lcm:Cr("lcm",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Iu("lcm",r,"number");var i=r.length,u=bn(r[0]);for(var a=1;a<i;a++){var o=bn(r[a]),s=u;while(u&&o){u>o?u%=o:o%=u}u=bn(s*r[a])/(u+o)}return Ni(u)},"(lcm n1 n2 ...)\n\n            Function return the least common multiple of their arguments."),"odd?":Cr("odd?",Di(function(e){return Ni(e).isOdd()}),"(odd? number)\n\n             Function check if number os odd."),"even?":Cr("even?",Di(function(e){return Ni(e).isEven()}),"(even? number)\n\n             Function check if number is even."),"*":Cr("*",Ei(function(e,t){return Ni(e).mul(t)},Ni(1)),"(* . numbers)\n\n        Multiplicate all numbers passed as arguments. If single value is passed\n        it will return that value."),"+":Cr("+",Ei(function(e,t){return Ni(e).add(t)},Ni(0)),"(+ . numbers)\n\n        Sum all numbers passed as arguments. If single value is passed it will\n        return that value."),"-":Cr("-",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("-: procedure require at least one argument")}Iu("-",t,"number");if(t.length===1){return Ni(t[0]).sub()}if(t.length){return t.reduce(Fi(function(e,t){return Ni(e).sub(t)}))}},"(- n1 n2 ...)\n            (- n)\n\n            Substract number passed as argument. If only one argument is passed\n            it will negate the value."),"/":Cr("/",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("/: procedure require at least one argument")}Iu("/",t,"number");if(t.length===1){return Ni(1).div(t[0])}return t.reduce(Fi(function(e,t){return Ni(e).div(t)}))},"(/ n1 n2 ...)\n            (/ n)\n\n            Divide number passed as arguments one by one. If single argument\n            is passed it will calculate (/ 1 n1)."),abs:Cr("abs",Di(function(e){return Ni(e).abs()}),"(abs number)\n\n             Function create absolute value from number."),truncate:Cr("truncate",function(e){Pu("truncate",e,"number");if(Ni.isFloat(e)){if(e instanceof Ni){e=e.valueOf()}return zi(xn(e))}return e},"(truncate n)\n\n            Function return integer value from real number."),sqrt:Cr("sqrt",Di(function(e){return Ni(e).sqrt()}),"(sqrt number)\n\n             Function return square root of the number."),"**":Cr("**",Fi(function(e,t){e=Ni(e);t=Ni(t);if(t.cmp(0)===-1){return zi(1).div(e).pow(t.sub())}return e.pow(t)}),"(** a b)\n\n            Function calculate number a to to the power of b."),"1+":Cr("1+",Di(function(e){return Ni(e).add(1)}),"(1+ number)\n\n             Function add 1 to the number and return result."),"1-":Cr(Di(function(e){return Ni(e).sub(1)}),"(1- number)\n\n             Function substract 1 from the number and return result."),"%":Cr("%",function(e,t){Iu("%",[e,t],"number");return Ni(e).rem(t)},"(% n1 n2)\n\n             Function get reminder of it's arguments."),"==":Cr("==",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Iu("==",t,"number");return wn(function(e,t){return Ni(e).cmp(t)===0},t)},"(== x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are equal"),">":Cr(">",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Iu(">",t,"number");return wn(function(e,t){return Ni(e).cmp(t)===1},t)},"(> x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically increasing"),"<":Cr("<",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Iu("<",t,"number");return wn(function(e,t){return Ni(e).cmp(t)===-1},t)},"(< x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically decreasing"),"<=":Cr("<=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Iu("<=",t,"number");return wn(function(e,t){return[0,-1].includes(Ni(e).cmp(t))},t)},"(<= x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically nonincreasing"),">=":Cr(">=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Iu(">=",t,"number");return wn(function(e,t){return[0,1].includes(Ni(e).cmp(t))},t)},"(>= x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically nondecreasing"),"eq?":Cr("eq?",Dn,"(eq? a b)\n\n             Function compare two values if they are identical."),or:Cr(new An("or",function(e,t){var i=t.dynamic_scope,u=t.error;var a=Fu.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return false}var s;return function t(){function e(e){s=e;if(s!==false){return s}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=Wu(r,{env:o,dynamic_scope:i,error:u});return Dr(n,e)}}()}),"(or . expressions)\n\n             Macro execute the values one by one and return the one that is truthy value.\n             If there are no expression that evaluate to true it return false."),and:Cr(new An("and",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=t.dynamic_scope,u=t.error;var a=Fu.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return true}var s;return function t(){function e(e){s=e;if(s===false){return false}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=Wu(r,{env:o,dynamic_scope:i,error:u});return Dr(n,e)}}()}),"(and . expressions)\n\n             Macro evalute each expression in sequence if any value return false it will\n             return false. If each value return true it will return the last value.\n             If it's called without arguments it will return true."),"|":Cr("|",function(e,t){return Ni(e).or(t)},"(| a b)\n\n            Function calculate or bit operation."),"&":Cr("&",function(e,t){return Ni(e).and(t)},"(& a b)\n\n            Function calculate and bit operation."),"~":Cr("~",function(e){return Ni(e).neg()},"(~ number)\n\n            Function negate the value."),">>":Cr(">>",function(e,t){return Ni(e).shr(t)},"(>> a b)\n\n            Function right shit the value a by value b."),"<<":Cr("<<",function(e,t){return Ni(e).shl(t)},"(<< a b)\n\n            Function left shit the value a by value b."),not:Cr("not",function e(t){if(Nn(t)){return true}return!t},"(not object)\n\n            Function return negation of the argument.")},undefined,"global");var Eu=Fu.inherit("user-env");function xu(e,t){e.constant("**internal-env**",t);e.doc("**internal-env**","**internal-env**\n\n            Constant used to hide stdin, stdout and stderr so they don't interfere\n            with variables with the same name. Constants are internal type\n            of variables that can't be redefined, defining variable with same name\n            will throw an error.");Fu.set("**interaction-environment**",e)}xu(Eu,bu);Fu.doc("**interaction-environment**","**interaction-environment**\n\n        Internal dynamic, global variable used to find interpreter environment.\n        It's used so the read and write functions can locate **internal-env**\n        that contain references to stdin, stdout and stderr.");(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var r=e[t]?e[t]:t;Fu.set(r,Cr(r,function(e){Pu(r,e,"number");if(e instanceof Ni){return e[t]()}},"(".concat(r," number)\n\n                Function calculate ").concat(r," of a number.")))})})();function Au(e){if(e.length===1){return e[0]}else{var t=[];var r=Au(e.slice(1));for(var n=0;n<r.length;n++){for(var i=0;i<e[0].length;i++){t.push(e[0][i]+r[n])}}return t}}function Mu(e,t,r){var n=[];for(var i=t;i<=r;++i){var u=[];for(var a=0;a<i;++a){u.push(e)}n=n.concat(Au(u))}return n}Mu(["d","a"],2,5).forEach(function(e){var t=e.split("");var r=t.slice().reverse();var n=t.map(function(e){return"(c".concat(e,"r")}).join(" ")+" arg"+")".repeat(t.length);var i="c"+e+"r";Fu.set(i,Cr(i,function(e){return r.reduce(function(e,t){Pu(i,e,"pair");if(t==="a"){return e.car}else{return e.cdr}},e)},"(".concat(i," arg)\n\n            Function calculate ").concat(n)))});function Cu(e,t){var r=e.split(path.sep).filter(Boolean);for(var n=r.length;n--;){var i;var u=(i=path).join.apply(i,["/"].concat(C(r.slice(0,n+1))));if(t(u)){return u}}}function ku(e){return Cu(e,function(e){return fs.existsSync(path.join(e,"node_modules"))})}function Ou(){return typeof global!=="undefined"&&global.global===global}function Su(){return Bu.apply(this,arguments)}function Bu(){Bu=k(j.mark(function e(){var r,n,i,u,a,o,s;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return import("module");case 2:r=t.sent;n=r.createRequire;t.next=6;return import("fs");case 6:t.next=9;return import("path");case 9:i=t.sent;u=n(document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);Fu.set("global",global);Fu.set("self",global);Fu.set("window",undefined);a=new URL(document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);o=i.dirname(a.pathname);s=i.basename(a.pathname);Fu.set("__dirname",o);Fu.set("__filename",s);Fu.set("require.resolve",Cr("require.resolve",function(e){Pu("require.resolve",e,"string");var t=e.valueOf();return u.resolve(t)},"(require.resolve path)\n\n           Return path relative the current module."));Fu.set("require",Cr("require",function(t){Pu("require",t,"string");t=t.valueOf();var e=process.cwd();var r;try{if(t.match(/^\s*\./)){r=u(i.join(e,t))}else{var n=ku(e);if(n){r=u(i.join(n,"node_modules",t))}else{r=u(t)}}}catch(e){r=u(t)}return Vn(r,global)},"(require module)\n\n            Function to be used inside Node.js to import the module."));case 21:case"end":return t.stop()}}},e)}));return Bu.apply(this,arguments)}if(Ou()){Su()}else if(typeof window!=="undefined"&&window===it){Fu.set("window",window);Fu.set("global",undefined);Fu.set("self",window)}else if(typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"){Fu.set("self",self);Fu.set("window",undefined);Fu.set("global",undefined)}function ju(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=e?" in expression `".concat(e,"`"):"";if(n!==null){i+=" (argument ".concat(n,")")}if(Pn(r)){return"Invalid type got ".concat(t).concat(i)}if(r instanceof Array){if(r.length===1){r=r[0]}else{var u=r[r.length-1];r=r.slice(0,-1).join(", ")+" or "+u}}return"Expecting ".concat(r,", got ").concat(t).concat(i)}function Iu(r,e,n){e.forEach(function(e,t){Pu(r,e,n,t+1)})}function Nu(e,t,r){Pu(e,t,r);if(t.__type__===au){throw new Error(ju(e,"binary-port","textual-port"))}}function Pu(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;e=e.valueOf();var i=Uu(t).toLowerCase();if(Pn(r)){if(!r(t)){throw new Error(ju(e,i,r,n))}return}var u=false;if(r instanceof en){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){u=true}}else{r=r.valueOf().toLowerCase()}if(!u&&i!==r){throw new Error(ju(e,i,r,n))}}function Lu(e){var t=d(e);return["string","function"].includes(t)||d(e)==="symbol"||e instanceof or||e instanceof nr||e instanceof Ni||e instanceof Ci||e instanceof RegExp}function qu(e){return e instanceof Ni||e instanceof Ci||e instanceof Mi}function Ru(e,t){if(e===null){return false}return d(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function Tu(e,t){if(Ru(e,t)||Ru(e.__proto__,t)){return Pn(e[t])}}function Uu(e){var t={pair:en,symbol:nr,character:Mi,values:du,"input-port":Wi,"output-port":Ki,number:Ni,regex:RegExp,syntax:On,macro:An,string:Ci,array:Array,"native-symbol":Symbol};if(Number.isNaN(e)){return"NaN"}if(e===Xr){return"nil"}if(e===null){return"null"}for(var r=0,n=Object.entries(t);r<n.length;r++){var i=F(n[r],2),u=i[0],a=i[1];if(e instanceof a){return u}}if(d(e)==="object"){if(e.__instance__){e.__instance__=false;if(e.__instance__){if(Pn(e.toType)){return e.toType()}return"instance"}}if(e.constructor){if(e.constructor.__class__){return e.constructor.__class__}if(e.constructor===Object){if(Tu(e,Symbol.iterator)){return"iterator"}if(Tu(e,Symbol.asyncIterator)){return"async-iterator"}}return e.constructor.name.toLowerCase()}}return d(e)}function $u(e){var t=[];r(e);if(t.length){return u(e)}return e;function r(e){if(Rn(e)){t.push(e)}else if(e instanceof en){if(!e.haveCycles("car")){r(e.car)}if(!e.haveCycles("cdr")){r(e.cdr)}}else if(e instanceof Array){e.forEach(r)}}function n(e){return i.apply(this,arguments)}function i(){i=k(j.mark(function e(r){var n;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.t0=en;if(!r.haveCycles("car")){t.next=5;break}t.t1=r.car;t.next=8;break;case 5:t.next=7;return u(r.car);case 7:t.t1=t.sent;case 8:t.t2=t.t1;if(!r.haveCycles("cdr")){t.next=13;break}t.t3=r.cdr;t.next=16;break;case 13:t.next=15;return u(r.cdr);case 15:t.t3=t.sent;case 16:t.t4=t.t3;n=new t.t0(t.t2,t.t4);if(r[ei]){n[ei]=true}return t.abrupt("return",n);case 20:case"end":return t.stop()}}},e)}));return i.apply(this,arguments)}function u(e){if(e instanceof Array){return sr(e.map(u))}if(e instanceof en&&t.length){return n(e)}return e}}function zu(e,t){var r=t.env,n=t.dynamic_scope,i=t.error;var u=[];var a=e;gn(a);function o(){return u}return function t(){if(a instanceof en){var e=Wu(a.car,{env:r,dynamic_scope:n,error:i});if(n){e=Dr(e,function(e){if(di(e)){return e.bind(n)}return e})}return Dr($u(e),function(e){u.push(e);if(a.haveCycles("cdr")){return o()}a=a.cdr;return t()})}else if(a===Xr){return o()}else{throw new Error("Syntax Error: improper list found in apply")}}()}function Vu(e,t,r){var n=e.invoke(t,r);return Dr($u(n),function(e){if(e instanceof en){e.markCycles()}return vu(e)})}function Yu(e,t,r){function n(e){if(e instanceof en){e.markCycles();return e}return vu(e)}var i=e.invoke(t,r);return Dr($u(i),function e(t){if(!t||t&&t[ei]||Lu(t)){return t}else{return Dr(Wu(t,r),n)}})}function Zu(e,t){if(Jn(e)&&!Hn(e)&&(!Gn(e)||Kn(e))){t=t.map(zn)}if(!pi(e)&&t.some(sn)&&!sn(e)&&!on(e)){var r=[],n=t.length;var i=function e(){var i=t[n];if(sn(i)){u=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return Dr(i.apply(this,r),zn)};ci(u,"__bound__",true);ci(u,"__fn__",i);u.prototype=i.prototype;r[n]=u}else{r[n]=i}};while(n--){var u;i()}t=r}return t}function Hu(i,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u=t.env,a=t.dynamic_scope,r=t.error,o=r===void 0?function(){}:r;e=zu(e,{env:u,dynamic_scope:a,error:o});return Dr(e,function(e){if(pi(i)){i=Yn(i)}e=Zu(i,e);var t=e.slice();var r=(a||u).newFrame(i,t);var n=$u(i.apply(r,e));return Dr(n,function(e){if(e instanceof en){e.markCycles();return vu(e)}return Un(e)},o)})}var Ju=function(){function t(e){y(this,t);this.__value__=e}e(t,[{key:"invoke",value:function e(){if(this.__value__===null){throw new Error("Continuations are not implemented yet")}}},{key:"toString",value:function e(){return"#<Continuation>"}}]);return t}();var Gu=function e(){};function Wu(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=e.env,n=e.dynamic_scope,i=e.error,u=i===void 0?Gu:i;try{if(n===true){r=n=r||Fu}else if(r===true){r=n=Fu}else{r=r||Fu}var a={env:r,dynamic_scope:n,error:u};var o;if(Nn(t)){return t}if(t instanceof nr){return r.get(t)}if(!(t instanceof en)){return t}var s=t.car;var c=t.cdr;if(s instanceof en){o=$u(Wu(s,a));if(Rn(o)){return o.then(function(e){return Wu(new en(e,t.cdr),a)})}else if(!qn(o)){throw new Error(Uu(o)+" "+r.get("repr")(o)+" is not callable while evaluating "+t.toString())}}if(s instanceof nr){o=r.get(s)}else if(Pn(s)){o=s}var f;if(o instanceof On){f=Vu(o,t,a)}else if(o instanceof An){f=Yu(o,c,a)}else if(Pn(o)){f=Hu(o,c,a)}else if(Ln(o)){f=o.invoke()}else if(t instanceof en){o=s&&s.toString();throw new Error("".concat(Uu(s)," ").concat(o," is not a function"))}else{return t}var l=r.get(Symbol["for"]("__promise__"),{throwError:false});if(l===true&&Rn(f)){f=f.then(function(e){if(e instanceof en&&!o[ei]){return Wu(e,a)}return e});return new or(f)}return f}catch(e){u&&u.call(r,e,t)}}var Ku=Xu(function(e){return e});var Qu=Xu(function(e,t){return t});function Xu(v){return function(){var n=k(j.mark(function e(r,n,i){var u,a,o,s,c,f,l,h,p,d;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(i===true){n=i=n||Eu}else if(n===true){n=i=Eu}else{n=n||Eu}u=[];a=Array.isArray(r)?r:br(r);o=true;s=false;t.prev=5;f=E(a);case 7:t.next=9;return f.next();case 9:l=t.sent;o=l.done;t.next=13;return l.value;case 13:h=t.sent;if(o){t.next=32;break}p=h;d=Wu(p,{env:n,dynamic_scope:i,error:function e(t,r){if(t&&t.message){if(t.message.match(/^Error:/)){var n=/^(Error:)\s*([^:]+:\s*)/;t.message=t.message.replace(n,"$1 $2")}if(r){if(!(t.__code__ instanceof Array)){t.__code__=[]}t.__code__.push(r.toString(true))}}throw t}});if(Rn(d)){t.next=21;break}u.push(v(p,d));t.next=29;break;case 21:t.t0=u;t.t1=v;t.t2=p;t.next=26;return d;case 26:t.t3=t.sent;t.t4=(0,t.t1)(t.t2,t.t3);t.t0.push.call(t.t0,t.t4);case 29:o=true;t.next=7;break;case 32:t.next=38;break;case 34:t.prev=34;t.t5=t["catch"](5);s=true;c=t.t5;case 38:t.prev=38;t.prev=39;if(!(!o&&f["return"]!=null)){t.next=43;break}t.next=43;return f["return"]();case 43:t.prev=43;if(!s){t.next=46;break}throw c;case 46:return t.finish(43);case 47:return t.finish(38);case 48:return t.abrupt("return",u);case 49:case"end":return t.stop()}}},e,null,[[5,34,38,48],[39,,43,47]])}));function e(e,t,r){return n.apply(this,arguments)}return e}()}function ea(e){var t={"[":"]","(":")"};var r;if(typeof e==="string"){r=er(e)}else{r=e.map(function(e){return e&&e.token?e.token:e})}var n=Object.keys(t);var i=Object.values(t).concat(n);r=r.filter(function(e){return i.includes(e)});var u=new Jt;var a=Xe(r),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;if(n.includes(s)){u.push(s)}else if(!u.is_empty()){var c=u.top();var f=t[c];if(s===f){u.pop()}else{throw new Error("Syntax error: missing closing ".concat(f))}}else{throw new Error("Syntax error: not matched closing ".concat(s))}}}catch(e){a.e(e)}finally{a.f()}return u.is_empty()}function ta(e){var t="("+e.toString()+")()";var r=window.URL||window.webkitURL;var n;try{n=new Blob([t],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;n=new i;n.append(t);n=n.getBlob()}return new it.Worker(r.createObjectURL(n))}function ra(){return Ca.version.match(/^(\{\{VER\}\}|DEV)$/)}function na(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=["dist/std.xcb"];if(r===""){if(ra()){r="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/"}else{r="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(Ca.version,"/")}}else if(!r.match(/\/$/)){r+="/"}var i=Fu.get("load");return function e(){if(n.length){var t=n.shift();return i.call(Eu,[r,t].join("/"),Fu).then(e)}else{return Promise.resolve()}}()}function ia(e){this.url=e;var a=this.worker=ta(function(){var a;var o;self.addEventListener("message",function(e){var r=e.data;var t=r.id;if(r.type!=="RPC"||t===null){return}function n(e){self.postMessage({id:t,type:"RPC",result:e})}function i(e){self.postMessage({id:t,type:"RPC",error:e})}if(r.method==="eval"){if(!o){i("Worker RPC: LIPS not initilized, call init first");return}o.then(function(){var e=r.params[0];var t=r.params[1];a.exec(e,t).then(function(e){e=e.map(function(e){return e&&e.valueOf()});n(e)})["catch"](function(e){i(e)})})}else if(r.method==="init"){var u=r.params[0];if(typeof u!=="string"){i("Worker RPC: url is not a string")}else{importScripts("".concat(u,"/dist/lips.min.js"));a=new Ca.Interpreter("worker");o=na(u);o.then(function(){n(true)})}}})});this.rpc=function(){var n=0;return function e(t,r){var u=++n;return new Promise(function(n,i){a.addEventListener("message",function e(t){var r=t.data;if(r&&r.type==="RPC"&&r.id===u){if(r.error){i(r.error)}else{n(r.result)}a.removeEventListener("message",e)}});a.postMessage({type:"RPC",method:t,id:u,params:r})})}}();this.rpc("init",[e])["catch"](function(e){console.error(e)});this.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.rpc("eval",[e,t])}}var ua={pair:function e(t){var r=F(t,2),n=r[0],i=r[1];return en(n,i)},number:function e(t){if(Ci.isString(t)){return Ni([t,10])}return Ni(t)},regex:function e(t){var r=F(t,2),n=r[0],i=r[1];return new RegExp(n,i)},nil:function e(){return Xr},symbol:function e(t){if(Ci.isString(t)){return nr(t)}else if(Array.isArray(t)){return nr(Symbol["for"](t[0]))}},string:Ci,character:Mi};var aa=Object.keys(ua);var oa={};for(var sa=0,ca=Object.entries(aa);sa<ca.length;sa++){var fa=F(ca[sa],2),la=fa[0],ha=fa[1];oa[ha]=+la}function pa(e){return oa[e]}function da(e){return aa[e]}function va(e){return JSON.stringify(e,function(e,t){var r=this[e];if(r){if(r instanceof RegExp){return{"@":pa("regex"),"#":[r.source,r.flags]}}var n=pa(r.constructor.__class__);if(!Tn(n)){return{"@":n,"#":r.serialize()}}}return t})}function _a(e){return JSON.parse(e,function(e,t){if(t&&d(t)==="object"){if(!Tn(t["@"])){var r=da(t["@"]);if(ua[r]){return ua[r](t["#"])}}}return t})}var ma=function(){var e={pair:en,symbol:nr,number:Ni,string:Ci,character:Mi,nil:Xr.constructor,regex:RegExp};function t(e,t){return{deserialize:t,Class:e}}var r=new $e;var u={};for(var n=0,i=Object.entries(ua);n<i.length;n++){var a=F(i[n],2),o=a[0],s=a[1];var c=e[o];u[o]=t(c,s)}var f=43311;Object.keys(u).forEach(function(e){var t=u[e];if(typeof t==="function"){var r=t;He({Class:r,tag:f,encode:function e(t,r){r(t.serialize())},decode:function e(t){return new r(t)}})}else{var n=t.deserialize,i=t.Class;He({Class:i,tag:f,encode:function e(t,r){if(t instanceof RegExp){return r([t.source,t.flags])}r(t.serialize())},decode:function e(t){return n(t)}})}f++});return r}();function ya(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length>1){var n=t.reduce(function(e,t){return e+t.length},0);var i=new Uint8Array(n);var u=0;t.forEach(function(e){i.set(e,u);u+=e.length});return i}else if(t.length){return t[0]}}function ga(){var e=1;var t=new TextEncoder("utf-8");return t.encode("CBRZ".concat(e.toString().padStart(3," ")))}var ba=7;function wa(e){var t=new TextDecoder("utf-8");var r=t.decode(e.slice(0,ba));var n=r.substring(0,4);if(["CBOR","CBRZ"].includes(n)){var i=r.match(/^(....).*([0-9]+)$/);if(i){return{type:i[1],version:Number(i[2])}}}return{type:"unknown"}}function Da(e){var t=ga();var r=ma.encode(e);return ya(t,Buffer.from(Lzjb.compressFile(r)))}function Fa(e){var t=wa(e),r=t.type,n=t.version;if(r==="CBOR"&&n===1){return ma.decode(e.slice(ba))}else if(r==="CBRZ"&&n===1){return ma.decode(Lzjb.decompressFile(e.slice(ba)))}else{throw new Error("Invalid file format ".concat(r))}}function Ea(e){console.error(e.message||e);if(e.code){console.error(e.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}))}}function xa(){var a=["text/x-lips","text/x-scheme"];var o;function s(r){return new Promise(function(t){var e=r.getAttribute("src");if(e){return fetch(e).then(function(e){return e.text()}).then(Qu).then(t)["catch"](function(e){Ea(e);t()})}else{return Qu(r.innerHTML).then(t)["catch"](function(e){Ea(e);t()})}})}function e(){return new Promise(function(i){var u=Array.from(document.querySelectorAll("script"));return function e(){var t=u.shift();if(!t){i()}else{var r=t.getAttribute("type");if(a.includes(r)){var n=t.getAttribute("bootstrap");if(!o&&typeof n==="string"){na(n).then(function(){return s(t)}).then(e)}else{s(t).then(e)}}else if(r&&r.match(/lips|lisp/)){console.warn("Expecting "+a.join(" or ")+" found "+r)}return e()}}()})}if(!window.document){return Promise.resolve()}else if(Aa){var t=Aa;var r=t.getAttribute("bootstrap");if(typeof r==="string"){return na(r).then(function(){o=true;return e()})}}return e()}var Aa=typeof window!=="undefined"&&window.document&&document.currentScript;if(typeof window!=="undefined"){ut(window,xa)}var Ma=function(){var e=Ci("Mon, 25 Oct 2021 21:01:31 +0000").valueOf();var t=e==="{{"+"DATE}}"?new Date:new Date(e);var r=function e(t){return t.toString().padStart(2,"0")};var n=t.getFullYear();var i=[n,r(t.getMonth()+1),r(t.getDate())].join("-");var u="\n  __ __                          __\n / / \\ \\       _    _  ___  ___  \\ \\\n| |   \\ \\     | |  | || . \\/ __>  | |\n| |    > \\    | |_ | ||  _/\\__ \\  | |\n| |   / ^ \\   |___||_||_|  <___/  | |\n \\_\\ /_/ \\_\\                     /_/\n\nLIPS Interpreter DEV (".concat(i,") <https://lips.js.org>\nCopyright (c) 2018-").concat(n," Jakub T. Jankiewicz\n\nType (env) to see environment with functions macros and variables. You can also\nuse (help name) to display help for specic function or macro, (apropos name)\nto display list of matched names in environment and (dir object) to list\nproperties of an object.\n").replace(/^.*\n/,"");return u}();Ir.__class__="ahead";en.__class__="pair";Qr.__class__="nil";Nr.__class__="pattern";jr.__class__="formatter";An.__class__="macro";On.__class__="syntax";hu.__class__="environment";Wi.__class__="input-port";Ki.__class__="output-port";Qi.__class__="output-string-port";eu.__class__="input-string-port";nu.__class__="input-file-port";Xi.__class__="output-file-port";lu.__class__="lips-error";[Ni,$i,Ji,zi,Gi].forEach(function(e){e.__class__="number"});Mi.__class__="character";nr.__class__="symbol";Ci.__class__="string";or.__class__="promise";var Ca={version:"DEV",banner:Ma,date:"Mon, 25 Oct 2021 21:01:31 +0000",exec:Qu,parse:gi(Ar,br),tokenize:er,evaluate:Wu,compile:Ku,serialize:va,unserialize:_a,serialize_bin:Da,unserialize_bin:Fa,bootstrap:na,Environment:hu,env:Eu,Worker:ia,Interpreter:fu,balanced_parenthesis:ea,balancedParenthesis:ea,balanced:ea,Macro:An,Syntax:On,Pair:en,Values:du,QuotedPromise:or,Error:lu,quote:vu,InputPort:Wi,OutputPort:Ki,InputFilePort:nu,OutputFilePort:Xi,InputStringPort:eu,OutputStringPort:Qi,InputByteVectorPort:tu,OutputByteVectorPort:ru,InputBinaryFilePort:iu,OutputBinaryFilePort:uu,Formatter:jr,Parser:yr,Lexer:_r,specials:lr,repr:rn,nil:Xr,eof:su,LSymbol:nr,LNumber:Ni,LFloat:zi,LComplex:$i,LRational:Ji,LBigInteger:Gi,LCharacter:Mi,LString:Ci,rationalize:Zi};Fu.set("lips",Ca);return Ca}();