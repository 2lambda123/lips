/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/ v. 1.0.0-beta.14
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * dist file generated by Babel includes code
 * Copyright (c) 2014-present, Facebook, Inc.
 * released under MIT license
 *
 * build: Fri, 29 Oct 2021 16:05:57 +0000
 */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports):typeof define==="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.lips={}))})(this,function(e){"use strict";function l(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function e(t){return typeof t}}else{l=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return l(e)}function r(e){if(Array.isArray(e))return e}function n(e,t){var r=e&&(typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"]);if(r==null)return;var n=[];var i=true;var u=false;var a,o;try{for(r=r.call(e);!(i=(a=r.next()).done);i=true){n.push(a.value);if(t&&n.length===t)break}}catch(e){u=true;o=e}finally{try{if(!i&&r["return"]!=null)r["return"]()}finally{if(u)throw o}}return n}function i(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function u(e,t){if(!e)return;if(typeof e==="string")return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){return r(e)||n(e,t)||u(e,t)||a()}function t(e){if(Array.isArray(e))return i(e)}function o(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e){return t(e)||o(e)||u(e)||s()}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function h(e,t,r){if(t)f(e.prototype,t);if(r)f(e,r);return e}function p(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.fn=e;this.cont=t}p.prototype.toString=function(){return"#<Thunk>"};function _(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return d(n.apply(this,t))}}function d(e){while(e instanceof p){var t=e;e=e.fn();if(!(e instanceof p)){t.cont()}}return e}function U(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function v(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,u;for(u=0;u<n.length;u++){i=n[u];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function y(e,t){if(e==null)return{};var r=v(e,t);var n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++){n=u[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function m(e,t,r,n,i,u,a){try{var o=e[u](a);var s=o.value}catch(e){r(e);return}if(o.done){t(s)}else{Promise.resolve(s).then(n,i)}}function k(o){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=o.apply(e,a);function i(e){m(n,t,r,i,u,"next",e)}function u(e){m(n,t,r,i,u,"throw",e)}i(undefined)})}}function g(e){this.wrapped=e}function w(e){return new g(e)}function D(u){var a,o;function e(n,i){return new Promise(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};if(o){o=o.next=r}else{a=o=r;s(n,i)}})}function s(t,e){try{var r=u[t](e);var n=r.value;var i=n instanceof g;Promise.resolve(i?n.wrapped:n).then(function(e){if(i){s(t==="return"?"return":"next",e);return}c(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:true});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:false});break}a=a.next;if(a){s(a.key,a.arg)}else{o=null}}this._invoke=e;if(typeof u["return"]!=="function"){this["return"]=undefined}}D.prototype[typeof Symbol==="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this};D.prototype.next=function(e){return this._invoke("next",e)};D.prototype["throw"]=function(e){return this._invoke("throw",e)};D.prototype["return"]=function(e){return this._invoke("return",e)};function E(e){return function(){return new D(e.apply(this,arguments))}}var A={exports:{}};(function(e){var t=function(a){var e=Object.prototype;var f=e.hasOwnProperty;var s;var t=typeof Symbol==="function"?Symbol:{};var i=t.iterator||"@@iterator";var r=t.asyncIterator||"@@asyncIterator";var n=t.toStringTag||"@@toStringTag";function u(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});return e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function o(e,t,r,n){var i=t&&t.prototype instanceof c?t:c;var u=Object.create(i.prototype);var a=new k(n||[]);u._invoke=F(e,r,a);return u}a.wrap=o;function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var h="suspendedStart";var p="suspendedYield";var _="executing";var d="completed";var v={};function c(){}function y(){}function m(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf;var w=b&&b(b(S([])));if(w&&w!==e&&f.call(w,i)){g=w}var D=m.prototype=c.prototype=Object.create(g);y.prototype=D.constructor=m;m.constructor=y;y.displayName=u(m,n,"GeneratorFunction");function E(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}a.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===y||(t.displayName||t.name)==="GeneratorFunction":false};a.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,m)}else{e.__proto__=m;u(e,n,"GeneratorFunction")}e.prototype=Object.create(D);return e};a.awrap=function(e){return{__await:e}};function A(o,s){function c(e,t,r,n){var i=l(o[e],o,t);if(i.type==="throw"){n(i.arg)}else{var u=i.arg;var a=u.value;if(a&&typeof a==="object"&&f.call(a,"__await")){return s.resolve(a.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)})}return s.resolve(a).then(function(e){u.value=e;r(u)},function(e){return c("throw",e,r,n)})}}var t;function e(r,n){function e(){return new s(function(e,t){c(r,n,e,t)})}return t=t?t.then(e,e):e()}this._invoke=e}E(A.prototype);A.prototype[r]=function(){return this};a.AsyncIterator=A;a.async=function(e,t,r,n,i){if(i===void 0)i=Promise;var u=new A(o(e,t,r,n),i);return a.isGeneratorFunction(t)?u:u.next().then(function(e){return e.done?e.value:u.next()})};function F(a,o,s){var c=h;return function e(t,r){if(c===_){throw new Error("Generator is already running")}if(c===d){if(t==="throw"){throw r}return j()}s.method=t;s.arg=r;while(true){var n=s.delegate;if(n){var i=x(n,s);if(i){if(i===v)continue;return i}}if(s.method==="next"){s.sent=s._sent=s.arg}else if(s.method==="throw"){if(c===h){c=d;throw s.arg}s.dispatchException(s.arg)}else if(s.method==="return"){s.abrupt("return",s.arg)}c=_;var u=l(a,o,s);if(u.type==="normal"){c=s.done?d:p;if(u.arg===v){continue}return{value:u.arg,done:s.done}}else if(u.type==="throw"){c=d;s.method="throw";s.arg=u.arg}}}}function x(e,t){var r=e.iterator[t.method];if(r===s){t.delegate=null;if(t.method==="throw"){if(e.iterator["return"]){t.method="return";t.arg=s;x(e,t);if(t.method==="throw"){return v}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=l(r,e.iterator,t.arg);if(n.type==="throw"){t.method="throw";t.arg=n.arg;t.delegate=null;return v}var i=n.arg;if(!i){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return v}if(i.done){t[e.resultName]=i.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=s}}else{return i}t.delegate=null;return v}E(D);u(D,n,"Generator");D[i]=function(){return this};D.toString=function(){return"[object Generator]"};function C(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(C,this);this.reset(true)}a.keys=function(r){var n=[];for(var e in r){n.push(e)}n.reverse();return function e(){while(n.length){var t=n.pop();if(t in r){e.value=t;e.done=false;return e}}e.done=true;return e}};function S(t){if(t){var e=t[i];if(e){return e.call(t)}if(typeof t.next==="function"){return t}if(!isNaN(t.length)){var r=-1,n=function e(){while(++r<t.length){if(f.call(t,r)){e.value=t[r];e.done=false;return e}}e.value=s;e.done=true;return e};return n.next=n}}return{next:j}}a.values=S;function j(){return{value:s,done:true}}k.prototype={constructor:k,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=s;this.done=false;this.delegate=null;this.method="next";this.arg=s;this.tryEntries.forEach(O);if(!e){for(var t in this){if(t.charAt(0)==="t"&&f.call(this,t)&&!isNaN(+t.slice(1))){this[t]=s}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(r){if(this.done){throw r}var n=this;function e(e,t){u.type="throw";u.arg=r;n.next=e;if(t){n.method="next";n.arg=s}return!!t}for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];var u=i.completion;if(i.tryLoc==="root"){return e("end")}if(i.tryLoc<=this.prev){var a=f.call(i,"catchLoc");var o=f.call(i,"finallyLoc");if(a&&o){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}else if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else if(a){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}}else if(o){if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}if(i&&(e==="break"||e==="continue")&&i.tryLoc<=t&&t<=i.finallyLoc){i=null}var u=i?i.completion:{};u.type=e;u.arg=t;if(i){this.method="next";this.next=i.finallyLoc;return v}return this.complete(u)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);O(r);return v}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:S(e),resultName:t,nextLoc:r};if(this.method==="next"){this.arg=s}return v}};return a}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})(A);var S=A.exports;function F(e,t){F=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return F(e,t)}function x(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function C(e,t,r){if(x()){C=Reflect.construct}else{C=function e(t,r,n){var i=[null];i.push.apply(i,r);var u=Function.bind.apply(t,i);var a=new u;if(n)F(a,n.prototype);return a}}return C.apply(null,arguments)}var j=typeof global!=="undefined"?global:self;var B=j.BN;var I=function e(t,r){var n=typeof t==="bigint"?BigInt(1):1;return new Array(Number(r)).fill(0).reduce(function(e){return e*t},n)};var P=new Function("a,b","return a ** b");try{if(P(2,2)===4){I=P}}catch(e){}function N(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof N){return e}if(typeof this!=="undefined"&&!(this instanceof N)||typeof this==="undefined"){return new N(e,t)}if(typeof e==="undefined"){throw new Error("Invalid LNumber constructor call")}var r=N.getType(e);if(N.types[r]){return N.types[r](e,t)}var n=e instanceof Array&&to.isString(e[0])&&N.isNumber(e[1]);if(e instanceof N){return N(e.value)}if(!N.isNumber(e)&&!n){throw new Error("You can't create LNumber from ".concat(jo(e)))}if(e===null){e=0}var i;if(n){var u=e,a=b(u,2),o=a[0],s=a[1];if(o instanceof to){o=o.valueOf()}if(s instanceof N){s=s.valueOf()}var c=o.match(/^([+-])/);var f=false;if(c){o=o.replace(/^[+-]/,"");if(c[1]==="-"){f=true}}}if(Number.isNaN(e)){return q(e)}else if(typeof BigInt!=="undefined"){if(typeof e!=="bigint"){if(n){var l;switch(s){case 8:l="0o";break;case 16:l="0x";break;case 2:l="0b";break;case 10:l="";break}if(typeof l==="undefined"){var h=BigInt(s);i=O(o).map(function(e,t){return BigInt(parseInt(e,s))*I(h,BigInt(t))}).reduce(function(e,t){return e+t})}else{i=BigInt(l+o)}}else{i=BigInt(e)}if(f){i*=BigInt(-1)}}else{i=e}return z(i,true)}else if(typeof B!=="undefined"&&!(e instanceof B)){if(e instanceof Array){return z(C(B,O(e)))}return z(new B(e))}else if(n){this.constant(parseInt(o,s),"integer")}else{this.constant(e,"integer")}}N.prototype.constant=function(e,t){Object.defineProperty(this,"__value__",{value:e,enumerable:true});Object.defineProperty(this,"__type__",{value:t,enumerable:true})};N.types={float:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new q(t,r)},complex:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!N.isComplex(t)){t={im:0,re:t}}return new L(t,r)},rational:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!N.isRational(t)){t={num:t,denom:1}}return new $(t,r)}};N.prototype.serialize=function(){return this.__value__};N.prototype.isNaN=function(){return Number.isNaN(this.__value__)};N.prototype.gcd=function(e){var t=this.abs();e=e.abs();if(e.cmp(t)===1){var r=t;t=e;e=r}while(true){t=t.rem(e);if(t.cmp(0)===0){return e}e=e.rem(t);if(e.cmp(0)===0){return t}}};N.isFloat=function e(t){return t instanceof q||Number(t)===t&&t%1!==0};N.isNumber=function(e){return e instanceof N||N.isNative(e)||N.isBN(e)};N.isComplex=function(e){if(!e){return false}var t=e instanceof L||(N.isNumber(e.im)||Number.isNaN(e.im))&&(N.isNumber(e.re)||Number.isNaN(e.re));return t};N.isRational=function(e){if(!e){return false}return e instanceof $||N.isNumber(e.num)&&N.isNumber(e.denom)};N.isInteger=function(e){if(!(N.isNative(e)||e instanceof N)){return false}if(N.isFloat(e)){return false}if(N.isRational(e)){return false}if(N.isComplex(e)){return false}return true};N.isNative=function(e){return typeof e==="bigint"||typeof e==="number"};N.isBigInteger=function(e){return e instanceof z||typeof e==="bigint"||N.isBN(e)};N.isBN=function(e){return typeof B!=="undefined"&&e instanceof B};N.getArgsType=function(e,t){if(e instanceof q||t instanceof q){return q}if(e instanceof z||t instanceof z){return z}return N};N.prototype.toString=function(e){if(Number.isNaN(this.__value__)){return"+nan.0"}if(e>2&&e<36){return this.__value__.toString(e)}return this.__value__.toString()};N.prototype.asType=function(e){var t=N.getType(this);return N.types[t]?N.types[t](e):N(e)};N.prototype.isBigNumber=function(){return typeof this.__value__==="bigint"||typeof B!=="undefined"&&!(this.value instanceof B)};["floor","ceil","round"].forEach(function(e){N.prototype[e]=function(){if(this["float"]||N.isFloat(this.__value__)){return N(Math[e](this.__value__))}else{return N(Math[e](this.valueOf()))}}});N.prototype.valueOf=function(){if(N.isNative(this.__value__)){return Number(this.__value__)}else if(N.isBN(this.__value__)){return this.__value__.toNumber()}};N.prototype.pow=function(e){var t;if(N.isBN(this.__value__)){t=this.__value__.pow(e.__value__)}else{t=I(this.__value__,e.__value__)}return N(t)};N.prototype.abs=function(){var e=this.__value__;if(N.isNative(this.__value__)){if(e<0){e=-e}}else if(N.isBN(e)){e.iabs()}return new N(e)};N.prototype.isOdd=function(){if(N.isNative(this.__value__)){if(this.isBigNumber()){return this.__value__%BigInt(2)===BigInt(1)}return this.__value__%2===1}else if(N.isBN(this.__value__)){return this.__value__.isOdd()}};N.prototype.isEven=function(){return!this.isOdd()};N.prototype.cmp=function(e){var t=this.coerce(e),r=b(t,2),n=r[0],i=r[1];function u(e,t){if(e.__value__<t.__value__){return-1}else if(e.__value__===t.__value__){return 0}else{return 1}}if(n.__type__==="bigint"){if(N.isNative(n.__value__)){return u(n,i)}else if(N.isBN(n.__value__)){return this.__value__.cmp(i.__value__)}}else if(n instanceof q){return u(n,i)}};N.prototype.isFloat=function(){return!!(N.isFloat(this.__value__)||this["float"])};N.prototype.coerce=function(e){if(!(typeof e==="number"||e instanceof N)){throw new Error("LNumber: you can't coerce ".concat(jo(e)))}if(typeof e==="number"){e=N(e)}return N.coerce(this,e)};N.coerce=function(e,t){var r=N.getType(e);var n=N.getType(t);if(!V[r]){throw new Error("LNumber::coerce unknown lhs type ".concat(r))}else if(!V[r][n]){throw new Error("LNumber::coerce unknown rhs type ".concat(n))}var i=V[r][n](e,t);return i.map(function(e){return N(e,true)})};N.getType=function(e){if(e instanceof N){return e.__type__}if(N.isFloat(e)){return"float"}if(N.isComplex(e)){return"complex"}if(N.isRational(e)){return"rational"}if(typeof e==="number"){return"integer"}if(typeof BigInt!=="undefined"&&typeof e!=="bigint"||typeof B!=="undefined"&&!(e instanceof B)){return"bigint"}};var R={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"};var T={};Object.keys(R).forEach(function(t){T[R[t]]=t;N.prototype[t]=function(e){return this.op(R[t],e)}});N._ops={"*":function e(t,r){return t*r},"+":function e(t,r){return t+r},"-":function e(t,r){if(typeof r==="undefined"){return-t}return t-r},"/":function e(t,r){return t/r},"%":function e(t,r){return t%r},"|":function e(t,r){return t|r},"&":function e(t,r){return t&r},"~":function e(t){return~t},">>":function e(t,r){return t>>r},"<<":function e(t,r){return t<<r}};N.prototype.op=function(e,t){if(typeof t==="undefined"){return N(N._ops[e](this.valueOf()))}if(typeof t==="number"){t=N(t)}if(Number.isNaN(this.__value__)&&!N.isComplex(t)||!N.isComplex(this)&&Number.isNaN(t.__value__)){return N(NaN)}var r=this.coerce(t),n=b(r,2),i=n[0],u=n[1];if(i._op){return i._op(e,u)}return N(N._ops[e](i,u))};N.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return L({re:0,im:t})}return N(Math.sqrt(e))};function L(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof L)||typeof this==="undefined"){return new L(e,t)}if(e instanceof L){return L({im:e.__im__,re:e.__re__})}if(N.isNumber(e)&&t){if(!t){return Number(e)}}else if(!N.isComplex(e)){throw new Error("Invalid constructor call for LComplex")}var r=e.im instanceof N?e.im:N(e.im);var n=e.re instanceof N?e.re:N(e.re);this.constant(r,n)}L.prototype=Object.create(N.prototype);L.prototype.constructor=L;L.prototype.constant=function(e,t){Object.defineProperty(this,"__im__",{value:e,enumerable:true});Object.defineProperty(this,"__re__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"complex",enumerable:true})};L.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};L.prototype.toRational=function(e){if(N.isFloat(this.__im__)&&N.isFloat(this.__re__)){var t=q(this.__im__).toRational(e);var r=q(this.__re__).toRational(e);return L({im:t,re:r})}return this};L.prototype.add=function(e){return this.complex_op("add",e,function(e,t,r,n){return{re:e.add(t),im:r.add(n)}})};L.prototype.factor=function(){if(this.__im__ instanceof q||this.__im__ instanceof q){var e=this.__re__,t=this.__im__;var r,n;if(e instanceof q){r=e.toRational().mul(e.toRational())}else{r=e.mul(e)}if(t instanceof q){n=t.toRational().mul(t.toRational())}else{n=t.mul(t)}return r.add(n)}else{return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))}};L.prototype.modulus=function(){return this.factor().sqrt()};L.prototype.conjugate=function(){return L({re:this.__re__,im:this.__im__.sub()})};L.prototype.sqrt=function(){var e=this.modulus();var t,r;if(e.cmp(0)===0){t=r=e}else if(this.__re__.cmp(0)===1){t=q(.5).mul(e.add(this.__re__)).sqrt();r=this.__im__.div(t).div(2)}else{r=q(.5).mul(e.sub(this.__re__)).sqrt();if(this.__im__.cmp(0)===-1){r=r.sub()}t=this.__im__.div(r).div(2)}return L({im:r,re:t})};L.prototype.div=function(e){if(N.isNumber(e)&&!N.isComplex(e)){if(!(e instanceof N)){e=N(e)}var t=this.__re__.div(e);var r=this.__im__.div(e);return L({re:t,im:r})}else if(!N.isComplex(e)){throw new Error("[LComplex::div] Invalid value")}var n=this.coerce(e),i=b(n,2),u=i[0],a=i[1];var o=a.factor();var s=u.mul(a.conjugate());var c=s.__re__.op("/",o);var f=s.__im__.op("/",o);return L({re:c,im:f})};L.prototype.sub=function(e){return this.complex_op("sub",e,function(e,t,r,n){return{re:e.sub(t),im:r.sub(n)}})};L.prototype.mul=function(e){return this.complex_op("mul",e,function(e,t,r,n){var i={re:e.mul(t).sub(r.mul(n)),im:e.mul(n).add(t.mul(r))};return i})};L.prototype.complex_op=function(e,t,i){var u=this;var r=function e(t,r){var n=i(u.__re__,t,u.__im__,r);if("im"in n&&"re"in n){if(n.im.cmp(0)===0&&!N.isFloat(n.im)){return n.re}return L(n,true)}return n};if(typeof t==="undefined"){return r()}if(N.isNumber(t)&&!N.isComplex(t)){if(!(t instanceof N)){t=N(t)}var n=t.asType(0);t={__im__:n,__re__:t}}else if(!N.isComplex(t)){throw new Error("[LComplex::".concat(e,"] Invalid value"))}var a=t.__re__ instanceof N?t.__re__:this.__re__.asType(t.__re__);var o=t.__im__ instanceof N?t.__im__:this.__im__.asType(t.__im__);return r(a,o)};L._op={"+":"add","-":"sub","*":"mul","/":"div"};L.prototype._op=function(e,t){var r=L._op[e];return this[r](t)};L.prototype.cmp=function(e){var t=this.coerce(e),r=b(t,2),n=r[0],i=r[1];var u=n.__re__.coerce(i.__re__),a=b(u,2),o=a[0],s=a[1];var c=o.cmp(s);if(c!==0){return c}else{var f=n.__im__.coerce(i.__im__),l=b(f,2),h=l[0],p=l[1];return h.cmp(p)}};L.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};L.prototype.toString=function(){var e;if(this.__re__.cmp(0)!==0){e=[toString(this.__re__)]}else{e=[]}var t=this.__im__.valueOf();var r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t);var n=toString(this.__im__);if(!r&&!Number.isNaN(t)){var i=this.__im__.cmp(0);if(i<0||i===0&&this.__im__._minus){e.push("-")}else{e.push("+")}n=n.replace(/^-/,"")}e.push(n);e.push("i");return e.join("")};function q(e){if(typeof this!=="undefined"&&!(this instanceof q)||typeof this==="undefined"){return new q(e)}if(!N.isNumber(e)){throw new Error("Invalid constructor call for LFloat")}if(e instanceof N){return q(e.valueOf())}if(typeof e==="number"){if(Object.is(e,-0)){Object.defineProperty(this,"_minus",{value:true})}this.constant(e,"float")}}q.prototype=Object.create(N.prototype);q.prototype.constructor=q;q.prototype.toString=function(){if(this.__value__===Number.NEGATIVE_INFINITY){return"-inf.0"}if(this.__value__===Number.POSITIVE_INFINITY){return"+inf.0"}if(Number.isNaN(this.__value__)){return"+nan.0"}var e=this.__value__.toString();if(!N.isFloat(this.__value__)&&!e.match(/e/i)){var t=e+".0";return this._minus?"-"+t:t}return e.replace(/^([0-9]+)e/,"$1.0e")};q.prototype._op=function(e,t){if(t instanceof N){t=t.__value__}var r=N._ops[e];if(e==="/"&&this.__value__===0&&t===0){return NaN}return q(r(this.__value__,t))};q.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){return M(this.__value__.valueOf())}return Y(e.valueOf())(this.__value__.valueOf())};q.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=q(Math.sqrt(-e));return L({re:0,im:t})}return q(Math.sqrt(e))};q.prototype.abs=function(){var e=this.valueOf();if(e<0){e=-e}return q(e)};var M=Y(1e-10);function Y(n){return function(e){var t=function e(n,t,r){var i=function e(t,r){return r<n?t:e(r,t%r)};if(Number.isNaN(t)||Number.isNaN(r)){return NaN}return i(Math.abs(t),Math.abs(r))},r=t(n?n:1/1e4,1,e);return $({num:Math.floor(e/r),denom:Math.floor(1/r)})}}function $(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof $)||typeof this==="undefined"){return new $(e,t)}if(!N.isRational(e)){throw new Error("Invalid constructor call for LRational")}var r,n;if(e instanceof $){r=N(e.__num__);n=N(e.__denom__)}else{r=N(e.num);n=N(e.denom)}if(!t&&n.cmp(0)!==0){var i=r.op("%",n).cmp(0)===0;if(i){return N(r.div(n))}}this.constant(r,n)}$.prototype=Object.create(N.prototype);$.prototype.constructor=$;$.prototype.constant=function(e,t){Object.defineProperty(this,"__num__",{value:e,enumerable:true});Object.defineProperty(this,"__denom__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"rational",enumerable:true})};$.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};$.prototype.pow=function(e){var t=e.cmp(0);if(t===0){return N(1)}if(t===-1){e=e.sub();var r=this.__denom__.pow(e);var n=this.__num__.pow(e);return $({num:r,denom:n})}var i=this;e=e.valueOf();while(e>1){i=i.mul(this);e--}return i};$.prototype.sqrt=function(){var e=this.__num__.sqrt();var t=this.__denom__.sqrt();if(e instanceof q||t instanceof q){return e.div(t)}return $({num:e,denom:t})};$.prototype.abs=function(){var e=this.__num__;var t=this.__denom__;if(e.cmp(0)===-1){e=e.sub()}if(t.cmp(0)!==1){t=t.sub()}return $({num:e,denom:t})};$.prototype.cmp=function(e){return N(this.valueOf(),true).cmp(e)};$.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__);var t,r;if(e.cmp(1)!==0){t=this.__num__.div(e);if(t instanceof $){t=N(t.valueOf(true))}r=this.__denom__.div(e);if(r instanceof $){r=N(r.valueOf(true))}}else{t=this.__num__;r=this.__denom__}var n=this.cmp(0)<0;if(n){if(t.abs().cmp(r.abs())===0){return t.toString()}}else if(t.cmp(r)===0){return t.toString()}return t.toString()+"/"+r.toString()};$.prototype.valueOf=function(e){if(this.__denom__.cmp(0)===0){if(this.__num__.cmp(0)<0){return Number.NEGATIVE_INFINITY}return Number.POSITIVE_INFINITY}if(e){return N._ops["/"](this.__num__.value,this.__denom__.value)}return q(this.__num__.valueOf()).div(this.__denom__.valueOf())};$.prototype.mul=function(e){if(!(e instanceof N)){e=N(e)}if(N.isRational(e)){var t=this.__num__.mul(e.__num__);var r=this.__denom__.mul(e.__denom__);return $({num:t,denom:r})}var n=N.coerce(this,e),i=b(n,2),u=i[0],a=i[1];return u.mul(a)};$.prototype.div=function(e){if(!(e instanceof N)){e=N(e)}if(N.isRational(e)){var t=this.__num__.mul(e.__denom__);var r=this.__denom__.mul(e.__num__);return $({num:t,denom:r})}var n=N.coerce(this,e),i=b(n,2),u=i[0],a=i[1];var o=u.div(a);return o};$.prototype._op=function(e,t){return this[T[e]](t)};$.prototype.sub=function(e){if(typeof e==="undefined"){return this.mul(-1)}if(!(e instanceof N)){e=N(e)}if(N.isRational(e)){var t=e.__num__.sub();var r=e.__denom__;return this.add($({num:t,denom:r}))}if(!(e instanceof N)){e=N(e).sub()}else{e=e.sub()}var n=N.coerce(this,e),i=b(n,2),u=i[0],a=i[1];return u.add(a)};$.prototype.add=function(e){if(!(e instanceof N)){e=N(e)}if(N.isRational(e)){var t=this.__denom__;var r=e.__denom__;var n=this.__num__;var i=e.__num__;var u,a;if(t!==r){a=r.mul(n).add(i.mul(t));u=t.mul(r)}else{a=n.add(i);u=t}return $({num:a,denom:u})}if(N.isFloat(e)){return q(this.valueOf()).add(e)}var o=N.coerce(this,e),s=b(o,2),c=s[0],f=s[1];return c.add(f)};function z(e,t){if(typeof this!=="undefined"&&!(this instanceof z)||typeof this==="undefined"){return new z(e,t)}if(e instanceof z){return z(e.__value__,e._native)}if(!N.isBigInteger(e)){throw new Error("Invalid constructor call for LBigInteger")}this.constant(e,"bigint");Object.defineProperty(this,"_native",{value:t})}z.prototype=Object.create(N.prototype);z.prototype.constructor=z;z.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};z.prototype.serialize=function(){return this.__value__.toString()};z.prototype._op=function(e,t){if(typeof t==="undefined"){if(N.isBN(this.__value__)){e=z.bn_op[e];return z(this.__value__.clone()[e](),false)}return z(N._ops[e](this.__value__),true)}if(N.isBN(this.__value__)&&N.isBN(t.__value__)){e=z.bn_op[e];return z(this.__value__.clone()[e](t),false)}var r=N._ops[e](this.__value__,t.__value__);if(e==="/"){var n=this.op("%",t).cmp(0)===0;if(n){return N(r)}return $({num:this,denom:t})}return z(r,true)};z.prototype.sqrt=function(){var e;var t=this.cmp(0)<0;if(N.isNative(this.__value__)){e=N(Math.sqrt(t?-this.valueOf():this.valueOf()))}else if(N.isBN(this.__value__)){e=t?this.__value__.neg().sqrt():this.__value__.sqrt()}if(t){return L({re:0,im:e})}return e};N.NaN=N(NaN);var V=function(){var e=function e(t,r){return[t,r]};return{bigint:{bigint:e,float:function e(t,r){return[q(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},integer:{integer:e,float:function e(t,r){return[q(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},float:{bigint:function e(t,r){return[t,r&&q(r.valueOf())]},integer:function e(t,r){return[t,r&&q(r.valueOf())]},float:e,rational:function e(t,r){return[t,r&&q(r.valueOf())]},complex:function e(t,r){return[{re:t,im:q(0)},r]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function e(t,r){var n=N.coerce(t.__re__,r.__re__),i=b(n,2),u=i[0],a=i[1];var o=N.coerce(t.__im__,r.__im__),s=b(o,2),c=s[0],f=s[1];return[{im:c,re:u},{im:f,re:a}]}},rational:{bigint:function e(t,r){return[t,r&&{num:r,denom:1}]},integer:function e(t,r){return[t,r&&{num:r,denom:1}]},float:function e(t,r){return[q(t.valueOf()),r]},rational:e,complex:function e(t,r){return[{im:G(t.__type__,r.__im__.__type__,0)[0],re:G(t.__type__,r.__re__.__type__,t)[0]},{im:G(t.__type__,r.__im__.__type__,r.__im__)[0],re:G(t.__type__,r.__re__.__type__,r.__re__)[0]}]}}};function t(r){return function(e,t){return[{im:G(r,e.__im__.__type__,0,e.__im__)[1],re:G(r,e.__re__.__type__,0,e.__re__)[1]},{im:G(r,e.__im__.__type__,0,0)[1],re:G(r,t.__type__,0,t)[1]}]}}}();function G(e,t,r,n){return V[e][t](r,n)}var J=N(NaN);function H(e){return e<0?-e:e}var W=function(){if(Math.trunc){return Math.trunc}else{return function(e){if(e===0){return 0}else if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}}}();function Z(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function Q(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)F(e,t)}function K(e,t){if(t&&(l(t)==="object"||typeof t==="function")){return t}return Z(e)}function X(e){X=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return X(e)}function ee(e){return r(e)||o(e)||u(e)||a()}function te(e){var t;if(typeof Symbol!=="undefined"){if(Symbol.asyncIterator)t=e[Symbol.asyncIterator];if(t==null&&Symbol.iterator)t=e[Symbol.iterator]}if(t==null)t=e["@@asyncIterator"];if(t==null)t=e["@@iterator"];if(t==null)throw new TypeError("Object is not async iterable");return t.call(e)}function re(e){if(typeof this!=="undefined"&&!(this instanceof re)||typeof this==="undefined"){return new re(e)}this.value=e}re.isUndefined=function(e){return e instanceof re&&typeof e.value==="undefined"};re.prototype.valueOf=function(){return this.value};function ne(e){var r=this;var n={pending:true,rejected:false,fulfilled:false,reason:undefined,type:undefined};e=e.then(function(e){n.type=jo(e);n.fulfilled=true;n.pending=false;return e});be(this,"_promise",e,{hidden:true});if(No(e["catch"])){e=e["catch"](function(e){n.rejected=true;n.pending=false;n.reason=e})}Object.keys(n).forEach(function(t){Object.defineProperty(r,"__".concat(t,"__"),{enumerable:true,get:function e(){return n[t]}})});be(this,"__promise__",e);this.then=false}ne.prototype.then=function(e){return new ne(this.valueOf().then(e))};ne.prototype["catch"]=function(e){return new ne(this.valueOf()["catch"](e))};ne.prototype.valueOf=function(){if(!this._promise){throw new Error("QuotedPromise: invalid promise created")}return this._promise};ne.prototype.toString=function(){if(this.__pending__){return ne.pending_str}if(this.__rejected__){return ne.rejected_str}return"#<js-promise resolved (".concat(this.__type__,")>")};ne.pending_str="#<js-promise (pending)>";ne.rejected_str="#<js-promise (rejected)>";function ie(e){if(e instanceof ne){return false}if(e instanceof Promise){return true}return e&&No(e.then)}function ue(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof ne){t[r]=new re(n)}else{t[r]=n}}return t}function ae(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof re){t[r]=n.valueOf()}else{t[r]=n}}return t}function oe(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(ie(e)){var n=e.then(t);if(r===null){return n}else{return n["catch"](r)}}if(e instanceof Array){return se(e,t,r)}if(To(e)){return ce(e,t,r)}return t(e)}function se(t,e,r){if(t.find(ie)){return oe(fe(t),function(e){if(Object.isFrozen(t)){Object.freeze(e)}return e},r)}return e(t)}function ce(t,e,r){var i=Object.keys(t);var n=[],u=[];var a=i.length;while(a--){var o=i[a];var s=t[o];n[a]=s;if(ie(s)){u.push(s)}}if(u.length){return oe(fe(n),function(e){var n={};e.forEach(function(e,t){var r=i[t];n[r]=e});if(Object.isFrozen(t)){Object.freeze(n)}return n},r)}return e(t)}function fe(e){if(Array.isArray(e)){return Promise.all(ue(e)).then(ae)}return e}function le(e){var t=[];r(e);if(t.length){return u(e)}return e;function r(e){if(ie(e)){t.push(e)}else if(e instanceof mo){if(!e.haveCycles("car")){r(e.car)}if(!e.haveCycles("cdr")){r(e.cdr)}}else if(e instanceof Array){e.forEach(r)}}function n(e){return i.apply(this,arguments)}function i(){i=k(S.mark(function e(r){var n;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.t0=mo;if(!r.haveCycles("car")){t.next=5;break}t.t1=r.car;t.next=8;break;case 5:t.next=7;return u(r.car);case 7:t.t1=t.sent;case 8:t.t2=t.t1;if(!r.haveCycles("cdr")){t.next=13;break}t.t3=r.cdr;t.next=16;break;case 13:t.next=15;return u(r.cdr);case 15:t.t3=t.sent;case 16:t.t4=t.t3;n=new t.t0(t.t2,t.t4);if(r[xo]){n[xo]=true}return t.abrupt("return",n);case 20:case"end":return t.stop()}}},e)}));return i.apply(this,arguments)}function u(e){if(e instanceof Array){return fe(e.map(u))}if(e instanceof mo&&t.length){return n(e)}return e}}function he(n,i){var e=Object.getOwnPropertyNames(n);var t=Object.getOwnPropertySymbols(n);e.concat(t).forEach(function(e){var t=i(n[e]);var r=Object.getOwnPropertyDescriptor(n,e);if(!r||r.writable&&n[e]!==t){n[e]=t}});return n}function pe(t){var e=[to,Qa,N].some(function(e){return t instanceof e});if(e){return t.valueOf()}if(t instanceof Array){return t.map(pe)}if(t instanceof ne){delete t.then}if(To(t)){return he(t,pe)}return t}function _e(e){switch(l(e)){case"string":return to(e);case"bigint":return N(e);case"number":if(Number.isNaN(e)){return J}else{return N(e)}}return e}function de(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ve(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function ve(e,t){if(!e)return;if(typeof e==="string")return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}function ye(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function me(u,a){return function e(t){Co(u,t,["pair","nil"]);if(t===yo){return[]}var r=[];var n=t;while(true){if(n instanceof mo){if(n.haveCycles("cdr")){break}var i=n.car;if(a&&i instanceof mo){i=this.get(u).call(this,i)}r.push(i);n=n.cdr}else if(n===yo){break}else{throw new Error("".concat(u,": can't convert improper list"))}}return r}}function ge(e){if(typeof e==="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function be(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=n.hidden,u=i===void 0?false:i;Object.defineProperty(e,t,{value:r,configurable:true,enumerable:!u})}var we=function e(){};function De(e){if(Xo(e)){return e[wo]}return e}var Ee=["name","length","caller","callee","arguments","prototype"];function Ae(e){return!Ee.includes(e)}function Fe(e,t){if(e[Symbol["for"]("__bound__")]){return e}var r=e.bind(t);var n=Object.getOwnPropertyNames(e);var i=de(n),u;try{for(i.s();!(u=i.n()).done;){var a=u.value;if(Ae(a)){try{r[a]=e[a]}catch(e){}}}}catch(e){i.e(e)}finally{i.f()}xe(r,"__fn__",e);xe(r,"__context__",t);xe(r,"__bound__",true);if(Ho(e)){xe(r,"__native__",true)}if(To(t)&&Vo(e)){xe(r,"__method__",true)}r.valueOf=function(){return e};return r}function xe(e,t,r){Object.defineProperty(e,Symbol["for"](t),{get:function e(){return r},set:function e(){},configurable:false,enumerable:false})}function Ce(t,r){try{Object.defineProperty(t,"length",{get:function e(){return r}});return t}catch(e){var n=new Array(r).fill(0).map(function(e,t){return"a"+t}).join(",");var i=new Function("f","return function(".concat(n,") {\n                return f.apply(this, arguments);\n            };"));return i(t)}}function Oe(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function ke(e,t){if(No(e)){return No(t)&&De(e)===De(t)}else if(e instanceof N){if(!(t instanceof N)){return false}var r;if(e.__type__===t.__type__){if(e.__type__==="complex"){r=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__}else{r=true}if(r&&e.cmp(t)===0){if(e.valueOf()===0){return Object.is(e.valueOf(),t.valueOf())}return true}}return false}else if(typeof e==="number"){if(typeof t!=="number"){return false}if(Number.isNaN(e)){return Number.isNaN(t)}if(e===Number.NEGATIVE_INFINITY){return t===Number.NEGATIVE_INFINITY}if(e===Number.POSITIVE_INFINITY){return t===Number.POSITIVE_INFINITY}return ke(N(e),N(t))}else if(e instanceof Qa){if(!(t instanceof Qa)){return false}return e.__char__===t.__char__}else{return e===t}}function Se(e,t){if(jo(e)!==jo(t)){return false}if(!Uo(e)){return false}if(e instanceof RegExp){return e.source===t.source}if(e instanceof to){return e.valueOf()===t.valueOf()}return ke(e,t)}function je(e,t,r,n){if(typeof e!=="string"){t=arguments[0];r=arguments[1];n=arguments[2];e=null}if(r){if(n){t.__doc__=r}else{t.__doc__=Be(r)}}if(e){t.__name__=e}else if(t.name&&!Vo(t)){t.__name__=t.name}return t}function Be(e){return e.split("\n").map(function(e){return e.trim()}).join("\n")}function Ie(e,t){if(e instanceof mo){e.markCycles();return Pe(e)}if(No(e)){if(t){return Fe(e,t)}}return _e(e)}function Pe(e){if(ie(e)){return e.then(Pe)}if(e instanceof mo||e instanceof so){e[xo]=true}return e}function Ne(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(e){Co("",e,"number")});return e.apply(void 0,r)}function Re(){var n=this;for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}i.forEach(function(e,t){Co("pipe",e,"function",t+1)});return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.reduce(function(e,t){return[t.apply(n,e)]},t)[0]}}function Te(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e,t){Co("compose",e,"function",t+1)});return Re.apply(void 0,O(t.reverse()))}function Ue(a,o){var s=this;return function e(t,r){Co(a,t,"function");for(var n=arguments.length,i=new Array(n>2?n-2:0),u=2;u<n;u++){i[u-2]=arguments[u]}if(i.some(Bo)){if(typeof r==="number"){return N(r)}return r}else{return o.call.apply(o,[s,e,t,r].concat(i))}}}function Le(e,t){return ze(e+1,$e(Ne,t))}var qe=$e(Le,1);var Me=$e(Le,2);function Ye(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(i!==null){t=[i].concat(O(t))}return t.reduce(Me(n))}}function $e(u){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}Co("curry",u,"function");var a=u.length;return function(){var n=t.slice();function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}n=n.concat(t);if(n.length>=a){return u.apply(this,n)}else{return i}}return i.apply(this,arguments)}}function ze(n,i){Co("limit",i,"function",2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.apply(void 0,O(t.slice(0,n)))}}function Ve(e,t){var r=ee(t),n=r[0],i=r.slice(1);while(i.length>0){var u=i,a=b(u,1),o=a[0];if(!e(n,o)){return false}var s=i;var c=ee(s);n=c[0];i=c.slice(1)}return true}function Ge(e){if(e.length){if(e.length===1){return e[0]}}if(typeof this!=="undefined"&&!(this instanceof Ge)||typeof this==="undefined"){return new Ge(e)}this.__values__=e}Ge.prototype.toString=function(){return this.__values__.map(function(e){return toString(e)}).join("\n")};Ge.prototype.valueOf=function(){return this.__values__};function Je(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){Je(Object(r),true).forEach(function(e){U(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{Je(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}function We(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ze(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function Ze(e,t){if(!e)return;if(typeof e==="string")return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(e,t)}function Qe(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function Ke(e,t){return f(e,t)===t.length;function f(r,n){function e(e,t){var r=We(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;var u=f(i,t);if(u!==-1){return u}}}catch(e){r.e(e)}finally{r.f()}return-1}function t(){return r[u]===Symbol["for"]("symbol")&&!Sa(n[o])}function i(){var e=r[u+1];var t=n[o+1];if(e!==undefined&&t!==undefined){return f([e],[t])}}var u=0;var a={};for(var o=0;o<n.length;++o){if(typeof r[u]==="undefined"){return o}if(r[u]instanceof tt){var s;if(["+","*"].includes(r[u].flag)){while(o<n.length){s=e(r[u].patterns,n.slice(o));if(s===-1){break}o+=s}o-=1;u++;continue}else if(r[u].flag==="?"){s=e(r[u].patterns,n.slice(o));if(s===-1){o-=2}else{u++}continue}}else if(r[u]instanceof RegExp){if(!n[o].match(r[u])){return-1}}else if(to.isString(r[u])){if(r[u].valueOf()!==n[o]){return-1}}else if(l(r[u])==="symbol"){if(r[u]===Symbol["for"]("*")){a[u]=a[u]||0;if(["(","["].includes(n[o])){a[u]++}else if([")","]"].includes(n[o])){a[u]--}if(typeof r[u+1]!=="undefined"&&a[u]===0&&i()===-1||a[u]>0){continue}}else if(t()){return-1}}else if(r[u]instanceof Array){var c=f(r[u],n.slice(o));if(c===-1||c+o>n.length){return-1}o+=c-1;u++;continue}else{return-1}u++}if(r.length!==u){return-1}return n.length}}function Xe(e){this.__code__=e.replace(/\r/g,"")}Xe.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*)?)$/],shift:{1:["&","#"]}}};Xe.match=Ke;Xe.prototype._options=function e(t){var r=Xe.defaults;if(typeof t==="undefined"){return Object.assign({},r)}var n=t&&t.exceptions||{};var i=n.specials||[];var u=n.shift||{1:[]};return He(He(He({},r),t),{},{exceptions:{specials:[].concat(O(r.exceptions.specials),O(i)),shift:He(He({},u),{},{1:[].concat(O(r.exceptions.shift[1]),O(u[1]))})}})};Xe.prototype.indent=function e(t){var r=Pa(this.__code__,true);return this._indent(r,t)};Xe.exception_shift=function(u,e){function t(e){if(!e.length){return false}if(e.indexOf(u)!==-1){return true}else{var t=e.filter(function(e){return e instanceof RegExp});if(!t.length){return false}var r=We(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(u.match(i)){return true}}}catch(e){r.e(e)}finally{r.f()}}return false}if(t(e.exceptions.specials)){return e.indent}var r=e.exceptions.shift;for(var n=0,i=Object.entries(r);n<i.length;n++){var a=b(i[n],2),o=a[0],s=a[1];if(t(s)){return+o}}return-1};Xe.prototype._indent=function e(t,r){var n=this._options(r);var i=yt(t);var u=Za(t);var a=t[t.length-u.length-1];var o=t[t.length-1];if(o.token.match(/^"[\S\s]+[^"]$/)){return i+n.indent}if(u&&u.length){if(u[0].line>0){n.offset=0}if(u.toString()===t.toString()&&Ja(u)){return n.offset+u[0].col}else if(u.length===1){return n.offset+u[0].col+1}else{var s=-1;if(a){var c=Xe.exception_shift(a.token,n);if(c!==-1){s=c}}if(s===-1){s=Xe.exception_shift(u[1].token,n)}if(s!==-1){return n.offset+u[0].col+s}else if(u[0].line<u[1].line){return n.offset+u[0].col+1}else if(u.length>3&&u[1].line===u[3].line){if(u[1].token==="("||u[1].token==="["){return n.offset+u[1].col}return n.offset+u[3].col}else if(u[0].line===u[1].line){return n.offset+n.indent+u[0].col}else{var f=u.slice(2);for(var l=0;l<f.length;++l){var h=f[l];if(h.token.trim()){return h.col}}}}}else{return 0}return i+n.indent};function et(e){this.pattern=e}et.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};et.prototype.match=function(e){return e.match(this.pattern)};function tt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t.pop();this.patterns=t;this.flag=n}tt.prototype.toString=function(){var e=this.patterns.map(function(e){return toString(e)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};Xe.Pattern=tt;Xe.Ahead=et;var rt=/^[[(]$/;var nt=/^[\])]$/;var it=/[^()[\]]/;var ut=new et(/[^)\]]/);var at=Symbol["for"]("*");var ot=new tt([rt,at,nt],[it],"+");var st=new tt([rt,at,nt],"+");var ct=new tt([Symbol["for"]("symbol")],"?");var ft=new tt([Symbol["for"]("symbol")],"*");var lt=[rt,ft,nt];var ht=new tt([rt,Symbol["for"]("symbol"),at,nt],"+");var pt=vt("define","lambda","define-macro","syntax-rules");var _t=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/;var dt=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;function vt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}Xe.rules=[[[st],0,ut],[[rt,vt("begin","cond-expand")],1],[[rt,dt,ct,rt,ht,nt],1],[[rt,dt,ct,ot],1,ut],[[rt,dt,rt,ht],1,ut],[[rt,_t,new tt([/[^()[\]]/],"+"),st],1,ut],[[rt,st],1,ut],[[rt,it,st],1,ut],[[rt,vt("lambda","if"),it],1,ut],[[rt,vt("while"),it,st],1,ut],[[rt,vt("if"),it,at],1],[[rt,pt,lt],0,ut],[[rt,pt,lt,Ba],0,ut],[[rt,pt,lt,Ba,st],0,ut],[[rt,pt,lt,st],0,ut]];Xe.prototype["break"]=function(){var e=this.__code__.replace(/\n[ \t]*/g,"\n ").replace(/^\s+/,"");var t=function e(t){if(t.token.match(Ba)||t.token.match(Qu)){return t.token}else{return t.token.replace(/\s+/," ")}};var r=function e(t){for(var r=t.length;r--;){var n=t[r];if(n.trim()&&!Ua(n)){return t.length-r-1}}};var n=Pa(e,true).map(t).filter(function(e){return e!=="\n"});var i=Xe.rules;e:for(var u=1;u<n.length;++u){if(!n[u].trim()){continue}var a=n.slice(0,u);var o={};i.map(function(e){return e[1]}).forEach(function(e){e=e.valueOf();if(e>0&&!o[e]){o[e]=Za(a,e)}});var s=We(i),c;try{for(s.s();!(c=s.n()).done;){var f=b(c.value,3),l=f[0],h=f[1],p=f[2];h=h.valueOf();var _=h>0?o[h]:a;var d=_.filter(function(e){return e.trim()&&!Ua(e)});var v=r(_);var y=Ke(l,d);var m=n.slice(u).find(function(e){return e.trim()&&!Ua(e)});if(y&&(p instanceof et&&p.match(m)||!p)){var g=u-v;if(n[g]!=="\n"){if(!n[g].trim()){n[g]="\n"}else{n.splice(g,0,"\n");u++}}u+=v;continue e}}}catch(e){s.e(e)}finally{s.f()}}this.__code__=n.join("");return this};Xe.prototype._spaces=function(e){return new Array(e+1).join(" ")};Xe.prototype.format=function e(t){var r=this.__code__.replace(/[ \t]*\n[ \t]*/g,"\n ");var n=Pa(r,true);var i=this._options(t);var u=0;var a=0;for(var o=0;o<n.length;++o){var s=n[o];if(s.token==="\n"){u=this._indent(n.slice(0,o),i);a+=u;if(n[o+1]){n[o+1].token=this._spaces(u);u--;a--;for(var c=o+2;c<n.length;++c){n[c].offset+=a;n[c].col+=u;if(n[c].token==="\n"){o=c-1;break}}}}}return n.map(function(e){if(e.token.match(Ba)){if(e.token.match(/\n/)){var t=new Array(e.col+1).join(" ");var r=e.token.split("\n");e.token=[r[0]].concat(r.slice(1).map(function(e){return t+e})).join("\n")}}return e.token}).join("")};function yt(e){if(!e||!e.length){return 0}var t=e.length;if(e[t-1].token==="\n"){return 0}while(--t){if(e[t].token==="\n"){var r=(e[t+1]||{}).token;if(r){return r.length}}}return 0}function mt(e){var t=l(e);return["string","function"].includes(t)||l(e)==="symbol"||e instanceof ne||e instanceof so||e instanceof N||e instanceof to||e instanceof RegExp}var gt=bt(function(e,t){return t});function bt(d){return function(){var n=k(S.mark(function e(r,n,i){var u,a,o,s,c,f,l,h,p,_;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(i===true){n=i=n||_u}else if(n===true){n=i=_u}else{n=n||_u}u=[];a=Array.isArray(r)?r:Va(r);o=true;s=false;t.prev=5;f=te(a);case 7:t.next=9;return f.next();case 9:l=t.sent;o=l.done;t.next=13;return l.value;case 13:h=t.sent;if(o){t.next=32;break}p=h;_=wt(p,{env:n,dynamic_scope:i,error:function e(t,r){if(t&&t.message){if(t.message.match(/^Error:/)){var n=/^(Error:)\s*([^:]+:\s*)/;t.message=t.message.replace(n,"$1 $2")}if(r){if(!(t.__code__ instanceof Array)){t.__code__=[]}t.__code__.push(r.toString(true))}}throw t}});if(ie(_)){t.next=21;break}u.push(d(p,_));t.next=29;break;case 21:t.t0=u;t.t1=d;t.t2=p;t.next=26;return _;case 26:t.t3=t.sent;t.t4=(0,t.t1)(t.t2,t.t3);t.t0.push.call(t.t0,t.t4);case 29:o=true;t.next=7;break;case 32:t.next=38;break;case 34:t.prev=34;t.t5=t["catch"](5);s=true;c=t.t5;case 38:t.prev=38;t.prev=39;if(!(!o&&f["return"]!=null)){t.next=43;break}t.next=43;return f["return"]();case 43:t.prev=43;if(!s){t.next=46;break}throw c;case 46:return t.finish(43);case 47:return t.finish(38);case 48:return t.abrupt("return",u);case 49:case"end":return t.stop()}}},e,null,[[5,34,38,48],[39,,43,47]])}));function e(e,t,r){return n.apply(this,arguments)}return e}()}function wt(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=e.env,n=e.dynamic_scope,i=e.error,u=i===void 0?we:i;try{if(n===true){r=n=r||pu}else if(r===true){r=n=pu}else{r=r||pu}var a={env:r,dynamic_scope:n,error:u};var o;if(Bo(t)){return t}if(t instanceof so){return r.get(t)}if(!(t instanceof mo)){return t}var s=t.car;var c=t.cdr;if(s instanceof mo){o=le(wt(s,a));if(ie(o)){return o.then(function(e){return wt(new mo(e,t.cdr),a)})}else if(!Po(o)){throw new Error(jo(o)+" "+r.get("repr")(o)+" is not callable while evaluating "+t.toString())}}if(s instanceof so){o=r.get(s)}else if(No(s)){o=s}var f;if(o instanceof $t){f=Dt(o,t,a)}else if(o instanceof qt){f=Et(o,c,a)}else if(No(o)){f=xt(o,c,a)}else if(Io(o)){f=o.invoke()}else if(t instanceof mo){o=s&&s.toString();throw new Error("".concat(jo(s)," ").concat(o," is not a function"))}else{return t}var l=r.get(Symbol["for"]("__promise__"),{throwError:false});if(l===true&&ie(f)){f=f.then(function(e){if(e instanceof mo&&!o[xo]){return wt(e,a)}return e});return new ne(f)}return f}catch(e){u&&u.call(r,e,t)}}function Dt(e,t,r){var n=e.invoke(t,r);return oe(le(n),function(e){if(e instanceof mo){e.markCycles()}return Pe(e)})}function Et(e,t,r){function n(e){if(e instanceof mo){e.markCycles();return e}return Pe(e)}var i=e.invoke(t,r);return oe(le(i),function e(t){if(!t||t&&t[xo]||mt(t)){return t}else{return oe(wt(t,r),n)}})}function At(e,t){var r=t.env,n=t.dynamic_scope,i=t.error;var u=[];var a=e;go(a);function o(){return u}return function t(){if(a instanceof mo){var e=wt(a.car,{env:r,dynamic_scope:n,error:i});if(n){e=oe(e,function(e){if(Ho(e)){return e.bind(n)}return e})}return oe(le(e),function(e){u.push(e);if(a.haveCycles("cdr")){return o()}a=a.cdr;return t()})}else if(a===yo){return o()}else{throw new Error("Syntax Error: improper list found in apply")}}()}function Ft(e,t){if(Xo(e)&&!Qo(e)&&(!rs(e)||qo(e))){t=t.map(pe)}if(!Jo(e)&&t.some(zo)&&!zo(e)&&!$o(e)){var r=[],n=t.length;var i=function e(){var i=t[n];if(zo(i)){u=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return oe(i.apply(this,r),pe)};xe(u,"__bound__",true);xe(u,"__fn__",i);u.prototype=i.prototype;r[n]=u}else{r[n]=i}};while(n--){var u;i()}t=r}return t}function xt(i,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u=t.env,a=t.dynamic_scope,r=t.error,o=r===void 0?function(){}:r;e=At(e,{env:u,dynamic_scope:a,error:o});return oe(e,function(e){if(Jo(i)){i=De(i)}e=Ft(i,e);var t=e.slice();var r=(a||u).newFrame(i,t);var n=le(i.apply(r,e));return oe(n,function(e){if(e instanceof mo){e.markCycles();return Pe(e)}return _e(e)},o)})}function Ct(e,t,r){if(arguments.length===1){if(l(arguments[0])==="object"){e=arguments[0];t=null}else if(typeof arguments[0]==="string"){e={};t=null;r=arguments[0]}}this.__docs__=new Map;this.__env__=e;this.__parent__=t;this.__name__=r||"anonymous"}Ct.prototype.list=function(){return Oe(this.__env__)};Ct.prototype.fs=function(){return this.get("**fs**")};Ct.prototype.unset=function(e){if(e instanceof so){e=e.valueOf()}if(e instanceof to){e=e.valueOf()}delete this.__env__[e]};Ct.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(l(e)==="object"){t=e}if(!e||l(e)==="object"){e="child of "+(this.__name__||"unknown")}return new Ct(t||{},this,e)};Ct.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof so){e=e.__name__}if(e instanceof to){e=e.valueOf()}if(t){if(!r){t=Be(t)}this.__docs__.set(e,t);return this}if(this.__docs__.has(e)){return this.__docs__.get(e)}if(this.__parent__){return this.__parent__.doc(e)}};Ct.prototype.newFrame=function(e,t){var n=this.inherit("__frame__");n.set("parent.frame",je("parent.frame",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;e=e.valueOf();var t=n.__parent__;if(!(t instanceof Ct)){return yo}if(e<=0){return t}var r=t.get("parent.frame");return r(e-1)},pu.__env__["parent.frame"].__doc__));t.callee=e;n.set("arguments",t);return n};Ct.prototype._lookup=function(e){if(e instanceof so){e=e.__name__}if(e instanceof to){e=e.valueOf()}if(this.__env__.hasOwnProperty(e)){return re(this.__env__[e])}if(this.__parent__){return this.__parent__._lookup(e)}};Ct.prototype.toString=function(){return"#<environment:"+this.__name__+">"};Ct.prototype.clone=function(){var t=this;var r={};Object.keys(this.__env__).forEach(function(e){r[e]=t.__env__[e]});return new Ct(r,this.__parent__,this.__name__)};Ct.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"merge";Co("Environment::merge",e,"environment");return this.inherit(t,e.__env__)};Ct.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Co("Environment::get",e,["symbol","string"]);var r=t.throwError,n=r===void 0?true:r;var i=e;if(i instanceof so||i instanceof to){i=i.valueOf()}var u=this._lookup(i);if(u instanceof re){if(re.isUndefined(u)){return undefined}return Ie(u.valueOf())}var a;if(e instanceof so&&e[so.object]){a=e[so.object]}else if(typeof i==="string"){a=i.split(".").filter(Boolean)}if(a&&a.length>0){var o=a,s=ee(o),c=s[0],f=s.slice(1);u=this._lookup(c);if(f.length){try{if(u instanceof re){u=u.valueOf()}else{u=kt(j,c);if(No(u)){u=De(u)}}if(typeof u!=="undefined"){return kt.apply(void 0,[u].concat(O(f)))}}catch(e){throw e}}else if(u instanceof re){return Ie(u.valueOf())}u=kt(j,i)}if(typeof u!=="undefined"){return u}if(n){throw new Error("Unbound variable `"+i.toString()+"'")}};Ct.prototype.set=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;Co("Environment::set",e,["string","symbol"]);if(N.isNumber(t)){t=N(t)}if(e instanceof so){e=e.__name__}if(e instanceof to){e=e.valueOf()}this.__env__[e]=t;if(r){this.doc(e,r,true)}return this};Ct.prototype.constant=function(t,e){var r=this;if(this.__env__.hasOwnProperty(t)){throw new Error("Environment::constant: ".concat(t," already exists"))}if(arguments.length===1&&To(arguments[0])){var n=arguments[0];Object.keys(n).forEach(function(e){r.constant(t,n[e])})}else{Object.defineProperty(this.__env__,t,{value:e,enumerable:true})}return this};Ct.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};Ct.prototype.ref=function(e){var t=this;while(true){if(!t){break}if(t.has(e)){return t}t=t.__parent__}};Ct.prototype.parents=function(){var e=this;var t=[];while(e){t.unshift(e);e=e.__parent__}return t};var Ot=Va(Pa('(lambda ()\n                                      "[native code]"\n                                      (throw "Invalid Invocation"))'))[0];var kt=je("get",function e(t){var r;for(var n=arguments.length,i=new Array(n>1?n-1:0),u=1;u<n;u++){i[u-1]=arguments[u]}var a=i.length;while(i.length){if(No(t)&&l(i[0])!=="symbol"){t=De(t)}var o=i.shift();var s=pe(o);if(s==="then"&&t instanceof ne){r=ne.prototype.then}else if(s==="__code__"&&No(t)&&typeof t.__code__==="undefined"){r=Ot}else{r=t[s]}if(typeof r==="undefined"){if(i.length){throw new Error("Try to get ".concat(i[0]," from undefined"))}return r}else{var c;if(i.length-1<a){c=t}r=Ie(r,c)}t=r}return r},"(. obj . args)\n    (get obj . args)\n\n    Function use object as base and keep using arguments to get the\n    property of JavaScript object. Arguments need to be a strings.\n    e.g. `(. console \"log\")` if you use any function inside LIPS is\n    will be weakly bind (can be rebind), so you can call this log function\n    without problem unlike in JavaScript when you use\n    `var log = console.log`.\n    `get` is an alias because . don't work in every place, e.g. you can't\n    pass it as argument.");function St(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=arguments[1]===true;function t(e){if(!jt()){return}var t=pu.get("repr")(e);if(r===null||r instanceof RegExp&&r.test(t)){console.log(pu.get("type")(e)+": "+t)}if(n){console.log(e)}}if(ie(e)){e.then(t)}else{t(e)}return e}function jt(){return _u&&_u.get("DEBUG",{throwError:false})}function Bt(r){if(r&&l(r)==="object"){var n={};var e=Object.getOwnPropertySymbols(r);e.forEach(function(e){var t=e.toString().replace(/Symbol\(([^)]+)\)/,"$1");n[t]=toString(r[e])});var t=Object.getOwnPropertyNames(r);t.forEach(function(e){var t=r[e];if(t&&l(t)==="object"&&t.constructor===Object){n[e]=Bt(t)}else{n[e]=toString(t)}});return n}return r}function It(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Pt(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function Pt(e,t){if(!e)return;if(typeof e==="string")return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}function Nt(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function Rt(i){var u=Tt();return function e(){var t=X(i),r;if(u){var n=X(this).constructor;r=Reflect.construct(t,arguments,n)}else{r=t.apply(this,arguments)}return K(this,r)}}function Tt(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function Ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){Ut(Object(r),true).forEach(function(e){U(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{Ut(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}function qt(e,t,r,n){if(typeof this!=="undefined"&&this.constructor!==qt||typeof this==="undefined"){return new qt(e,t)}Co("Macro",e,"string",1);Co("Macro",t,"function",2);if(r){if(n){this.__doc__=r}else{this.__doc__=Be(r)}}this.__name__=e;this.__fn__=t}qt.defmacro=function(e,t,r,n){var i=new qt(e,t,r,n);i.__defmacro__=true;return i};qt.prototype.invoke=function(e,t,r){var n=t.env,i=t.dynamic_scope,u=t.error;var a={dynamic_scope:i,error:u,macro_expand:r};var o=this.__fn__.call(n,e,a,this.__name__);return o};qt.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var Mt=-1e4;function Yt(c){return function(){var r=k(S.mark(function e(r,m){var u,g,n,i,a,b,w,D,E,A,F,x,o,C,s;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:s=function e(){s=k(S.mark(function e(r,n,i){var u,a,o,s,c,f,l,h,p,_,d,v,y;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof mo&&r.car instanceof so)){t.next=50;break}if(!r[xo]){t.next=3;break}return t.abrupt("return",r);case 3:u=r.car.valueOf();a=i.get(r.car,{throwError:false});o=b(r.car);s=o||w(a,r)||D(a);if(!(s&&r.cdr.car instanceof mo)){t.next=28;break}if(!o){t.next=15;break}g=A(r.cdr.car);t.next=12;return x(r.cdr.car,n);case 12:c=t.sent;t.next=17;break;case 15:g=E(r.cdr.car);c=r.cdr.car;case 17:t.t0=mo;t.t1=r.car;t.t2=mo;t.t3=c;t.next=23;return C(r.cdr.cdr,n,i);case 23:t.t4=t.sent;t.t5=new t.t2(t.t3,t.t4);return t.abrupt("return",new t.t0(t.t1,t.t5));case 28:if(!F(u,a)){t.next=50;break}f=a instanceof $t?r:r.cdr;t.next=32;return a.invoke(f,Lt(Lt({},m),{},{env:i}),true);case 32:l=t.sent;if(!(a instanceof $t)){t.next=41;break}h=l,p=h.expr,_=h.scope;if(!(p instanceof mo)){t.next=40;break}if(!(n!==-1&&n<=1||n<Mt)){t.next=38;break}return t.abrupt("return",p);case 38:if(n!==-1){n=n-1}return t.abrupt("return",C(p,n,_));case 40:l=p;case 41:if(!(l instanceof so)){t.next=43;break}return t.abrupt("return",Xt(l));case 43:if(!(l instanceof mo)){t.next=48;break}if(!(n!==-1&&n<=1||n<Mt)){t.next=46;break}return t.abrupt("return",l);case 46:if(n!==-1){n=n-1}return t.abrupt("return",C(l,n,i));case 48:if(!Uo(l)){t.next=50;break}return t.abrupt("return",l);case 50:d=r.car;if(!(d instanceof mo)){t.next=55;break}t.next=54;return C(d,n,i);case 54:d=t.sent;case 55:v=r.cdr;if(!(v instanceof mo)){t.next=60;break}t.next=59;return C(v,n,i);case 59:v=t.sent;case 60:y=new mo(d,v);return t.abrupt("return",y);case 62:case"end":return t.stop()}}},e)}));return s.apply(this,arguments)};C=function e(t,r,n){return s.apply(this,arguments)};o=function e(){o=k(S.mark(function e(r,n){var i;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r===yo)){t.next=2;break}return t.abrupt("return",yo);case 2:i=r.car;t.t0=mo;t.t1=mo;t.t2=i.car;t.next=8;return C(i.cdr,n,u);case 8:t.t3=t.sent;t.t4=new t.t1(t.t2,t.t3);t.next=12;return x(r.cdr);case 12:t.t5=t.sent;return t.abrupt("return",new t.t0(t.t4,t.t5));case 14:case"end":return t.stop()}}},e)}));return o.apply(this,arguments)};x=function e(t,r){return o.apply(this,arguments)};F=function e(t,r){return r instanceof qt&&r.__defmacro__&&!g.includes(t)};A=function e(t){return[].concat(O(g),O(t.to_array(false).map(function(e){if(e instanceof mo){return e.car.valueOf()}throw new Error("macroexpand: Invalid let binding")})))};E=function e(t){var r=[];while(true){if(t!==yo){if(t instanceof so){r.push(t.valueOf());break}r.push(t.car.valueOf());t=t.cdr}else{break}}return[].concat(O(g),r)};D=function e(t){return t===i};w=function e(t,r){return t===a&&r.cdr.car instanceof mo};b=function e(t){var r=t.valueOf();return n.includes(r)};u=m["env"]=this;g=[];n=["let","let*","letrec"];i=pu.get("lambda");a=pu.get("define");if(!(r.cdr instanceof mo&&N.isNumber(r.cdr.car))){t.next=21;break}t.t0=Xt;t.next=19;return C(r,r.cdr.car.valueOf(),u);case 19:t.t1=t.sent.car;return t.abrupt("return",(0,t.t0)(t.t1));case 21:if(!c){t.next=27;break}t.t2=Xt;t.next=25;return C(r,1,u);case 25:t.t3=t.sent.car;return t.abrupt("return",(0,t.t2)(t.t3));case 27:t.t4=Xt;t.next=30;return C(r,-1,u);case 30:t.t5=t.sent.car;return t.abrupt("return",(0,t.t4)(t.t5));case 32:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()}function $t(e,t){this.__env__=t;this.__fn__=e;this.__defmacro__=true}$t.__merge_env__=Symbol["for"]("merge");$t.prototype=Object.create(qt.prototype);$t.prototype.invoke=function(e,t,r){var n=t.error,i=t.env;var u={error:n,env:i,dynamic_scope:this.__env__,macro_expand:r};return this.__fn__.call(i,e,u,this.__name__||"syntax")};$t.prototype.constructor=$t;$t.prototype.toString=function(){if(this.__name__){return"#<syntax:".concat(this.__name__,">")}return"#<syntax>"};var zt=function(e){Q(r,e);var t=Rt(r);function r(){c(this,r);return t.apply(this,arguments)}return r}($t);$t.Parameter=zt;function Vt(e,t,w,D){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var E={"...":{symbols:{},lists:[]},symbols:{}};var A=r.expansion,F=r.define;function x(e){if(jt()){console.log(e)}}x(w);function C(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;x({code:t&&toString(t,true),pattern:e&&toString(e,true)});if(Uo(e)&&!(e instanceof so)){return Se(e,t)}if(e instanceof so&&w.includes(e.literal())){var i=A.ref(t);if(so.is(t,e)){if(typeof i==="undefined"){return true}return i===F||i===pu}return false}if(e instanceof mo&&e.car instanceof mo&&e.car.cdr instanceof mo&&so.is(e.car.cdr.car,D)){x(">> 0");if(t===yo){x({pattern:e.toString()});if(e.car.car instanceof so){if(e.car.cdr instanceof mo&&so.is(e.car.cdr.car,D)){var u=e.car.car.valueOf();var a=e.last_pair();if(so.is(a.car,D)){E["..."].symbols[u]=null;return true}else{return false}}var o=e.car.car.valueOf();if(E["..."].symbols[o]){throw new Error("syntax: named ellipsis can only "+"appear onces")}E["..."].symbols[o]=t}}}if(e instanceof mo&&e.cdr instanceof mo&&so.is(e.cdr.car,D)){if(e.cdr.cdr!==yo){if(e.cdr.cdr instanceof mo){var s=e.cdr.cdr.length();var c=t.length();var f=t;while(c-1>s){f=f.cdr;c--}var l=f.cdr;f.cdr=yo;if(!C(e.cdr.cdr,l,r,n)){return false}}}if(e.car instanceof so){var h=e.car.__name__;if(E["..."].symbols[h]&&!r.includes(h)&&!n){throw new Error("syntax: named ellipsis can only appear onces")}x(">> 1");if(t===yo){x(">> 2");if(n){x("NIL");E["..."].symbols[h]=yo}else{x("NULL");E["..."].symbols[h]=null}}else if(t instanceof mo&&(t.car instanceof mo||t.car===yo)){x(">> 3 "+n);if(n){if(E["..."].symbols[h]){var p=E["..."].symbols[h];if(p===yo){p=new mo(yo,new mo(t,yo))}else{p=p.append(new mo(t,yo))}E["..."].symbols[h]=p}else{E["..."].symbols[h]=new mo(t,yo)}}else{x(">> 4");E["..."].symbols[h]=new mo(t,yo)}}else{x(">> 6");if(t instanceof mo){x(">> 7 "+n);r.push(h);if(!E["..."].symbols[h]){E["..."].symbols[h]=new mo(t,yo)}else{var _=E["..."].symbols[h];E["..."].symbols[h]=_.append(new mo(t,yo))}x({IIIIII:E["..."].symbols[h].toString()})}else{x(">> 8");return false}}return true}else if(e.car instanceof mo){var d=O(r);if(t===yo){x(">> 9");E["..."].lists.push(yo);return true}x(">> 10");var v=t;while(v instanceof mo){if(!C(e.car,v.car,d,true)){return false}v=v.cdr}return true}return false}if(e instanceof so){if(so.is(e,D)){throw new Error("syntax: invalid usage of ellipsis")}x(">> 11");var y=e.__name__;if(w.includes(y)){return true}x({name:y,ellipsis:n});if(n){E["..."].symbols[y]=E["..."].symbols[y]||[];E["..."].symbols[y].push(t)}E.symbols[y]=t;if(!E.symbols[y]);return true}if(e instanceof mo&&t instanceof mo){x(">> 12");x({a:12,code:t&&t.toString(),pattern:e.toString()});if(t.cdr===yo){var m=e.car instanceof so&&e.cdr instanceof so;if(m){if(!C(e.car,t.car,r,n)){return false}x(">> 12 | 1");var g=e.cdr.valueOf();if(!(g in E.symbols)){E.symbols[g]=yo}g=e.car.valueOf();if(!(g in E.symbols)){E.symbols[g]=t.car}return true}}x({pattern:e.toString(),code:t.toString()});if(e.cdr instanceof mo&&e.car instanceof so&&e.cdr.cdr instanceof mo&&e.cdr.car instanceof so&&so.is(e.cdr.cdr.car,D)&&e.cdr.cdr.cdr instanceof mo&&!so.is(e.cdr.cdr.cdr.car,D)&&C(e.car,t.car,r,n)&&C(e.cdr.cdr.cdr,t.cdr,r,n)){var b=e.cdr.car.__name__;x({pattern:e.car.toString(),code:t.car.toString(),name:b});if(w.includes(b)){return true}E["..."].symbols[b]=null;return true}x("recur");if(C(e.car,t.car,r,n)&&C(e.cdr,t.cdr,r,n)){return true}}else if(e===yo&&(t===yo||t===undefined)){return true}else if(e.car instanceof mo&&so.is(e.car.car,D)){throw new Error("syntax: invalid usage of ellipsis")}else{return false}}if(C(e,t)){return E}}function Gt(e,i){function u(t){if(t instanceof mo){if(!i.length){return t}var e=u(t.car);var r=u(t.cdr);return new mo(e,r)}else if(t instanceof so){var n=i.find(function(e){return e.gensym===t});if(n){return so(n.name)}return t}else{return t}}return u(e)}function Jt(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var k=e.bindings,t=e.expr,S=e.scope,a=e.symbols,c=e.names,j=e.ellipsis;var f={};function o(e){if(e instanceof so){return true}return["string","symbol"].includes(l(e))}function B(e){if(!o(e)){var t=jo(e);throw new Error("syntax: internal error, need symbol got ".concat(t))}var r=e.valueOf();if(r===j){throw new Error("syntax: internal error, ellipis not transformed")}var n=l(r);if(["string","symbol"].includes(n)){if(r in k.symbols){return k.symbols[r]}else if(n==="string"&&r.match(/\./)){var i=r.split(".");var u=i[0];if(u in k.symbols){return mo.fromArray([so("."),k.symbols[u]].concat(i.slice(1).map(function(e){return to(e)})))}}}if(a.includes(r)){return so(r)}return s(r)}function I(e){if(jt()){console.log(e)}}function s(e){if(!f[e]){var t=S.ref(e);var r=lo(e);if(t){var n=S.get(e);S.set(r,n)}else{var i=S.get(e,{throwError:false});if(typeof i!=="undefined"){S.set(r,i)}}c.push({name:e,gensym:r});f[e]=r;if(typeof e==="string"&&e.match(/\./)){var u=e.split(".").filter(Boolean),a=ee(u),o=a[0],s=a.slice(1);if(f[o]){xe(r,"__object__",[f[o]].concat(O(s)))}}}return f[e]}function P(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var i=r.nested;I(" ==> "+e.toString(true));I(t);if(e instanceof so){var u=e.valueOf();I("[t 1");if(t[u]){if(t[u]instanceof mo){var a=t[u],o=a.car,s=a.cdr;if(i){var c=o.car,f=o.cdr;if(f!==yo){n(u,new mo(f,yo))}return c}if(s!==yo){n(u,s)}return o}else if(t[u]instanceof Array){n(u,t[u].slice(1));return t[u][0]}}return B(u)}if(e instanceof mo){if(e.car instanceof so&&e.cdr instanceof mo&&so.is(e.cdr.car,j)){I("[t 2");var l=e.car.valueOf();var h=t[l];I({expr:e.toString(true),name:l,bindings:t,item:h});if(h===null){return}else if(h){I({b:t[l].toString()});if(h instanceof mo){I("[t 2 Pair "+i);I({______:h.toString()});var p=h.car,_=h.cdr;if(i){if(_!==yo){I("|| next 1");n(l,_)}I({car:p.toString()});return p}else{if(p.cdr!==yo){I("|| next 2");n(l,new mo(p.cdr,_))}I({car:p.car.toString()});return p.car}}else if(h instanceof Array){I("[t 2 Array "+i);if(i){n(l,h.slice(1));return mo.fromArray(h)}else{var d=h.slice(1);if(d.length){n(l,d)}return h[0]}}else{return h}}}I("[t 3 recur "+e.toString());var v=P(e.car,t,r,n);var y=P(e.cdr,t,r,n);return new mo(v,y)}return e}function N(t,r){var e=Object.values(t);var n=Object.getOwnPropertySymbols(t);if(n.length){e.push.apply(e,O(n.map(function(e){return t[e]})))}return e.length&&e.every(function(e){if(e===null){return!r}return e instanceof mo||e===yo||e instanceof Array&&e.length})}function R(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function T(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},t=e.disabled;I("traverse>> "+i.toString());if(i instanceof mo){if(!t&&i.car instanceof mo&&so.is(i.car.car,j)){return T(i.car.cdr,{disabled:true})}if(i.cdr instanceof mo&&so.is(i.cdr.car,j)&&!t){I(">> 1");var r=k["..."].symbols;var n=Object.values(r);if(n.length&&n.every(function(e){return e===null})){return T(i.cdr.cdr,{disabled:t})}var u=R(r);var a=i.car instanceof so&&so.is(i.cdr.cdr.car,j);if(i.car instanceof mo||a){if(k["..."].lists[0]===yo){return yo}var o=i.car;if(a){o=new mo(i.car,new mo(i.cdr.car,yo))}I(">> 2");var s;if(u.length){I(">> 2 (a)");var c=Lt({},r);s=yo;var f=function e(){if(!N(c)){return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(o,c,{nested:true},t);if(r!==undefined){if(a){if(s===yo){s=r}else{s=s.append(r)}}else{s=new mo(r,s)}}c=n};while(true){var l=f();if(l==="break")break}if(s!==yo&&!a){s=s.reverse()}if(i.cdr.cdr!==yo&&!so.is(i.cdr.cdr.car,j)){var h=T(i.cdr.cdr,{disabled:t});return s.append(h)}return s}else{I(">> 3");var p=P(i.car,r,{nested:true});if(p){return new mo(p,yo)}return yo}}else if(i.car instanceof so){I(">> 4");if(so.is(i.cdr.cdr.car,j)){I(">> 4 (a)")}else{I(">> 4 (b)")}var _=i.car.__name__;var d=U({},_,r[_]);var v=r[_]===null;var y=yo;var m=function e(){if(!N(d,true)){I({bind:d});return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(i,d,{nested:false},t);I({value:r.toString()});if(typeof r!=="undefined"){y=new mo(r,y)}d=n};while(true){var g=m();if(g==="break")break}if(y!==yo){y=y.reverse()}if(i.cdr instanceof mo){if(i.cdr.cdr instanceof mo||i.cdr.cdr instanceof so){var b=T(i.cdr.cdr,{disabled:t});if(v){return b}I("<<<< 1");y.append(b)}}I("<<<< 2");return y}}var w=T(i.car,{disabled:t});var D;var E;if(i.car instanceof so){var A=S.get(i.car,{throwError:false});E=A instanceof qt&&A.__name__==="syntax-rules"}if(E){if(i.cdr.car instanceof so){D=new mo(T(i.cdr.car,{disabled:t}),new mo(i.cdr.cdr.car,T(i.cdr.cdr.cdr,{disabled:t})))}else{D=new mo(i.cdr.car,T(i.cdr.cdr,{disabled:t}))}I("REST >>>> "+D.toString())}else{D=T(i.cdr,{disabled:t})}I({a:true,car:toString(i.car),cdr:toString(i.cdr),head:toString(w),rest:toString(D)});return new mo(w,D)}if(i instanceof so){if(t&&so.is(i,j)){return i}var F=Object.keys(k["..."].symbols);var x=i.literal();if(F.includes(x)){var C="missing ellipsis symbol next to name `".concat(x,"'");throw new Error("syntax-rules: ".concat(C))}var O=B(i);if(typeof O!=="undefined"){return O}}return i}return T(t,{})}var Ht=new qt("syntax-rules",function(y,e){var m=e.dynamic_scope,g=e.error;var b=this;function w(e){var t=[];while(e!==yo){var r=e.car;t.push(r.valueOf());e=e.cdr}return t}function t(e){while(e!==yo){var t=e.car;if(!(t instanceof so)){throw new Error("syntax-rules: wrong identifier")}e=e.cdr}}if(y.car instanceof so){t(y.cdr.car)}else{t(y.car)}var r=new $t(function(e,t){var r=t.macro_expand;var n=b.inherit("syntax");if(m){m=n}var i=this;if(i.__name__===$t.__merge_env__){var u=Object.getOwnPropertySymbols(i.__env__);u.forEach(function(e){i.__parent__.set(e,i.__env__[e])});i=i.__parent__}var a={env:n,dynamic_scope:m,error:g};var o,s,c;if(y.car instanceof so){o=y.car;c=w(y.cdr.car);s=y.cdr.cdr}else{o="...";c=w(y.car);s=y.cdr}try{while(s!==yo){var f=s.car.car;var l=s.car.cdr.car;St(f);var h=Vt(f,e,c,o,{expansion:this,define:b});if(h){if(jt()){console.log(JSON.stringify(Bt(h),true,2));console.log("PATTERN: "+f.toString(true));console.log("MACRO: "+e.toString(true))}var p=[];var _=Jt({bindings:h,expr:l,symbols:c,scope:n,lex_scope:i,names:p,ellipsis:o});St("OUPUT>>> "+_.toString());if(_){l=_}var d=i.merge(n,$t.__merge_env__);if(r){return{expr:l,scope:d}}var v=wt(l,Lt(Lt({},a),{},{env:d}));return Gt(v,p)}s=s.cdr}}catch(e){e.message+=" in macro: ".concat(y.toString(true));throw e}throw new Error("Invalid Syntax ".concat(e.toString(true)))},b);r.__code__=y;return r},"(syntax-rules () (pattern expression) ...)\n\n    Base of Hygienic macro, it will return new syntax expander\n    that works like lisp macros.");var Wt="define-macro";var Zt=new qt(Wt,function(o,e){var s=e.dynamic_scope,c=e.error;if(o.car instanceof mo&&o.car.car instanceof so){var t=o.car.car.__name__;var f;if(to.isString(o.cdr.car)&&o.cdr.cdr instanceof mo){f=o.cdr.car.valueOf()}var r=qt.defmacro(t,function(e){var t=new Ct({},this,"defmacro");var r=o.car.cdr;var n=e;while(true){if(r===yo){break}if(r instanceof so){t.__env__[r.__name__]=n;break}else if(r.car!==yo){if(n===yo){t.__env__[r.car.__name__]=yo}else{if(n.car instanceof mo){n.car[xo]=true}t.__env__[r.car.__name__]=n.car}}if(r.cdr===yo){break}if(n!==yo){n=n.cdr}r=r.cdr}if(s){s=t}var i={env:t,dynamic_scope:s,error:c};if(o.cdr instanceof mo){var u=f?o.cdr.cdr:o.cdr;var a=u.reduce(function(e,t){return wt(t,i)});return oe(a,function(e){if(l(e)==="object"){delete e[xo]}return e})}},f,true);r.__code__=new mo(new so("define-macro"),o);this.set(t,r)}},"(define-macro (name . args) body)\n\n     Meta macro, macro that create new macros, if return value is list structure\n     it will be evaluated when macro is invoked. You can use quasiquote ` and\n     unquote , and unquote-splicing ,@ inside to create expression that will be\n     evaluated on runtime. Macros works like this: if you pass any expression to\n     macro the arguments will not be evaluated unless macro itself evaluate it.\n     Because of this macro can manipulate expression (arguments) as lists.");function Qt(e){var g;switch(e){case Symbol["for"]("letrec"):g="letrec";break;case Symbol["for"]("let"):g="let";break;case Symbol["for"]("let*"):g="let*";break;default:throw new Error("Invalid let_macro value")}return qt.defmacro(g,function(t,e){var f=e.dynamic_scope,l=e.error,r=e.macro_expand;var h;if(t.car instanceof so){if(!(t.cdr.car instanceof mo||t.cdr.car===yo)){throw new Error("let require list of pairs")}var n;if(t.cdr.car===yo){h=yo;n=yo}else{n=t.cdr.car.map(function(e){return e.car});h=t.cdr.car.map(function(e){return e.cdr.car})}return mo.fromArray([so("letrec"),[[t.car,mo(so("lambda"),mo(n,t.cdr.cdr))]],mo(t.car,h)])}else if(r){return}var p=this;h=pu.get("list->array")(t.car);var _=p.inherit(g);var d,v;if(g==="let*"){v=_}else if(g==="let"){d=[]}var y=0;function m(){var e=new mo(new so("begin"),t.cdr);return wt(e,{env:_,dynamic_scope:f,error:l})}return function t(){var r=h[y++];if(f){f=g==="let*"?_:p}if(!r){if(d&&d.length){var e=d.map(function(e){return e.value});var n=e.filter(ie);if(n.length){return fe(e).then(function(e){for(var t=0,r=e.length;t<r;++t){_.set(d[t].name,e[t])}}).then(m)}else{var i=It(d),u;try{for(i.s();!(u=i.n()).done;){var a=u.value,o=a.name,s=a.value;_.set(o,s)}}catch(e){i.e(e)}finally{i.f()}}}return m()}else{if(g==="let"){v=p}else if(g==="letrec"){v=_}var c=wt(r.cdr.car,{env:v,dynamic_scope:f,error:l});if(g==="let*"){v=_=v.inherit("let*["+y+"]")}if(d){d.push({name:r.car,value:c});return t()}else{return oe(c,function(e){_.set(r.car,e);return t()})}}}()})}var Kt=qt.defmacro("quasiquote",function(e,t){var o=t.dynamic_scope,s=t.error;var c=this;if(o){o=c}function u(e){return e instanceof mo||To(e)||Array.isArray(e)}function f(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:u;if(e instanceof mo){var n=e.car;var i=e.cdr;if(r(n)){n=t(n)}if(r(i)){i=t(i)}if(ie(n)||ie(i)){return fe([n,i]).then(function(e){var t=b(e,2),r=t[0],n=t[1];return new mo(r,n)})}else{return new mo(n,i)}}return e}function a(e,t){if(e instanceof mo){if(t!==yo){e.append(t)}}else{e=new mo(e,t)}return e}function r(e){return!!e.filter(function(e){return e instanceof mo&&so.is(e.car,/^(unquote|unquote-splicing)$/)}).length}function l(e,n,i){return e.reduce(function(e,t){if(!(t instanceof mo)){e.push(t);return e}if(so.is(t.car,"unquote-splicing")){var r;if(n+1<i){r=d(t.cdr,n+1,i)}else{r=wt(t.cdr.car,{env:c,dynamic_scope:o,error:s})}if(!(r instanceof mo)){throw new Error("Expecting list ".concat(jo(t)," found"))}return e.concat(r.to_array())}e.push(d(t,n,i));return e},[])}function h(n,i,u){var a={};i++;Object.keys(n).forEach(function(e){var t=n[e];if(t instanceof mo){if(so.is(t.car,"unquote-splicing")){throw new Error("You can't call `unquote-splicing` "+"inside object")}var r;if(i<u){r=d(t.cdr.car,i,u)}else{r=wt(t.cdr.car,{env:c,dynamic_scope:o,error:s})}a[e]=r}else{a[e]=t}});if(Object.isFrozen(n)){Object.freeze(a)}return a}function p(i,e,t){if(e<t){return new mo(new mo(i.car.car,d(i.car.cdr,e,t)),yo)}var n=[];return function e(t){var r=wt(t.car,{env:c,dynamic_scope:o,error:s});n.push(r);if(t.cdr instanceof mo){return e(t.cdr)}return oe(n,function(r){if(r.some(function(e){return!(e instanceof mo)})){if(i.cdr instanceof mo&&so.is(i.cdr.car,".")&&i.cdr.cdr instanceof mo&&i.cdr.cdr.cdr===yo){return i.cdr.cdr.car}if(!(i.cdr===yo||i.cdr instanceof mo)){var e="You can't splice atom inside list";throw new Error(e)}if(r.length>1){var t="You can't splice multiple atoms inside list";throw new Error(t)}if(!(i.cdr instanceof mo&&r[0]===yo)){return r[0]}}r=r.map(function(e){if(_.has(e)){return e.clone()}else{_.add(e);return e}});var n=d(i.cdr,0,1);if(n===yo&&r[0]===yo){return undefined}return oe(n,function(e){if(r[0]===yo){return e}if(r.length===1){return a(r[0],e)}var t=r.reduce(function(e,t){return a(e,t)});return a(t,e)})})}(i.car.cdr)}var _=new Set;function d(e,t,r){if(e instanceof mo){if(e.car instanceof mo){if(so.is(e.car.car,"unquote-splicing")){return p(e,t+1,r)}if(so.is(e.car.car,"unquote")){if(t+2===r&&e.car.cdr instanceof mo&&e.car.cdr.car instanceof mo&&so.is(e.car.cdr.car.car,"unquote-splicing")){var n=e.car.cdr;return new mo(new mo(new so("unquote"),p(n,t+2,r)),yo)}else if(e.car.cdr instanceof mo&&e.car.cdr.cdr!==yo){if(e.car.cdr.car instanceof mo){var i=[];return function t(r){if(r===yo){return mo.fromArray(i)}return oe(wt(r.car,{env:c,dynamic_scope:o,error:s}),function(e){i.push(e);return t(r.cdr)})}(e.car.cdr)}else{return e.car.cdr}}}}if(so.is(e.car,"quasiquote")){var u=d(e.cdr,t,r+1);return new mo(e.car,u)}if(so.is(e.car,"quote")){return new mo(e.car,d(e.cdr,t,r))}if(so.is(e.car,"unquote")){t++;if(t<r){return new mo(new so("unquote"),d(e.cdr,t,r))}if(t>r){throw new Error("You can't call `unquote` outside "+"of quasiquote")}if(e.cdr instanceof mo){if(e.cdr.cdr!==yo){if(e.cdr.car instanceof mo){var a=[];return function t(r){if(r===yo){return mo.fromArray(a)}return oe(wt(r.car,{env:c,dynamic_scope:o,error:s}),function(e){a.push(e);return t(r.cdr)})}(e.cdr)}else{return e.cdr}}else{return wt(e.cdr.car,{env:c,dynamic_scope:o,error:s})}}else{return e.cdr}}return f(e,function(e){return d(e,t,r)})}else if(To(e)){return h(e,t,r)}else if(e instanceof Array){return l(e,t,r)}return e}function n(e){if(e instanceof mo){delete e[xo];if(!e.haveCycles("car")){n(e.car)}if(!e.haveCycles("cdr")){n(e.cdr)}}}if(To(e.car)&&!r(Object.values(e.car))){return Xt(e.car)}if(Array.isArray(e.car)&&!r(e.car)){return Xt(e.car)}if(e.car instanceof mo&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote")){return Xt(e.car)}var i=d(e.car,0,1);return oe(i,function(e){n(e);return Xt(e)})},"(quasiquote list ,value ,@value)\n\n    Similar macro to `quote` but inside it you can use special\n    expressions unquote abbreviated to , that will evaluate expresion inside\n    and return its value or unquote-splicing abbreviated to ,@ that will\n    evaluate expression but return value without parenthesis (it will join)\n    the list with its value. Best used with macros but it can be used outside");var Xt=new qt("quote",function(e){return Xt(e.car)},"(quote expression)\n\n     Macro that return single lips expression as data (it don't evaluate its\n     argument). It will return list of pairs if put in front of lips code.\n     And if put in fron of symbol it will return that symbol not value\n     associated with that name.");var er=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var tr=[];var rr=[];var nr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var ir=false;function ur(){ir=true;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){tr[t]=e[t];rr[e.charCodeAt(t)]=t}rr["-".charCodeAt(0)]=62;rr["_".charCodeAt(0)]=63}function ar(e){if(!ir){ur()}var t,r,n,i,u,a;var o=e.length;if(o%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}u=e[o-2]==="="?2:e[o-1]==="="?1:0;a=new nr(o*3/4-u);n=u>0?o-4:o;var s=0;for(t=0,r=0;t<n;t+=4,r+=3){i=rr[e.charCodeAt(t)]<<18|rr[e.charCodeAt(t+1)]<<12|rr[e.charCodeAt(t+2)]<<6|rr[e.charCodeAt(t+3)];a[s++]=i>>16&255;a[s++]=i>>8&255;a[s++]=i&255}if(u===2){i=rr[e.charCodeAt(t)]<<2|rr[e.charCodeAt(t+1)]>>4;a[s++]=i&255}else if(u===1){i=rr[e.charCodeAt(t)]<<10|rr[e.charCodeAt(t+1)]<<4|rr[e.charCodeAt(t+2)]>>2;a[s++]=i>>8&255;a[s++]=i&255}return a}function or(e){return tr[e>>18&63]+tr[e>>12&63]+tr[e>>6&63]+tr[e&63]}function sr(e,t,r){var n;var i=[];for(var u=t;u<r;u+=3){n=(e[u]<<16)+(e[u+1]<<8)+e[u+2];i.push(or(n))}return i.join("")}function cr(e){if(!ir){ur()}var t;var r=e.length;var n=r%3;var i="";var u=[];var a=16383;for(var o=0,s=r-n;o<s;o+=a){u.push(sr(e,o,o+a>s?s:o+a))}if(n===1){t=e[r-1];i+=tr[t>>2];i+=tr[t<<4&63];i+="=="}else if(n===2){t=(e[r-2]<<8)+e[r-1];i+=tr[t>>10];i+=tr[t>>4&63];i+=tr[t<<2&63];i+="="}u.push(i);return u.join("")}function fr(e,t,r,n,i){var u,a;var o=i*8-n-1;var s=(1<<o)-1;var c=s>>1;var f=-7;var l=r?i-1:0;var h=r?-1:1;var p=e[t+l];l+=h;u=p&(1<<-f)-1;p>>=-f;f+=o;for(;f>0;u=u*256+e[t+l],l+=h,f-=8){}a=u&(1<<-f)-1;u>>=-f;f+=n;for(;f>0;a=a*256+e[t+l],l+=h,f-=8){}if(u===0){u=1-c}else if(u===s){return a?NaN:(p?-1:1)*Infinity}else{a=a+Math.pow(2,n);u=u-c}return(p?-1:1)*a*Math.pow(2,u-n)}function lr(e,t,r,n,i,u){var a,o,s;var c=u*8-i-1;var f=(1<<c)-1;var l=f>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=n?0:u-1;var _=n?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;a=f}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(s=Math.pow(2,-a))<1){a--;s*=2}if(a+l>=1){t+=h/s}else{t+=h*Math.pow(2,1-l)}if(t*s>=2){a++;s/=2}if(a+l>=f){o=0;a=f}else if(a+l>=1){o=(t*s-1)*Math.pow(2,i);a=a+l}else{o=t*Math.pow(2,l-1)*Math.pow(2,i);a=0}}for(;i>=8;e[r+p]=o&255,p+=_,o/=256,i-=8){}a=a<<i|o;c+=i;for(;c>0;e[r+p]=a&255,p+=_,a/=256,c-=8){}e[r+p-_]|=d*128}var hr={}.toString;var pr=Array.isArray||function(e){return hr.call(e)=="[object Array]"};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   */var _r=50;yr.TYPED_ARRAY_SUPPORT=er.TYPED_ARRAY_SUPPORT!==undefined?er.TYPED_ARRAY_SUPPORT:true;function dr(){return yr.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function vr(e,t){if(dr()<t){throw new RangeError("Invalid typed array length")}if(yr.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=yr.prototype}else{if(e===null){e=new yr(t)}e.length=t}return e}function yr(e,t,r){if(!yr.TYPED_ARRAY_SUPPORT&&!(this instanceof yr)){return new yr(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return wr(this,e)}return mr(this,e,t,r)}yr.poolSize=8192;yr._augment=function(e){e.__proto__=yr.prototype;return e};function mr(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return Ar(e,t,r,n)}if(typeof t==="string"){return Dr(e,t,r)}return Fr(e,t)}yr.from=function(e,t,r){return mr(null,e,t,r)};if(yr.TYPED_ARRAY_SUPPORT){yr.prototype.__proto__=Uint8Array.prototype;yr.__proto__=Uint8Array}function gr(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function br(e,t,r,n){gr(t);if(t<=0){return vr(e,t)}if(r!==undefined){return typeof n==="string"?vr(e,t).fill(r,n):vr(e,t).fill(r)}return vr(e,t)}yr.alloc=function(e,t,r){return br(null,e,t,r)};function wr(e,t){gr(t);e=vr(e,t<0?0:xr(t)|0);if(!yr.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){e[r]=0}}return e}yr.allocUnsafe=function(e){return wr(null,e)};yr.allocUnsafeSlow=function(e){return wr(null,e)};function Dr(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!yr.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=Or(t,r)|0;e=vr(e,n);var i=e.write(t,r);if(i!==n){e=e.slice(0,i)}return e}function Er(e,t){var r=t.length<0?0:xr(t.length)|0;e=vr(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function Ar(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(r===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(yr.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=yr.prototype}else{e=Er(e,t)}return e}function Fr(e,t){if(Cr(t)){var r=xr(t.length)|0;e=vr(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||fn(t.length)){return vr(e,0)}return Er(e,t)}if(t.type==="Buffer"&&pr(t.data)){return Er(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function xr(e){if(e>=dr()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+dr().toString(16)+" bytes")}return e|0}yr.isBuffer=ln;function Cr(e){return!!(e!=null&&e._isBuffer)}yr.compare=function e(t,r){if(!Cr(t)||!Cr(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var u=0,a=Math.min(n,i);u<a;++u){if(t[u]!==r[u]){n=t[u];i=r[u];break}}if(n<i)return-1;if(i<n)return 1;return 0};yr.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};yr.concat=function e(t,r){if(!pr(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return yr.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=yr.allocUnsafe(r);var u=0;for(n=0;n<t.length;++n){var a=t[n];if(!Cr(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(i,u);u+=a.length}return i};function Or(e,t){if(Cr(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return un(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return sn(e).length;default:if(n)return un(e).length;t=(""+t).toLowerCase();n=true}}}yr.byteLength=Or;function kr(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return Vr(this,t,r);case"utf8":case"utf-8":return qr(this,t,r);case"ascii":return $r(this,t,r);case"latin1":case"binary":return zr(this,t,r);case"base64":return Lr(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gr(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}yr.prototype._isBuffer=true;function Sr(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}yr.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){Sr(this,r,r+1)}return this};yr.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){Sr(this,r,r+3);Sr(this,r+1,r+2)}return this};yr.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){Sr(this,r,r+7);Sr(this,r+1,r+6);Sr(this,r+2,r+5);Sr(this,r+3,r+4)}return this};yr.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return qr(this,0,t);return kr.apply(this,arguments)};yr.prototype.equals=function e(t){if(!Cr(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return yr.compare(this,t)===0};yr.prototype.inspect=function e(){var t="";var r=_r;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};yr.prototype.compare=function e(t,r,n,i,u){if(!Cr(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(u===undefined){u=this.length}if(r<0||n>t.length||i<0||u>this.length){throw new RangeError("out of range index")}if(i>=u&&r>=n){return 0}if(i>=u){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;u>>>=0;if(this===t)return 0;var a=u-i;var o=n-r;var s=Math.min(a,o);var c=this.slice(i,u);var f=t.slice(r,n);for(var l=0;l<s;++l){if(c[l]!==f[l]){a=c[l];o=f[l];break}}if(a<o)return-1;if(o<a)return 1;return 0};function jr(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=yr.from(t,n)}if(Cr(t)){if(t.length===0){return-1}return Br(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(yr.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return Br(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function Br(e,t,r,n,i){var u=1;var a=e.length;var o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}u=2;a/=2;o/=2;r/=2}}function s(e,t){if(u===1){return e[t]}else{return e.readUInt16BE(t*u)}}var c;if(i){var f=-1;for(c=r;c<a;c++){if(s(e,c)===s(t,f===-1?0:c-f)){if(f===-1)f=c;if(c-f+1===o)return f*u}else{if(f!==-1)c-=c-f;f=-1}}}else{if(r+o>a)r=a-o;for(c=r;c>=0;c--){var l=true;for(var h=0;h<o;h++){if(s(e,c+h)!==s(t,h)){l=false;break}}if(l)return c}}return-1}yr.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};yr.prototype.indexOf=function e(t,r,n){return jr(this,t,r,n,true)};yr.prototype.lastIndexOf=function e(t,r,n){return jr(this,t,r,n,false)};function Ir(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var u=t.length;if(u%2!==0)throw new TypeError("Invalid hex string");if(n>u/2){n=u/2}for(var a=0;a<n;++a){var o=parseInt(t.substr(a*2,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function Pr(e,t,r,n){return cn(un(t,e.length-r),e,r,n)}function Nr(e,t,r,n){return cn(an(t),e,r,n)}function Rr(e,t,r,n){return Nr(e,t,r,n)}function Tr(e,t,r,n){return cn(sn(t),e,r,n)}function Ur(e,t,r,n){return cn(on(t,e.length-r),e,r,n)}yr.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var u=this.length-r;if(n===undefined||n>u)n=u;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var a=false;for(;;){switch(i){case"hex":return Ir(this,t,r,n);case"utf8":case"utf-8":return Pr(this,t,r,n);case"ascii":return Nr(this,t,r,n);case"latin1":case"binary":return Rr(this,t,r,n);case"base64":return Tr(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ur(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};yr.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Lr(e,t,r){if(t===0&&r===e.length){return cr(e)}else{return cr(e.slice(t,r))}}function qr(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var u=e[i];var a=null;var o=u>239?4:u>223?3:u>191?2:1;if(i+o<=r){var s,c,f,l;switch(o){case 1:if(u<128){a=u}break;case 2:s=e[i+1];if((s&192)===128){l=(u&31)<<6|s&63;if(l>127){a=l}}break;case 3:s=e[i+1];c=e[i+2];if((s&192)===128&&(c&192)===128){l=(u&15)<<12|(s&63)<<6|c&63;if(l>2047&&(l<55296||l>57343)){a=l}}break;case 4:s=e[i+1];c=e[i+2];f=e[i+3];if((s&192)===128&&(c&192)===128&&(f&192)===128){l=(u&15)<<18|(s&63)<<12|(c&63)<<6|f&63;if(l>65535&&l<1114112){a=l}}}}if(a===null){a=65533;o=1}else if(a>65535){a-=65536;n.push(a>>>10&1023|55296);a=56320|a&1023}n.push(a);i+=o}return Yr(n)}var Mr=4096;function Yr(e){var t=e.length;if(t<=Mr){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=Mr))}return r}function $r(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function zr(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function Vr(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var u=t;u<r;++u){i+=nn(e[u])}return i}function Gr(e,t,r){var n=e.slice(t,r);var i="";for(var u=0;u<n.length;u+=2){i+=String.fromCharCode(n[u]+n[u+1]*256)}return i}yr.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i;if(yr.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=yr.prototype}else{var u=r-t;i=new yr(u,undefined);for(var a=0;a<u;++a){i[a]=this[a+t]}}return i};function Jr(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}yr.prototype.readUIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Jr(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}return i};yr.prototype.readUIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n){Jr(t,r,this.length)}var i=this[t+--r];var u=1;while(r>0&&(u*=256)){i+=this[t+--r]*u}return i};yr.prototype.readUInt8=function e(t,r){if(!r)Jr(t,1,this.length);return this[t]};yr.prototype.readUInt16LE=function e(t,r){if(!r)Jr(t,2,this.length);return this[t]|this[t+1]<<8};yr.prototype.readUInt16BE=function e(t,r){if(!r)Jr(t,2,this.length);return this[t]<<8|this[t+1]};yr.prototype.readUInt32LE=function e(t,r){if(!r)Jr(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};yr.prototype.readUInt32BE=function e(t,r){if(!r)Jr(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};yr.prototype.readIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Jr(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}u*=128;if(i>=u)i-=Math.pow(2,8*r);return i};yr.prototype.readIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n)Jr(t,r,this.length);var i=r;var u=1;var a=this[t+--i];while(i>0&&(u*=256)){a+=this[t+--i]*u}u*=128;if(a>=u)a-=Math.pow(2,8*r);return a};yr.prototype.readInt8=function e(t,r){if(!r)Jr(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};yr.prototype.readInt16LE=function e(t,r){if(!r)Jr(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};yr.prototype.readInt16BE=function e(t,r){if(!r)Jr(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};yr.prototype.readInt32LE=function e(t,r){if(!r)Jr(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};yr.prototype.readInt32BE=function e(t,r){if(!r)Jr(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};yr.prototype.readFloatLE=function e(t,r){if(!r)Jr(t,4,this.length);return fr(this,t,true,23,4)};yr.prototype.readFloatBE=function e(t,r){if(!r)Jr(t,4,this.length);return fr(this,t,false,23,4)};yr.prototype.readDoubleLE=function e(t,r){if(!r)Jr(t,8,this.length);return fr(this,t,true,52,8)};yr.prototype.readDoubleBE=function e(t,r){if(!r)Jr(t,8,this.length);return fr(this,t,false,52,8)};function Hr(e,t,r,n,i,u){if(!Cr(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<u)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}yr.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;Hr(this,t,r,n,u,0)}var a=1;var o=0;this[r]=t&255;while(++o<n&&(a*=256)){this[r+o]=t/a&255}return r+n};yr.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;Hr(this,t,r,n,u,0)}var a=n-1;var o=1;this[r+a]=t&255;while(--a>=0&&(o*=256)){this[r+a]=t/o&255}return r+n};yr.prototype.writeUInt8=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,1,255,0);if(!yr.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[r]=t&255;return r+1};function Wr(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,u=Math.min(e.length-r,2);i<u;++i){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}yr.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,2,65535,0);if(yr.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Wr(this,t,r,true)}return r+2};yr.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,2,65535,0);if(yr.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Wr(this,t,r,false)}return r+2};function Zr(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,u=Math.min(e.length-r,4);i<u;++i){e[r+i]=t>>>(n?i:3-i)*8&255}}yr.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,4,4294967295,0);if(yr.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255}else{Zr(this,t,r,true)}return r+4};yr.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,4,4294967295,0);if(yr.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{Zr(this,t,r,false)}return r+4};yr.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);Hr(this,t,r,n,u-1,-u)}var a=0;var o=1;var s=0;this[r]=t&255;while(++a<n&&(o*=256)){if(t<0&&s===0&&this[r+a-1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};yr.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);Hr(this,t,r,n,u-1,-u)}var a=n-1;var o=1;var s=0;this[r+a]=t&255;while(--a>=0&&(o*=256)){if(t<0&&s===0&&this[r+a+1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};yr.prototype.writeInt8=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,1,127,-128);if(!yr.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[r]=t&255;return r+1};yr.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,2,32767,-32768);if(yr.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Wr(this,t,r,true)}return r+2};yr.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,2,32767,-32768);if(yr.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Wr(this,t,r,false)}return r+2};yr.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,4,2147483647,-2147483648);if(yr.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else{Zr(this,t,r,true)}return r+4};yr.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)Hr(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(yr.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{Zr(this,t,r,false)}return r+4};function Qr(e,t,r,n,i,u){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Kr(e,t,r,n,i){if(!i){Qr(e,t,r,4)}lr(e,t,r,n,23,4);return r+4}yr.prototype.writeFloatLE=function e(t,r,n){return Kr(this,t,r,true,n)};yr.prototype.writeFloatBE=function e(t,r,n){return Kr(this,t,r,false,n)};function Xr(e,t,r,n,i){if(!i){Qr(e,t,r,8)}lr(e,t,r,n,52,8);return r+8}yr.prototype.writeDoubleLE=function e(t,r,n){return Xr(this,t,r,true,n)};yr.prototype.writeDoubleBE=function e(t,r,n){return Xr(this,t,r,false,n)};yr.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var u=i-n;var a;if(this===t&&n<r&&r<i){for(a=u-1;a>=0;--a){t[a+r]=this[a+n]}}else if(u<1e3||!yr.TYPED_ARRAY_SUPPORT){for(a=0;a<u;++a){t[a+r]=this[a+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+u),r)}return u};yr.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(t.length===1){var u=t.charCodeAt(0);if(u<256){t=u}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!yr.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=r;a<n;++a){this[a]=t}}else{var o=Cr(t)?t:un(new yr(t,i).toString());var s=o.length;for(a=0;a<n-r;++a){this[a+r]=o[a%s]}}return this};var en=/[^+\/0-9A-Za-z-_]/g;function tn(e){e=rn(e).replace(en,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function rn(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function nn(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function un(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var u=[];for(var a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)u.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)u.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)u.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)u.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return u}function an(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function on(e,t){var r,n,i;var u=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;u.push(i);u.push(n)}return u}function sn(e){return ar(tn(e))}function cn(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function fn(e){return e!==e}function ln(e){return e!=null&&(!!e._isBuffer||hn(e)||pn(e))}function hn(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function pn(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&hn(e.slice(0,0))}let _n;try{_n=new TextDecoder}catch(e){}let dn;let vn;let yn=0;const mn=105;const gn={};let bn={};let wn;let Dn;let En=0;let An=0;let Fn;let xn=[];let Cn;let On;let kn={useRecords:false,mapsAsObjects:true};let Sn=false;class jn{constructor(e){if(e){if(e.useRecords===false&&e.mapsAsObjects===undefined)e.mapsAsObjects=true;if(e.getStructures&&!e.structures)(e.structures=[]).uninitialized=true}Object.assign(this,e)}decode(e,t){if(dn){return Kn(()=>{Xn();return this?this.decode(e,t):jn.prototype.decode.call(kn,e,t)})}vn=t>-1?t:e.length;yn=0;An=0;Dn=null;dn=e;Cn=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength));if(this){bn=this;if(this.structures){wn=this.structures;return Bn()}else if(!wn||wn.length>0){wn=[]}}else{bn=kn;if(!wn||wn.length>0)wn=[]}return Bn()}decodeMultiple(r,n){let i,u=0;try{let e=r.length;Sn=true;let t=this?this.decode(r,e):ri.decode(r,e);if(n){n(t);while(yn<e){u=yn;if(n(Bn())===false){return}}}else{i=[t];while(yn<e){u=yn;i.push(Bn())}return i}}catch(e){e.lastPosition=u;e.values=i;throw e}finally{Sn=false;Xn()}}}function Bn(){try{let e=In();if(yn==vn){wn=null;dn=null;if(Fn)Fn=null}else if(yn>vn){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}else if(!Sn){throw new Error("Data read, but end of buffer not reached")}return e}catch(e){Xn();if(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")){e.incomplete=true}throw e}}function In(){let r=dn[yn++];let i=r>>5;r=r&31;if(r>23){switch(r){case 24:r=dn[yn++];break;case 25:if(i==7){return $n()}r=Cn.getUint16(yn);yn+=2;break;case 26:if(i==7){let t=Cn.getFloat32(yn);if(bn.useFloat32>2){let e=ti[(dn[yn]&127)<<1|dn[yn+1]>>7];yn+=4;return(e*t+(t>0?.5:-.5)>>0)/e}yn+=4;return t}r=Cn.getUint32(yn);yn+=4;break;case 27:if(i==7){let e=Cn.getFloat64(yn);yn+=8;return e}if(bn.uint64AsNumber)return dn[yn++]*72057594037927940+dn[yn++]*281474976710656+dn[yn++]*1099511627776+dn[yn++]*4294967296+dn[yn++]*16777216+(dn[yn++]<<16)+(dn[yn++]<<8)+dn[yn++];r=Cn.getBigUint64(yn);yn+=8;break;case 31:switch(i){case 2:case 3:case 4:let e=[];let t,r=0;while((t=In())!=gn){e[r++]=t}return i==4?e:i==3?e.join(""):yr.concat(e);case 5:let n;if(bn.mapsAsObjects){let e={};while((n=Vn())!=gn)e[n]=In();return e}else{if(On){bn.mapsAsObjects=true;On=false}let e=new Map;while((n=In())!=gn)e.set(n,In());return e}case 7:return gn;default:throw new Error("Invalid major type for indefinite length "+i)}default:throw new Error("Unknown token "+r)}}switch(i){case 0:return r;case 1:return~r;case 2:return Yn(r);case 3:if(An>=yn){return Dn.slice(yn-En,(yn+=r)-En)}if(An==0&&vn<140&&r<32){let e=r<16?Mn(r):qn(r);if(e!=null)return e}return Tn(r);case 4:let t=new Array(r);for(let e=0;e<r;e++){t[e]=In()}return t;case 5:if(bn.mapsAsObjects){let t={};for(let e=0;e<r;e++){t[Vn()]=In()}return t}else{if(On){bn.mapsAsObjects=true;On=false}let t=new Map;for(let e=0;e<r;e++){t.set(In(),In())}return t}case 6:if(r>>8==mn){let t=wn[r&255];if(t){if(!t.read)t.read=Nn(t);return t.read()}else if(bn.getStructures){let e=Kn(()=>{dn=null;return bn.getStructures()});if(wn===true)bn.structures=wn=e;else wn.splice.apply(wn,[0,e.length].concat(e));t=wn[r&255];if(t){if(!t.read)t.read=Nn(t);return t.read()}else return r}else return r}else{let e=xn[r];if(e){if(e.handlesRead)return e(In);else return e(In())}else return new Gn(In())}case 7:switch(r){case 20:return false;case 21:return true;case 22:return null;case 23:return;case 31:default:throw new Error("Unknown token "+r)}default:if(isNaN(r)){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}throw new Error("Unknown CBOR token "+r)}}const Pn=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Nn(n){let e=n.length;function t(){if(t.count++>2){this.read=new Function("a","r","return function(){a();return {"+n.map(e=>Pn.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}}")(Rn,In);return this.read()}Rn();let r={};for(let t=0;t<e;t++){let e=n[t];r[e]=In()}return r}t.count=0;return t}function Rn(e){let t=dn[yn++];t=t&31;if(t>23){switch(t){case 24:yn++;break;case 25:yn+=2;break;case 26:yn+=4}}}let Tn=Un;function Un(e){let t;if(e<16){if(t=Mn(e))return t}if(e>64&&_n)return _n.decode(dn.subarray(yn,yn+=e));const r=yn+e;const n=[];t="";while(yn<r){const i=dn[yn++];if((i&128)===0){n.push(i)}else if((i&224)===192){const u=dn[yn++]&63;n.push((i&31)<<6|u)}else if((i&240)===224){const u=dn[yn++]&63;const a=dn[yn++]&63;n.push((i&31)<<12|u<<6|a)}else if((i&248)===240){const u=dn[yn++]&63;const a=dn[yn++]&63;const o=dn[yn++]&63;let e=(i&7)<<18|u<<12|a<<6|o;if(e>65535){e-=65536;n.push(e>>>10&1023|55296);e=56320|e&1023}n.push(e)}else{n.push(i)}if(n.length>=4096){t+=Ln.apply(String,n);n.length=0}}if(n.length>0){t+=Ln.apply(String,n)}return t}let Ln=String.fromCharCode;function qn(t){let r=yn;let n=new Array(t);for(let e=0;e<t;e++){const i=dn[yn++];if((i&128)>0){yn=r;return}n[e]=i}return Ln.apply(String,n)}function Mn(d){if(d<4){if(d<2){if(d===0)return"";else{let e=dn[yn++];if((e&128)>1){yn-=1;return}return Ln(e)}}else{let e=dn[yn++];let t=dn[yn++];if((e&128)>0||(t&128)>0){yn-=2;return}if(d<3)return Ln(e,t);let r=dn[yn++];if((r&128)>0){yn-=3;return}return Ln(e,t,r)}}else{let l=dn[yn++];let h=dn[yn++];let p=dn[yn++];let _=dn[yn++];if((l&128)>0||(h&128)>0||(p&128)>0||(_&128)>0){yn-=4;return}if(d<6){if(d===4)return Ln(l,h,p,_);else{let e=dn[yn++];if((e&128)>0){yn-=5;return}return Ln(l,h,p,_,e)}}else if(d<8){let e=dn[yn++];let t=dn[yn++];if((e&128)>0||(t&128)>0){yn-=6;return}if(d<7)return Ln(l,h,p,_,e,t);let r=dn[yn++];if((r&128)>0){yn-=7;return}return Ln(l,h,p,_,e,t,r)}else{let o=dn[yn++];let s=dn[yn++];let c=dn[yn++];let f=dn[yn++];if((o&128)>0||(s&128)>0||(c&128)>0||(f&128)>0){yn-=8;return}if(d<10){if(d===8)return Ln(l,h,p,_,o,s,c,f);else{let e=dn[yn++];if((e&128)>0){yn-=9;return}return Ln(l,h,p,_,o,s,c,f,e)}}else if(d<12){let e=dn[yn++];let t=dn[yn++];if((e&128)>0||(t&128)>0){yn-=10;return}if(d<11)return Ln(l,h,p,_,o,s,c,f,e,t);let r=dn[yn++];if((r&128)>0){yn-=11;return}return Ln(l,h,p,_,o,s,c,f,e,t,r)}else{let n=dn[yn++];let i=dn[yn++];let u=dn[yn++];let a=dn[yn++];if((n&128)>0||(i&128)>0||(u&128)>0||(a&128)>0){yn-=12;return}if(d<14){if(d===12)return Ln(l,h,p,_,o,s,c,f,n,i,u,a);else{let e=dn[yn++];if((e&128)>0){yn-=13;return}return Ln(l,h,p,_,o,s,c,f,n,i,u,a,e)}}else{let e=dn[yn++];let t=dn[yn++];if((e&128)>0||(t&128)>0){yn-=14;return}if(d<15)return Ln(l,h,p,_,o,s,c,f,n,i,u,a,e,t);let r=dn[yn++];if((r&128)>0){yn-=15;return}return Ln(l,h,p,_,o,s,c,f,n,i,u,a,e,t,r)}}}}}function Yn(e){return bn.copyBuffers?Uint8Array.prototype.slice.call(dn,yn,yn+=e):dn.subarray(yn,yn+=e)}function $n(){let e=dn[yn++];let t=dn[yn++];let r=(e<<8)+t;let n=r>>10&31;let i=r&1023;let u;if(n==0)u=Math.exp(i,-24);else if(n!=31)u=Math.exp(i+1024,n-25);else u=i==0?Infinity:NaN;return r&32768?-u:u}let zn=new Array(4096);function Vn(){let e=dn[yn++];if(e>=96&&e<120){e=e-96;if(An>=yn)return Dn.slice(yn-En,(yn+=e)-En);else if(!(An==0&&vn<180))return Tn(e)}else{yn--;return In()}let t=(e<<5^(e>1?Cn.getUint16(yn):e>0?dn[yn]:0))&4095;let r=zn[t];let n=yn;let i=yn+e-3;let u;let a=0;if(r&&r.bytes==e){while(n<i){u=Cn.getUint32(n);if(u!=r[a++]){n=1879048192;break}n+=4}i+=3;while(n<i){u=dn[n++];if(u!=r[a++]){n=1879048192;break}}if(n===i){yn=n;return r.string}i-=3;n=yn}r=[];zn[t]=r;r.bytes=e;while(n<i){u=Cn.getUint32(n);r.push(u);n+=4}i+=3;while(n<i){u=dn[n++];r.push(u)}let o=e<16?Mn(e):qn(e);if(o!=null)return r.string=o;return r.string=Tn(e)}class Gn{constructor(e){this.value=e}}let Jn=typeof window=="object"?window:er;xn[0]=e=>{return new Date(e)};xn[1]=e=>{return new Date(e*1e3)};xn[2]=e=>{return new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};xn[3]=e=>{return BigInt(-1)-new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};const Hn=()=>{let r=In();let n=r[0];let e=r[1];wn[e&255]=n;n.read=Nn(n);let i={};for(let t=2,e=r.length;t<e;t++){let e=n[t-2];i[e]=r[t]}return i};Hn.handlesRead=true;xn[mn]=Hn;xn[27]=e=>{return(Jn[e[0]]||Error)(e[1],e[2])};xn[40009]=e=>{if(!Fn)Fn=new Map;let t=dn[yn];let r;if(t>>5==4)r=[];else r={};let n={target:r};Fn.set(e,n);let i=In();if(n.used)return Object.assign(r,i);n.target=i;return i};xn[40010]=e=>{let t=Fn.get(e);t.used=true;return t.target};xn[258]=e=>new Set(e);(xn[259]=e=>{if(bn.mapsAsObjects){bn.mapsAsObjects=false;On=true}return e()}).handlesRead=true;const Wn=["Uint8","Uint8Clamped","Uint16","Uint32","BigUint64","Int8","Int16","Int32","BigInt64","Float32","Float64"].map(e=>e+"Array");const Zn=[64,68,69,70,71,72,77,78,79,81,82];for(let e=0;e<Wn.length;e++){Qn(Wn[e],Zn[e])}function Qn(t,e){xn[e]=e=>{if(!t)throw new Error("Could not find typed array for code "+typeCode);return new Jn[t](Uint8Array.prototype.slice.call(e,0).buffer)}}function Kn(e){let t=vn;let r=yn;let n=En;let i=An;let u=Dn;let a=Fn;let o=new Uint8Array(dn.slice(0,vn));let s=wn;let c=bn;let f=Sn;let l=e();vn=t;yn=r;En=n;An=i;Dn=u;Fn=a;dn=o;Sn=f;wn=s;bn=c;Cn=new DataView(dn.buffer,dn.byteOffset,dn.byteLength);return l}function Xn(){dn=null;Fn=null;wn=null}function ei(e){xn[e.tag]=e.decode}let ti=new Array(147);for(let e=0;e<256;e++){ti[e]=+("1e"+Math.floor(45.15-e*.30103))}let ri=new jn({useRecords:false});ri.decode;ri.decodeMultiple;let ni;try{ni=new TextEncoder}catch(e){}let ii,ui;const ai=typeof yr!=="undefined";const oi=ai?yr.allocUnsafeSlow:Uint8Array;const si=ai?yr:Uint8Array;const ci=105;const fi=256;const li=ai?4294967296:2144337920;let hi;let pi;let _i=0;let di;const vi=Symbol("record-id");class yi extends jn{constructor(e){super(e);this.offset=0;let i;let o;let s;let c;let r;let n=0;let t=si.prototype.utf8Write?function(e,t,r){return hi.utf8Write(e,t,r)}:ni&&ni.encodeInto?function(e,t){return ni.encodeInto(e,hi.subarray(t)).written}:false;let u=this;let f=64;let a=e&&e.sequential;if(a){f=0;this.structures=[]}let l=[];let h=0;let p=0;if(this.structures&&this.structures.length>f){throw new Error("Too many shared structures")}this.encode=function(e){if(!hi){hi=new oi(8192);pi=new DataView(hi.buffer,0,8192);_i=0}di=hi.length-10;if(di-_i<2048){hi=new oi(hi.length);pi=new DataView(hi.buffer,0,hi.length);di=hi.length-10;_i=0}i=_i;r=u.structuredClone?new Map:null;o=u.structures;if(o){if(o.uninitialized)u.structures=o=u.getStructures();let t=o.length;if(t>f&&!a)t=f;if(!o.transitions){o.transitions=Object.create(null);for(let e=0;e<t;e++){let r=o[e];if(!r)continue;let n,i=o.transitions;for(let t=0,e=r.length;t<e;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null)}i=n}i[vi]=e}n=o.length}if(!a)o.nextId=t}if(s)s=false;c=o||[];try{_(e);u.offset=_i;if(r&&r.idsToInsert){_i+=r.idsToInsert.length*8;if(_i>di)v(_i);u.offset=_i;let e=wi(hi.subarray(i,_i),r.idsToInsert);r=null;return e}return hi.subarray(i,_i)}finally{if(o){if(p<10)p++;if(h>1e4){o.transitions=null;p=0;h=0;if(l.length>0)l=[]}else if(l.length>0&&!a){for(let e=0,t=l.length;e<t;e++){l[e][vi]=undefined}l=[]}if(s&&u.saveStructures){if(u.structures.length>f){u.structures=u.structures.slice(0,f)}if(u.saveStructures(u.structures,n)===false){u.structures=u.getStructures()||[];return u.encode(e)}n=u.structures.length}}}};const _=a=>{if(_i>di)hi=v(_i);var e=typeof a;var o;if(e==="string"){let i=a.length;let u;if(i<32){u=1}else if(i<256){u=2}else if(i<65536){u=3}else{u=5}let e=i*3;if(_i+e>di)hi=v(_i+e);if(i<64||!t){let e,t,r,n=_i+u;for(e=0;e<i;e++){t=a.charCodeAt(e);if(t<128){hi[n++]=t}else if(t<2048){hi[n++]=t>>6|192;hi[n++]=t&63|128}else if((t&64512)===55296&&((r=a.charCodeAt(e+1))&64512)===56320){t=65536+((t&1023)<<10)+(r&1023);e++;hi[n++]=t>>18|240;hi[n++]=t>>12&63|128;hi[n++]=t>>6&63|128;hi[n++]=t&63|128}else{hi[n++]=t>>12|224;hi[n++]=t>>6&63|128;hi[n++]=t&63|128}}o=n-_i-u}else{o=t(a,_i+u,e)}if(o<24){hi[_i++]=96|o}else if(o<256){if(u<2){hi.copyWithin(_i+2,_i+1,_i+1+o)}hi[_i++]=120;hi[_i++]=o}else if(o<65536){if(u<3){hi.copyWithin(_i+3,_i+2,_i+2+o)}hi[_i++]=121;hi[_i++]=o>>8;hi[_i++]=o&255}else{if(u<5){hi.copyWithin(_i+5,_i+3,_i+3+o)}hi[_i++]=122;pi.setUint32(_i,o);_i+=4}_i+=o}else if(e==="number"){if(a>>>0===a){if(a<24){hi[_i++]=a}else if(a<256){hi[_i++]=24;hi[_i++]=a}else if(a<65536){hi[_i++]=25;hi[_i++]=a>>8;hi[_i++]=a&255}else{hi[_i++]=26;pi.setUint32(_i,a);_i+=4}}else if(a>>0===a){if(a>=-24){hi[_i++]=31-a}else if(a>=-256){hi[_i++]=56;hi[_i++]=~a}else if(a>=-65536){hi[_i++]=57;pi.setUint16(_i,~a);_i+=2}else{hi[_i++]=58;pi.setUint32(_i,~a);_i+=4}}else{let t;if((t=this.useFloat32)>0&&a<4294967296&&a>=-2147483648){hi[_i++]=250;pi.setFloat32(_i,a);let e;if(t<4||(e=a*ti[(hi[_i]&127)<<1|hi[_i+1]>>7])>>0===e){_i+=4;return}else _i--}hi[_i++]=251;pi.setFloat64(_i,a);_i+=8}}else if(e==="object"){if(!a)hi[_i++]=246;else{if(r){let t=r.get(a);if(t){if(!t.id){let e=r.idsToInsert||(r.idsToInsert=[]);t.id=e.push(t)}hi[_i++]=217;hi[_i++]=40010>>8;hi[_i++]=40010&255;hi[_i++]=26;pi.setUint32(_i,t.id);_i+=4;return}else r.set(a,{offset:_i-i})}let e=a.constructor;if(e===Object){d(a,true)}else if(e===Array){o=a.length;if(o<24){hi[_i++]=128|o}else{mi(o)}for(let e=0;e<o;e++){_(a[e])}}else if(e===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==false:this.useTag259ForMaps){hi[_i++]=217;hi[_i++]=1;hi[_i++]=3}o=a.size;if(o<24){hi[_i++]=160|o}else if(o<256){hi[_i++]=184;hi[_i++]=o}else if(o<65536){hi[_i++]=185;hi[_i++]=o>>8;hi[_i++]=o&255}else{hi[_i++]=186;pi.setUint32(_i,o);_i+=4}for(let[e,t]of a){_(e);_(t)}}else{for(let r=0,e=ii.length;r<e;r++){let e=ui[r];if(a instanceof e){let e=ii[r];let t=e.tag;if(t<24){hi[_i++]=192|t}else if(t<256){hi[_i++]=216;hi[_i++]=t}else if(t<65536){hi[_i++]=217;hi[_i++]=t>>8;hi[_i++]=t&255}else if(t>-1){hi[_i++]=218;pi.setUint32(_i,t);_i+=4}e.encode.call(this,a,_,v);return}}if(a[Symbol.iterator]){hi[_i++]=159;for(let e of a){_(e)}hi[_i++]=255;return}d(a,!a.hasOwnProperty)}}}else if(e==="boolean"){hi[_i++]=a?245:244}else if(e==="bigint"){if(a<BigInt(1)<<BigInt(64)&&a>=0){hi[_i++]=27;pi.setBigUint64(_i,a)}else if(a>-(BigInt(1)<<BigInt(64))&&a<0){hi[_i++]=59;pi.setBigUint64(_i,-a-BigInt(1))}else{if(this.largeBigIntToFloat){hi[_i++]=251;pi.setFloat64(_i,Number(a))}else{throw new RangeError(a+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64")}}_i+=8}else if(e==="undefined"){hi[_i++]=247}else{throw new Error("Unknown type "+e)}};const d=this.useRecords===false?this.variableMapSize?t=>{let r=Object.keys(t);let n=r.length;if(n<24){hi[_i++]=160|n}else if(n<256){hi[_i++]=184;hi[_i++]=n}else if(n<65536){hi[_i++]=185;hi[_i++]=n>>8;hi[_i++]=n&255}else{hi[_i++]=186;pi.setUint32(_i,n);_i+=4}let i;for(let e=0;e<n;e++){_(i=r[e]);_(t[i])}}:(t,r)=>{hi[_i++]=185;let e=_i-i;_i+=2;let n=0;for(let e in t){if(r||t.hasOwnProperty(e)){_(e);_(t[e]);n++}}hi[e+++i]=n>>8;hi[e+i]=n&255}:t=>{let r=Object.keys(t);let n,i=c.transitions||(c.transitions=Object.create(null));let u=0;let a=r.length;for(let t=0;t<a;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null);u++}i=n}let e=i[vi];if(e!==undefined){hi[_i++]=217;hi[_i++]=ci;hi[_i++]=e}else{e=c.nextId++;if(!e){e=0;c.nextId=1}if(e>=fi){c.nextId=(e=f)+1}i[vi]=e;c[e]=r;if(o&&o.length<=f){hi[_i++]=217;hi[_i++]=ci;hi[_i++]=e;s=true}else{hi[_i++]=216;hi[_i++]=ci;if(u)h+=p*u;if(l.length>=fi-f)l.shift()[vi]=undefined;l.push(i);if(a<22)hi[_i++]=130+a;else mi(a+2);_(r);hi[_i++]=25;hi[_i++]=ci;hi[_i++]=e;for(let e=0;e<a;e++)_(t[r[e]]);return}}if(a<24){hi[_i++]=128|a}else{mi(a)}for(let e=0;e<a;e++)_(t[r[e]])};const v=e=>{let t;if(e>16777216){if(e-i>li)throw new Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(li,Math.round(Math.max((e-i)*(e>67108864?1.25:2),16777216)/4096)*4096)}else t=(Math.max(e-i<<2,hi.length-1)>>12)+1<<12;let r=new oi(t);pi=new DataView(r.buffer,0,t);if(hi.copy)hi.copy(r,0,i,e);else r.set(hi.slice(i,e));_i-=i;i=0;di=r.length-10;return hi=r}}useBuffer(e){hi=e;pi=new DataView(hi.buffer,hi.byteOffset,hi.byteLength);_i=0}}function mi(e){if(e<256){hi[_i++]=152;hi[_i++]=e}else if(e<65536){hi[_i++]=153;hi[_i++]=e>>8;hi[_i++]=e&255}else{hi[_i++]=154;pi.setUint32(_i,e);_i+=4}}ui=[Date,Set,Error,RegExp,ArrayBuffer,si,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,BigUint64Array,Int8Array,Int16Array,Int32Array,BigInt64Array,Float32Array,Float64Array];ii=[{tag:1,encode(e,t){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){hi[_i++]=26;pi.setUint32(_i,r);_i+=4}else{hi[_i++]=251;pi.setFloat64(_i,r);_i+=8}}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{encode(e,t,r){bi(e,r)}},{encode(e,t,r){bi(e,r)}},gi(64),gi(68),gi(69),gi(70),gi(71),gi(72),gi(77),gi(78),gi(79),gi(81),gi(82)];function gi(e){return{tag:e,encode:function e(t,r){let n=t.byteLength;let i=t.byteOffset||0;let u=t.buffer||t;r(ai?yr.from(u,i,n):new Uint8Array(u,i,n))}}}function bi(e,t){let r=e.byteLength;if(r<24){hi[_i++]=64+r}else if(r<256){hi[_i++]=88;hi[_i++]=r}else if(r<65536){hi[_i++]=89;hi[_i++]=r>>8;hi[_i++]=r&255}else{hi[_i++]=90;pi.setUint32(_i,r);_i+=4}if(_i+r>=hi.length){t(_i+r)}hi.set(e,_i);_i+=r}function wi(n,e){let i;let u=e.length*8;let a=n.length-u;e.sort((e,t)=>e.offset>t.offset?1:-1);while(i=e.pop()){let e=i.offset;let t=i.id;n.copyWithin(e+u,e,a);u-=8;let r=e+u;n[r++]=217;n[r++]=40009>>8;n[r++]=40009&255;n[r++]=26;n[r++]=t>>24;n[r++]=t>>16&255;n[r++]=t>>8&255;n[r++]=t&255;a=e}return n}function Di(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");ui.unshift(e.Class);ii.unshift(e)}ei(e)}let Ei=new yi({useRecords:false});Ei.encode;var Ai={};
/**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   */Object.defineProperty(Ai,"__esModule",{value:true});const Fi=8,xi=6,Ci=3,Oi=(1<<xi)+(Ci-1),ki=(1<<16-xi)-1,Si=256;function ji(e,t){var r=0,n=0,i=0,u=0,a=0,o=1<<Fi-1,s=0,c=0,f=0,l=new Int32Array(Si),h=0;for(h=0;h<Si;h++){l[h]=-858993460}r=e.length;while(n<r){if((o<<=1)==1<<Fi){o=1;a=i;t[i++]=0}if(n>r-Oi){t[i++]=e[n++];continue}f=(e[n]+13^e[n+1]-13^e[n+2])&Si-1;c=n-l[f]&ki;l[f]=n;u=n-c;if(u>=0&&u!=n&&e[n]==e[u]&&e[n+1]==e[u+1]&&e[n+2]==e[u+2]){t[a]|=o;for(s=Ci;s<Oi;s++)if(e[n+s]!=e[u+s])break;t[i++]=s-Ci<<Fi-xi|c>>Fi;t[i++]=c;n+=s}else{t[i++]=e[n++]}}console.assert(e.length>=n);return i}function Bi(e,t,r){t=t|0;var n=0,i=0,u=0,a=0,o=1<<(Fi-1|0),s=0,c=0;while(n<t){if((o<<=1)===1<<Fi){o=1;a=e[n];n=n+1|0}if(a&o){s=(e[n]>>(Fi-xi|0))+Ci|0;c=(e[n]<<Fi|e[n+1|0])&ki;n=n+2|0;u=i-c|0;{while(s>4){r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;s=s-4|0}while(s>0){r[i]=r[u];i=i+1|0;u=u+1|0;s=s-1|0}}}else{r[i]=e[n];i=i+1|0;n=n+1|0}}return i}function Ii(){const e=new TextEncoder("utf-8");return e.encode(Pi)}const Pi="@lzjb";const Ni=Ii();function Ri(...e){if(e.length>1){const r=e.reduce((e,t)=>e+t.length,0);const n=new Uint8Array(r);let t=0;e.forEach(e=>{n.set(e,t);t+=e.length});return n}else if(e.length){return e[0]}}function Ti(t){const e=Math.ceil(Math.log2(t)/8);const r=new Uint8Array(e);for(let e=0;e<r.length;e++){const n=t&255;r[e]=n;t=(t-n)/256}return r}function Ui(t){let r=0;for(let e=t.length-1;e>=0;e--){r=r*256+t[e]}return r}function Li(e,{magic:t=true}={}){const r=new Uint8Array(Math.max(e.length*1.5|0,16*1024));const n=ji(e,r);const i=Ti(e.length);const u=[Uint8Array.of(i.length),i,r.slice(0,n)];if(t){u.unshift(Ni)}return Ri(...u)}function qi(t,{magic:e=true}={}){if(e){const e=new TextDecoder("utf-8");const s=e.decode(t.slice(0,Ni.length));if(s!==Pi){throw new Error("Invalid magic value")}}const r=e?Ni.length:0;const n=t[r];const i=r+1;const u=r+n+1;const a=Ui(t.slice(i,u));t=t.slice(u);const o=new Uint8Array(a);Bi(t,t.length,o);return o}Ai.pack=Li;var Mi=Ai.unpack=qi;var Yi={pair:function e(t){var r=b(t,2),n=r[0],i=r[1];return mo(n,i)},number:function e(t){if(to.isString(t)){return N([t,10])}return N(t)},regex:function e(t){var r=b(t,2),n=r[0],i=r[1];return new RegExp(n,i)},nil:function e(){return yo},symbol:function e(t){if(to.isString(t)){return so(t)}else if(Array.isArray(t)){return so(Symbol["for"](t[0]))}},string:to,character:Qa};var $i=Object.keys(Yi);var zi={};for(var Vi=0,Gi=Object.entries($i);Vi<Gi.length;Vi++){var Ji=b(Gi[Vi],2),Hi=Ji[0],Wi=Ji[1];zi[Wi]=+Hi}function Zi(e){return $i[e]}function Qi(e){return JSON.parse(e,function(e,t){if(t&&l(t)==="object"){if(!Ro(t["@"])){var r=Zi(t["@"]);if(Yi[r]){return Yi[r](t["#"])}}}return t})}var Ki=function(){var e={pair:mo,symbol:so,number:N,string:to,character:Qa,nil:yo.constructor,regex:RegExp};function t(e,t){return{deserialize:t,Class:e}}var r=new yi;var u={};for(var n=0,i=Object.entries(Yi);n<i.length;n++){var a=b(i[n],2),o=a[0],s=a[1];var c=e[o];u[o]=t(c,s)}var f=43311;Object.keys(u).forEach(function(e){var t=u[e];if(typeof t==="function"){var r=t;Di({Class:r,tag:f,encode:function e(t,r){r(t.serialize())},decode:function e(t){return new r(t)}})}else{var n=t.deserialize,i=t.Class;Di({Class:i,tag:f,encode:function e(t,r){if(t instanceof RegExp){return r([t.source,t.flags])}r(t.serialize())},decode:function e(t){return n(t)}})}f++});return r}();var Xi=7;function eu(e){var t=new TextDecoder("utf-8");var r=t.decode(e.slice(0,Xi));var n=r.substring(0,4);if(["CBOR","CBRZ"].includes(n)){var i=r.match(/^(....).*([0-9]+)$/);if(i){return{type:i[1],version:Number(i[2])}}}return{type:"unknown"}}function tu(e){var t=eu(e),r=t.type,n=t.version;if(r==="CBOR"&&n===1){return Ki.decode(e.slice(Xi))}else if(r==="CBRZ"&&n===1){var i=Mi(e.slice(Xi),{magic:false});return Ki.decode(i)}else{throw new Error("Invalid file format ".concat(r))}}var ru=function(){function t(e){c(this,t);this.__value__=e}h(t,[{key:"invoke",value:function e(){if(this.__value__===null){throw new Error("Continuations are not implemented yet")}}},{key:"toString",value:function e(){return"#<Continuation>"}}]);return t}();function nu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}r.push.apply(r,n)}return r}function iu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){nu(Object(r),true).forEach(function(e){U(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{nu(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}var uu,au,ou;function su(e,t){var r=lu(e,"**internal-env**");return r.get(t)}function cu(e,s){return new qt(e,function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;var i=this;if(r){r=this}var u=e;var a=[];while(u instanceof mo){a.push(wt(u.car,{env:i,dynamic_scope:r,error:n}));u=u.cdr}var o=a.filter(ie).length;if(o){return fe(a).then(s.bind(this))}else{return s.call(this,a)}})}function fu(e,t){if(t instanceof RegExp){return function(e){return String(e).match(t)}}else if(is_function(t)){return t}throw new Error("Invalid matcher")}function lu(e,t){var r=e.get("**interaction-environment**");return r.get(t)}var hu=new Ct({stdout:new ju(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new ju(function(){var e;(e=console).error.apply(e,arguments)}),stdin:ku(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined,"internal");var pu=new Ct({eof:Cu,undefined:undefined,"peek-char":je("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=su(this,"stdin")}So("peek-char",e,"input-port");return e.peek_char()},"(peek-char port)\n\n        Function get character from string port or EOF object if no more\n        data in string port."),"read-line":je("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=su(this,"stdin")}So("read-line",e,"input-port");return e.read_line()},"(read-char port)\n\n        Function read next character from input port."),"read-char":je("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=su(this,"stdin")}So("read-char",e,"input-port");return e.read_char()},"(read-char port)\n\n        Function read next character from input port."),read:je("read",function(){var e=k(S.mark(function e(){var r,n,i,u,a,o,s,c,f,l=arguments;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=l.length>0&&l[0]!==undefined?l[0]:null;if(!to.isString(r)){t.next=35;break}n=true;i=false;t.prev=4;a=te(Va(r,this));case 6:t.next=8;return a.next();case 8:o=t.sent;n=o.done;t.next=12;return o.value;case 12:s=t.sent;if(n){t.next=19;break}c=s;return t.abrupt("return",c);case 16:n=true;t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21;t.t0=t["catch"](4);i=true;u=t.t0;case 25:t.prev=25;t.prev=26;if(!(!n&&a["return"]!=null)){t.next=30;break}t.next=30;return a["return"]();case 30:t.prev=30;if(!i){t.next=33;break}throw u;case 33:return t.finish(30);case 34:return t.finish(25);case 35:if(r===null){f=su(this,"stdin")}else{f=r}So("read",f,"input-port");return t.abrupt("return",f.read.call(this));case 38:case"end":return t.stop()}}},e,this,[[4,21,25,35],[26,,30,34]])}));function t(){return e.apply(this,arguments)}return t}(),"(read [string])\n\n        Function if used with string will parse the string and return\n        list structure of LIPS code. If called without an argument it\n        will read string from standard input (using browser prompt or\n        user defined way) and call itself with that string (parse is)\n        function can be used together with eval to evaluate code from\n        string"),pprint:je("pprint",function e(t){if(t instanceof mo){t=new Xe(t.toString(true))["break"]().format();pu.get("display").call(pu,t)}else{pu.get("write").call(pu,t)}pu.get("newline").call(pu)},"(pprint expression)\n\n        Pretty print list expression, if called with non-pair it just call\n        print function with passed argument."),print:je("print",function e(){var t=pu.get("display");var r=pu.get("newline");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}i.forEach(function(e){t.call(pu,e);r.call(pu)})},"(print . args)\n\n            Function convert each argument to string and print the result to\n            standard output (by default it's console but it can be defined\n            it user code), the function call newline after printing each arg."),format:je("format",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}Co("format",t,"string");var u=/(~[as%~])/g;var a=t.match(/(~[as])/g);if(a&&a.length>n.length){throw new Error("Not enough arguments")}var o=0;var s=pu.get("repr");t=t.replace(u,function(e){var t=e[1];if(t==="~"){return"~"}else if(t==="%"){return"\n"}else{var r=n[o++];if(t==="a"){return s(r)}else{return s(r,true)}}});a=t.match(/~([\S])/);if(a){throw new Error("format: Unrecognized escape seqence ".concat(a[1]))}return t},"(format string n1 n2 ...)\n\n        Function accepts string template and replacing any escape sequences\n        by arguments:\n\n        * ~a value as if printed with display\n        * ~s value as if printed with write\n        * ~% newline character\n        * ~~ literal tilde '~' is inserted\n\n        if there missing arguments or other escape character it throw exception."),display:je("display",function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r===null){r=su(this,"stdout")}else{Co("display",r,"output-port")}var n=pu.get("repr")(t);r.write.call(pu,n)},"(display arg [port])\n\n        Function send string to standard output or provied port."),"display-error":je("display-error",function e(){var t=su(this,"stderr");var r=pu.get("repr");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}var a=i.map(r).join(" ");t.write.call(pu,a);pu.get("newline")(t)},"(display-error . args)\n\n        Display error message."),"%same-functions":je("%same-functions",function(e,t){if(!is_function(e)){return false}if(!is_function(t)){return false}return De(e)===De(t)},"(%same-functions a b)\n\n        Helper function that check if two bound functions are the same"),help:je(new qt("help",function(e,t){var r=t.dynamic_scope,n=t.error;var i;if(e.car instanceof so){i=e.car}else if(e.car instanceof mo&&e.car.car instanceof so){i=e.car.car}else{var u=this;if(r){r=this}var a=wt(e.car,{env:u,error:n,dynamic_scope:r});if(a&&a.__doc__){return a.__doc__}return}var o;var s=this.get(i);o=s&&s.__doc__;if(o){return o}var c=this.ref(i);if(c){o=c.doc(i);if(o){return o}}}),"(help object)\n\n         Macro returns documentation for function or macro. You can save the function\n         or macro in variable and use it in context. But help for variable require\n         to pass the symbol itself."),cons:je("cons",function e(t,r){return new mo(t,r)},"(cons left right)\n\n        Function return new Pair out of two arguments."),car:je("car",function e(t){Co("car",t,"pair");return t.car},"(car pair)\n\n        Function returns car (head) of the list/pair."),cdr:je("cdr",function e(t){Co("cdr",t,"pair");return t.cdr},"(cdr pair)\n\n        Function returns cdr (tail) of the list/pair."),"set!":je(new qt("set!",function(e){var u=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;if(r){r=this}var i=this;var a;var o=wt(e.cdr.car,{env:this,dynamic_scope:r,error:n});o=le(o);function s(t,r,n){if(ie(t)){return t.then(function(e){return s(t,e,n)})}if(ie(r)){return r.then(function(e){return s(t,e,n)})}if(ie(n)){return n.then(function(e){return s(t,r,e)})}i.get("set-obj!").call(i,t,r,n);return n}if(e.car instanceof mo&&so.is(e.car.car,".")){var c=e.car.cdr.car;var f=e.car.cdr.cdr.car;var l=wt(c,{env:this,dynamic_scope:r,error:n});var h=wt(f,{env:this,dynamic_scope:r,error:n});return s(l,h,o)}if(!(e.car instanceof so)){throw new Error("set! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var p=e.car.valueOf();a=this.ref(e.car.__name__);return oe(o,function(e){if(!a){var t=p.split(".");if(t.length>1){var r=t.pop();var n=t.join(".");var i=u.get(n,{throwError:false});if(i){s(i,r,e);return}}throw new Error("Unbound variable `"+p+"'")}a.set(p,e)})}),"(set! name value)\n\n         Macro that can be used to set the value of the variable (mutate)\n         it search the scope chain until it finds first non emtpy slot and set it."),"unset!":je(new qt("set!",function(e){if(!(e.car instanceof so)){throw new Error("unset! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var t=e.car;var r=this.ref(t);if(r){delete r.__env__[t.__name__]}}),"(unset! name)\n\n         Function delete specified name from environment."),"set-car!":je("set-car!",function(e,t){Co("set-car!",e,"pair");e.car=t},"(set-car! obj value)\n\n        Function that set car (head) of the list/pair to specified value.\n        It can destroy the list. Old value is lost."),"set-cdr!":je("set-cdr!",function(e,t){Co("set-cdr!",e,"pair");e.cdr=t},"(set-cdr! obj value)\n\n        Function that set cdr (tail) of the list/pair to specified value.\n        It can destroy the list. Old value is lost."),"empty?":je("empty?",function(e){return typeof e==="undefined"||e===yo},"(empty? object)\n\n        Function return true if value is undfined empty list."),gensym:je("gensym",lo,"(gensym)\n\n         Function generate unique symbol, to use with macros as meta name."),load:je("load",function e(t,r){Co("load",t,"string");var n=this;if(n.__name__==="__frame__"){n=n.__parent__}if(!(r instanceof Ct)){if(n===pu){r=n}else{r=this.get("**interaction-environment**")}}var i="**module-path**";var u=pu.get(i,{throwError:false});t=t.valueOf();if(!t.match(/.[^.]+$/)){t+=".scm"}var a=t.match(/\.xcb$/);function o(e){if(a){e=tu(e)}else{if(jo(e)==="buffer"){e=e.toString()}e=e.replace(/^#!.*/,"");if(e.match(/^\{/)){e=Qi(e)}}return gt(e,r)}function s(e){return j.fetch(e).then(function(e){return a?e.arrayBuffer():e.text()}).then(function(e){if(a){e=new Uint8Array(e)}return e})}if(gu()){return new Promise(function(r,n){var e=ou("path");if(u){u=u.valueOf();t=e.join(u,t)}pu.set(i,e.dirname(t));ou("fs").readFile(t,function(e,t){if(e){n(e);pu.set(i,u)}else{try{o(t).then(function(){r();pu.set(i,u)})["catch"](n)}catch(e){n(e)}}})})}if(u){u=u.valueOf();t=u+"/"+t.replace(/^\.?\/?/,"")}return s(t).then(function(e){pu.set(i,t.replace(/\/[^/]*$/,""));return o(e)}).then(function(){})["finally"](function(){pu.set(i,u)})},"(load filename)\n        (load filename environment)\n\n        Function fetch the file and evaluate its content as LIPS code,\n        If second argument is provided and it's environment the evaluation\n        will happen in that environment."),do:je(new qt("do",function(){var r=k(S.mark(function e(r,n){var i,u,a,o,s,c,f,l,h,p,_;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:i=n.dynamic_scope,u=n.error;a=this;if(i){i=a}o=a.inherit("do");s=r.car;c=r.cdr.car;f=r.cdr.cdr;if(f!==yo){f=new mo(so("begin"),f)}l={env:a,dynamic_scope:i,error:u};h=s;case 10:if(!(h!==yo)){t.next=21;break}p=h.car;t.t0=o;t.t1=p.car;t.next=16;return wt(p.cdr.car,l);case 16:t.t2=t.sent;t.t0.set.call(t.t0,t.t1,t.t2);h=h.cdr;t.next=10;break;case 21:l={env:o,dynamic_scope:i,error:u};_=S.mark(function e(){var r,n,i,u,a;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(f!==yo)){t.next=3;break}t.next=3;return wt(f,l);case 3:r=s;n={};case 5:if(!(r!==yo)){t.next=15;break}i=r.car;if(!(i.cdr.cdr!==yo)){t.next=12;break}t.next=10;return wt(i.cdr.cdr.car,l);case 10:u=t.sent;n[i.car.valueOf()]=u;case 12:r=r.cdr;t.next=5;break;case 15:a=Object.getOwnPropertySymbols(n);Object.keys(n).concat(a).forEach(function(e){o.set(e,n[e])});case 17:case"end":return t.stop()}}},e)});case 23:t.next=25;return wt(c.car,l);case 25:t.t3=t.sent;if(!(t.t3===false)){t.next=30;break}return t.delegateYield(_(),"t4",28);case 28:t.next=23;break;case 30:if(!(c.cdr!==yo)){t.next=34;break}t.next=33;return wt(c.cdr.car,l);case 33:return t.abrupt("return",t.sent);case 34:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()),"(do ((<var> <init> <next>)) (test expression) . body)\n\n         Iteration macro that evaluate the expression body in scope of the variables.\n         On Eeach loop it increase the variables according to next expression and run\n         test to check if the loop should continue. If test is signle call the macro\n         will not return anything. If the test is pair of expression and value the\n         macro will return that value after finish."),if:je(new qt("if",function(r,e){var n=e.dynamic_scope,i=e.error;if(n){n=this}var u=this;var t=function e(t){if(t===false){return wt(r.cdr.cdr.car,{env:u,dynamic_scope:n,error:i})}else{return wt(r.cdr.car,{env:u,dynamic_scope:n,error:i})}};if(r===yo){throw new Error("too few expressions for `if`")}var a=wt(r.car,{env:u,dynamic_scope:n,error:i});return oe(a,t)}),"(if cond true-expr false-expr)\n\n         Macro evaluate condition expression and if the value is true, it\n         evaluate and return true expression if not it evaluate and return\n         false expression"),"let-env":new qt("let-env",function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=e.dynamic_scope,n=e.error;Co("let-env",t,"pair");var i=wt(t.car,{env:this,dynamic_scope:r,error:n});return oe(i,function(e){Co("let-env",e,"environment");return wt(mo(so("begin"),t.cdr),{env:e,dynamic_scope:r,error:n})})},"(let-env env . body)\n\n        Special macro that evaluate body in context of given environment\n        object."),letrec:je(Qt(Symbol["for"]("letrec")),"(letrec ((a value-a) (b value-b)) body)\n\n         Macro that creates new environment, then evaluate and assign values to\n         names and then evaluate the body in context of that environment.\n         Values are evaluated sequentialy and next value can access to\n         previous values/names."),"letrec*":je(Qt(Symbol["for"]("letrec")),"(letrec* ((a value-a) (b value-b)) body)\n\n         Same as letrec but the order of execution of the binding is guaranteed,\n         so use can use recursive code as well as reference previous binding.\n         In LIPS both letrec and letrec* behave the same."),"let*":je(Qt(Symbol["for"]("let*")),"(let* ((a value-a) (b value-b)) body)\n\n         Macro similar to `let` but next argument get environment\n         from previous let variable, so they you can define one variable,\n         and use in next argument."),let:je(Qt(Symbol["for"]("let")),"(let ((a value-a) (b value-b)) body)\n\n         Macro that creates new environment, then evaluate and assign values to\n         names and then evaluate the body in context of that environment.\n         Values are evaluated sequentialy but you can't access\n         previous values/names when next are evaluated. You can only get them\n         from body of let expression."),"begin*":je(cu("begin*",function(e){return e.pop()}),"(begin* . expr)\n\n         This macro is parallel version of begin. It evaluate each expression and\n         if it's a promise it will evaluate it in parallel and return value\n         of last expression."),begin:je(new qt("begin",function(e,t){var n=Object.assign({},t);var i=pu.get("list->array")(e);if(n.dynamic_scope){n.dynamic_scope=this}n.env=this;var u;return function t(){if(i.length){var e=i.shift();var r=wt(e,n);return oe(r,function(e){u=e;return t()})}else{return u}}()}),"(begin . args)\n\n         Macro runs list of expression and return valuate of the list one.\n         It can be used in place where you can only have single exression,\n         like if expression."),ignore:new qt("ignore",function(e,t){var r=t.dynamic_scope,n=t.error;var i={env:this,error:n};if(r){i.dynamic_scope=this}wt(new mo(new so("begin"),e),i)},"(ignore expression)\n\n        Macro that will evaluate expression and swallow any promises that may\n        be created. It wil run and ignore any value that may be returned by\n        expression. The code should have side effects and/or when it's promise\n        it should resolve to undefined."),"call/cc":je(qt.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=iu({env:this},t);return oe(wt(e.car,r),function(e){if(is_function(e)){return e(new ru(null))}})}),"(call/cc proc)\n\n         Not Yet Implemented."),define:je(qt.defmacro("define",function(r,e){var n=this;if(r.car instanceof mo&&r.car.car instanceof so){var t=new mo(new so("define"),new mo(r.car.car,new mo(new mo(new so("lambda"),new mo(r.car.cdr,r.cdr)))));return t}else if(e.macro_expand){return}if(e.dynamic_scope){e.dynamic_scope=this}e.env=n;var i=r.cdr.car;var u;if(i instanceof mo){i=wt(i,e);u=true}else if(i instanceof so){i=n.get(i)}Co("define",r.car,"symbol");return oe(i,function(e){if(n.__name__===$t.__merge_env__){n=n.__parent__}if(u&&(is_function(e)&&Vo(e)||e instanceof $t)){e.__name__=r.car.valueOf();if(e.__name__ instanceof to){e.__name__=e.__name__.valueOf()}}var t;if(r.cdr.cdr instanceof mo&&to.isString(r.cdr.cdr.car)){t=r.cdr.cdr.car.valueOf()}n.set(r.car,e,t,true)})}),'(define name expression)\n         (define name expression "doc string")\n         (define (function-name . args) body)\n\n         Macro for defining values. It can be used to define variables,\n         or function. If first argument is list it will create function\n         with name beeing first element of the list. The macro evalute\n         code `(define function (lambda args body))`'),"set-obj!":je("set-obj!",function(e,t,r){var n=l(e);if(Bo(e)||n!=="object"&&n!=="function"){var i=Oo("set-obj!",jo(e),["object","function"]);throw new Error(i)}Co("set-obj!",t,["string","symbol","number"]);e=De(e);t=t.valueOf();if(arguments.length===2){delete e[t]}else if(Ko(e)&&is_function(r)){e[t]=De(r);e[t][Ao]=true}else if(is_function(r)||Wo(r)||r===yo){e[t]=r}else{e[t]=r&&!Ko(r)?r.valueOf():r}},"(set-obj! obj key value)\n\n        Function set property of JavaScript object"),"null-environment":je("null-environment",function(){return pu.inherit("null")},"(null-environment)\n\n        Function return new base environment with std lib."),values:je("values",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return Ge(r)},"(values a1 a2 ...)\n\n            If called with more then one elment it will create special\n            Values object that can be used in call-with-values function"),"call-with-values":je("call-with-values",function(e,t){Co("call-with-values",e,"function",1);Co("call-with-values",t,"function",2);var r=e();if(r instanceof Ge){return t.apply(void 0,O(r.valueOf()))}return t(r)},"(call-with-values producer consumer)\n\n        Calls its producer argument with no values and a continuation that,\n        when passed some values, calls the consumer procedure with those\n        values as arguments."),"current-environment":je("current-environment",function(){if(this.__name__==="__frame__"){return this.__parent__}return this},"(current-environment)\n\n        Function return current environement."),"parent.frame":je("parent.frame",function(){return _u},"(parent.frame)\n\n        Return parent environment if called from inside function.\n        If no parent frame found it return nil."),eval:je("eval",function(e,t){var n=this;t=t||this.get("current-environment").call(this);return wt(e,{env:t,error:function e(t){var e=pu.get("display-error");e.call(n,t.message);if(t.code){var r=t.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}).join("\n");e.call(n,r)}}})},"(eval expr)\n        (eval expr environment)\n\n        Function evalute LIPS Scheme code."),lambda:new qt("lambda",function(l){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},h=e.dynamic_scope,p=e.error;var _=this;var d;if(l.cdr instanceof mo&&to.isString(l.cdr.car)&&l.cdr.cdr!==yo){d=l.cdr.car.valueOf()}function v(){var e;if(h){if(!(this instanceof Ct)){e=_}else{e=this}}else{e=_}e=e.inherit("lambda");var t=l.car;var r=0;var n;if(typeof this!=="undefined"&&!(this instanceof Ct)){if(this&&!this.__instance__){Object.defineProperty(this,"__instance__",{enumerable:false,get:function e(){return true},set:function e(){},configurable:false})}e.set("this",this)}for(var i=arguments.length,u=new Array(i),a=0;a<i;a++){u[a]=arguments[a]}if(this instanceof Ct){var o={throwError:false};e.set("arguments",this.get("arguments",o));e.set("parent.frame",this.get("parent.frame",o))}else{var s=u.slice();s.callee=v;s.env=e;e.set("arguments",s)}if(t instanceof so||t!==yo){while(true){if(t.car!==yo){if(t instanceof so){n=Xt(mo.fromArray(u.slice(r),false));e.__env__[t.__name__]=n;break}else{n=u[r];e.__env__[t.car.__name__]=n}}if(t.cdr===yo){break}r++;t=t.cdr}}if(h){h=e}var c=d?l.cdr.cdr:l.cdr;var f=new mo(new so("begin"),c);return wt(f,{env:e,dynamic_scope:h,error:p})}var t=l.car instanceof mo?l.car.length():null;v.__code__=new mo(new so("lambda"),l);v[Fo]=true;if(!(l.car instanceof mo)){return je(v,d,true)}return je(Ce(v,t),d,true)},"(lambda (a b) body)\n        (lambda args body)\n        (lambda (a b . rest) body)\n\n        Macro lambda create new anonymous function, if first element of the body\n        is string and there is more elements it will be documentation, that can\n        be read using (help fn)"),macroexpand:new qt("macroexpand",Yt()),"macroexpand-1":new qt("macroexpand-1",Yt(true)),"define-macro":Zt,"syntax-rules":Ht,quote:Xt,"unquote-splicing":je("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},"(unquote-splicing code)\n\n        Special form to be used in quasiquote macro, parser is processing special\n        characters ,@ and create call to this pseudo function. It can be used\n        to evalute expression inside and return the value without parenthesis.\n        the value will be joined to the output list structure."),unquote:je("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},"(unquote code)\n\n        Special form to be used in quasiquote macro, parser is processing special\n        characters , and create call to this pseudo function. It can be used\n        to evalute expression inside and return the value, the output is inserted\n        into list structure created by queasiquote."),quasiquote:Kt,clone:je("clone",function e(t){Co("clone",t,"pair");return t.clone()},"(clone list)\n\n            Function return clone of the list."),append:je("append",function e(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n=n.map(function(e){if(e instanceof mo){return e.clone()}return e});return(t=pu.get("append!")).call.apply(t,[this].concat(O(n)))},"(append item ...)\n\n        Function will create new list with eac argument appended to the end.\n        It will always return new list and not modify it's arguments."),"append!":je("append!",function(){var r=pu.get("list?");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.reduce(function(e,t){Co("append!",e,["nil","pair"]);if((t instanceof mo||t===yo)&&!r(t)){throw new Error("append!: Invalid argument, value is not a list")}if(Bo(t)){return e}if(e===yo){if(t===yo){return yo}return t}return e.append(t)},yo)},"(append! arg1 ...)\n\n        Destructive version of append, it modify the list in place. It return\n        new list where each argument is appened to the end. It may modify\n        lists added as arguments."),reverse:je("reverse",function e(t){Co("reverse",t,["array","pair","nil"]);if(t===yo){return yo}if(t instanceof mo){var r=pu.get("list->array")(t).reverse();return pu.get("array->list")(r)}else if(!(t instanceof Array)){throw new Error(Oo("reverse",jo(t),"array or pair"))}else{return t.reverse()}},"(reverse list)\n\n        Function will reverse the list or array. If value is not a list\n        or array it will throw exception."),nth:je("nth",function e(t,r){Co("nth",t,"number");Co("nth",r,["array","pair"]);if(r instanceof mo){var n=r;var i=0;while(i<t){if(!n.cdr||n.cdr===yo||n.haveCycles("cdr")){return yo}n=n.cdr;i++}return n.car}else if(r instanceof Array){return r[t]}else{throw new Error(Oo("nth",jo(r),"array or pair",2))}},"(nth index obj)\n\n        Function return nth element of the list or array. If used with different\n        value it will throw exception"),list:je("list",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return r.reverse().reduce(function(e,t){return new mo(t,e)},yo)},"(list . args)\n\n        Function create new list out of its arguments."),substring:je("substring",function e(t,r,n){Co("substring",t,"string");Co("substring",r,"number");Co("substring",n,["number","undefined"]);return t.substring(r.valueOf(),n&&n.valueOf())},"(substring string start end)\n\n        Function return part of the string starting at start ending with end."),concat:je("concat",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(function(e,t){return Co("concat",e,"string",t+1)});return r.join("")},"(concat . strings)\n\n        Function create new string by joining its arguments"),join:je("join",function e(t,r){Co("join",t,"string");Co("join",r,["pair","nil"]);return pu.get("list->array")(r).join(t)},"(join separator list)\n\n            Function return string by joining elements of the list"),split:je("split",function e(t,r){Co("split",t,["regex","string"]);Co("split",r,"string");return pu.get("array->list")(r.split(t))},"(split separator string)\n\n        Function create list by splitting string by separatar that can\n        be a string or regular expression."),replace:je("replace",function e(t,r,n){Co("replace",t,["regex","string"]);Co("replace",r,["string","function"]);Co("replace",n,"string");return n.replace(t,r)},"(replace pattern replacement string)\n\n        Function change pattern to replacement inside string. Pattern can be string\n        or regex and replacement can be function or string."),match:je("match",function e(t,r){Co("match",t,["regex","string"]);Co("match",r,"string");var n=r.match(t);return n?pu.get("array->list")(n):false},"(match pattern string)\n\n        function return match object from JavaScript as list or #f if not match."),search:je("search",function e(t,r){Co("search",t,["regex","string"]);Co("search",r,"string");return r.search(t)},"(search pattern string)\n\n        Function return first found index of the pattern inside a string"),repr:je("repr",function e(t,r){return toString(t,r)},"(repr obj)\n\n        Function return string LIPS representation of an object as string."),"escape-regex":je("escape-regex",function(e){Co("escape-regex",e,"string");return ge(e.valueOf())},"(escape-regex string)\n\n        Function return new string where all special operators used in regex,\n        are escaped with slash so they can be used in RegExp constructor\n        to match literal string"),env:je("env",function e(e){e=e||this;var t=Object.keys(e.__env__).map(so);var r;if(t.length){r=mo.fromArray(t)}else{r=yo}if(e.__parent__ instanceof Ct){return pu.get("env")(e.__parent__).append(r)}return r},"(env)\n        (env obj)\n\n        Function return list of values (functions, macros and variables)\n        inside environment and it's parents."),new:je("new",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var i=C(De(e),O(r.map(function(e){return pe(e)})));return i},"(new obj . args)\n\n            Function create new JavaScript instance of an object."),typecheck:je(Co,"(typecheck label value type [position])\n\n         Function check type and throw exception if type don't match.\n         Type can be string or list of strings. Position optional argument\n         is used to created proper error message."),"unset-special!":je("unset-special!",function(e){Co("remove-special!",e,"string");delete Ta.remove(e.valueOf())},"(unset-special! name)\n\n        Function remove special symbol from parser. Added by `set-special!`,\n        name must be a string."),"set-special!":je("set-special!",function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Ta.LITERAL;Co("set-special!",e,"string",1);Co("set-special!",t,"symbol",2);Ta.append(e.valueOf(),t,r)},'(set-special! symbol name [type])\n\n        Add special symbol to the list of transforming operators by the parser.\n        e.g.: `(add-special! "#" \'x)` will allow to use `#(1 2 3)` and it will be\n        transformed into (x (1 2 3)) so you can write x macro that will process\n        the list. 3rd argument is optional and it can be constant value\n        lips.specials.SPLICE if this constant is used it will transform\n        `#(1 2 3)` into (x 1 2 3) that is required by # that define vectors.'),get:kt,".":kt,unbind:je(De,"(unbind fn)\n\n         Function remove bidning from function so you can get props from it."),type:je(jo,"(type object)\n\n         Function return type of an object as string."),debugger:je("debugger",function(){debugger},"(debugger)\n\n        Function stop JavaScript code in debugger."),in:je("in",function(e,t){if(e instanceof so||e instanceof to||e instanceof N){e=e.valueOf()}return e in pe(t)},"(in key value)\n\n        Function use is in operator to check if value is in object."),instanceof:je("instanceof",function(e,t){return t instanceof De(e)},"(instanceof type obj)\n\n        Function check of object is instance of object."),"prototype?":je("prototype?",Ko,"(prototype? obj)\n\n         Function check if value is JavaScript Object prototype."),"macro?":je("macro?",function(e){return e instanceof qt},"(macro? expression)\n\n        Function check if value is a macro."),"function?":je("function?",is_function,"(function? expression)\n\n         Function check if value is a function."),"real?":je("real?",function(e){if(jo(e)!=="number"){return false}if(e instanceof N){return e.isFloat()}return N.isFloat(e)},"(real? number)\n\n        Function check if value is real number."),"number?":je("number?",function(e){return Number.isNaN(e)||N.isNumber(e)},"(number? expression)\n\n        Function check if value is a number or NaN value."),"string?":je("string?",function(e){return to.isString(e)},"(string? expression)\n\n        Function check if value is a string."),"pair?":je("pair?",function(e){return e instanceof mo},"(pair? expression)\n\n        Function check if value is a pair or list structure."),"regex?":je("regex?",function(e){return e instanceof RegExp},"(regex? expression)\n\n        Function check if value is regular expression."),"null?":je("null?",function(e){return Bo(e)},"(null? expression)\n\n        Function check if value is nulish."),"boolean?":je("boolean?",function(e){return typeof e==="boolean"},"(boolean? expression)\n\n        Function check if value is boolean."),"symbol?":je("symbol?",function(e){return e instanceof so},"(symbol? expression)\n\n        Function check if value is LIPS symbol"),"array?":je("array?",function(e){return e instanceof Array},"(array? expression)\n\n        Function check if value is an arrray."),"object?":je("object?",function(e){return e!==yo&&e!==null&&!(e instanceof Qa)&&!(e instanceof RegExp)&&!(e instanceof to)&&!(e instanceof mo)&&!(e instanceof N)&&l(e)==="object"&&!(e instanceof Array)},"(object? expression)\n\n        Function check if value is an plain object."),flatten:je("flatten",function e(t){Co("flatten",t,"pair");return t.flatten()},"(flatten list)\n\n        Return shallow list from tree structure (pairs)."),"array->list":je("array->list",function(e){Co("array->list",e,"array");return mo.fromArray(e)},"(array->list array)\n\n        Function convert JavaScript array to LIPS list."),"tree->array":je("tree->array",me("tree->array",true),"(tree->array list)\n\n         Function convert LIPS list structure into JavaScript array."),"list->array":je("list->array",me("list->array"),"(list->array list)\n\n         Function convert LIPS list into JavaScript array."),apply:je("apply",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}Co("apply",t,"function",1);var u=n.pop();Co("apply",u,["pair","nil"],n.length+2);n=n.concat(pu.get("list->array").call(this,u));return t.apply(this,Ft(t,n))},"(apply fn list)\n\n        Function that call function with list of arguments."),length:je("length",function e(t){if(!t||t===yo){return 0}if(t instanceof mo){return t.length()}if("length"in t){return t.length}},"(length expression)\n\n        Function return length of the object, the object can be list\n        or any object that have length property."),"string->number":je("string->number",Wa,"(string->number number [radix])\n\n         Function convert string to number."),try:je(new qt("try",function(t,e){var c=this;var f=e.dynamic_scope,l=e.error;return new Promise(function(i,n){var u,a;if(so.is(t.cdr.car.car,"catch")){u=t.cdr.car;if(t.cdr.cdr instanceof mo&&so.is(t.cdr.cdr.car.car,"finally")){a=t.cdr.cdr.car}}else if(so.is(t.cdr.car.car,"finally")){a=t.cdr.car}if(!(a||u)){throw new Error("try: invalid syntax")}var o=i;if(a){o=function e(t,r){o=n;oe(wt(new mo(new so("begin"),a.cdr),s),function(){r(t)})}}var s={env:c,error:function e(t){var r=c.inherit("try");if(u){r.set(u.cdr.car.car,t);var n={env:r,error:l};if(f){n.dynamic_scope=c}oe(wt(new mo(new so("begin"),u.cdr.cdr),n),function(e){o(e,i)})}else{o(t,l)}}};if(f){s.dynamic_scope=c}var e=wt(t.car,s);if(ie(e)){e.then(function(e){o(e,i)})["catch"](s.error)}else{o(e,i)}})}),"(try expr (catch (e) code))\n         (try expr (catch (e) code) (finally code))\n         (try expr (finally code))\n\n         Macro execute user code and catch exception. If catch is provided\n         it's executed when expression expr throw error. If finally is provide\n         it's always executed at the end."),raise:je("raise",function(e){throw e},"(raise obj)\n\n        Throws new exception with given object."),throw:je("throw",function(e){throw new Error(e)},"(throw string)\n\n        Throws new expection."),find:je("find",function t(r,n){Co("find",r,["regex","function"]);Co("find",n,["pair","nil"]);if(Bo(n)){return yo}var e=fu("find",r);return oe(e(n.car),function(e){if(e&&e!==yo){return n.car}return t(r,n.cdr)})},"(find fn list)\n        (find regex list)\n\n        Higher order Function find first value for which function return true.\n        If called with regex it will create matcher function."),"for-each":je("for-each",function(e){var t;Co("for-each",e,"function");for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}n.forEach(function(e,t){Co("for-each",e,["pair","nil"],t+1)});var u=(t=pu.get("map")).call.apply(t,[this,e].concat(n));if(ie(u)){return u.then(function(){})}},"(for-each fn . lists)\n\n        Higher order function that call function `fn` by for each\n        value of the argument. If you provide more then one list as argument\n        it will take each value from each list and call `fn` function\n        with that many argument as number of list arguments."),map:je("map",function e(r){var n=this;for(var t=arguments.length,i=new Array(t>1?t-1:0),u=1;u<t;u++){i[u-1]=arguments[u]}Co("map",r,"function");var a=pu.get("list?");i.forEach(function(e,t){Co("map",e,["pair","nil"],t+1);if(e instanceof mo&&!a.call(n,e)){throw new Error("map: argument ".concat(t+1," is not a list"))}});if(i.length===0){return yo}if(i.some(function(e){return e===yo})){return yo}var o=i.map(function(e){return e.car});var s=this.get("parent.frame");var c=this.newFrame(r,o);c.set("parent.frame",s);return oe(r.call.apply(r,[c].concat(O(o))),function(t){return oe(e.call.apply(e,[n,r].concat(O(i.map(function(e){return e.cdr})))),function(e){return new mo(t,e)})})},"(map fn . lists)\n\n        Higher order function that call function `fn` by for each\n        value of the argument. If you provide more then one list as argument\n        it will take each value from each list and call `fn` function\n        with that many argument as number of list arguments. The return\n        values of the function call is acumulated in result list and\n        returned by the call to map."),"list?":je("list?",function(e){var t=e;while(true){if(t===yo){return true}if(!(t instanceof mo)){return false}if(t.haveCycles("cdr")){return false}t=t.cdr}},'(list? obj)\n\n        Function test if value is proper linked list structure.\n        The car of each pair can be any value. It return false on cycles."'),some:je("some",function t(r,n){Co("some",r,"function");Co("some",n,["pair","nil"]);if(Bo(n)){return false}else{return oe(r(n.car),function(e){return e||t(r,n.cdr)})}},"(some fn list)\n\n        Higher order function that call argument on each element of the list.\n        It stops when function fn return true for a value if so it will\n        return true. If none of the values give true, the function return false"),fold:je("fold",Ue("fold",function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),u=3;u<n;u++){i[u-3]=arguments[u]}Co("fold",t,"function");i.forEach(function(e,t){Co("fold",e,["pair","nil"],t+1)});if(i.some(function(e){return e===yo})){return r}var a=e.call.apply(e,[this,t,r].concat(O(i.map(function(e){return e.cdr}))));return oe(a,function(e){return t.apply(void 0,O(i.map(function(e){return e.car})).concat([e]))})}),"(fold fn init . lists)\n\n         Function fold is reverse of the reduce. it call function `fn`\n         on each elements of the list and return single value.\n         e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))\n         for: (fold fn '() alist blist)"),pluck:je("pluck",function e(){for(var t=arguments.length,u=new Array(t),r=0;r<t;r++){u[r]=arguments[r]}return function(t){u=u.map(function(e){return e instanceof so?e.__name__:e});if(u.length===0){return yo}else if(u.length===1){var e=u,r=b(e,1),n=r[0];return t[n]}var i={};u.forEach(function(e){i[e]=t[e]});return i}},"(pluck . string)\n\n        If called with single string it will return function that will return\n        key from object. If called with more then one argument function will\n        return new object by taking all properties from given object."),reduce:je("reduce",Ue("reduce",function(t,r,e){var n=this;for(var i=arguments.length,u=new Array(i>3?i-3:0),a=3;a<i;a++){u[a-3]=arguments[a]}Co("reduce",r,"function");u.forEach(function(e,t){Co("reduce",e,["pair","nil"],t+1)});if(u.some(function(e){return e===yo})){return e}return oe(r.apply(void 0,O(u.map(function(e){return e.car})).concat([e])),function(e){return t.call.apply(t,[n,r,e].concat(O(u.map(function(e){return e.cdr}))))})}),"(reduce fn init list . lists)\n\n         Higher order function take each element of the list and call\n         the function with result of previous call or init and next element\n         on the list until each element is processed and return single value\n         as result of last call to `fn` function.\n         e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))\n         for (reduce fn init alist blist)"),filter:je("filter",function e(t,r){Co("filter",t,["regex","function"]);Co("filter",r,["pair","nil"]);var i=pu.get("list->array")(r);var u=[];var a=fu("filter",t);return function t(r){function e(e){if(e&&e!==yo){u.push(n)}return t(++r)}if(r===i.length){return mo.fromArray(u)}var n=i[r];return oe(a(n),e)}(0)},"(filter fn list)\n        (filter regex list)\n\n        Higher order function that call `fn` for each element of the list\n        and return list for only those elements for which funtion return\n        true value. If called with regex it will create matcher function."),compose:je(Te,"(compose . fns)\n\n         Higher order function and create new function that apply all functions\n         From right to left and return it's value. Reverse of compose.\n         e.g.:\n         ((compose (curry + 2) (curry * 3)) 3)\n         11\n        "),pipe:je(Re,"(pipe . fns)\n\n         Higher order function and create new function that apply all functions\n         From left to right and return it's value. Reverse of compose.\n         e.g.:\n         ((pipe (curry + 2) (curry * 3)) 3)\n         15"),curry:je($e,"(curry fn . args)\n\n         Higher order function that create curried version of the function.\n         The result function will have parially applied arguments and it\n         will keep returning functions until all arguments are added\n\n         e.g.:\n         (define (add a b c d) (+ a b c d))\n         (define add1 (curry add 1))\n         (define add12 (add 2))\n         (display (add12 3 4))"),gcd:je("gcd",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}ko("lcm",r,"number");return r.reduce(function(e,t){return e.gcd(t)})},"(gcd n1 n2 ...)\n\n        Function return the greatest common divisor of their arguments."),lcm:je("lcm",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}ko("lcm",r,"number");var i=r.length,u=H(r[0]);for(var a=1;a<i;a++){var o=H(r[a]),s=u;while(u&&o){u>o?u%=o:o%=u}u=H(s*r[a])/(u+o)}return N(u)},"(lcm n1 n2 ...)\n\n        Function return the least common multiple of their arguments."),"odd?":je("odd?",qe(function(e){return N(e).isOdd()}),"(odd? number)\n\n         Function check if number os odd."),"even?":je("even?",qe(function(e){return N(e).isEven()}),"(even? number)\n\n         Function check if number is even."),"*":je("*",Ye(function(e,t){return N(e).mul(t)},N(1)),"(* . numbers)\n\n        Multiplicate all numbers passed as arguments. If single value is passed\n        it will return that value."),"+":je("+",Ye(function(e,t){return N(e).add(t)},N(0)),"(+ . numbers)\n\n        Sum all numbers passed as arguments. If single value is passed it will\n        return that value."),"-":je("-",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("-: procedure require at least one argument")}ko("-",t,"number");if(t.length===1){return N(t[0]).sub()}if(t.length){return t.reduce(Me(function(e,t){return N(e).sub(t)}))}},"(- n1 n2 ...)\n        (- n)\n\n        Substract number passed as argument. If only one argument is passed\n        it will negate the value."),"/":je("/",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("/: procedure require at least one argument")}ko("/",t,"number");if(t.length===1){return N(1).div(t[0])}return t.reduce(Me(function(e,t){return N(e).div(t)}))},"(/ n1 n2 ...)\n        (/ n)\n\n        Divide number passed as arguments one by one. If single argument\n        is passed it will calculate (/ 1 n1)."),abs:je("abs",qe(function(e){return N(e).abs()}),"(abs number)\n\n         Function create absolute value from number."),truncate:je("truncate",function(e){Co("truncate",e,"number");if(N.isFloat(e)){if(e instanceof N){e=e.valueOf()}return q(W(e))}return e},"(truncate n)\n\n        Function return integer value from real number."),sqrt:je("sqrt",qe(function(e){return N(e).sqrt()}),"(sqrt number)\n\n         Function return square root of the number."),"**":je("**",Me(function(e,t){e=N(e);t=N(t);if(t.cmp(0)===-1){return q(1).div(e).pow(t.sub())}return e.pow(t)}),"(** a b)\n\n         Function calculate number a to to the power of b."),"1+":je("1+",qe(function(e){return N(e).add(1)}),"(1+ number)\n\n         Function add 1 to the number and return result."),"1-":je(qe(function(e){return N(e).sub(1)}),"(1- number)\n\n         Function substract 1 from the number and return result."),"%":je("%",function(e,t){ko("%",[e,t],"number");return N(e).rem(t)},"(% n1 n2)\n\n        Function get reminder of it's arguments."),"==":je("==",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}ko("==",t,"number");return Ve(function(e,t){return N(e).cmp(t)===0},t)},"(== x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are equal"),">":je(">",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}ko(">",t,"number");return Ve(function(e,t){return N(e).cmp(t)===1},t)},"(> x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically increasing"),"<":je("<",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}ko("<",t,"number");return Ve(function(e,t){return N(e).cmp(t)===-1},t)},"(< x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically decreasing"),"<=":je("<=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}ko("<=",t,"number");return Ve(function(e,t){return[0,-1].includes(N(e).cmp(t))},t)},"(<= x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically nonincreasing"),">=":je(">=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}ko(">=",t,"number");return Ve(function(e,t){return[0,1].includes(N(e).cmp(t))},t)},"(>= x1 x2 ...)\n\n        Function compare its numerical arguments and check if they are\n        monotonically nondecreasing"),"eq?":je("eq?",ke,"(eq? a b)\n\n         Function compare two values if they are identical."),or:je(new qt("or",function(e,t){var i=t.dynamic_scope,u=t.error;var a=pu.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return false}var s;return function t(){function e(e){s=e;if(s!==false){return s}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=wt(r,{env:o,dynamic_scope:i,error:u});return oe(n,e)}}()}),"(or . expressions)\n\n         Macro execute the values one by one and return the one that is truthy value.\n         If there are no expression that evaluate to true it return false."),and:je(new qt("and",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=t.dynamic_scope,u=t.error;var a=pu.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return true}var s;return function t(){function e(e){s=e;if(s===false){return false}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=wt(r,{env:o,dynamic_scope:i,error:u});return oe(n,e)}}()}),"(and . expressions)\n\n         Macro evalute each expression in sequence if any value return false it will\n         return false. If each value return true it will return the last value.\n         If it's called without arguments it will return true."),"|":je("|",function(e,t){return N(e).or(t)},"(| a b)\n\n        Function calculate or bit operation."),"&":je("&",function(e,t){return N(e).and(t)},"(& a b)\n\n        Function calculate and bit operation."),"~":je("~",function(e){return N(e).neg()},"(~ number)\n\n        Function negate the value."),">>":je(">>",function(e,t){return N(e).shr(t)},"(>> a b)\n\n        Function right shit the value a by value b."),"<<":je("<<",function(e,t){return N(e).shl(t)},"(<< a b)\n\n        Function left shit the value a by value b."),not:je("not",function e(t){if(Bo(t)){return true}return!t},"(not object)\n\n        Function return negation of the argument.")},undefined,"global");var _u=pu.inherit("user-env");function du(e,t){e.constant("**internal-env**",t);e.doc("**internal-env**","**internal-env**\n\n         Constant used to hide stdin, stdout and stderr so they don't interfere\n         with variables with the same name. Constants are internal type\n         of variables that can't be redefined, defining variable with same name\n         will throw an error.");pu.set("**interaction-environment**",e)}du(_u,hu);pu.doc("**interaction-environment**","**interaction-environment**\n\n     Internal dynamic, global variable used to find interpreter environment.\n     It's used so the read and write functions can locate **internal-env**\n     that contain references to stdin, stdout and stderr.");function vu(e){if(e.length===1){return e[0]}else{var t=[];var r=vu(e.slice(1));for(var n=0;n<r.length;n++){for(var i=0;i<e[0].length;i++){t.push(e[0][i]+r[n])}}return t}}function yu(e,t,r){var n=[];for(var i=t;i<=r;++i){var u=[];for(var a=0;a<i;++a){u.push(e)}n=n.concat(vu(u))}return n}yu(["d","a"],2,5).forEach(function(e){var t=e.split("");var r=t.slice().reverse();var n=t.map(function(e){return"(c".concat(e,"r")}).join(" ")+" arg"+")".repeat(t.length);var i="c"+e+"r";pu.set(i,je(i,function(e){return r.reduce(function(e,t){Co(i,e,"pair");if(t==="a"){return e.car}else{return e.cdr}},e)},"(".concat(i," arg)\n\n        Function calculate ").concat(n)))});(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var r=e[t]?e[t]:t;pu.set(r,je(r,function(e){Co(r,e,"number");if(e instanceof N){return e[t]()}},"(".concat(r," number)\n\n            Function calculate ").concat(r," of a number.")))})})();function mu(e){return bu(e,function(e){return uu.existsSync(au.join(e,"node_modules"))})}function gu(){return typeof global!=="undefined"&&global.global===global}function bu(e,t){var r=e.split(au.sep).filter(Boolean);for(var n=r.length;n--;){var i;var u=(i=au).join.apply(i,["/"].concat(O(r.slice(0,n+1))));if(t(u)){return u}}}function wu(){return Du.apply(this,arguments)}function Du(){Du=k(S.mark(function e(){var r,n,i,u,a;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return Promise.resolve().then(function(){return is});case 2:r=t.sent;n=r.createRequire;ou=n(typeof document==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);t.next=7;return Promise.resolve().then(function(){return is});case 7:uu=t.sent;t.next=10;return Promise.resolve().then(function(){return ws});case 10:au=t.sent;pu.set("global",global);pu.set("self",global);pu.set("window",undefined);i=new URL(typeof document==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);u=au.dirname(i.pathname);a=au.basename(i.pathname);pu.set("__dirname",u);pu.set("__filename",a);pu.set("require.resolve",je("require.resolve",function(e){Co("require.resolve",e,"string");var t=e.valueOf();return ou.resolve(t)},"(require.resolve path)\n\n           Return path relative the current module."));pu.set("require",je("require",function(t){Co("require",t,"string");t=t.valueOf();var e=process.cwd();var r;try{if(t.match(/^\s*\./)){r=ou(au.join(e,t))}else{var n=mu(e);if(n){r=ou(au.join(n,"node_modules",t))}else{r=ou(t)}}}catch(e){r=ou(t)}return Ie(r,global)},"(require module)\n\n            Function to be used inside Node.js to import the module."));case 21:case"end":return t.stop()}}},e)}));return Du.apply(this,arguments)}if(gu()){wu()}else if(typeof window!=="undefined"&&window===j){pu.set("window",window);pu.set("global",undefined);pu.set("self",window)}else if(typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"){pu.set("self",self);pu.set("window",undefined);pu.set("global",undefined)}function Eu(i){var u=Au();return function e(){var t=X(i),r;if(u){var n=X(this).constructor;r=Reflect.construct(t,arguments,n)}else{r=t.apply(this,arguments)}return K(this,r)}}function Au(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var Fu=Symbol["for"]("binary");var xu=Symbol["for"]("text");var Cu=new Ou;function Ou(){}Ou.prototype.toString=function(){return"#<eof>"};function ku(e){var n=this;if(typeof this!=="undefined"&&!(this instanceof ku)||typeof this==="undefined"){return new ku(e)}Co("InputPort",e,"function");be(this,"__type__",xu);var i;Object.defineProperty(this,"__parser__",{enumerable:true,get:function e(){return i},set:function e(t){Co("InputPort::__parser__",t,"parser");i=t}});this._read=e;this._with_parser=this._with_init_parser.bind(this,k(S.mark(function e(){var r;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(n.char_ready()){t.next=5;break}t.next=3;return n._read();case 3:r=t.sent;i=new $a(r,{env:n});case 5:return t.abrupt("return",n.__parser__);case 6:case"end":return t.stop()}}},e)})));this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==Cu};this._make_defaults()}ku.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()});this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()});this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()});this.read_string=this._with_parser(function(e,t){if(!N.isInteger(t)){var r=N.getType(t);Oo("read-string",r,"integer")}return e.__lexer__.read_string(t.valueOf())});this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};ku.prototype._with_init_parser=function(o,s){var c=this;return function(){var e=k(S.mark(function e(){var r,n,i,u,a=arguments;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return o.call(c);case 2:r=t.sent;for(n=a.length,i=new Array(n),u=0;u<n;u++){i[u]=a[u]}return t.abrupt("return",s.apply(void 0,[r].concat(i)));case 5:case"end":return t.stop()}}},e)}));return function(){return e.apply(this,arguments)}}()};ku.prototype.is_open=function(){return this._with_parser!==null};ku.prototype.close=function(){var t=this;this.__parser__=null;this._with_parser=null;["read","close","read_char","peek-char","read_line"].forEach(function(e){t[e]=function(){throw new Error("input-port: port is closed")}});this.char_ready=function(){return false}};ku.prototype.toString=function(){return"#<input-port>"};function Su(e){if(typeof this!=="undefined"&&!(this instanceof Su)||typeof this==="undefined"){return new Su(e)}Co("OutputPort",e,"function");be(this,"__type__",xu);this.write=e}Su.prototype.is_open=function(){return this._closed!==true};Su.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function e(){return true},set:function e(){},configurable:false,enumerable:false});this.write=function(){throw new Error("output-port: port is closed")}};Su.prototype.flush=function(){};Su.prototype.toString=function(){return"#<output-port>"};var ju=function(e){Q(n,e);var r=Eu(n);function n(e){var t;c(this,n);t=r.call(this,function(){var e;return(e=t)._write.apply(e,arguments)});Co("BufferedOutputPort",e,"function");be(Z(t),"_fn",e,{hidden:true});be(Z(t),"_buffer",[],{hidden:true});return t}h(n,[{key:"flush",value:function e(){if(this._buffer.length){this._fn(this._buffer.join(""));this._buffer.length=0}}},{key:"_write",value:function e(){var t=this;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}if(n.length){n.forEach(function(e){t._buffer.push(e)});var u=this._buffer[this._buffer.length-1];if(u.match(/\n$/)){this._buffer[this._buffer.length-1]=u.replace(/\n$/,"");this.flush()}}}}]);return n}(Su);function Bu(t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Bu)||typeof this==="undefined"){return new Bu(t)}Co("OutputStringPort",t,"function");be(this,"__type__",xu);be(this,"__buffer__",[]);this.write=function(e){if(!to.isString(e)){e=t(e)}else{e=e.valueOf()}r.__buffer__.push(e)}}Bu.prototype=Object.create(Su.prototype);Bu.prototype.constructor=Bu;Bu.prototype.toString=function(){return"#<output-port (string)>"};Bu.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function Iu(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Iu)||typeof this==="undefined"){return new Iu(e)}Co("InputStringPort",e,"string");t=t||pu;e=e.valueOf();this._with_parser=this._with_init_parser.bind(this,function(){if(!r.__parser__){r.__parser__=new $a(e,{env:t})}return r.__parser__});be(this,"__type__",xu);this._make_defaults()}Iu.prototype.char_ready=function(){return true};Iu.prototype=Object.create(ku.prototype);Iu.prototype.constructor=Iu;Iu.prototype.toString=function(){return"#<input-port (string)>"};function Pu(e){if(typeof this!=="undefined"&&!(this instanceof Pu)||typeof this==="undefined"){return new Pu(e)}Co("InputByteVectorPort",e,"uint8array");be(this,"__vector__",e);be(this,"__type__",Fu);var r=0;Object.defineProperty(this,"__index__",{enumerable:true,get:function e(){return r},set:function e(t){Co("InputByteVectorPort::__index__",t,"number");if(t instanceof N){t=t.valueOf()}if(typeof t==="bigint"){t=Number(t)}if(Math.floor(t)!==t){throw new Error("InputByteVectorPort::__index__ value is "+"not integer")}r=t}})}Pu.prototype=Object.create(ku.prototype);Pu.prototype.constructor=Pu;Pu.prototype.toString=function(){return"#<input-port (bytevector)>"};Pu.prototype.close=function(){var t=this;be(this,"__vector__",yo);["read_u8","close","peek_u8","read_u8_vector"].forEach(function(e){t[e]=function(){throw new Error("Input-binary-port: port is closed")}});this.char_ready=function(){return false}};Pu.prototype.u8_ready=function(){return true};Pu.prototype.peek_u8=function(){if(this.__index__>=this.__vector__.length){return Cu}return this.__vector__[this.__index__]};Pu.prototype.skip=function(){if(this.__index__<=this.__vector__.length){++this.__index__}};Pu.prototype.read_u8=function(){var e=this.peek_u8();this.skip();return e};Pu.prototype.read_u8_vector=function(e){if(typeof e==="undefined"){e=this.__vector__.length}else if(e>this.__index__+this.__vector__.length){e=this.__index__+this.__vector__.length}if(this.peek_u8()===Cu){return Cu}return this.__vector__.slice(this.__index__,e)};function Nu(){if(typeof this!=="undefined"&&!(this instanceof Nu)||typeof this==="undefined"){return new Nu}be(this,"__type__",Fu);be(this,"_buffer",[],{hidden:true});this.write=function(e){Co("write",e,["number","uint8array"]);if(N.isNumber(e)){this._buffer.push(e.valueOf())}else{var t;(t=this._buffer).push.apply(t,O(Array.from(e)))}};Object.defineProperty(this,"__buffer__",{enumerable:true,get:function e(){return Uint8Array.from(this._buffer)}})}Nu.prototype=Object.create(Su.prototype);Nu.prototype.constructor=Nu;Nu.prototype.close=function(){Su.prototype.close.call(this);be(this,"_buffer",null,{hidden:true})};Nu.prototype._close_guard=function(){if(this._closed){throw new Error("output-port: binary port is closed")}};Nu.prototype.write_u8=function(e){Co("OutputByteVectorPort::write_u8",e,"number");this.write(e)};Nu.prototype.write_u8_vector=function(e){Co("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};Nu.prototype.toString=function(){return"#<output-port (bytevector)>"};Nu.prototype.valueOf=function(){return this.__buffer__};function Ru(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Ru)||typeof this==="undefined"){return new Ru(e,t)}Co("OutputFilePort",e,"string");be(this,"__filename__",e);be(this,"_fd",t.valueOf(),{hidden:true});be(this,"__type__",xu);this.write=function(e){if(!to.isString(e)){e=toString(e)}else{e=e.valueOf()}r.fs().write(r._fd,e,function(e){if(e){throw e}})}}Ru.prototype=Object.create(Su.prototype);Ru.prototype.constructor=Ru;Ru.prototype.fs=function(){if(!this._fs){this._fs=this.internal("fs")}return this._fs};Ru.prototype.internal=function(e){return _u.get("**internal-env**").get(e)};Ru.prototype.close=function(){var n=this;return new Promise(function(t,r){n.fs().close(n._fd,function(e){if(e){r(e)}else{be(n,"_fd",null,{hidden:true});Su.prototype.close.call(n);t()}})})};Ru.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function Tu(e,t){if(typeof this!=="undefined"&&!(this instanceof Tu)||typeof this==="undefined"){return new Tu(e,t)}Iu.call(this,e);Co("InputFilePort",t,"string");be(this,"__filename__",t)}Tu.prototype=Object.create(Iu.prototype);Tu.prototype.constructor=Tu;Tu.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function Uu(e,t){if(typeof this!=="undefined"&&!(this instanceof Uu)||typeof this==="undefined"){return new Uu(e,t)}Pu.call(this,e);Co("InputBinaryFilePort",t,"string");be(this,"__filename__",t)}Uu.prototype=Object.create(Pu.prototype);Uu.prototype.constructor=Uu;Uu.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function Lu(e,t){if(typeof this!=="undefined"&&!(this instanceof Lu)||typeof this==="undefined"){return new Lu(e,t)}Co("OutputBinaryFilePort",e,"string");be(this,"__filename__",e);be(this,"_fd",t.valueOf(),{hidden:true});be(this,"__type__",Fu);var u,r;this.write=function(e){var n=this;Co("write",e,["number","uint8array"]);var i;if(!u){u=this.internal("fs")}if(!r){r=this.internal("Buffer")}if(N.isNumber(e)){i=r.from([e.valueOf()])}else{i=r.from(Array.from(e))}return new Promise(function(t,r){u.write(n._fd,i,function(e){if(e){r(e)}else{t()}})})}}Lu.prototype=Object.create(Ru.prototype);Lu.prototype.constructor=Lu;Lu.prototype.write_u8=function(e){Co("OutputByteVectorPort::write_u8",e,"number");this.write(e)};Lu.prototype.write_u8_vector=function(e){Co("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};function qu(){this.data=[]}qu.prototype.push=function(e){this.data.push(e)};qu.prototype.top=function(){return this.data[this.data.length-1]};qu.prototype.pop=function(){return this.data.pop()};qu.prototype.is_empty=function(){return!this.data.length};var Mu=["token"];function Yu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}r.push.apply(r,n)}return r}function $u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){Yu(Object(r),true).forEach(function(e){U(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{Yu(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}function zu(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Vu(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function Vu(e,t){if(!e)return;if(typeof e==="string")return Gu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gu(e,t)}function Gu(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function Ju(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function Hu(e,t){return"".concat(Ju(e),"[+-]?").concat(t,"+/").concat(t,"+")}function Wu(e,t){return"".concat(Ju(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function Zu(e,t){return"".concat(Ju(e),"[+-]?").concat(t,"+")}var Qu=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/;var Ku="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)";var Xu="(?:#[ie])?(?:[+-]?(?:[0-9]+/[0-9]+|nan.0|inf.0|".concat(Ku,"|[+-]?[0-9]+))?(?:").concat(Ku,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i");var ea=new RegExp("^(#[ie])?".concat(Ku,"$"),"i");function ta(e,t){var r=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")");var n="";if(e===""){n="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"}return new RegExp("^((?:(?:".concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(r,")?)(").concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}var ra=function(){var u={};[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(e){var t=b(e,3),r=t[0],n=t[1],i=t[2];u[r]=ta(n,i)});return u}();var na={alarm:"",backspace:"\b",delete:"",escape:"",newline:"\n",null:"\0",return:"\r",space:" ",tab:"\t",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"",etb:"",bs:"\b",can:"",ht:"\t",em:"",lf:"\n",sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};var ia={true:true,false:false,"#true":true,"#false":false,"#t":true,"#f":false,nil:yo,undefined:undefined,null:null,NaN:J,"+nan.0":J,"-nan.0":J};function ua(e){var t=[];var r=0;var n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var u=e.charCodeAt(r++);if((u&64512)===56320){t.push(((i&1023)<<10)+(u&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}var aa=Object.keys(na).join("|");var oa="#\\\\(?:x[0-9a-f]+|".concat(aa,"|[\\s\\S])");var sa=new RegExp("^".concat(oa,"$"),"i");function ca(i){var e=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]];var t=e.map(function(e){var t=b(e,2),r=t[0],n=t[1];return i(r,n)}).join("|");if(i===Wu){t=Xu+"|"+t}return t}function fa(e){return new RegExp("^(?:"+ca(e)+")$","i")}var la=fa(Wu);var ha=fa(Hu);var pa=fa(Zu);var _a=new RegExp("^(?:"+Zu("","[0-9a-f]")+")$","i");var da=new RegExp("^(?:"+Hu("","[0-9a-f]")+")$","i");var va=new RegExp("^(?:"+Wu("","[0-9a-f]")+")$","i");var ya=ta("","[0-9a-fA-F]");var ma=/((?:#[xodbie]){0,2})(.*)/i;function ga(e){var t=e.match(ma);var r={};if(t[1]){var n=t[1].replace(/#/g,"").toLowerCase().split("");if(n.includes("x")){r.radix=16}else if(n.includes("o")){r.radix=8}else if(n.includes("b")){r.radix=2}else if(n.includes("d")){r.radix=10}if(n.includes("i")){r.inexact=true}if(n.includes("e")){r.exact=true}}r.number=t[2];return r}function ba(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=ga(e);var n=r.number.split("/");var i=$({num:N([n[0],r.radix||t]),denom:N([n[1],r.radix||t])});if(r.inexact){return i.valueOf()}else{return i}}function wa(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=ga(e);if(r.inexact){return q(parseInt(r.number,r.radix||t))}return N([r.number,r.radix||t])}function Da(e){var t=e.match(/#\\x([0-9a-f]+)$/i);var r;if(t){var n=parseInt(t[1],16);r=String.fromCodePoint(n)}else{t=e.match(/#\\(.+)$/);if(t){r=t[1]}}if(r){return Qa(r)}throw new Error("Parse: invalid character")}function Ea(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;function t(e){var t;if(e==="+"){t=N(1)}else if(e==="-"){t=N(-1)}else if(e.match(_a)){t=N([e,i])}else if(e.match(da)){var r=e.split("/");t=$({num:N([r[0],i]),denom:N([r[1],i])})}else if(e.match(ea)){var n=xa(e);if(u.exact){return n.toRational()}return n}else if(e.match(/nan.0$/)){return N(NaN)}else if(e.match(/inf.0$/)){if(e[0]==="-"){return N(Number.NEGATIVE_INFINITY)}return N(Number.POSITIVE_INFINITY)}else{throw new Error("Internal Parser Error")}if(u.inexact){return q(t.valueOf())}return t}var u=ga(e);i=u.radix||i;var r;var n=u.number.match(ya);if(i!==10&&n){r=n}else{r=u.number.match(ra[i])}var a,o;o=t(r[2]);if(r[1]){a=t(r[1])}else{a=N(0)}if(o.cmp(0)===0&&o.__type__==="bigint"){return a}return L({im:o,re:a})}function Aa(e){return parseInt(e.toString(),10)===e}function Fa(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var r=parseInt(t[4],10);var n;var i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length;var u=t[3]&&t[3].length;if(i<Math.abs(r)){n=N([t[1].replace(/\./,""),10]);if(u){r-=u}}}return{exponent:r,mantisa:n}}function xa(e){var t=ga(e);var r=parseFloat(t.number);var n=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&n){return N(r)}if(Aa(r)&&t.number.match(/e\+?[0-9]/i)){return N(r)}var i=Fa(t.number),u=i.mantisa,a=i.exponent;if(u!==undefined&&a!==undefined){var o=N(10).pow(N(Math.abs(a)));if(t.exact&&a<0){return $({num:u,denom:o})}else if(a>0){return N(u).mul(o)}}}r=q(r);if(t.exact){return r.toRational()}return r}function Ca(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(e,t){return"\\u"+t.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0){throw new Error("Invalid string literal, unclosed ".concat(t[2]))}try{return to(JSON.parse(e))}catch(e){throw new Error("Invalid string literal")}}function Oa(e){if(e.match(/^\|.*\|$/)){e=e.replace(/(^\|)|(\|$)/g,"");var r={t:"\t",r:"\r",n:"\n"};e=e.replace(/\\(x[^;]+);/g,function(e,t){return String.fromCharCode(parseInt("0"+t,16))}).replace(/\\(.)/g,function(e,t){return r[t]||t})}return new so(e)}function ka(e){if(ia.hasOwnProperty(e)){return ia[e]}if(e.match(/^"[\s\S]*"$/)){return Ca(e)}else if(e[0]==="#"){var t=e.match(Qu);if(t){return new RegExp(t[1],t[2])}else if(e.match(sa)){return Da(e)}var r=e.match(/#\\(.+)/);if(r&&ua(r[1]).length===1){return Da(e)}}if(e.match(/[0-9a-f]|[+-]i/i)){if(e.match(pa)){return wa(e)}else if(e.match(ea)){return xa(e)}else if(e.match(ha)){return ba(e)}else if(e.match(la)){return Ea(e)}}if(e.match(/^#[iexobd]/)){throw new Error("Invalid numeric constant: "+e)}return Oa(e)}function Sa(e){return ja(e)&&!(e.match(Qu)||e.match(/^"[\s\S]*"$/)||e.match(pa)||e.match(ea)||e.match(la)||e.match(ha)||e.match(sa)||["#t","#f","nil","true","false"].includes(e))}function ja(e){return!(["(",")","[","]"].includes(e)||Ta.names().includes(e))}var Ba=/"(?:\\[\S\s]|[^"])*"?/g;function Ia(e){if(e instanceof to){e=e.valueOf()}var t=new Ya(e,{whitespace:true});var r=[];while(true){var n=t.peek(true);if(n===Cu){break}r.push(n);t.skip()}return r}function Pa(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof to){e=e.toString()}if(t){return Ia(e)}else{var r=Ia(e).map(function(e){if(e.token==="#\\ "){return e.token}return e.token.trim()}).filter(function(e){return e&&!e.match(/^;/)&&!e.match(/^#\|[\s\S]*\|#$/)});return Na(r)}}function Na(e){var t=0;var r=null;var n=[];for(var i=0;i<e.length;++i){var u=e[i];if(u==="#;"){if(["(","["].includes(e[i+1])){t=1;r=i}else{n.push([i,i+2])}i+=1;continue}if(r!==null){if([")","]"].includes(u)){t--}else if(["(","["].includes(u)){t++}if(t===0){n.push([r,i+1]);r=null}}}e=e.slice();n.reverse();for(var a=0,o=n;a<o.length;a++){var s=b(o[a],2),c=s[0],f=s[1];e.splice(c,f-c)}return e}function Ra(e,t){return e===null||t.match(e)}var Ta={LITERAL:Symbol["for"]("literal"),SPLICE:Symbol["for"]("splice"),SYMBOL:Symbol["for"]("symbol"),names:function e(){return Object.keys(this._specials)},type:function e(t){return this.get(t).type},get:function e(t){return this._specials[t]},off:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(Array.isArray(t)){t.forEach(function(e){return r.off(e,n)})}else if(n===null){delete this._events[t]}else{this._events=this._events.filter(function(e){return e!==n})}},on:function e(t,r){var n=this;if(Array.isArray(t)){t.forEach(function(e){return n.on(e,r)})}else if(!this._events[t]){this._events[t]=[r]}else{this._events[t].push(r)}},trigger:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}if(this._events[t]){this._events[t].forEach(function(e){return e.apply(void 0,n)})}},remove:function e(t){this.trigger("remove");delete this._specials[t]},append:function e(t,r,n){this.trigger("append");this._specials[t]={seq:t,symbol:r,type:n}},_events:{},_specials:{}};function Ua(e){return Ta.names().includes(e)}function La(e){return Ta.builtin.includes(e)}function qa(e){return Ta.type(e)===Ta.LITERAL}var Ma=[["'",new so("quote"),Ta.LITERAL],["`",new so("quasiquote"),Ta.LITERAL],[",@",new so("unquote-splicing"),Ta.LITERAL],[",",new so("unquote"),Ta.LITERAL],["'>",new so("quote-promise"),Ta.LITERAL]];Object.defineProperty(Ta,"builtin",{writable:false,value:Ma.map(function(e){return e[0]})});Ma.forEach(function(e){var t=b(e,3),r=t[0],n=t[1],i=t[2];Ta.append(r,n,i)});var Ya=function(){function p(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.whitespace,i=n===void 0?false:n;c(this,p);be(this,"__input__",e.replace(/\r/g,""));var u={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(r){Object.defineProperty(t,r,{configurable:false,enumerable:false,get:function e(){return u[r]},set:function e(t){u[r]=t}})});this._whitespace=i;this._i=this._line=this._col=this._newline=0;this._state=this._next=this._token=null;this._prev_char=""}h(p,[{key:"get",value:function e(t){return this.__internal[t]}},{key:"set",value:function e(t,r){this.__internal[t]=r}},{key:"token",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){var r=this._line;if(this._whitespace&&this._token==="\n"){--r}return{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._i>=this.__input__.length){return Cu}if(this._token){return this.token(t)}var r=this.next_token();if(r){this._token=this.__input__.substring(this._i,this._next);return this.token(t)}return Cu}},{key:"skip",value:function e(){if(this._next!==null){this._token=null;this._i=this._next}}},{key:"read_line",value:function e(){var t=this.__input__.length;if(this._i>=t){return Cu}for(var r=this._i;r<t;++r){var n=this.__input__[r];if(n==="\n"){var i=this.__input__.substring(this._i,r);this._i=r+1;++this._line;return i}}return this.read_rest()}},{key:"read_rest",value:function e(){var t=this._i;this._i=this.__input__.length;return this.__input__.substring(t)}},{key:"read_string",value:function e(t){var r=this.__input__.length;if(this._i>=r){return Cu}if(t+this._i>=r){return this.read_rest()}var n=this._i+t;var i=this.__input__.substring(this._i,n);var u=i.match(/\n/g);if(u){this._line+=u.length}this._i=n;return i}},{key:"peek_char",value:function e(){if(this._i>=this.__input__.length){return Cu}return Qa(this.__input__[this._i])}},{key:"read_char",value:function e(){var t=this.peek_char();this.skip_char();return t}},{key:"skip_char",value:function e(){if(this._i<this.__input__.length){++this._i;this._token=null}}},{key:"match_rule",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.prev_char,i=r["char"],u=r.next_char;var a=b(t,4),o=a[0],s=a[1],c=a[2],f=a[3];if(t.length!==5){throw new Error("Lexer: Invald rule of length ".concat(t.length))}if(!i.match(o)){return false}if(!Ra(s,n)){return false}if(!Ra(c,u)){return false}if(f!==this._state){return false}return true}},{key:"next_token",value:function e(){if(this._i>=this.__input__.length){return false}var t=true;e:for(var r=this._i,n=this.__input__.length;r<n;++r){var i=this.__input__[r];var u=this.__input__[r-1]||"";var a=this.__input__[r+1]||"";if(i==="\n"){++this._line;var o=this._newline;if(this._state===null){this._newline=r+1}if(this._whitespace&&this._state===null){this._next=r+1;this._col=this._i-o;return true}}if(t&&this._state===null&&i.match(/\s/)){if(this._whitespace){if(!a.match(/\s/)){this._next=r+1;this._col=this._i-this._newline;return true}else{continue}}else{this._i=r+1;continue}}t=false;var s=zu(p.rules),c;try{for(s.s();!(c=s.n()).done;){var f=c.value;if(this.match_rule(f,{prev_char:u,char:i,next_char:a})){var l=f[f.length-1];this._state=l;if(this._state===null){this._next=r+1;this._col=this._i-this._newline;return true}continue e}}}catch(e){s.e(e)}finally{s.f()}if(this._state!==null){continue e}var h=this.__input__.split("\n")[this._line];throw new Error("Invalid Syntax at line ".concat(this._line,"\n").concat(h))}}}]);return p}();Ya.symbol_rule=function e(t,r){var n=Ya.literal_rule(t,r,Ya.boundary,/\S/);return n.concat([[/\S/,/\S/,Ya.boundary,null,null],[/\S/,/\S/,null,null,Ya.symbol],[/\S/,null,Ya.boundary,Ya.symbol,null]])};Ya.literal_rule=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(t.length===0){throw new Error("Lexer: invalid literal rule")}if(t.length===1){return[[t,n,i,null,null]]}var u=[];for(var a=0,o=t.length;a<o;++a){var s=[];s.push(t[a]);s.push(t[a-1]||n);s.push(t[a+1]||i);if(a===0){s.push(null);s.push(r)}else if(a===o-1){s.push(r);s.push(null)}else{s.push(r);s.push(r)}u.push(s)}return u};Ya.string=Symbol["for"]("string");Ya.symbol=Symbol["for"]("symbol");Ya.comment=Symbol["for"]("comment");Ya.regex=Symbol["for"]("regex");Ya.regex_class=Symbol["for"]("regex_class");Ya.character=Symbol["for"]("character");Ya.bracket=Symbol["for"]("bracket");Ya.b_symbol=Symbol["for"]("b_symbol");Ya.b_comment=Symbol["for"]("b_comment");Ya.i_comment=Symbol["for"]("i_comment");Ya.l_datum=Symbol["for"]("l_datum");Ya.dot=Symbol["for"]("dot");Ya.boundary=/^$|[\s()[\]']/;Ya._rules=[[/"/,/^$|[^\\]/,null,null,Ya.string],[/"/,/^$|[^\\]/,null,Ya.string,null],[/#/,null,/[bdxoeitf]/i,null,Ya.symbol],[/#/,null,/\\/,null,Ya.character],[/\\/,/#/,/\s/,Ya.character,Ya.character],[/\\/,/#/,/[()[\]]/,Ya.character,Ya.character],[/\s/,/\\/,null,Ya.character,null],[/\S/,null,Ya.boundary,Ya.character,null],[/#/,Ya.boundary,/\//,null,Ya.regex],[/[ \t]/,null,null,Ya.regex,Ya.regex],[/\[/,null,null,Ya.regex,Ya.regex_class],[/\]/,/[^\\]/,null,Ya.regex_class,Ya.regex],[/[()[\]]/,null,null,Ya.regex,Ya.regex],[/\//,/\\/,null,Ya.regex,Ya.regex],[/\//,/[^#]/,Ya.boundary,Ya.regex,null],[/[gimyus]/,/\//,Ya.boundary,Ya.regex,null],[/[gimyus]/,/\//,/[gimyus]/,Ya.regex,Ya.regex],[/[gimyus]/,/[gimyus]/,Ya.boundary,Ya.regex,null],[/;/,/^$|[^#]/,null,null,Ya.comment],[/[\s\S]/,null,/\n/,Ya.comment,null],[/\s/,null,null,Ya.comment,Ya.comment],[/#/,null,/\|/,null,Ya.b_comment],[/\s/,null,null,Ya.b_comment,Ya.b_comment],[/#/,/\|/,null,Ya.b_comment,null],[/#/,null,/;/,null,Ya.i_comment],[/;/,/#/,null,Ya.i_comment,null],[/#/,null,/[0-9]/,null,Ya.l_datum],[/=/,/[0-9]/,null,Ya.l_datum,null],[/#/,/[0-9]/,null,Ya.l_datum,null],[/\./,Ya.boundary,/,/,null,null],[/\|/,null,null,null,Ya.b_symbol],[/\s/,null,null,Ya.b_symbol,Ya.b_symbol],[/\|/,null,Ya.boundary,Ya.b_symbol,null]];Ya._brackets=[[/[()[\]]/,null,null,null,null]];Ya._symbol_rules=[[/\S/,Ya.boundary,Ya.boundary,null,null],[/\S/,Ya.boundary,null,null,Ya.symbol],[/\S/,null,Ya.boundary,null,null],[/\S/,null,null,null,Ya.symbol],[/\S/,null,Ya.boundary,Ya.symbol,null]];Ya._cache={valid:false,rules:null};Ta.on(["remove","append"],function(){Ya._cache.valid=false;Ya._cache.rules=null});Object.defineProperty(Ya,"rules",{get:function e(){if(Ya._cache.valid){return Ya._cache.rules}var t=Ta.names().sort(function(e,t){return t.length-e.length||e.localeCompare(t)});var r=t.reduce(function(e,t){var r=Ta.get(t),n=r.type,i=r.symbol;var u;var a;if(t[0]==="#"){if(t.length===1){a=Symbol["for"](t)}else{a=Symbol["for"](t[1])}}else{a=i}if(n===Ta.SYMBOL){u=Ya.symbol_rule(t,a)}else{u=Ya.literal_rule(t,a)}return e.concat(u)},[]);Ya._cache.rules=Ya._rules.concat(Ya._brackets,r,Ya._symbol_rules);Ya._cache.valid=true;return Ya._cache.rules}});var $a=function(){function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.env,n=t.meta,i=n===void 0?false:n,u=t.formatter,a=u===void 0?Ha:u;c(this,o);if(e instanceof to){e=e.toString()}be(this,"_formatter",a,{hidden:true});be(this,"__lexer__",new Ya(e));be(this,"__env__",r);be(this,"_meta",i,{hidden:true});be(this,"_refs",[],{hidden:true})}h(o,[{key:"resolve",value:function e(t){return this.__env__&&this.__env__.get(t,{throwError:false})}},{key:"peek",value:function(){var e=k(S.mark(function e(){var r;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=this.__lexer__.peek(true);if(!(r===Cu)){t.next=4;break}return t.abrupt("return",Cu);case 4:if(!this.is_comment(r.token)){t.next=7;break}this.skip();return t.abrupt("continue",0);case 7:if(!(r.token==="#;")){t.next=14;break}this.skip();if(!(this.__lexer__.peek()===Cu)){t.next=11;break}throw new Error("Lexer: syntax error eof found after comment");case 11:t.next=13;return this._read_object();case 13:return t.abrupt("continue",0);case 14:return t.abrupt("break",17);case 17:r=this._formatter(r);if(!this._meta){t.next=20;break}return t.abrupt("return",r);case 20:return t.abrupt("return",r.token);case 21:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function e(){this._refs.length=0}},{key:"skip",value:function e(){this.__lexer__.skip()}},{key:"read",value:function(){var e=k(S.mark(function e(){var r;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"match_datum_label",value:function e(t){var r=t.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"match_datum_ref",value:function e(t){var r=t.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"is_open",value:function e(t){return["(","["].includes(t)}},{key:"is_close",value:function e(t){return[")","]"].includes(t)}},{key:"read_list",value:function(){var e=k(S.mark(function e(){var r,n,i,u;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=yo,n=r;case 1:t.next=4;return this.peek();case 4:i=t.sent;if(!(i===Cu)){t.next=7;break}return t.abrupt("break",27);case 7:if(!this.is_close(i)){t.next=10;break}this.skip();return t.abrupt("break",27);case 10:if(!(i==="."&&r!==yo)){t.next=17;break}this.skip();t.next=14;return this._read_object();case 14:n.cdr=t.sent;t.next=25;break;case 17:t.t0=mo;t.next=20;return this._read_object();case 20:t.t1=t.sent;t.t2=yo;u=new t.t0(t.t1,t.t2);if(r===yo){r=u}else{n.cdr=u}n=u;case 25:t.next=1;break;case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"read_value",value:function(){var e=k(S.mark(function e(){var r;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.read();case 2:r=t.sent;if(!(r===Cu)){t.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return t.abrupt("return",ka(r));case 6:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"is_comment",value:function e(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function e(t){return wt(t,{env:this.__env__,error:function e(t){throw t}})}},{key:"read_object",value:function(){var e=k(S.mark(function e(){var r;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:this.reset();t.next=3;return this._read_object();case 3:r=t.sent;if(r instanceof za){r=r.valueOf()}if(!this._refs.length){t.next=7;break}return t.abrupt("return",this._resolve_object(r));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_resolve_object",value:function(){var t=k(S.mark(function e(r){var n=this;var i;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!Array.isArray(r)){t.next=2;break}return t.abrupt("return",r.map(function(e){return n._resolve_object(e)}));case 2:if(!To(r)){t.next=6;break}i={};Object.keys(r).forEach(function(e){i[e]=n._resolve_object(r[e])});return t.abrupt("return",i);case 6:if(!(r instanceof mo)){t.next=8;break}return t.abrupt("return",this._resolve_pair(r));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_resolve_pair",value:function(){var t=k(S.mark(function e(r){return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof mo)){t.next=15;break}if(!(r.car instanceof za)){t.next=7;break}t.next=4;return r.car.valueOf();case 4:r.car=t.sent;t.next=8;break;case 7:this._resolve_pair(r.car);case 8:if(!(r.cdr instanceof za)){t.next=14;break}t.next=11;return r.cdr.valueOf();case 11:r.cdr=t.sent;t.next=15;break;case 14:this._resolve_pair(r.cdr);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_read_object",value:function(){var e=k(S.mark(function e(){var r,n,i,u,a,o,s,c,f;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;if(!(r===Cu)){t.next=5;break}return t.abrupt("return",r);case 5:if(!Ua(r)){t.next=35;break}n=Ta.get(r);i=La(r);this.skip();t.next=11;return this._read_object();case 11:a=t.sent;if(i){t.next=22;break}o=this.__env__.get(n.symbol);if(!(typeof o==="function")){t.next=22;break}if(!qa(r)){t.next=19;break}return t.abrupt("return",o.call(this.__env__,a));case 19:if(!(a instanceof mo)){t.next=21;break}return t.abrupt("return",o.apply(this.__env__,a.to_array(false)));case 21:throw new Error("Parse Error: Invalid parser extension "+"invocation ".concat(n.symbol));case 22:if(qa(r)){u=new mo(n.symbol,new mo(a,yo))}else{u=new mo(n.symbol,a)}if(!i){t.next=25;break}return t.abrupt("return",u);case 25:if(!(o instanceof qt)){t.next=34;break}t.next=28;return this.evaluate(u);case 28:s=t.sent;if(!(s instanceof mo||s instanceof so)){t.next=31;break}return t.abrupt("return",mo.fromArray([so("quote"),s]));case 31:return t.abrupt("return",s);case 34:throw new Error("Parse Error: invlid parser extension: "+n.symbol);case 35:c=this.match_datum_ref(r);if(!(c!==null)){t.next=41;break}this.skip();if(!this._refs[c]){t.next=40;break}return t.abrupt("return",new za(c,this._refs[c]));case 40:throw new Error("Parse Error: invalid datum label #".concat(c,"#"));case 41:f=this.match_datum_label(r);if(!(f!==null)){t.next=48;break}this.skip();this._refs[f]=this._read_object();return t.abrupt("return",this._refs[f]);case 48:if(!this.is_open(r)){t.next=53;break}this.skip();return t.abrupt("return",this.read_list());case 53:return t.abrupt("return",this.read_value());case 54:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return o}();var za=function(){function r(e,t){c(this,r);this.name=e;this.data=t}h(r,[{key:"valueOf",value:function e(){return this.data}}]);return r}();function Va(e,t){return Ga.apply(this,arguments)}function Ga(){Ga=E(S.mark(function e(r,n){var i,u;return S.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!n){if(pu){n=pu.get("**interaction-environment**",{throwError:false})}else{n=_u}}i=new $a(r,{env:n});case 2:t.next=5;return w(i.read_object());case 5:u=t.sent;if(!(u===Cu)){t.next=8;break}return t.abrupt("break",12);case 8:t.next=10;return u;case 10:t.next=2;break;case 12:case"end":return t.stop()}}},e)}));return Ga.apply(this,arguments)}function Ja(e){var t={"[":"]","(":")"};var r;if(typeof e==="string"){r=Pa(e)}else{r=e.map(function(e){return e&&e.token?e.token:e})}var n=Object.keys(t);var i=Object.values(t).concat(n);r=r.filter(function(e){return i.includes(e)});var u=new qu;var a=zu(r),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;if(n.includes(s)){u.push(s)}else if(!u.is_empty()){var c=u.top();var f=t[c];if(s===f){u.pop()}else{throw new Error("Syntax error: missing closing ".concat(f))}}else{throw new Error("Syntax error: not matched closing ".concat(s))}}}catch(e){a.e(e)}finally{a.f()}return u.is_empty()}function Ha(e){var t=e.token,r=y(e,Mu);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var n=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(n,"")}return $u({token:t},r)}function Wa(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;Co("string->number",e,"string",1);Co("string->number",t,"number",2);e=e.valueOf();t=t.valueOf();if(e.match(da)||e.match(ha)){return ba(e,t)}else if(e.match(va)||e.match(la)){return Ea(e,t)}else{var r=t===10&&!e.match(/e/i)||t===16;if(e.match(_a)&&r||e.match(pa)){return wa(e,t)}if(e.match(ea)){return xa(e)}}return false}function Za(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=e.length;if(t<=0){throw Error("previous_sexp: Invalid argument sexp = ".concat(t))}e:while(t--&&r>=0){var n=1;while(n>0){var i=e[--r];if(!i){break e}if(i==="("||i.token==="("){n--}else if(i===")"||i.token===")"){n++}}r--}return e.slice(r+1)}function Qa(e){if(typeof this!=="undefined"&&!(this instanceof Qa)||typeof this==="undefined"){return new Qa(e)}if(e instanceof to){e=e.valueOf()}var t;if(Array.from(e).length>1){e=e.toLowerCase();if(Qa.__names__[e]){t=e;e=Qa.__names__[e]}else{throw new Error("Internal: Unknown named character")}}else{t=Qa.__rev_names__[e]}Object.defineProperty(this,"__char__",{value:e,enumerable:true});if(t){Object.defineProperty(this,"__name__",{value:t,enumerable:true})}}Qa.__names__=na;Qa.__rev_names__={};Object.keys(Qa.__names__).forEach(function(e){var t=Qa.__names__[e];Qa.__rev_names__[t]=e});Qa.prototype.toUpperCase=function(){return Qa(this.__char__.toUpperCase())};Qa.prototype.toLowerCase=function(){return Qa(this.__char__.toLowerCase())};Qa.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};Qa.prototype.valueOf=Qa.prototype.serialize=function(){return this.__char__};function Ka(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Xa(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function Xa(e,t){if(!e)return;if(typeof e==="string")return eo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}function eo(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function to(e){if(typeof this!=="undefined"&&!(this instanceof to)||typeof this==="undefined"){return new to(e)}if(e instanceof Array){this.__string__=e.map(function(e,t){Co("LString",e,"character",t+1);return e.toString()}).join("")}else{this.__string__=e.valueOf()}}{var ro=["length","constructor"];var no=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!ro.includes(e)});var io=function e(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(this.__string__,t)}};var uo=Ka(no),ao;try{for(uo.s();!(ao=uo.n()).done;){var oo=ao.value;to.prototype[oo]=io(String.prototype[oo])}}catch(e){uo.e(e)}finally{uo.f()}}to.prototype.serialize=function(){return this.valueOf()};to.isString=function(e){return e instanceof to||typeof e==="string"};to.prototype.get=function(e){Co("LString::get",e,"number");return Array.from(this.__string__)[e.valueOf()]};to.prototype.cmp=function(e){Co("LString::cmp",e,"string");var t=this.valueOf();var r=e.valueOf();if(t<r){return-1}else if(t===r){return 0}else{return 1}};to.prototype.lower=function(){return to(this.__string__.toLowerCase())};to.prototype.upper=function(){return to(this.__string__.toUpperCase())};to.prototype.set=function(e,t){Co("LString::set",e,"number");Co("LString::set",t,["string","character"]);e=e.valueOf();if(t instanceof Qa){t=t.__char__}var r=[];if(e>0){r.push(this.__string__.substring(0,e))}r.push(t);if(e<this.__string__.length-1){r.push(this.__string__.substring(e+1))}this.__string__=r.join("")};Object.defineProperty(to.prototype,"length",{get:function e(){return this.__string__.length}});to.prototype.clone=function(){return to(this.valueOf())};to.prototype.fill=function(e){Co("LString::fill",e,["string","character"]);if(e instanceof Qa){e=e.toString()}var t=this.__string__.length;this.__string__=new Array(t+1).join(e)};function so(e){if(typeof this!=="undefined"&&this.constructor!==so||typeof this==="undefined"){return new so(e)}if(e instanceof to){e=e.valueOf()}if(so.list[e]instanceof so){return so.list[e]}this.__name__=e;if(typeof e==="string"){so.list[e]=this}}so.list={};so.literal=Symbol["for"]("__literal__");so.object=Symbol["for"]("__object__");so.is=function(e,t){return e instanceof so&&(t instanceof so&&e.__name__===t.__name__||typeof t==="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};so.prototype.toString=function(e){if(ho(this.__name__)){return co(this.__name__)}var t=this.valueOf();if(e&&t.match(/(^;|[\s()[\]'])/)){return"|".concat(t,"|")}return t};so.prototype.literal=function(){if(this.is_gensym()){return this[so.literal]}return this.valueOf()};so.prototype.serialize=function(){if(to.isString(this.__name__)){return this.__name__}return[co(this.__name__)]};so.prototype.valueOf=function(){return this.__name__.valueOf()};so.prototype.is_gensym=function(){return fo(this.__name__)};function co(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function fo(e){if(l(e)==="symbol"){return!!e.toString().match(/^Symbol\(#:/)}return false}var lo=function(){var t=0;function r(e,t){var r=new so(t);xe(r,"__literal__",e);return r}return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e instanceof so){if(e.is_gensym()){return e}e=e.valueOf()}if(fo(e)){return so(e)}if(e!==null){return r(e,Symbol("#:".concat(e)))}t++;return r(t,Symbol("#:g".concat(t)))}}();function ho(e){return l(e)==="symbol"||l(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}var po=Symbol["for"]("__cycles__");var _o=Symbol["for"]("__ref__");var vo=function(){function e(){c(this,e)}h(e,[{key:"toString",value:function e(){return"()"}},{key:"valueOf",value:function e(){return undefined}},{key:"serialize",value:function e(){return 0}},{key:"to_object",value:function e(){return{}}},{key:"append",value:function e(t){return new mo(t,yo)}},{key:"to_array",value:function e(){return[]}}]);return e}();var yo=new vo;function mo(e,t){if(typeof this!=="undefined"&&this.constructor!==mo||typeof this==="undefined"){return new mo(e,t)}this.car=e;this.cdr=t}mo.prototype.flatten=function(){return mo.fromArray(bo(this.to_array()))};mo.prototype.length=function(){var e=0;var t=this;while(true){if(!t||t===yo||!(t instanceof mo)||t.haveCycles("cdr")){break}e++;t=t.cdr}return e};mo.match=function(e,t){if(e instanceof so){return so.is(e,t)}else if(e instanceof mo){return mo.match(e.car,t)||mo.match(e.cdr,t)}else if(Array.isArray(e)){return e.some(function(e){return mo.match(e,t)})}else if(To(e)){return Object.values(e).some(function(e){return mo.match(e,t)})}return false};mo.prototype.find=function(e){return mo.match(this,e)};mo.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=new Map;function i(e){if(e instanceof mo){if(n.has(e)){return n.get(e)}var t=new mo;n.set(e,t);if(r){t.car=i(e.car)}else{t.car=e.car}t.cdr=i(e.cdr);t[po]=e[po];return t}return e}return i(this)};mo.prototype.last_pair=function(){var e=this;while(true){if(e.cdr===yo){return e}e=e.cdr}};mo.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=[];if(this.car instanceof mo){if(e){t.push(this.car.to_array())}else{t.push(this.car)}}else{t.push(this.car.valueOf())}if(this.cdr instanceof mo){t=t.concat(this.cdr.to_array())}return t};mo.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof mo||r&&e instanceof Array&&e[xo]){return e}if(t===false){var n=yo;for(var i=e.length;i--;){n=new mo(e[i],n)}return n}if(e.length&&!(e instanceof Array)){e=O(e)}var u=yo;var a=e.length;while(a--){var o=e[a];if(o instanceof Array){o=mo.fromArray(o,t,r)}else if(typeof o==="string"){o=to(o)}else if(typeof o==="number"&&!Number.isNaN(o)){o=N(o)}u=new mo(o,u)}return u};mo.prototype.to_object=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this;var r={};while(true){if(t instanceof mo&&t.car instanceof mo){var n=t.car;var i=n.car;if(i instanceof so){i=i.__name__}if(i instanceof to){i=i.valueOf()}var u=n.cdr;if(u instanceof mo){u=u.to_object(e)}if(Wo(u)){if(!e){u=u.valueOf()}}r[i]=u;t=t.cdr}else{break}}return r};mo.fromPairs=function(e){return e.reduce(function(e,t){return new mo(new mo(new so(t[0]),t[1]),e)},yo)};mo.fromObject=function(t){var e=Object.keys(t).map(function(e){return[e,t[e]]});return mo.fromPairs(e)};mo.prototype.reduce=function(e){var t=this;var r=yo;while(true){if(t!==yo){r=e(r,t.car);t=t.cdr}else{break}}return r};mo.prototype.reverse=function(){if(this.haveCycles()){throw new Error("You can't reverse list that have cycles")}var e=this;var t=yo;while(e!==yo){var r=e.cdr;e.cdr=t;t=e;e=r}return t};mo.prototype.transform=function(n){function i(e){if(e instanceof mo){if(e.replace){delete e.replace;return e}var t=n(e.car);if(t instanceof mo){t=i(t)}var r=n(e.cdr);if(r instanceof mo){r=i(r)}return new mo(t,r)}return e}return i(this)};mo.prototype.map=function(e){if(typeof this.car!=="undefined"){return new mo(e(this.car),this.cdr===yo?yo:this.cdr.map(e))}else{return yo}};mo.prototype.markCycles=function(){go(this);return this};mo.prototype.haveCycles=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){return this.haveCycles("car")||this.haveCycles("cdr")}return!!(this[po]&&this[po][e])};function go(e){var t=[];var i=[];var u=[];function a(e){if(!t.includes(e)){t.push(e)}}function o(e,t,r,n){if(r instanceof mo){if(n.includes(r)){if(!u.includes(r)){u.push(r)}if(!e[po]){e[po]={}}e[po][t]=r;if(!i.includes(e)){i.push(e)}return true}}}var s=_(function e(t,r){if(t instanceof mo){delete t.ref;delete t[po];a(t);r.push(t);var n=o(t,"car",t.car,r);var i=o(t,"cdr",t.cdr,r);if(!n){s(t.car,r.slice())}if(!i){return new p(function(){return e(t.cdr,r.slice())})}}});function r(e,t){if(e[po][t]instanceof mo){var r=n.indexOf(e[po][t]);e[po][t]="#".concat(r,"#")}}s(e,[]);var n=t.filter(function(e){return u.includes(e)});n.forEach(function(e,t){e[_o]="#".concat(t,"=")});i.forEach(function(e){r(e,"car");r(e,"cdr")})}mo.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.nested,n=r===void 0?false:r;var i=[];if(this[_o]){i.push(this[_o]+"(")}else if(!n){i.push("(")}var u;if(this[po]&&this[po].car){u=this[po].car}else{u=toString(this.car,e,true)}if(u!==undefined){i.push(u)}if(this.cdr instanceof mo){if(this[po]&&this[po].cdr){i.push(" . ");i.push(this[po].cdr)}else{if(this.cdr[_o]){i.push(" . ")}else{i.push(" ")}var a=this.cdr.toString(e,{nested:true});i.push(a)}}else if(this.cdr!==yo){i=i.concat([" . ",toString(this.cdr,e,true)])}if(!n||this[_o]){i.push(")")}return i.join("")};mo.prototype.set=function(e,t){this[e]=t;if(t instanceof mo){this.markCycles()}};mo.prototype.append=function(e){if(e instanceof Array){return this.append(mo.fromArray(e))}var t=this;if(t.car===undefined){if(e instanceof mo){this.car=e.car;this.cdr=e.cdr}else{this.car=e}}else if(e!==yo){while(true){if(t instanceof mo&&t.cdr!==yo){t=t.cdr}else{break}}t.cdr=e}return this};mo.prototype.serialize=function(){return[this.car,this.cdr]};mo.prototype[Symbol.iterator]=function(){var r=this;return{next:function e(){var t=r;r=t.cdr;if(t===yo){return{value:undefined,done:true}}else{return{value:t.car,done:false}}}}};function bo(e,t){var r=Object.prototype.toString;var n="[object Array]";var i=[];var u=t&&e||e.slice();var a;if(!e.length){return i}a=u.pop();do{if(r.call(a)===n){u.push.apply(u,a)}else{i.push(a)}}while(u.length&&(a=u.pop())!==undefined);i.reverse();return i}var wo=Symbol["for"]("__fn__");var Do=Symbol["for"]("__method__");var Eo=Symbol["for"]("__context__");var Ao=Symbol["for"]("__prototype__");var Fo=Symbol["for"]("__lambda__");var xo=Symbol["for"]("__data__");function Co(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;e=e.valueOf();var i=jo(t).toLowerCase();if(No(r)){if(!r(t)){throw new Error(Oo(e,i,r,n))}return}var u=false;if(r instanceof mo){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){u=true}}else{r=r.valueOf().toLowerCase()}if(!u&&i!==r){throw new Error(Oo(e,i,r,n))}}function Oo(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=e?" in expression `".concat(e,"`"):"";if(n!==null){i+=" (argument ".concat(n,")")}if(No(r)){return"Invalid type got ".concat(t).concat(i)}if(r instanceof Array){if(r.length===1){r=r[0]}else{var u=r[r.length-1];r=r.slice(0,-1).join(", ")+" or "+u}}return"Expecting ".concat(r,", got ").concat(t).concat(i)}function ko(r,e,n){e.forEach(function(e,t){Co(r,e,n,t+1)})}function So(e,t,r){Co(e,t,r);if(t.__type__===Fu){throw new Error(Oo(e,"binary-port","textual-port"))}}function jo(e){var t={pair:mo,symbol:so,character:Qa,values:Ge,"input-port":ku,"output-port":Su,number:N,regex:RegExp,syntax:$t,macro:qt,string:to,array:Array,"native-symbol":Symbol};if(Number.isNaN(e)){return"NaN"}if(e===yo){return"nil"}if(e===null){return"null"}for(var r=0,n=Object.entries(t);r<n.length;r++){var i=b(n[r],2),u=i[0],a=i[1];if(e instanceof a){return u}}if(l(e)==="object"){if(e.__instance__){e.__instance__=false;if(e.__instance__){if(No(e.toType)){return e.toType()}return"instance"}}if(e.constructor){if(e.constructor.__class__){return e.constructor.__class__}if(e.constructor===Object){if(Zo(e,Symbol.iterator)){return"iterator"}if(Zo(e,Symbol.asyncIterator)){return"async-iterator"}}return e.constructor.name.toLowerCase()}}return l(e)}function Bo(e){return Ro(e)||e===yo||e===null}function Io(e){return e instanceof ru}function Po(e){return No(e)||Io(e)}function No(e){return typeof e==="function"&&typeof e.bind==="function"}function Ro(e){return typeof e==="undefined"}function To(e){return e&&l(e)==="object"&&e.constructor===Object}function Uo(e){return e instanceof so||to.isString(e)||e===yo||e===null||e instanceof Qa||e instanceof N||e===true||e===false}function Lo(e){return e instanceof ku||e instanceof Su}function qo(e){if(No(e)){if(Lo(e[Eo])){return true}}return false}var Mo=Object.getOwnPropertyNames(Array.prototype);var Yo=[];Mo.forEach(function(e){Yo.push(Array[e],Array.prototype[e])});function $o(e){if(Xo(e)){e=e[wo]}return Yo.includes(e)}function zo(e){return No(e)&&(Vo(e)||e.__doc__)}function Vo(e){return e&&e[Fo]}function Go(e){return e&&e[Do]}function Jo(e){return Vo(e)&&!e[Ao]&&!Go(e)&&!qo(e)}function Ho(e){var t=Symbol["for"]("__native__");return No(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===true||!e.name.match(/^bound /)&&!e[t])}function Wo(e){return e instanceof N||e instanceof to||e instanceof Qa}function Zo(e,t){if(es(e,t)||es(e.__proto__,t)){return No(e[t])}}function Qo(e){return Xo(e)&&e[Symbol["for"]("__context__")]===Object}function Ko(e){return e&&l(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor==="function"&&e.constructor.prototype===e}function Xo(e){return!!(No(e)&&e[wo])}function es(e,t){if(e===null){return false}return l(e)==="object"&&t in Object.getOwnPropertySymbols(e)}var ts={};function rs(e){if(No(e)){var t=e[Eo];if(t&&(t===ts||t.constructor&&t.constructor.__class__)){return true}}return false}var ns={};var is=Object.freeze({__proto__:null,default:ns});function us(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var as=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var os=function(e){return as.exec(e).slice(1)};function ss(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}e=n+"/"+e;t=n.charAt(0)==="/"}e=us(gs(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."}function cs(e){var t=fs(e),r=bs(e,-1)==="/";e=us(gs(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e}function fs(e){return e.charAt(0)==="/"}function ls(){var e=Array.prototype.slice.call(arguments,0);return cs(gs(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}function hs(e,t){e=ss(e).substr(1);t=ss(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var n=r(e.split("/"));var i=r(t.split("/"));var u=Math.min(n.length,i.length);var a=u;for(var o=0;o<u;o++){if(n[o]!==i[o]){a=o;break}}var s=[];for(var o=a;o<n.length;o++){s.push("..")}s=s.concat(i.slice(a));return s.join("/")}var ps="/";var _s=":";function ds(e){var t=os(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n}function vs(e,t){var r=os(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r}function ys(e){return os(e)[3]}var ms={extname:ys,basename:vs,dirname:ds,sep:ps,delimiter:_s,relative:hs,join:ls,isAbsolute:fs,normalize:cs,resolve:ss};function gs(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var bs="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)};var ws=Object.freeze({__proto__:null,resolve:ss,normalize:cs,isAbsolute:fs,join:ls,relative:hs,sep:ps,delimiter:_s,dirname:ds,basename:vs,extname:ys,default:ms});e.is_lips_context=rs;e.lips=ts;Object.defineProperty(e,"__esModule",{value:true})});