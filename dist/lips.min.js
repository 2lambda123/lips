/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/ v. 1.0.0-beta.14
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * dist file generated by Babel includes code
 * Copyright (c) 2014-present, Facebook, Inc.
 * released under MIT license
 *
 * build: Sun, 31 Oct 2021 09:03:02 +0000
 */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.lips=t())})(this,function(){"use strict";function i(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function o(e,t){o=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return o(e,t)}function n(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function p(e,t,r){if(n()){p=Reflect.construct}else{p=function e(t,r,n){var i=[null];i.push.apply(i,r);var u=Function.bind.apply(t,i);var a=new u;if(n)o(a,n.prototype);return a}}return p.apply(null,arguments)}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)o(e,t)}function _(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_=function e(t){return typeof t}}else{_=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _(e)}function a(e,t){if(t&&(_(t)==="object"||typeof t==="function")){return t}return i(e)}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return s(e)}function r(e){if(Array.isArray(e))return e}function t(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function f(e,t){if(!e)return;if(typeof e==="string")return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e){return r(e)||t(e)||f(e)||l()}function d(e){if(Array.isArray(e))return c(e)}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e){return d(e)||t(e)||f(e)||v()}function m(e,t,r,n,i,u,a){try{var o=e[u](a);var s=o.value}catch(e){r(e);return}if(o.done){t(s)}else{Promise.resolve(s).then(n,i)}}function O(o){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=o.apply(e,a);function i(e){m(n,t,r,i,u,"next",e)}function u(e){m(n,t,r,i,u,"throw",e)}i(undefined)})}}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function b(e,t,r){if(t)g(e.prototype,t);if(r)g(e,r);return e}function L(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function w(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,u;for(u=0;u<n.length;u++){i=n[u];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function D(e,t){if(e==null)return{};var r=w(e,t);var n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++){n=u[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function E(e,t){var r=e&&(typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"]);if(r==null)return;var n=[];var i=true;var u=false;var a,o;try{for(r=r.call(e);!(i=(a=r.next()).done);i=true){n.push(a.value);if(t&&n.length===t)break}}catch(e){u=true;o=e}finally{try{if(!i&&r["return"]!=null)r["return"]()}finally{if(u)throw o}}return n}function A(e,t){return r(e)||E(e,t)||f(e,t)||l()}function F(e){var t;if(typeof Symbol!=="undefined"){if(Symbol.asyncIterator)t=e[Symbol.asyncIterator];if(t==null&&Symbol.iterator)t=e[Symbol.iterator]}if(t==null)t=e["@@asyncIterator"];if(t==null)t=e["@@iterator"];if(t==null)throw new TypeError("Object is not async iterable");return t.call(e)}function x(e){this.wrapped=e}function C(e){return new x(e)}function S(u){var a,o;function e(n,i){return new Promise(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};if(o){o=o.next=r}else{a=o=r;s(n,i)}})}function s(t,e){try{var r=u[t](e);var n=r.value;var i=n instanceof x;Promise.resolve(i?n.wrapped:n).then(function(e){if(i){s(t==="return"?"return":"next",e);return}c(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:true});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:false});break}a=a.next;if(a){s(a.key,a.arg)}else{o=null}}this._invoke=e;if(typeof u["return"]!=="function"){this["return"]=undefined}}S.prototype[typeof Symbol==="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this};S.prototype.next=function(e){return this._invoke("next",e)};S.prototype["throw"]=function(e){return this._invoke("throw",e)};S.prototype["return"]=function(e){return this._invoke("return",e)};function e(e){return function(){return new S(e.apply(this,arguments))}}var B={exports:{}};(function(e){var t=function(a){var e=Object.prototype;var f=e.hasOwnProperty;var s;var t=typeof Symbol==="function"?Symbol:{};var i=t.iterator||"@@iterator";var r=t.asyncIterator||"@@asyncIterator";var n=t.toStringTag||"@@toStringTag";function u(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});return e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function o(e,t,r,n){var i=t&&t.prototype instanceof c?t:c;var u=Object.create(i.prototype);var a=new O(n||[]);u._invoke=F(e,r,a);return u}a.wrap=o;function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var h="suspendedStart";var p="suspendedYield";var _="executing";var d="completed";var v={};function c(){}function m(){}function y(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf;var w=b&&b(b(S([])));if(w&&w!==e&&f.call(w,i)){g=w}var D=y.prototype=c.prototype=Object.create(g);m.prototype=D.constructor=y;y.constructor=m;m.displayName=u(y,n,"GeneratorFunction");function E(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}a.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===m||(t.displayName||t.name)==="GeneratorFunction":false};a.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,y)}else{e.__proto__=y;u(e,n,"GeneratorFunction")}e.prototype=Object.create(D);return e};a.awrap=function(e){return{__await:e}};function A(o,s){function c(e,t,r,n){var i=l(o[e],o,t);if(i.type==="throw"){n(i.arg)}else{var u=i.arg;var a=u.value;if(a&&typeof a==="object"&&f.call(a,"__await")){return s.resolve(a.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)})}return s.resolve(a).then(function(e){u.value=e;r(u)},function(e){return c("throw",e,r,n)})}}var t;function e(r,n){function e(){return new s(function(e,t){c(r,n,e,t)})}return t=t?t.then(e,e):e()}this._invoke=e}E(A.prototype);A.prototype[r]=function(){return this};a.AsyncIterator=A;a.async=function(e,t,r,n,i){if(i===void 0)i=Promise;var u=new A(o(e,t,r,n),i);return a.isGeneratorFunction(t)?u:u.next().then(function(e){return e.done?e.value:u.next()})};function F(a,o,s){var c=h;return function e(t,r){if(c===_){throw new Error("Generator is already running")}if(c===d){if(t==="throw"){throw r}return B()}s.method=t;s.arg=r;while(true){var n=s.delegate;if(n){var i=x(n,s);if(i){if(i===v)continue;return i}}if(s.method==="next"){s.sent=s._sent=s.arg}else if(s.method==="throw"){if(c===h){c=d;throw s.arg}s.dispatchException(s.arg)}else if(s.method==="return"){s.abrupt("return",s.arg)}c=_;var u=l(a,o,s);if(u.type==="normal"){c=s.done?d:p;if(u.arg===v){continue}return{value:u.arg,done:s.done}}else if(u.type==="throw"){c=d;s.method="throw";s.arg=u.arg}}}}function x(e,t){var r=e.iterator[t.method];if(r===s){t.delegate=null;if(t.method==="throw"){if(e.iterator["return"]){t.method="return";t.arg=s;x(e,t);if(t.method==="throw"){return v}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=l(r,e.iterator,t.arg);if(n.type==="throw"){t.method="throw";t.arg=n.arg;t.delegate=null;return v}var i=n.arg;if(!i){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return v}if(i.done){t[e.resultName]=i.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=s}}else{return i}t.delegate=null;return v}E(D);u(D,n,"Generator");D[i]=function(){return this};D.toString=function(){return"[object Generator]"};function C(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(C,this);this.reset(true)}a.keys=function(r){var n=[];for(var e in r){n.push(e)}n.reverse();return function e(){while(n.length){var t=n.pop();if(t in r){e.value=t;e.done=false;return e}}e.done=true;return e}};function S(t){if(t){var e=t[i];if(e){return e.call(t)}if(typeof t.next==="function"){return t}if(!isNaN(t.length)){var r=-1,n=function e(){while(++r<t.length){if(f.call(t,r)){e.value=t[r];e.done=false;return e}}e.value=s;e.done=true;return e};return n.next=n}}return{next:B}}a.values=S;function B(){return{value:s,done:true}}O.prototype={constructor:O,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=s;this.done=false;this.delegate=null;this.method="next";this.arg=s;this.tryEntries.forEach(k);if(!e){for(var t in this){if(t.charAt(0)==="t"&&f.call(this,t)&&!isNaN(+t.slice(1))){this[t]=s}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(r){if(this.done){throw r}var n=this;function e(e,t){u.type="throw";u.arg=r;n.next=e;if(t){n.method="next";n.arg=s}return!!t}for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];var u=i.completion;if(i.tryLoc==="root"){return e("end")}if(i.tryLoc<=this.prev){var a=f.call(i,"catchLoc");var o=f.call(i,"finallyLoc");if(a&&o){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}else if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else if(a){if(this.prev<i.catchLoc){return e(i.catchLoc,true)}}else if(o){if(this.prev<i.finallyLoc){return e(i.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}if(i&&(e==="break"||e==="continue")&&i.tryLoc<=t&&t<=i.finallyLoc){i=null}var u=i?i.completion:{};u.type=e;u.arg=t;if(i){this.method="next";this.next=i.finallyLoc;return v}return this.complete(u)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);k(r);return v}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:S(e),resultName:t,nextLoc:r};if(this.method==="next"){this.arg=s}return v}};return a}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})(B);var j=B.exports;var I=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var P=[];var N=[];var R=typeof Uint8Array!=="undefined"?Uint8Array:Array;var T=false;function U(){T=true;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){P[t]=e[t];N[e.charCodeAt(t)]=t}N["-".charCodeAt(0)]=62;N["_".charCodeAt(0)]=63}function q(e){if(!T){U()}var t,r,n,i,u,a;var o=e.length;if(o%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}u=e[o-2]==="="?2:e[o-1]==="="?1:0;a=new R(o*3/4-u);n=u>0?o-4:o;var s=0;for(t=0,r=0;t<n;t+=4,r+=3){i=N[e.charCodeAt(t)]<<18|N[e.charCodeAt(t+1)]<<12|N[e.charCodeAt(t+2)]<<6|N[e.charCodeAt(t+3)];a[s++]=i>>16&255;a[s++]=i>>8&255;a[s++]=i&255}if(u===2){i=N[e.charCodeAt(t)]<<2|N[e.charCodeAt(t+1)]>>4;a[s++]=i&255}else if(u===1){i=N[e.charCodeAt(t)]<<10|N[e.charCodeAt(t+1)]<<4|N[e.charCodeAt(t+2)]>>2;a[s++]=i>>8&255;a[s++]=i&255}return a}function M(e){return P[e>>18&63]+P[e>>12&63]+P[e>>6&63]+P[e&63]}function Y(e,t,r){var n;var i=[];for(var u=t;u<r;u+=3){n=(e[u]<<16)+(e[u+1]<<8)+e[u+2];i.push(M(n))}return i.join("")}function $(e){if(!T){U()}var t;var r=e.length;var n=r%3;var i="";var u=[];var a=16383;for(var o=0,s=r-n;o<s;o+=a){u.push(Y(e,o,o+a>s?s:o+a))}if(n===1){t=e[r-1];i+=P[t>>2];i+=P[t<<4&63];i+="=="}else if(n===2){t=(e[r-2]<<8)+e[r-1];i+=P[t>>10];i+=P[t>>4&63];i+=P[t<<2&63];i+="="}u.push(i);return u.join("")}function z(e,t,r,n,i){var u,a;var o=i*8-n-1;var s=(1<<o)-1;var c=s>>1;var f=-7;var l=r?i-1:0;var h=r?-1:1;var p=e[t+l];l+=h;u=p&(1<<-f)-1;p>>=-f;f+=o;for(;f>0;u=u*256+e[t+l],l+=h,f-=8){}a=u&(1<<-f)-1;u>>=-f;f+=n;for(;f>0;a=a*256+e[t+l],l+=h,f-=8){}if(u===0){u=1-c}else if(u===s){return a?NaN:(p?-1:1)*Infinity}else{a=a+Math.pow(2,n);u=u-c}return(p?-1:1)*a*Math.pow(2,u-n)}function V(e,t,r,n,i,u){var a,o,s;var c=u*8-i-1;var f=(1<<c)-1;var l=f>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=n?0:u-1;var _=n?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;a=f}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(s=Math.pow(2,-a))<1){a--;s*=2}if(a+l>=1){t+=h/s}else{t+=h*Math.pow(2,1-l)}if(t*s>=2){a++;s/=2}if(a+l>=f){o=0;a=f}else if(a+l>=1){o=(t*s-1)*Math.pow(2,i);a=a+l}else{o=t*Math.pow(2,l-1)*Math.pow(2,i);a=0}}for(;i>=8;e[r+p]=o&255,p+=_,o/=256,i-=8){}a=a<<i|o;c+=i;for(;c>0;e[r+p]=a&255,p+=_,a/=256,c-=8){}e[r+p-_]|=d*128}var J={}.toString;var G=Array.isArray||function(e){return J.call(e)=="[object Array]"};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   */var H=50;Z.TYPED_ARRAY_SUPPORT=I.TYPED_ARRAY_SUPPORT!==undefined?I.TYPED_ARRAY_SUPPORT:true;function W(){return Z.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Q(e,t){if(W()<t){throw new RangeError("Invalid typed array length")}if(Z.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=Z.prototype}else{if(e===null){e=new Z(t)}e.length=t}return e}function Z(e,t,r){if(!Z.TYPED_ARRAY_SUPPORT&&!(this instanceof Z)){return new Z(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return te(this,e)}return K(this,e,t,r)}Z.poolSize=8192;Z._augment=function(e){e.__proto__=Z.prototype;return e};function K(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return ie(e,t,r,n)}if(typeof t==="string"){return re(e,t,r)}return ue(e,t)}Z.from=function(e,t,r){return K(null,e,t,r)};if(Z.TYPED_ARRAY_SUPPORT){Z.prototype.__proto__=Uint8Array.prototype;Z.__proto__=Uint8Array}function X(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function ee(e,t,r,n){X(t);if(t<=0){return Q(e,t)}if(r!==undefined){return typeof n==="string"?Q(e,t).fill(r,n):Q(e,t).fill(r)}return Q(e,t)}Z.alloc=function(e,t,r){return ee(null,e,t,r)};function te(e,t){X(t);e=Q(e,t<0?0:ae(t)|0);if(!Z.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){e[r]=0}}return e}Z.allocUnsafe=function(e){return te(null,e)};Z.allocUnsafeSlow=function(e){return te(null,e)};function re(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!Z.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=se(t,r)|0;e=Q(e,n);var i=e.write(t,r);if(i!==n){e=e.slice(0,i)}return e}function ne(e,t){var r=t.length<0?0:ae(t.length)|0;e=Q(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function ie(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(r===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(Z.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=Z.prototype}else{e=ne(e,t)}return e}function ue(e,t){if(oe(t)){var r=ae(t.length)|0;e=Q(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||$e(t.length)){return Q(e,0)}return ne(e,t)}if(t.type==="Buffer"&&G(t.data)){return ne(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function ae(e){if(e>=W()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+W().toString(16)+" bytes")}return e|0}Z.isBuffer=ze;function oe(e){return!!(e!=null&&e._isBuffer)}Z.compare=function e(t,r){if(!oe(t)||!oe(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var u=0,a=Math.min(n,i);u<a;++u){if(t[u]!==r[u]){n=t[u];i=r[u];break}}if(n<i)return-1;if(i<n)return 1;return 0};Z.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Z.concat=function e(t,r){if(!G(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return Z.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=Z.allocUnsafe(r);var u=0;for(n=0;n<t.length;++n){var a=t[n];if(!oe(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(i,u);u+=a.length}return i};function se(e,t){if(oe(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return Le(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Me(e).length;default:if(n)return Le(e).length;t=(""+t).toLowerCase();n=true}}}Z.byteLength=se;function ce(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return Fe(this,t,r);case"utf8":case"utf-8":return be(this,t,r);case"ascii":return Ee(this,t,r);case"latin1":case"binary":return Ae(this,t,r);case"base64":return ge(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}Z.prototype._isBuffer=true;function fe(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}Z.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){fe(this,r,r+1)}return this};Z.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){fe(this,r,r+3);fe(this,r+1,r+2)}return this};Z.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){fe(this,r,r+7);fe(this,r+1,r+6);fe(this,r+2,r+5);fe(this,r+3,r+4)}return this};Z.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return be(this,0,t);return ce.apply(this,arguments)};Z.prototype.equals=function e(t){if(!oe(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return Z.compare(this,t)===0};Z.prototype.inspect=function e(){var t="";var r=H;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};Z.prototype.compare=function e(t,r,n,i,u){if(!oe(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(u===undefined){u=this.length}if(r<0||n>t.length||i<0||u>this.length){throw new RangeError("out of range index")}if(i>=u&&r>=n){return 0}if(i>=u){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;u>>>=0;if(this===t)return 0;var a=u-i;var o=n-r;var s=Math.min(a,o);var c=this.slice(i,u);var f=t.slice(r,n);for(var l=0;l<s;++l){if(c[l]!==f[l]){a=c[l];o=f[l];break}}if(a<o)return-1;if(o<a)return 1;return 0};function le(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=Z.from(t,n)}if(oe(t)){if(t.length===0){return-1}return he(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(Z.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return he(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function he(e,t,r,n,i){var u=1;var a=e.length;var o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}u=2;a/=2;o/=2;r/=2}}function s(e,t){if(u===1){return e[t]}else{return e.readUInt16BE(t*u)}}var c;if(i){var f=-1;for(c=r;c<a;c++){if(s(e,c)===s(t,f===-1?0:c-f)){if(f===-1)f=c;if(c-f+1===o)return f*u}else{if(f!==-1)c-=c-f;f=-1}}}else{if(r+o>a)r=a-o;for(c=r;c>=0;c--){var l=true;for(var h=0;h<o;h++){if(s(e,c+h)!==s(t,h)){l=false;break}}if(l)return c}}return-1}Z.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};Z.prototype.indexOf=function e(t,r,n){return le(this,t,r,n,true)};Z.prototype.lastIndexOf=function e(t,r,n){return le(this,t,r,n,false)};function pe(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var u=t.length;if(u%2!==0)throw new TypeError("Invalid hex string");if(n>u/2){n=u/2}for(var a=0;a<n;++a){var o=parseInt(t.substr(a*2,2),16);if(isNaN(o))return a;e[r+a]=o}return a}function _e(e,t,r,n){return Ye(Le(t,e.length-r),e,r,n)}function de(e,t,r,n){return Ye(Ue(t),e,r,n)}function ve(e,t,r,n){return de(e,t,r,n)}function me(e,t,r,n){return Ye(Me(t),e,r,n)}function ye(e,t,r,n){return Ye(qe(t,e.length-r),e,r,n)}Z.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var u=this.length-r;if(n===undefined||n>u)n=u;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var a=false;for(;;){switch(i){case"hex":return pe(this,t,r,n);case"utf8":case"utf-8":return _e(this,t,r,n);case"ascii":return de(this,t,r,n);case"latin1":case"binary":return ve(this,t,r,n);case"base64":return me(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};Z.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(e,t,r){if(t===0&&r===e.length){return $(e)}else{return $(e.slice(t,r))}}function be(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var u=e[i];var a=null;var o=u>239?4:u>223?3:u>191?2:1;if(i+o<=r){var s,c,f,l;switch(o){case 1:if(u<128){a=u}break;case 2:s=e[i+1];if((s&192)===128){l=(u&31)<<6|s&63;if(l>127){a=l}}break;case 3:s=e[i+1];c=e[i+2];if((s&192)===128&&(c&192)===128){l=(u&15)<<12|(s&63)<<6|c&63;if(l>2047&&(l<55296||l>57343)){a=l}}break;case 4:s=e[i+1];c=e[i+2];f=e[i+3];if((s&192)===128&&(c&192)===128&&(f&192)===128){l=(u&15)<<18|(s&63)<<12|(c&63)<<6|f&63;if(l>65535&&l<1114112){a=l}}}}if(a===null){a=65533;o=1}else if(a>65535){a-=65536;n.push(a>>>10&1023|55296);a=56320|a&1023}n.push(a);i+=o}return De(n)}var we=4096;function De(e){var t=e.length;if(t<=we){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=we))}return r}function Ee(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function Ae(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function Fe(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var u=t;u<r;++u){i+=Te(e[u])}return i}function xe(e,t,r){var n=e.slice(t,r);var i="";for(var u=0;u<n.length;u+=2){i+=String.fromCharCode(n[u]+n[u+1]*256)}return i}Z.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i;if(Z.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=Z.prototype}else{var u=r-t;i=new Z(u,undefined);for(var a=0;a<u;++a){i[a]=this[a+t]}}return i};function Ce(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}Z.prototype.readUIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Ce(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}return i};Z.prototype.readUIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n){Ce(t,r,this.length)}var i=this[t+--r];var u=1;while(r>0&&(u*=256)){i+=this[t+--r]*u}return i};Z.prototype.readUInt8=function e(t,r){if(!r)Ce(t,1,this.length);return this[t]};Z.prototype.readUInt16LE=function e(t,r){if(!r)Ce(t,2,this.length);return this[t]|this[t+1]<<8};Z.prototype.readUInt16BE=function e(t,r){if(!r)Ce(t,2,this.length);return this[t]<<8|this[t+1]};Z.prototype.readUInt32LE=function e(t,r){if(!r)Ce(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Z.prototype.readUInt32BE=function e(t,r){if(!r)Ce(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Z.prototype.readIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)Ce(t,r,this.length);var i=this[t];var u=1;var a=0;while(++a<r&&(u*=256)){i+=this[t+a]*u}u*=128;if(i>=u)i-=Math.pow(2,8*r);return i};Z.prototype.readIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n)Ce(t,r,this.length);var i=r;var u=1;var a=this[t+--i];while(i>0&&(u*=256)){a+=this[t+--i]*u}u*=128;if(a>=u)a-=Math.pow(2,8*r);return a};Z.prototype.readInt8=function e(t,r){if(!r)Ce(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};Z.prototype.readInt16LE=function e(t,r){if(!r)Ce(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt16BE=function e(t,r){if(!r)Ce(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt32LE=function e(t,r){if(!r)Ce(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Z.prototype.readInt32BE=function e(t,r){if(!r)Ce(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Z.prototype.readFloatLE=function e(t,r){if(!r)Ce(t,4,this.length);return z(this,t,true,23,4)};Z.prototype.readFloatBE=function e(t,r){if(!r)Ce(t,4,this.length);return z(this,t,false,23,4)};Z.prototype.readDoubleLE=function e(t,r){if(!r)Ce(t,8,this.length);return z(this,t,true,52,8)};Z.prototype.readDoubleBE=function e(t,r){if(!r)Ce(t,8,this.length);return z(this,t,false,52,8)};function ke(e,t,r,n,i,u){if(!oe(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<u)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}Z.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;ke(this,t,r,n,u,0)}var a=1;var o=0;this[r]=t&255;while(++o<n&&(a*=256)){this[r+o]=t/a&255}return r+n};Z.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var u=Math.pow(2,8*n)-1;ke(this,t,r,n,u,0)}var a=n-1;var o=1;this[r+a]=t&255;while(--a>=0&&(o*=256)){this[r+a]=t/o&255}return r+n};Z.prototype.writeUInt8=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,1,255,0);if(!Z.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[r]=t&255;return r+1};function Oe(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,u=Math.min(e.length-r,2);i<u;++i){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}Z.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,2,65535,0);if(Z.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Oe(this,t,r,true)}return r+2};Z.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,2,65535,0);if(Z.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Oe(this,t,r,false)}return r+2};function Se(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,u=Math.min(e.length-r,4);i<u;++i){e[r+i]=t>>>(n?i:3-i)*8&255}}Z.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,4,4294967295,0);if(Z.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255}else{Se(this,t,r,true)}return r+4};Z.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,4,4294967295,0);if(Z.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{Se(this,t,r,false)}return r+4};Z.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);ke(this,t,r,n,u-1,-u)}var a=0;var o=1;var s=0;this[r]=t&255;while(++a<n&&(o*=256)){if(t<0&&s===0&&this[r+a-1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};Z.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var u=Math.pow(2,8*n-1);ke(this,t,r,n,u-1,-u)}var a=n-1;var o=1;var s=0;this[r+a]=t&255;while(--a>=0&&(o*=256)){if(t<0&&s===0&&this[r+a+1]!==0){s=1}this[r+a]=(t/o>>0)-s&255}return r+n};Z.prototype.writeInt8=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,1,127,-128);if(!Z.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[r]=t&255;return r+1};Z.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,2,32767,-32768);if(Z.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{Oe(this,t,r,true)}return r+2};Z.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,2,32767,-32768);if(Z.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{Oe(this,t,r,false)}return r+2};Z.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,4,2147483647,-2147483648);if(Z.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else{Se(this,t,r,true)}return r+4};Z.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)ke(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(Z.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{Se(this,t,r,false)}return r+4};function Be(e,t,r,n,i,u){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function je(e,t,r,n,i){if(!i){Be(e,t,r,4)}V(e,t,r,n,23,4);return r+4}Z.prototype.writeFloatLE=function e(t,r,n){return je(this,t,r,true,n)};Z.prototype.writeFloatBE=function e(t,r,n){return je(this,t,r,false,n)};function Ie(e,t,r,n,i){if(!i){Be(e,t,r,8)}V(e,t,r,n,52,8);return r+8}Z.prototype.writeDoubleLE=function e(t,r,n){return Ie(this,t,r,true,n)};Z.prototype.writeDoubleBE=function e(t,r,n){return Ie(this,t,r,false,n)};Z.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var u=i-n;var a;if(this===t&&n<r&&r<i){for(a=u-1;a>=0;--a){t[a+r]=this[a+n]}}else if(u<1e3||!Z.TYPED_ARRAY_SUPPORT){for(a=0;a<u;++a){t[a+r]=this[a+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+u),r)}return u};Z.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(t.length===1){var u=t.charCodeAt(0);if(u<256){t=u}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!Z.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=r;a<n;++a){this[a]=t}}else{var o=oe(t)?t:Le(new Z(t,i).toString());var s=o.length;for(a=0;a<n-r;++a){this[a+r]=o[a%s]}}return this};var Pe=/[^+\/0-9A-Za-z-_]/g;function Ne(e){e=Re(e).replace(Pe,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Re(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function Te(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function Le(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var u=[];for(var a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)u.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)u.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)u.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)u.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return u}function Ue(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function qe(e,t){var r,n,i;var u=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;u.push(i);u.push(n)}return u}function Me(e){return q(Ne(e))}function Ye(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function $e(e){return e!==e}function ze(e){return e!=null&&(!!e._isBuffer||Ve(e)||Je(e))}function Ve(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function Je(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&Ve(e.slice(0,0))}let Ge;try{Ge=new TextDecoder}catch(e){}let He;let We;let Qe=0;const Ze=105;const Ke={};let Xe={};let et;let tt;let rt=0;let nt=0;let it;let ut=[];let at;let ot;let st={useRecords:false,mapsAsObjects:true};let ct=false;class ft{constructor(e){if(e){if(e.useRecords===false&&e.mapsAsObjects===undefined)e.mapsAsObjects=true;if(e.getStructures&&!e.structures)(e.structures=[]).uninitialized=true}Object.assign(this,e)}decode(e,t){if(He){return Bt(()=>{jt();return this?this.decode(e,t):ft.prototype.decode.call(st,e,t)})}We=t>-1?t:e.length;Qe=0;nt=0;tt=null;He=e;at=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength));if(this){Xe=this;if(this.structures){et=this.structures;return lt()}else if(!et||et.length>0){et=[]}}else{Xe=st;if(!et||et.length>0)et=[]}return lt()}decodeMultiple(r,n){let i,u=0;try{let e=r.length;ct=true;let t=this?this.decode(r,e):Nt.decode(r,e);if(n){n(t);while(Qe<e){u=Qe;if(n(lt())===false){return}}}else{i=[t];while(Qe<e){u=Qe;i.push(lt())}return i}}catch(e){e.lastPosition=u;e.values=i;throw e}finally{ct=false;jt()}}}function lt(){try{let e=ht();if(Qe==We){et=null;He=null;if(it)it=null}else if(Qe>We){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}else if(!ct){throw new Error("Data read, but end of buffer not reached")}return e}catch(e){jt();if(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")){e.incomplete=true}throw e}}function ht(){let r=He[Qe++];let i=r>>5;r=r&31;if(r>23){switch(r){case 24:r=He[Qe++];break;case 25:if(i==7){return Dt()}r=at.getUint16(Qe);Qe+=2;break;case 26:if(i==7){let t=at.getFloat32(Qe);if(Xe.useFloat32>2){let e=Pt[(He[Qe]&127)<<1|He[Qe+1]>>7];Qe+=4;return(e*t+(t>0?.5:-.5)>>0)/e}Qe+=4;return t}r=at.getUint32(Qe);Qe+=4;break;case 27:if(i==7){let e=at.getFloat64(Qe);Qe+=8;return e}if(Xe.uint64AsNumber)return He[Qe++]*72057594037927940+He[Qe++]*281474976710656+He[Qe++]*1099511627776+He[Qe++]*4294967296+He[Qe++]*16777216+(He[Qe++]<<16)+(He[Qe++]<<8)+He[Qe++];r=at.getBigUint64(Qe);Qe+=8;break;case 31:switch(i){case 2:case 3:case 4:let e=[];let t,r=0;while((t=ht())!=Ke){e[r++]=t}return i==4?e:i==3?e.join(""):Z.concat(e);case 5:let n;if(Xe.mapsAsObjects){let e={};while((n=At())!=Ke)e[n]=ht();return e}else{if(ot){Xe.mapsAsObjects=true;ot=false}let e=new Map;while((n=ht())!=Ke)e.set(n,ht());return e}case 7:return Ke;default:throw new Error("Invalid major type for indefinite length "+i)}default:throw new Error("Unknown token "+r)}}switch(i){case 0:return r;case 1:return~r;case 2:return wt(r);case 3:if(nt>=Qe){return tt.slice(Qe-rt,(Qe+=r)-rt)}if(nt==0&&We<140&&r<32){let e=r<16?bt(r):gt(r);if(e!=null)return e}return vt(r);case 4:let t=new Array(r);for(let e=0;e<r;e++){t[e]=ht()}return t;case 5:if(Xe.mapsAsObjects){let t={};for(let e=0;e<r;e++){t[At()]=ht()}return t}else{if(ot){Xe.mapsAsObjects=true;ot=false}let t=new Map;for(let e=0;e<r;e++){t.set(ht(),ht())}return t}case 6:if(r>>8==Ze){let t=et[r&255];if(t){if(!t.read)t.read=_t(t);return t.read()}else if(Xe.getStructures){let e=Bt(()=>{He=null;return Xe.getStructures()});if(et===true)Xe.structures=et=e;else et.splice.apply(et,[0,e.length].concat(e));t=et[r&255];if(t){if(!t.read)t.read=_t(t);return t.read()}else return r}else return r}else{let e=ut[r];if(e){if(e.handlesRead)return e(ht);else return e(ht())}else return new Ft(ht())}case 7:switch(r){case 20:return false;case 21:return true;case 22:return null;case 23:return;case 31:default:throw new Error("Unknown token "+r)}default:if(isNaN(r)){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}throw new Error("Unknown CBOR token "+r)}}const pt=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function _t(n){let e=n.length;function t(){if(t.count++>2){this.read=new Function("a","r","return function(){a();return {"+n.map(e=>pt.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}}")(dt,ht);return this.read()}dt();let r={};for(let t=0;t<e;t++){let e=n[t];r[e]=ht()}return r}t.count=0;return t}function dt(e){let t=He[Qe++];t=t&31;if(t>23){switch(t){case 24:Qe++;break;case 25:Qe+=2;break;case 26:Qe+=4}}}let vt=mt;function mt(e){let t;if(e<16){if(t=bt(e))return t}if(e>64&&Ge)return Ge.decode(He.subarray(Qe,Qe+=e));const r=Qe+e;const n=[];t="";while(Qe<r){const i=He[Qe++];if((i&128)===0){n.push(i)}else if((i&224)===192){const u=He[Qe++]&63;n.push((i&31)<<6|u)}else if((i&240)===224){const u=He[Qe++]&63;const a=He[Qe++]&63;n.push((i&31)<<12|u<<6|a)}else if((i&248)===240){const u=He[Qe++]&63;const a=He[Qe++]&63;const o=He[Qe++]&63;let e=(i&7)<<18|u<<12|a<<6|o;if(e>65535){e-=65536;n.push(e>>>10&1023|55296);e=56320|e&1023}n.push(e)}else{n.push(i)}if(n.length>=4096){t+=yt.apply(String,n);n.length=0}}if(n.length>0){t+=yt.apply(String,n)}return t}let yt=String.fromCharCode;function gt(t){let r=Qe;let n=new Array(t);for(let e=0;e<t;e++){const i=He[Qe++];if((i&128)>0){Qe=r;return}n[e]=i}return yt.apply(String,n)}function bt(d){if(d<4){if(d<2){if(d===0)return"";else{let e=He[Qe++];if((e&128)>1){Qe-=1;return}return yt(e)}}else{let e=He[Qe++];let t=He[Qe++];if((e&128)>0||(t&128)>0){Qe-=2;return}if(d<3)return yt(e,t);let r=He[Qe++];if((r&128)>0){Qe-=3;return}return yt(e,t,r)}}else{let l=He[Qe++];let h=He[Qe++];let p=He[Qe++];let _=He[Qe++];if((l&128)>0||(h&128)>0||(p&128)>0||(_&128)>0){Qe-=4;return}if(d<6){if(d===4)return yt(l,h,p,_);else{let e=He[Qe++];if((e&128)>0){Qe-=5;return}return yt(l,h,p,_,e)}}else if(d<8){let e=He[Qe++];let t=He[Qe++];if((e&128)>0||(t&128)>0){Qe-=6;return}if(d<7)return yt(l,h,p,_,e,t);let r=He[Qe++];if((r&128)>0){Qe-=7;return}return yt(l,h,p,_,e,t,r)}else{let o=He[Qe++];let s=He[Qe++];let c=He[Qe++];let f=He[Qe++];if((o&128)>0||(s&128)>0||(c&128)>0||(f&128)>0){Qe-=8;return}if(d<10){if(d===8)return yt(l,h,p,_,o,s,c,f);else{let e=He[Qe++];if((e&128)>0){Qe-=9;return}return yt(l,h,p,_,o,s,c,f,e)}}else if(d<12){let e=He[Qe++];let t=He[Qe++];if((e&128)>0||(t&128)>0){Qe-=10;return}if(d<11)return yt(l,h,p,_,o,s,c,f,e,t);let r=He[Qe++];if((r&128)>0){Qe-=11;return}return yt(l,h,p,_,o,s,c,f,e,t,r)}else{let n=He[Qe++];let i=He[Qe++];let u=He[Qe++];let a=He[Qe++];if((n&128)>0||(i&128)>0||(u&128)>0||(a&128)>0){Qe-=12;return}if(d<14){if(d===12)return yt(l,h,p,_,o,s,c,f,n,i,u,a);else{let e=He[Qe++];if((e&128)>0){Qe-=13;return}return yt(l,h,p,_,o,s,c,f,n,i,u,a,e)}}else{let e=He[Qe++];let t=He[Qe++];if((e&128)>0||(t&128)>0){Qe-=14;return}if(d<15)return yt(l,h,p,_,o,s,c,f,n,i,u,a,e,t);let r=He[Qe++];if((r&128)>0){Qe-=15;return}return yt(l,h,p,_,o,s,c,f,n,i,u,a,e,t,r)}}}}}function wt(e){return Xe.copyBuffers?Uint8Array.prototype.slice.call(He,Qe,Qe+=e):He.subarray(Qe,Qe+=e)}function Dt(){let e=He[Qe++];let t=He[Qe++];let r=(e<<8)+t;let n=r>>10&31;let i=r&1023;let u;if(n==0)u=Math.exp(i,-24);else if(n!=31)u=Math.exp(i+1024,n-25);else u=i==0?Infinity:NaN;return r&32768?-u:u}let Et=new Array(4096);function At(){let e=He[Qe++];if(e>=96&&e<120){e=e-96;if(nt>=Qe)return tt.slice(Qe-rt,(Qe+=e)-rt);else if(!(nt==0&&We<180))return vt(e)}else{Qe--;return ht()}let t=(e<<5^(e>1?at.getUint16(Qe):e>0?He[Qe]:0))&4095;let r=Et[t];let n=Qe;let i=Qe+e-3;let u;let a=0;if(r&&r.bytes==e){while(n<i){u=at.getUint32(n);if(u!=r[a++]){n=1879048192;break}n+=4}i+=3;while(n<i){u=He[n++];if(u!=r[a++]){n=1879048192;break}}if(n===i){Qe=n;return r.string}i-=3;n=Qe}r=[];Et[t]=r;r.bytes=e;while(n<i){u=at.getUint32(n);r.push(u);n+=4}i+=3;while(n<i){u=He[n++];r.push(u)}let o=e<16?bt(e):gt(e);if(o!=null)return r.string=o;return r.string=vt(e)}class Ft{constructor(e){this.value=e}}let xt=typeof window=="object"?window:I;ut[0]=e=>{return new Date(e)};ut[1]=e=>{return new Date(e*1e3)};ut[2]=e=>{return new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};ut[3]=e=>{return BigInt(-1)-new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0)};const Ct=()=>{let r=ht();let n=r[0];let e=r[1];et[e&255]=n;n.read=_t(n);let i={};for(let t=2,e=r.length;t<e;t++){let e=n[t-2];i[e]=r[t]}return i};Ct.handlesRead=true;ut[Ze]=Ct;ut[27]=e=>{return(xt[e[0]]||Error)(e[1],e[2])};ut[40009]=e=>{if(!it)it=new Map;let t=He[Qe];let r;if(t>>5==4)r=[];else r={};let n={target:r};it.set(e,n);let i=ht();if(n.used)return Object.assign(r,i);n.target=i;return i};ut[40010]=e=>{let t=it.get(e);t.used=true;return t.target};ut[258]=e=>new Set(e);(ut[259]=e=>{if(Xe.mapsAsObjects){Xe.mapsAsObjects=false;ot=true}return e()}).handlesRead=true;const kt=["Uint8","Uint8Clamped","Uint16","Uint32","BigUint64","Int8","Int16","Int32","BigInt64","Float32","Float64"].map(e=>e+"Array");const Ot=[64,68,69,70,71,72,77,78,79,81,82];for(let e=0;e<kt.length;e++){St(kt[e],Ot[e])}function St(t,e){ut[e]=e=>{if(!t)throw new Error("Could not find typed array for code "+typeCode);return new xt[t](Uint8Array.prototype.slice.call(e,0).buffer)}}function Bt(e){let t=We;let r=Qe;let n=rt;let i=nt;let u=tt;let a=it;let o=new Uint8Array(He.slice(0,We));let s=et;let c=Xe;let f=ct;let l=e();We=t;Qe=r;rt=n;nt=i;tt=u;it=a;He=o;ct=f;et=s;Xe=c;at=new DataView(He.buffer,He.byteOffset,He.byteLength);return l}function jt(){He=null;it=null;et=null}function It(e){ut[e.tag]=e.decode}let Pt=new Array(147);for(let e=0;e<256;e++){Pt[e]=+("1e"+Math.floor(45.15-e*.30103))}let Nt=new ft({useRecords:false});Nt.decode;Nt.decodeMultiple;let Rt;try{Rt=new TextEncoder}catch(e){}let Tt,Lt;const Ut=typeof Z!=="undefined";const qt=Ut?Z.allocUnsafeSlow:Uint8Array;const Mt=Ut?Z:Uint8Array;const Yt=105;const $t=256;const zt=Ut?4294967296:2144337920;let Vt;let Jt;let Gt=0;let Ht;const Wt=Symbol("record-id");class Qt extends ft{constructor(e){super(e);this.offset=0;let i;let o;let s;let c;let r;let n=0;let t=Mt.prototype.utf8Write?function(e,t,r){return Vt.utf8Write(e,t,r)}:Rt&&Rt.encodeInto?function(e,t){return Rt.encodeInto(e,Vt.subarray(t)).written}:false;let u=this;let f=64;let a=e&&e.sequential;if(a){f=0;this.structures=[]}let l=[];let h=0;let p=0;if(this.structures&&this.structures.length>f){throw new Error("Too many shared structures")}this.encode=function(e){if(!Vt){Vt=new qt(8192);Jt=new DataView(Vt.buffer,0,8192);Gt=0}Ht=Vt.length-10;if(Ht-Gt<2048){Vt=new qt(Vt.length);Jt=new DataView(Vt.buffer,0,Vt.length);Ht=Vt.length-10;Gt=0}i=Gt;r=u.structuredClone?new Map:null;o=u.structures;if(o){if(o.uninitialized)u.structures=o=u.getStructures();let t=o.length;if(t>f&&!a)t=f;if(!o.transitions){o.transitions=Object.create(null);for(let e=0;e<t;e++){let r=o[e];if(!r)continue;let n,i=o.transitions;for(let t=0,e=r.length;t<e;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null)}i=n}i[Wt]=e}n=o.length}if(!a)o.nextId=t}if(s)s=false;c=o||[];try{_(e);u.offset=Gt;if(r&&r.idsToInsert){Gt+=r.idsToInsert.length*8;if(Gt>Ht)v(Gt);u.offset=Gt;let e=er(Vt.subarray(i,Gt),r.idsToInsert);r=null;return e}return Vt.subarray(i,Gt)}finally{if(o){if(p<10)p++;if(h>1e4){o.transitions=null;p=0;h=0;if(l.length>0)l=[]}else if(l.length>0&&!a){for(let e=0,t=l.length;e<t;e++){l[e][Wt]=undefined}l=[]}if(s&&u.saveStructures){if(u.structures.length>f){u.structures=u.structures.slice(0,f)}if(u.saveStructures(u.structures,n)===false){u.structures=u.getStructures()||[];return u.encode(e)}n=u.structures.length}}}};const _=a=>{if(Gt>Ht)Vt=v(Gt);var e=typeof a;var o;if(e==="string"){let i=a.length;let u;if(i<32){u=1}else if(i<256){u=2}else if(i<65536){u=3}else{u=5}let e=i*3;if(Gt+e>Ht)Vt=v(Gt+e);if(i<64||!t){let e,t,r,n=Gt+u;for(e=0;e<i;e++){t=a.charCodeAt(e);if(t<128){Vt[n++]=t}else if(t<2048){Vt[n++]=t>>6|192;Vt[n++]=t&63|128}else if((t&64512)===55296&&((r=a.charCodeAt(e+1))&64512)===56320){t=65536+((t&1023)<<10)+(r&1023);e++;Vt[n++]=t>>18|240;Vt[n++]=t>>12&63|128;Vt[n++]=t>>6&63|128;Vt[n++]=t&63|128}else{Vt[n++]=t>>12|224;Vt[n++]=t>>6&63|128;Vt[n++]=t&63|128}}o=n-Gt-u}else{o=t(a,Gt+u,e)}if(o<24){Vt[Gt++]=96|o}else if(o<256){if(u<2){Vt.copyWithin(Gt+2,Gt+1,Gt+1+o)}Vt[Gt++]=120;Vt[Gt++]=o}else if(o<65536){if(u<3){Vt.copyWithin(Gt+3,Gt+2,Gt+2+o)}Vt[Gt++]=121;Vt[Gt++]=o>>8;Vt[Gt++]=o&255}else{if(u<5){Vt.copyWithin(Gt+5,Gt+3,Gt+3+o)}Vt[Gt++]=122;Jt.setUint32(Gt,o);Gt+=4}Gt+=o}else if(e==="number"){if(a>>>0===a){if(a<24){Vt[Gt++]=a}else if(a<256){Vt[Gt++]=24;Vt[Gt++]=a}else if(a<65536){Vt[Gt++]=25;Vt[Gt++]=a>>8;Vt[Gt++]=a&255}else{Vt[Gt++]=26;Jt.setUint32(Gt,a);Gt+=4}}else if(a>>0===a){if(a>=-24){Vt[Gt++]=31-a}else if(a>=-256){Vt[Gt++]=56;Vt[Gt++]=~a}else if(a>=-65536){Vt[Gt++]=57;Jt.setUint16(Gt,~a);Gt+=2}else{Vt[Gt++]=58;Jt.setUint32(Gt,~a);Gt+=4}}else{let t;if((t=this.useFloat32)>0&&a<4294967296&&a>=-2147483648){Vt[Gt++]=250;Jt.setFloat32(Gt,a);let e;if(t<4||(e=a*Pt[(Vt[Gt]&127)<<1|Vt[Gt+1]>>7])>>0===e){Gt+=4;return}else Gt--}Vt[Gt++]=251;Jt.setFloat64(Gt,a);Gt+=8}}else if(e==="object"){if(!a)Vt[Gt++]=246;else{if(r){let t=r.get(a);if(t){if(!t.id){let e=r.idsToInsert||(r.idsToInsert=[]);t.id=e.push(t)}Vt[Gt++]=217;Vt[Gt++]=40010>>8;Vt[Gt++]=40010&255;Vt[Gt++]=26;Jt.setUint32(Gt,t.id);Gt+=4;return}else r.set(a,{offset:Gt-i})}let e=a.constructor;if(e===Object){d(a,true)}else if(e===Array){o=a.length;if(o<24){Vt[Gt++]=128|o}else{Zt(o)}for(let e=0;e<o;e++){_(a[e])}}else if(e===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==false:this.useTag259ForMaps){Vt[Gt++]=217;Vt[Gt++]=1;Vt[Gt++]=3}o=a.size;if(o<24){Vt[Gt++]=160|o}else if(o<256){Vt[Gt++]=184;Vt[Gt++]=o}else if(o<65536){Vt[Gt++]=185;Vt[Gt++]=o>>8;Vt[Gt++]=o&255}else{Vt[Gt++]=186;Jt.setUint32(Gt,o);Gt+=4}for(let[e,t]of a){_(e);_(t)}}else{for(let r=0,e=Tt.length;r<e;r++){let e=Lt[r];if(a instanceof e){let e=Tt[r];let t=e.tag;if(t<24){Vt[Gt++]=192|t}else if(t<256){Vt[Gt++]=216;Vt[Gt++]=t}else if(t<65536){Vt[Gt++]=217;Vt[Gt++]=t>>8;Vt[Gt++]=t&255}else if(t>-1){Vt[Gt++]=218;Jt.setUint32(Gt,t);Gt+=4}e.encode.call(this,a,_,v);return}}if(a[Symbol.iterator]){Vt[Gt++]=159;for(let e of a){_(e)}Vt[Gt++]=255;return}d(a,!a.hasOwnProperty)}}}else if(e==="boolean"){Vt[Gt++]=a?245:244}else if(e==="bigint"){if(a<BigInt(1)<<BigInt(64)&&a>=0){Vt[Gt++]=27;Jt.setBigUint64(Gt,a)}else if(a>-(BigInt(1)<<BigInt(64))&&a<0){Vt[Gt++]=59;Jt.setBigUint64(Gt,-a-BigInt(1))}else{if(this.largeBigIntToFloat){Vt[Gt++]=251;Jt.setFloat64(Gt,Number(a))}else{throw new RangeError(a+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64")}}Gt+=8}else if(e==="undefined"){Vt[Gt++]=247}else{throw new Error("Unknown type "+e)}};const d=this.useRecords===false?this.variableMapSize?t=>{let r=Object.keys(t);let n=r.length;if(n<24){Vt[Gt++]=160|n}else if(n<256){Vt[Gt++]=184;Vt[Gt++]=n}else if(n<65536){Vt[Gt++]=185;Vt[Gt++]=n>>8;Vt[Gt++]=n&255}else{Vt[Gt++]=186;Jt.setUint32(Gt,n);Gt+=4}let i;for(let e=0;e<n;e++){_(i=r[e]);_(t[i])}}:(t,r)=>{Vt[Gt++]=185;let e=Gt-i;Gt+=2;let n=0;for(let e in t){if(r||t.hasOwnProperty(e)){_(e);_(t[e]);n++}}Vt[e+++i]=n>>8;Vt[e+i]=n&255}:t=>{let r=Object.keys(t);let n,i=c.transitions||(c.transitions=Object.create(null));let u=0;let a=r.length;for(let t=0;t<a;t++){let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null);u++}i=n}let e=i[Wt];if(e!==undefined){Vt[Gt++]=217;Vt[Gt++]=Yt;Vt[Gt++]=e}else{e=c.nextId++;if(!e){e=0;c.nextId=1}if(e>=$t){c.nextId=(e=f)+1}i[Wt]=e;c[e]=r;if(o&&o.length<=f){Vt[Gt++]=217;Vt[Gt++]=Yt;Vt[Gt++]=e;s=true}else{Vt[Gt++]=216;Vt[Gt++]=Yt;if(u)h+=p*u;if(l.length>=$t-f)l.shift()[Wt]=undefined;l.push(i);if(a<22)Vt[Gt++]=130+a;else Zt(a+2);_(r);Vt[Gt++]=25;Vt[Gt++]=Yt;Vt[Gt++]=e;for(let e=0;e<a;e++)_(t[r[e]]);return}}if(a<24){Vt[Gt++]=128|a}else{Zt(a)}for(let e=0;e<a;e++)_(t[r[e]])};const v=e=>{let t;if(e>16777216){if(e-i>zt)throw new Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(zt,Math.round(Math.max((e-i)*(e>67108864?1.25:2),16777216)/4096)*4096)}else t=(Math.max(e-i<<2,Vt.length-1)>>12)+1<<12;let r=new qt(t);Jt=new DataView(r.buffer,0,t);if(Vt.copy)Vt.copy(r,0,i,e);else r.set(Vt.slice(i,e));Gt-=i;i=0;Ht=r.length-10;return Vt=r}}useBuffer(e){Vt=e;Jt=new DataView(Vt.buffer,Vt.byteOffset,Vt.byteLength);Gt=0}}function Zt(e){if(e<256){Vt[Gt++]=152;Vt[Gt++]=e}else if(e<65536){Vt[Gt++]=153;Vt[Gt++]=e>>8;Vt[Gt++]=e&255}else{Vt[Gt++]=154;Jt.setUint32(Gt,e);Gt+=4}}Lt=[Date,Set,Error,RegExp,ArrayBuffer,Mt,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,BigUint64Array,Int8Array,Int16Array,Int32Array,BigInt64Array,Float32Array,Float64Array];Tt=[{tag:1,encode(e,t){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){Vt[Gt++]=26;Jt.setUint32(Gt,r);Gt+=4}else{Vt[Gt++]=251;Jt.setFloat64(Gt,r);Gt+=8}}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{encode(e,t,r){Xt(e,r)}},{encode(e,t,r){Xt(e,r)}},Kt(64),Kt(68),Kt(69),Kt(70),Kt(71),Kt(72),Kt(77),Kt(78),Kt(79),Kt(81),Kt(82)];function Kt(e){return{tag:e,encode:function e(t,r){let n=t.byteLength;let i=t.byteOffset||0;let u=t.buffer||t;r(Ut?Z.from(u,i,n):new Uint8Array(u,i,n))}}}function Xt(e,t){let r=e.byteLength;if(r<24){Vt[Gt++]=64+r}else if(r<256){Vt[Gt++]=88;Vt[Gt++]=r}else if(r<65536){Vt[Gt++]=89;Vt[Gt++]=r>>8;Vt[Gt++]=r&255}else{Vt[Gt++]=90;Jt.setUint32(Gt,r);Gt+=4}if(Gt+r>=Vt.length){t(Gt+r)}Vt.set(e,Gt);Gt+=r}function er(n,e){let i;let u=e.length*8;let a=n.length-u;e.sort((e,t)=>e.offset>t.offset?1:-1);while(i=e.pop()){let e=i.offset;let t=i.id;n.copyWithin(e+u,e,a);u-=8;let r=e+u;n[r++]=217;n[r++]=40009>>8;n[r++]=40009&255;n[r++]=26;n[r++]=t>>24;n[r++]=t>>16&255;n[r++]=t>>8&255;n[r++]=t&255;a=e}return n}function tr(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");Lt.unshift(e.Class);Tt.unshift(e)}It(e)}let rr=new Qt({useRecords:false});rr.encode;var nr={};
/**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   */Object.defineProperty(nr,"__esModule",{value:true});const ir=8,ur=6,ar=3,or=(1<<ur)+(ar-1),sr=(1<<16-ur)-1,cr=256;function fr(e,t){var r=0,n=0,i=0,u=0,a=0,o=1<<ir-1,s=0,c=0,f=0,l=new Int32Array(cr),h=0;for(h=0;h<cr;h++){l[h]=-858993460}r=e.length;while(n<r){if((o<<=1)==1<<ir){o=1;a=i;t[i++]=0}if(n>r-or){t[i++]=e[n++];continue}f=(e[n]+13^e[n+1]-13^e[n+2])&cr-1;c=n-l[f]&sr;l[f]=n;u=n-c;if(u>=0&&u!=n&&e[n]==e[u]&&e[n+1]==e[u+1]&&e[n+2]==e[u+2]){t[a]|=o;for(s=ar;s<or;s++)if(e[n+s]!=e[u+s])break;t[i++]=s-ar<<ir-ur|c>>ir;t[i++]=c;n+=s}else{t[i++]=e[n++]}}console.assert(e.length>=n);return i}function lr(e,t,r){t=t|0;var n=0,i=0,u=0,a=0,o=1<<(ir-1|0),s=0,c=0;while(n<t){if((o<<=1)===1<<ir){o=1;a=e[n];n=n+1|0}if(a&o){s=(e[n]>>(ir-ur|0))+ar|0;c=(e[n]<<ir|e[n+1|0])&sr;n=n+2|0;u=i-c|0;{while(s>4){r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;r[i]=r[u];i=i+1|0;u=u+1|0;s=s-4|0}while(s>0){r[i]=r[u];i=i+1|0;u=u+1|0;s=s-1|0}}}else{r[i]=e[n];i=i+1|0;n=n+1|0}}return i}function hr(){const e=new TextEncoder("utf-8");return e.encode(pr)}const pr="@lzjb";const _r=hr();function dr(...e){if(e.length>1){const r=e.reduce((e,t)=>e+t.length,0);const n=new Uint8Array(r);let t=0;e.forEach(e=>{n.set(e,t);t+=e.length});return n}else if(e.length){return e[0]}}function vr(t){const e=Math.ceil(Math.log2(t)/8);const r=new Uint8Array(e);for(let e=0;e<r.length;e++){const n=t&255;r[e]=n;t=(t-n)/256}return r}function mr(t){let r=0;for(let e=t.length-1;e>=0;e--){r=r*256+t[e]}return r}function yr(e,{magic:t=true}={}){const r=new Uint8Array(Math.max(e.length*1.5|0,16*1024));const n=fr(e,r);const i=vr(e.length);const u=[Uint8Array.of(i.length),i,r.slice(0,n)];if(t){u.unshift(_r)}return dr(...u)}function gr(t,{magic:e=true}={}){if(e){const e=new TextDecoder("utf-8");const s=e.decode(t.slice(0,_r.length));if(s!==pr){throw new Error("Invalid magic value")}}const r=e?_r.length:0;const n=t[r];const i=r+1;const u=r+n+1;const a=mr(t.slice(i,u));t=t.slice(u);const o=new Uint8Array(a);lr(t,t.length,o);return o}var br=nr.pack=yr;var wr=nr.unpack=gr;function Dr(s,c){return c=c||{},new Promise(function(e,t){var r=new XMLHttpRequest,n=[],i=[],u={},a=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:a,headers:{keys:function(){return n},entries:function(){return i},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var o in r.open(c.method||"get",s,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){n.push(t=t.toLowerCase()),i.push([t,r]),u[t]=u[t]?u[t]+","+r:r}),e(a())},r.onerror=t,r.withCredentials="include"==c.credentials,c.headers)r.setRequestHeader(o,c.headers[o]);r.send(c.body||null)})}
/**@license
   *   __ __                          __
   *  / / \ \       _    _  ___  ___  \ \
   * | |   \ \     | |  | || . \/ __>  | |
   * | |    > \    | |_ | ||  _/\__ \  | |
   * | |   / ^ \   |___||_||_|  <___/  | |
   *  \_\ /_/ \_\                     /_/
   *
   * <https://lips.js.org>
   *
   * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
   *
   * Copyright (c) 2018-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>
   * Released under the MIT license
   *
   * includes:
   *
   * ucs2decode function from Punycode v 2.1.1 by Mathias Bynens MIT License
   *
   * Author: Diego Perini (diego.perini at gmail.com)
   * Summary: cross-browser wrapper for DOMContentLoaded
   * Updated: 20101020
   * License: MIT
   * Version: 1.2
   *
   * contentloaded.js
   *
   * URL:
   * http://javascript.nwbox.com/ContentLoaded/
   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
   *
   * The rationalize algorithm is by Per M.A. Bothner, Alan Bawden and Marc Feeley.
   * source: Kawa, C-Gambit
   *
   * Build time: Sun, 31 Oct 2021 09:03:02 +0000
   */var Er=["token"],Ar=["stderr","stdin","stdout"];function Fr(i){var u=xr();return function e(){var t=s(i),r;if(u){var n=s(this).constructor;r=Reflect.construct(t,arguments,n)}else{r=t.apply(this,arguments)}return a(this,r)}}function xr(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function Cr(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=kr(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=true,a=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();u=t.done;return t},e:function e(t){a=true;o=t},f:function e(){try{if(!u&&r["return"]!=null)r["return"]()}finally{if(a)throw o}}}}function kr(e,t){if(!e)return;if(typeof e==="string")return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Or(e,t)}function Or(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function Sr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){Sr(Object(r),true).forEach(function(e){L(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{Sr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}var jr=typeof global!=="undefined"?global:self;if(!jr.fetch){jr.fetch=Dr}var Ir,Pr,Nr;var Rr=jr.BN;function Tr(r,n){var i=false,e=true,u=r.document,a=u.documentElement,t=u.addEventListener,o=t?"addEventListener":"attachEvent",s=t?"removeEventListener":"detachEvent",c=t?"":"on",f=function e(t){if(t.type=="readystatechange"&&u.readyState!="complete")return;(t.type=="load"?r:u)[s](c+t.type,e,false);if(!i&&(i=true))n.call(r,t.type||t)},l=function t(){try{a.doScroll("left")}catch(e){setTimeout(t,50);return}f("poll")};if(u.readyState=="complete")n.call(r,"lazy");else{if(!t&&a.doScroll){try{e=!r.frameElement}catch(e){}if(e)l()}u[o](c+"DOMContentLoaded",f,false);u[o](c+"readystatechange",f,false);r[o](c+"load",f,false)}}function Lr(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=arguments[1]===true;function t(e){if(!Ur()){return}var t=ro.get("repr")(e);if(r===null||r instanceof RegExp&&r.test(t)){console.log(ro.get("type")(e)+": "+t)}if(n){console.log(e)}}if(mu(e)){e.then(t)}else{t(e)}return e}function Ur(){return no&&no.get("DEBUG",{throwError:false})}function qr(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function Mr(e,t){return"".concat(qr(e),"[+-]?").concat(t,"+/").concat(t,"+")}function Yr(e,t){return"".concat(qr(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function $r(e,t){return"".concat(qr(e),"[+-]?").concat(t,"+")}var zr=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/;var Vr="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)";var Jr="(?:#[ie])?(?:[+-]?(?:[0-9]+/[0-9]+|nan.0|inf.0|".concat(Vr,"|[+-]?[0-9]+))?(?:").concat(Vr,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i");var Gr=new RegExp("^(#[ie])?".concat(Vr,"$"),"i");function Hr(e,t){var r=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")");var n="";if(e===""){n="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"}return new RegExp("^((?:(?:".concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(r,")?)(").concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}var Wr=function(){var u={};[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(e){var t=A(e,3),r=t[0],n=t[1],i=t[2];u[r]=Hr(n,i)});return u}();var Qr={alarm:"",backspace:"\b",delete:"",escape:"",newline:"\n",null:"\0",return:"\r",space:" ",tab:"\t",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"",etb:"",bs:"\b",can:"",ht:"\t",em:"",lf:"\n",sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};function Zr(e){var t=[];var r=0;var n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var u=e.charCodeAt(r++);if((u&64512)===56320){t.push(((i&1023)<<10)+(u&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}var Kr=Object.keys(Qr).join("|");var Xr="#\\\\(?:x[0-9a-f]+|".concat(Kr,"|[\\s\\S])");var en=new RegExp("^".concat(Xr,"$"),"i");function tn(i){var e=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]];var t=e.map(function(e){var t=A(e,2),r=t[0],n=t[1];return i(r,n)}).join("|");if(i===Yr){t=Jr+"|"+t}return t}function rn(e){return new RegExp("^(?:"+tn(e)+")$","i")}var nn=rn(Yr);var un=rn(Mr);var an=rn($r);var on=new RegExp("^(?:"+$r("","[0-9a-f]")+")$","i");var sn=new RegExp("^(?:"+Mr("","[0-9a-f]")+")$","i");var cn=new RegExp("^(?:"+Yr("","[0-9a-f]")+")$","i");var fn=Hr("","[0-9a-fA-F]");var ln=/((?:#[xodbie]){0,2})(.*)/i;function hn(e){var t=e.match(ln);var r={};if(t[1]){var n=t[1].replace(/#/g,"").toLowerCase().split("");if(n.includes("x")){r.radix=16}else if(n.includes("o")){r.radix=8}else if(n.includes("b")){r.radix=2}else if(n.includes("d")){r.radix=10}if(n.includes("i")){r.inexact=true}if(n.includes("e")){r.exact=true}}r.number=t[2];return r}function pn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=hn(e);var n=r.number.split("/");var i=xa({num:pa([n[0],r.radix||t]),denom:pa([n[1],r.radix||t])});if(r.inexact){return i.valueOf()}else{return i}}function _n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=hn(e);if(r.inexact){return wa(parseInt(r.number,r.radix||t))}return pa([r.number,r.radix||t])}function dn(e){var t=e.match(/#\\x([0-9a-f]+)$/i);var r;if(t){var n=parseInt(t[1],16);r=String.fromCodePoint(n)}else{t=e.match(/#\\(.+)$/);if(t){r=t[1]}}if(r){return ua(r)}throw new Error("Parse: invalid character")}function vn(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;function t(e){var t;if(e==="+"){t=pa(1)}else if(e==="-"){t=pa(-1)}else if(e.match(on)){t=pa([e,i])}else if(e.match(sn)){var r=e.split("/");t=xa({num:pa([r[0],i]),denom:pa([r[1],i])})}else if(e.match(Gr)){var n=gn(e);if(u.exact){return n.toRational()}return n}else if(e.match(/nan.0$/)){return pa(NaN)}else if(e.match(/inf.0$/)){if(e[0]==="-"){return pa(Number.NEGATIVE_INFINITY)}return pa(Number.POSITIVE_INFINITY)}else{throw new Error("Internal Parser Error")}if(u.inexact){return wa(t.valueOf())}return t}var u=hn(e);i=u.radix||i;var r;var n=u.number.match(fn);if(i!==10&&n){r=n}else{r=u.number.match(Wr[i])}var a,o;o=t(r[2]);if(r[1]){a=t(r[1])}else{a=pa(0)}if(o.cmp(0)===0&&o.__type__==="bigint"){return a}return ba({im:o,re:a})}function mn(e){return parseInt(e.toString(),10)===e}function yn(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var r=parseInt(t[4],10);var n;var i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length;var u=t[3]&&t[3].length;if(i<Math.abs(r)){n=pa([t[1].replace(/\./,""),10]);if(u){r-=u}}}return{exponent:r,mantisa:n}}function gn(e){var t=hn(e);var r=parseFloat(t.number);var n=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&n){return pa(r)}if(mn(r)&&t.number.match(/e\+?[0-9]/i)){return pa(r)}var i=yn(t.number),u=i.mantisa,a=i.exponent;if(u!==undefined&&a!==undefined){var o=pa(10).pow(pa(Math.abs(a)));if(t.exact&&a<0){return xa({num:u,denom:o})}else if(a>0){return pa(u).mul(o)}}}r=wa(r);if(t.exact){return r.toRational()}return r}function bn(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(e,t){return"\\u"+t.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0){throw new Error("Invalid string literal, unclosed ".concat(t[2]))}try{return aa(JSON.parse(e))}catch(e){throw new Error("Invalid string literal")}}function wn(e){if(e.match(/^\|.*\|$/)){e=e.replace(/(^\|)|(\|$)/g,"");var r={t:"\t",r:"\r",n:"\n"};e=e.replace(/\\(x[^;]+);/g,function(e,t){return String.fromCharCode(parseInt("0"+t,16))}).replace(/\\(.)/g,function(e,t){return r[t]||t})}return new Rn(e)}function Dn(e){if(to.hasOwnProperty(e)){return to[e]}if(e.match(/^"[\s\S]*"$/)){return bn(e)}else if(e[0]==="#"){var t=e.match(zr);if(t){return new RegExp(t[1],t[2])}else if(e.match(en)){return dn(e)}var r=e.match(/#\\(.+)/);if(r&&Zr(r[1]).length===1){return dn(e)}}if(e.match(/[0-9a-f]|[+-]i/i)){if(e.match(an)){return _n(e)}else if(e.match(Gr)){return gn(e)}else if(e.match(un)){return pn(e)}else if(e.match(nn)){return vn(e)}}if(e.match(/^#[iexobd]/)){throw new Error("Invalid numeric constant: "+e)}return wn(e)}function En(e){return!(["(",")","[","]"].includes(e)||zn.names().includes(e))}function An(e){return En(e)&&!(e.match(zr)||e.match(/^"[\s\S]*"$/)||e.match(an)||e.match(Gr)||e.match(nn)||e.match(un)||e.match(en)||["#t","#f","nil","true","false"].includes(e))}var Fn=/"(?:\\[\S\s]|[^"])*"?/g;function xn(e){if(typeof e==="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function Cn(){this.data=[]}Cn.prototype.push=function(e){this.data.push(e)};Cn.prototype.top=function(){return this.data[this.data.length-1]};Cn.prototype.pop=function(){return this.data.pop()};Cn.prototype.is_empty=function(){return!this.data.length};function kn(e){if(e instanceof aa){e=e.valueOf()}var t=new Wn(e,{whitespace:true});var r=[];while(true){var n=t.peek(true);if(n===Ma){break}r.push(n);t.skip()}return r}function On(e){var t=e.token,r=D(e,Er);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var n=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(n,"")}return Br({token:t},r)}function Sn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.fn=e;this.cont=t}Sn.prototype.toString=function(){return"#<Thunk>"};function Bn(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return jn(n.apply(this,t))}}function jn(e){while(e instanceof Sn){var t=e;e=e.fn();if(!(e instanceof Sn)){t.cont()}}return e}function In(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof aa){e=e.toString()}if(t){return kn(e)}else{var r=kn(e).map(function(e){if(e.token==="#\\ "){return e.token}return e.token.trim()}).filter(function(e){return e&&!e.match(/^;/)&&!e.match(/^#\|[\s\S]*\|#$/)});return Pn(r)}}function Pn(e){var t=0;var r=null;var n=[];for(var i=0;i<e.length;++i){var u=e[i];if(u==="#;"){if(["(","["].includes(e[i+1])){t=1;r=i}else{n.push([i,i+2])}i+=1;continue}if(r!==null){if([")","]"].includes(u)){t--}else if(["(","["].includes(u)){t++}if(t===0){n.push([r,i+1]);r=null}}}e=e.slice();n.reverse();for(var a=0,o=n;a<o.length;a++){var s=A(o[a],2),c=s[0],f=s[1];e.splice(c,f-c)}return e}function Nn(e){return _(e)==="symbol"||_(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function Rn(e){if(typeof this!=="undefined"&&this.constructor!==Rn||typeof this==="undefined"){return new Rn(e)}if(e instanceof aa){e=e.valueOf()}if(Rn.list[e]instanceof Rn){return Rn.list[e]}this.__name__=e;if(typeof e==="string"){Rn.list[e]=this}}Rn.list={};Rn.literal=Symbol["for"]("__literal__");Rn.object=Symbol["for"]("__object__");Rn.is=function(e,t){return e instanceof Rn&&(t instanceof Rn&&e.__name__===t.__name__||typeof t==="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};Rn.prototype.toString=function(e){if(Nn(this.__name__)){return Tn(this.__name__)}var t=this.valueOf();if(e&&t.match(/(^;|[\s()[\]'])/)){return"|".concat(t,"|")}return t};Rn.prototype.literal=function(){if(this.is_gensym()){return this[Rn.literal]}return this.valueOf()};Rn.prototype.serialize=function(){if(aa.isString(this.__name__)){return this.__name__}return[Tn(this.__name__)]};Rn.prototype.valueOf=function(){return this.__name__.valueOf()};Rn.prototype.is_gensym=function(){return Ln(this.__name__)};function Tn(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function Ln(e){if(_(e)==="symbol"){return!!e.toString().match(/^Symbol\(#:/)}return false}var Un=function(){var t=0;function r(e,t){var r=new Rn(t);Mu(r,"__literal__",e);return r}return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e instanceof Rn){if(e.is_gensym()){return e}e=e.valueOf()}if(Ln(e)){return Rn(e)}if(e!==null){return r(e,Symbol("#:".concat(e)))}t++;return r(t,Symbol("#:g".concat(t)))}}();function qn(e){var r=this;var n={pending:true,rejected:false,fulfilled:false,reason:undefined,type:undefined};e=e.then(function(e){n.type=wo(e);n.fulfilled=true;n.pending=false;return e});ii(this,"_promise",e,{hidden:true});if(_u(e["catch"])){e=e["catch"](function(e){n.rejected=true;n.pending=false;n.reason=e})}Object.keys(n).forEach(function(t){Object.defineProperty(r,"__".concat(t,"__"),{enumerable:true,get:function e(){return n[t]}})});ii(this,"__promise__",e);this.then=false}qn.prototype.then=function(e){return new qn(this.valueOf().then(e))};qn.prototype["catch"]=function(e){return new qn(this.valueOf()["catch"](e))};qn.prototype.valueOf=function(){if(!this._promise){throw new Error("QuotedPromise: invalid promise created")}return this._promise};qn.prototype.toString=function(){if(this.__pending__){return qn.pending_str}if(this.__rejected__){return qn.rejected_str}return"#<js-promise resolved (".concat(this.__type__,")>")};qn.pending_str="#<js-promise (pending)>";qn.rejected_str="#<js-promise (rejected)>";function Mn(e){if(Array.isArray(e)){return Promise.all(Yn(e)).then($n)}return e}function Yn(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof qn){t[r]=new Ja(n)}else{t[r]=n}}return t}function $n(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof Ja){t[r]=n.valueOf()}else{t[r]=n}}return t}var zn={LITERAL:Symbol["for"]("literal"),SPLICE:Symbol["for"]("splice"),SYMBOL:Symbol["for"]("symbol"),names:function e(){return Object.keys(this._specials)},type:function e(t){return this.get(t).type},get:function e(t){return this._specials[t]},off:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(Array.isArray(t)){t.forEach(function(e){return r.off(e,n)})}else if(n===null){delete this._events[t]}else{this._events=this._events.filter(function(e){return e!==n})}},on:function e(t,r){var n=this;if(Array.isArray(t)){t.forEach(function(e){return n.on(e,r)})}else if(!this._events[t]){this._events[t]=[r]}else{this._events[t].push(r)}},trigger:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}if(this._events[t]){this._events[t].forEach(function(e){return e.apply(void 0,n)})}},remove:function e(t){this.trigger("remove");delete this._specials[t]},append:function e(t,r,n){this.trigger("append");this._specials[t]={seq:t,symbol:r,type:n}},_events:{},_specials:{}};function Vn(e){return zn.names().includes(e)}function Jn(e){return zn.builtin.includes(e)}function Gn(e){return zn.type(e)===zn.LITERAL}var Hn=[["'",new Rn("quote"),zn.LITERAL],["`",new Rn("quasiquote"),zn.LITERAL],[",@",new Rn("unquote-splicing"),zn.LITERAL],[",",new Rn("unquote"),zn.LITERAL],["'>",new Rn("quote-promise"),zn.LITERAL]];Object.defineProperty(zn,"builtin",{writable:false,value:Hn.map(function(e){return e[0]})});Hn.forEach(function(e){var t=A(e,3),r=t[0],n=t[1],i=t[2];zn.append(r,n,i)});var Wn=function(){function p(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.whitespace,i=n===void 0?false:n;y(this,p);ii(this,"__input__",e.replace(/\r/g,""));var u={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(r){Object.defineProperty(t,r,{configurable:false,enumerable:false,get:function e(){return u[r]},set:function e(t){u[r]=t}})});this._whitespace=i;this._i=this._line=this._col=this._newline=0;this._state=this._next=this._token=null;this._prev_char=""}b(p,[{key:"get",value:function e(t){return this.__internal[t]}},{key:"set",value:function e(t,r){this.__internal[t]=r}},{key:"token",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){var r=this._line;if(this._whitespace&&this._token==="\n"){--r}return{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._i>=this.__input__.length){return Ma}if(this._token){return this.token(t)}var r=this.next_token();if(r){this._token=this.__input__.substring(this._i,this._next);return this.token(t)}return Ma}},{key:"skip",value:function e(){if(this._next!==null){this._token=null;this._i=this._next}}},{key:"read_line",value:function e(){var t=this.__input__.length;if(this._i>=t){return Ma}for(var r=this._i;r<t;++r){var n=this.__input__[r];if(n==="\n"){var i=this.__input__.substring(this._i,r);this._i=r+1;++this._line;return i}}return this.read_rest()}},{key:"read_rest",value:function e(){var t=this._i;this._i=this.__input__.length;return this.__input__.substring(t)}},{key:"read_string",value:function e(t){var r=this.__input__.length;if(this._i>=r){return Ma}if(t+this._i>=r){return this.read_rest()}var n=this._i+t;var i=this.__input__.substring(this._i,n);var u=i.match(/\n/g);if(u){this._line+=u.length}this._i=n;return i}},{key:"peek_char",value:function e(){if(this._i>=this.__input__.length){return Ma}return ua(this.__input__[this._i])}},{key:"read_char",value:function e(){var t=this.peek_char();this.skip_char();return t}},{key:"skip_char",value:function e(){if(this._i<this.__input__.length){++this._i;this._token=null}}},{key:"match_rule",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.prev_char,i=r["char"],u=r.next_char;var a=A(t,4),o=a[0],s=a[1],c=a[2],f=a[3];if(t.length!==5){throw new Error("Lexer: Invald rule of length ".concat(t.length))}if(!i.match(o)){return false}if(!Qn(s,n)){return false}if(!Qn(c,u)){return false}if(f!==this._state){return false}return true}},{key:"next_token",value:function e(){if(this._i>=this.__input__.length){return false}var t=true;e:for(var r=this._i,n=this.__input__.length;r<n;++r){var i=this.__input__[r];var u=this.__input__[r-1]||"";var a=this.__input__[r+1]||"";if(i==="\n"){++this._line;var o=this._newline;if(this._state===null){this._newline=r+1}if(this._whitespace&&this._state===null){this._next=r+1;this._col=this._i-o;return true}}if(t&&this._state===null&&i.match(/\s/)){if(this._whitespace){if(!a.match(/\s/)){this._next=r+1;this._col=this._i-this._newline;return true}else{continue}}else{this._i=r+1;continue}}t=false;var s=Cr(p.rules),c;try{for(s.s();!(c=s.n()).done;){var f=c.value;if(this.match_rule(f,{prev_char:u,char:i,next_char:a})){var l=f[f.length-1];this._state=l;if(this._state===null){this._next=r+1;this._col=this._i-this._newline;return true}continue e}}}catch(e){s.e(e)}finally{s.f()}if(this._state!==null){continue e}var h=this.__input__.split("\n")[this._line];throw new Error("Invalid Syntax at line ".concat(this._line,"\n").concat(h))}}}]);return p}();Wn.symbol_rule=function e(t,r){var n=Wn.literal_rule(t,r,Wn.boundary,/\S/);return n.concat([[/\S/,/\S/,Wn.boundary,null,null],[/\S/,/\S/,null,null,Wn.symbol],[/\S/,null,Wn.boundary,Wn.symbol,null]])};Wn.literal_rule=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(t.length===0){throw new Error("Lexer: invalid literal rule")}if(t.length===1){return[[t,n,i,null,null]]}var u=[];for(var a=0,o=t.length;a<o;++a){var s=[];s.push(t[a]);s.push(t[a-1]||n);s.push(t[a+1]||i);if(a===0){s.push(null);s.push(r)}else if(a===o-1){s.push(r);s.push(null)}else{s.push(r);s.push(r)}u.push(s)}return u};Wn.string=Symbol["for"]("string");Wn.symbol=Symbol["for"]("symbol");Wn.comment=Symbol["for"]("comment");Wn.regex=Symbol["for"]("regex");Wn.regex_class=Symbol["for"]("regex_class");Wn.character=Symbol["for"]("character");Wn.bracket=Symbol["for"]("bracket");Wn.b_symbol=Symbol["for"]("b_symbol");Wn.b_comment=Symbol["for"]("b_comment");Wn.i_comment=Symbol["for"]("i_comment");Wn.l_datum=Symbol["for"]("l_datum");Wn.dot=Symbol["for"]("dot");Wn.boundary=/^$|[\s()[\]']/;Wn._rules=[[/"/,/^$|[^\\]/,null,null,Wn.string],[/"/,/^$|[^\\]/,null,Wn.string,null],[/#/,null,/[bdxoeitf]/i,null,Wn.symbol],[/#/,null,/\\/,null,Wn.character],[/\\/,/#/,/\s/,Wn.character,Wn.character],[/\\/,/#/,/[()[\]]/,Wn.character,Wn.character],[/\s/,/\\/,null,Wn.character,null],[/\S/,null,Wn.boundary,Wn.character,null],[/#/,Wn.boundary,/\//,null,Wn.regex],[/[ \t]/,null,null,Wn.regex,Wn.regex],[/\[/,null,null,Wn.regex,Wn.regex_class],[/\]/,/[^\\]/,null,Wn.regex_class,Wn.regex],[/[()[\]]/,null,null,Wn.regex,Wn.regex],[/\//,/\\/,null,Wn.regex,Wn.regex],[/\//,/[^#]/,Wn.boundary,Wn.regex,null],[/[gimyus]/,/\//,Wn.boundary,Wn.regex,null],[/[gimyus]/,/\//,/[gimyus]/,Wn.regex,Wn.regex],[/[gimyus]/,/[gimyus]/,Wn.boundary,Wn.regex,null],[/;/,/^$|[^#]/,null,null,Wn.comment],[/[\s\S]/,null,/\n/,Wn.comment,null],[/\s/,null,null,Wn.comment,Wn.comment],[/#/,null,/\|/,null,Wn.b_comment],[/\s/,null,null,Wn.b_comment,Wn.b_comment],[/#/,/\|/,null,Wn.b_comment,null],[/#/,null,/;/,null,Wn.i_comment],[/;/,/#/,null,Wn.i_comment,null],[/#/,null,/[0-9]/,null,Wn.l_datum],[/=/,/[0-9]/,null,Wn.l_datum,null],[/#/,/[0-9]/,null,Wn.l_datum,null],[/\./,Wn.boundary,/,/,null,null],[/\|/,null,null,null,Wn.b_symbol],[/\s/,null,null,Wn.b_symbol,Wn.b_symbol],[/\|/,null,Wn.boundary,Wn.b_symbol,null]];Wn._brackets=[[/[()[\]]/,null,null,null,null]];Wn._symbol_rules=[[/\S/,Wn.boundary,Wn.boundary,null,null],[/\S/,Wn.boundary,null,null,Wn.symbol],[/\S/,null,Wn.boundary,null,null],[/\S/,null,null,null,Wn.symbol],[/\S/,null,Wn.boundary,Wn.symbol,null]];Wn._cache={valid:false,rules:null};zn.on(["remove","append"],function(){Wn._cache.valid=false;Wn._cache.rules=null});Object.defineProperty(Wn,"rules",{get:function e(){if(Wn._cache.valid){return Wn._cache.rules}var t=zn.names().sort(function(e,t){return t.length-e.length||e.localeCompare(t)});var r=t.reduce(function(e,t){var r=zn.get(t),n=r.type,i=r.symbol;var u;var a;if(t[0]==="#"){if(t.length===1){a=Symbol["for"](t)}else{a=Symbol["for"](t[1])}}else{a=i}if(n===zn.SYMBOL){u=Wn.symbol_rule(t,a)}else{u=Wn.literal_rule(t,a)}return e.concat(u)},[]);Wn._cache.rules=Wn._rules.concat(Wn._brackets,r,Wn._symbol_rules);Wn._cache.valid=true;return Wn._cache.rules}});function Qn(e,t){return e===null||t.match(e)}var Zn=function(){function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.env,n=t.meta,i=n===void 0?false:n,u=t.formatter,a=u===void 0?On:u;y(this,o);if(e instanceof aa){e=e.toString()}ii(this,"_formatter",a,{hidden:true});ii(this,"__lexer__",new Wn(e));ii(this,"__env__",r);ii(this,"_meta",i,{hidden:true});ii(this,"_refs",[],{hidden:true})}b(o,[{key:"resolve",value:function e(t){return this.__env__&&this.__env__.get(t,{throwError:false})}},{key:"peek",value:function(){var e=O(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=this.__lexer__.peek(true);if(!(r===Ma)){t.next=4;break}return t.abrupt("return",Ma);case 4:if(!this.is_comment(r.token)){t.next=7;break}this.skip();return t.abrupt("continue",0);case 7:if(!(r.token==="#;")){t.next=14;break}this.skip();if(!(this.__lexer__.peek()===Ma)){t.next=11;break}throw new Error("Lexer: syntax error eof found after comment");case 11:t.next=13;return this._read_object();case 13:return t.abrupt("continue",0);case 14:return t.abrupt("break",17);case 17:r=this._formatter(r);if(!this._meta){t.next=20;break}return t.abrupt("return",r);case 20:return t.abrupt("return",r.token);case 21:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function e(){this._refs.length=0}},{key:"skip",value:function e(){this.__lexer__.skip()}},{key:"read",value:function(){var e=O(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"match_datum_label",value:function e(t){var r=t.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"match_datum_ref",value:function e(t){var r=t.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"is_open",value:function e(t){return["(","["].includes(t)}},{key:"is_close",value:function e(t){return[")","]"].includes(t)}},{key:"read_list",value:function(){var e=O(j.mark(function e(){var r,n,i,u;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=ji,n=r;case 1:t.next=4;return this.peek();case 4:i=t.sent;if(!(i===Ma)){t.next=7;break}return t.abrupt("break",27);case 7:if(!this.is_close(i)){t.next=10;break}this.skip();return t.abrupt("break",27);case 10:if(!(i==="."&&r!==ji)){t.next=17;break}this.skip();t.next=14;return this._read_object();case 14:n.cdr=t.sent;t.next=25;break;case 17:t.t0=Ii;t.next=20;return this._read_object();case 20:t.t1=t.sent;t.t2=ji;u=new t.t0(t.t1,t.t2);if(r===ji){r=u}else{n.cdr=u}n=u;case 25:t.next=1;break;case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"read_value",value:function(){var e=O(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.read();case 2:r=t.sent;if(!(r===Ma)){t.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return t.abrupt("return",Dn(r));case 6:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"is_comment",value:function e(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function e(t){return So(t,{env:this.__env__,error:function e(t){throw t}})}},{key:"read_object",value:function(){var e=O(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:this.reset();t.next=3;return this._read_object();case 3:r=t.sent;if(r instanceof Kn){r=r.valueOf()}if(!this._refs.length){t.next=7;break}return t.abrupt("return",this._resolve_object(r));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_resolve_object",value:function(){var t=O(j.mark(function e(r){var n=this;var i;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!Array.isArray(r)){t.next=2;break}return t.abrupt("return",r.map(function(e){return n._resolve_object(e)}));case 2:if(!Ri(r)){t.next=6;break}i={};Object.keys(r).forEach(function(e){i[e]=n._resolve_object(r[e])});return t.abrupt("return",i);case 6:if(!(r instanceof Ii)){t.next=8;break}return t.abrupt("return",this._resolve_pair(r));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_resolve_pair",value:function(){var t=O(j.mark(function e(r){return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof Ii)){t.next=15;break}if(!(r.car instanceof Kn)){t.next=7;break}t.next=4;return r.car.valueOf();case 4:r.car=t.sent;t.next=8;break;case 7:this._resolve_pair(r.car);case 8:if(!(r.cdr instanceof Kn)){t.next=14;break}t.next=11;return r.cdr.valueOf();case 11:r.cdr=t.sent;t.next=15;break;case 14:this._resolve_pair(r.cdr);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_read_object",value:function(){var e=O(j.mark(function e(){var r,n,i,u,a,o,s,c,f;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;if(!(r===Ma)){t.next=5;break}return t.abrupt("return",r);case 5:if(!Vn(r)){t.next=35;break}n=zn.get(r);i=Jn(r);this.skip();t.next=11;return this._read_object();case 11:a=t.sent;if(i){t.next=22;break}o=this.__env__.get(n.symbol);if(!(typeof o==="function")){t.next=22;break}if(!Gn(r)){t.next=19;break}return t.abrupt("return",o.call(this.__env__,a));case 19:if(!(a instanceof Ii)){t.next=21;break}return t.abrupt("return",o.apply(this.__env__,a.to_array(false)));case 21:throw new Error("Parse Error: Invalid parser extension "+"invocation ".concat(n.symbol));case 22:if(Gn(r)){u=new Ii(n.symbol,new Ii(a,ji))}else{u=new Ii(n.symbol,a)}if(!i){t.next=25;break}return t.abrupt("return",u);case 25:if(!(o instanceof iu)){t.next=34;break}t.next=28;return this.evaluate(u);case 28:s=t.sent;if(!(s instanceof Ii||s instanceof Rn)){t.next=31;break}return t.abrupt("return",Ii.fromArray([Rn("quote"),s]));case 31:return t.abrupt("return",s);case 34:throw new Error("Parse Error: invlid parser extension: "+n.symbol);case 35:c=this.match_datum_ref(r);if(!(c!==null)){t.next=41;break}this.skip();if(!this._refs[c]){t.next=40;break}return t.abrupt("return",new Kn(c,this._refs[c]));case 40:throw new Error("Parse Error: invalid datum label #".concat(c,"#"));case 41:f=this.match_datum_label(r);if(!(f!==null)){t.next=48;break}this.skip();this._refs[f]=this._read_object();return t.abrupt("return",this._refs[f]);case 48:if(!this.is_open(r)){t.next=53;break}this.skip();return t.abrupt("return",this.read_list());case 53:return t.abrupt("return",this.read_value());case 54:case"end":return t.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return o}();var Kn=function(){function r(e,t){y(this,r);this.name=e;this.data=t}b(r,[{key:"valueOf",value:function e(){return this.data}}]);return r}();function Xn(e,t){return ei.apply(this,arguments)}function ei(){ei=e(j.mark(function e(r,n){var i,u;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!n){if(ro){n=ro.get("**interaction-environment**",{throwError:false})}else{n=no}}i=new Zn(r,{env:n});case 2:t.next=5;return C(i.read_object());case 5:u=t.sent;if(!(u===Ma)){t.next=8;break}return t.abrupt("break",12);case 8:t.next=10;return u;case 10:t.next=2;break;case 12:case"end":return t.stop()}}},e)}));return ei.apply(this,arguments)}function ti(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(mu(e)){var n=e.then(t);if(r===null){return n}else{return n["catch"](r)}}if(e instanceof Array){return ri(e,t,r)}if(Ri(e)){return ni(e,t,r)}return t(e)}function ri(t,e,r){if(t.find(mu)){return ti(Mn(t),function(e){if(Object.isFrozen(t)){Object.freeze(e)}return e},r)}return e(t)}function ni(t,e,r){var i=Object.keys(t);var n=[],u=[];var a=i.length;while(a--){var o=i[a];var s=t[o];n[a]=s;if(mu(s)){u.push(s)}}if(u.length){return ti(Mn(n),function(e){var n={};e.forEach(function(e,t){var r=i[t];n[r]=e});if(Object.isFrozen(t)){Object.freeze(n)}return n},r)}return e(t)}function ii(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=n.hidden,u=i===void 0?false:i;Object.defineProperty(e,t,{value:r,configurable:true,enumerable:!u})}function ui(r){var n,i,u,a,o,s,c,f;return j.async(function e(t){while(1){switch(t.prev=t.next){case 0:n=[];i=true;u=false;t.prev=3;o=F(r);case 5:t.next=7;return j.awrap(o.next());case 7:s=t.sent;i=s.done;t.next=11;return j.awrap(s.value);case 11:c=t.sent;if(i){t.next=18;break}f=c;n.push(f);case 15:i=true;t.next=5;break;case 18:t.next=24;break;case 20:t.prev=20;t.t0=t["catch"](3);u=true;a=t.t0;case 24:t.prev=24;t.prev=25;if(!(!i&&o["return"]!=null)){t.next=29;break}t.next=29;return j.awrap(o["return"]());case 29:t.prev=29;if(!u){t.next=32;break}throw a;case 32:return t.finish(29);case 33:return t.finish(24);case 34:return t.abrupt("return",n);case 35:case"end":return t.stop()}}},null,null,[[3,20,24,34],[25,,29,33]],Promise)}function ai(e,t){if(t instanceof RegExp){return function(e){return String(e).match(t)}}else if(_u(t)){return t}throw new Error("Invalid matcher")}function oi(e,t,r,n){if(typeof e!=="string"){t=arguments[0];r=arguments[1];n=arguments[2];e=null}if(r){if(n){t.__doc__=r}else{t.__doc__=si(r)}}if(e){t.__name__=e}else if(t.name&&!$u(t)){t.__name__=t.name}return t}function si(e){return e.split("\n").map(function(e){return e.trim()}).join("\n")}function ci(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=e.length;if(t<=0){throw Error("previousSexp: Invalid argument sexp = ".concat(t))}e:while(t--&&r>=0){var n=1;while(n>0){var i=e[--r];if(!i){break e}if(i==="("||i.token==="("){n--}else if(i===")"||i.token===")"){n++}}r--}return e.slice(r+1)}function fi(e){if(!e||!e.length){return 0}var t=e.length;if(e[t-1].token==="\n"){return 0}while(--t){if(e[t].token==="\n"){var r=(e[t+1]||{}).token;if(r){return r.length}}}return 0}function li(e,t){return f(e,t)===t.length;function f(r,n){function e(e,t){var r=Cr(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;var u=f(i,t);if(u!==-1){return u}}}catch(e){r.e(e)}finally{r.f()}return-1}function t(){return r[u]===Symbol["for"]("symbol")&&!An(n[o])}function i(){var e=r[u+1];var t=n[o+1];if(e!==undefined&&t!==undefined){return f([e],[t])}}var u=0;var a={};for(var o=0;o<n.length;++o){if(typeof r[u]==="undefined"){return o}if(r[u]instanceof _i){var s;if(["+","*"].includes(r[u].flag)){while(o<n.length){s=e(r[u].patterns,n.slice(o));if(s===-1){break}o+=s}o-=1;u++;continue}else if(r[u].flag==="?"){s=e(r[u].patterns,n.slice(o));if(s===-1){o-=2}else{u++}continue}}else if(r[u]instanceof RegExp){if(!n[o].match(r[u])){return-1}}else if(ss.LString.isString(r[u])){if(r[u].valueOf()!==n[o]){return-1}}else if(_(r[u])==="symbol"){if(r[u]===Symbol["for"]("*")){a[u]=a[u]||0;if(["(","["].includes(n[o])){a[u]++}else if([")","]"].includes(n[o])){a[u]--}if(typeof r[u+1]!=="undefined"&&a[u]===0&&i()===-1||a[u]>0){continue}}else if(t()){return-1}}else if(r[u]instanceof Array){var c=f(r[u],n.slice(o));if(c===-1||c+o>n.length){return-1}o+=c-1;u++;continue}else{return-1}u++}if(r.length!==u){return-1}return n.length}}function hi(e){this.__code__=e.replace(/\r/g,"")}hi.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*)?)$/],shift:{1:["&","#"]}}};hi.match=li;hi.prototype._options=function e(t){var r=hi.defaults;if(typeof t==="undefined"){return Object.assign({},r)}var n=t&&t.exceptions||{};var i=n.specials||[];var u=n.shift||{1:[]};return Br(Br(Br({},r),t),{},{exceptions:{specials:[].concat(k(r.exceptions.specials),k(i)),shift:Br(Br({},u),{},{1:[].concat(k(r.exceptions.shift[1]),k(u[1]))})}})};hi.prototype.indent=function e(t){var r=In(this.__code__,true);return this._indent(r,t)};hi.exception_shift=function(u,e){function t(e){if(!e.length){return false}if(e.indexOf(u)!==-1){return true}else{var t=e.filter(function(e){return e instanceof RegExp});if(!t.length){return false}var r=Cr(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(u.match(i)){return true}}}catch(e){r.e(e)}finally{r.f()}}return false}if(t(e.exceptions.specials)){return e.indent}var r=e.exceptions.shift;for(var n=0,i=Object.entries(r);n<i.length;n++){var a=A(i[n],2),o=a[0],s=a[1];if(t(s)){return+o}}return-1};hi.prototype._indent=function e(t,r){var n=this._options(r);var i=fi(t);var u=ci(t);var a=t[t.length-u.length-1];var o=t[t.length-1];if(o.token.match(/^"[\S\s]+[^"]$/)){return i+n.indent}if(u&&u.length){if(u[0].line>0){n.offset=0}if(u.toString()===t.toString()&&Po(u)){return n.offset+u[0].col}else if(u.length===1){return n.offset+u[0].col+1}else{var s=-1;if(a){var c=hi.exception_shift(a.token,n);if(c!==-1){s=c}}if(s===-1){s=hi.exception_shift(u[1].token,n)}if(s!==-1){return n.offset+u[0].col+s}else if(u[0].line<u[1].line){return n.offset+u[0].col+1}else if(u.length>3&&u[1].line===u[3].line){if(u[1].token==="("||u[1].token==="["){return n.offset+u[1].col}return n.offset+u[3].col}else if(u[0].line===u[1].line){return n.offset+n.indent+u[0].col}else{var f=u.slice(2);for(var l=0;l<f.length;++l){var h=f[l];if(h.token.trim()){return h.col}}}}}else{return 0}return i+n.indent};function pi(e){this.pattern=e}pi.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};pi.prototype.match=function(e){return e.match(this.pattern)};function _i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t.pop();this.patterns=t;this.flag=n}_i.prototype.toString=function(){var e=this.patterns.map(function(e){return Wi(e)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};hi.Pattern=_i;hi.Ahead=pi;var di=/^[[(]$/;var vi=/^[\])]$/;var mi=/[^()[\]]/;var yi=new pi(/[^)\]]/);var gi=Symbol["for"]("*");var bi=new _i([di,gi,vi],[mi],"+");var wi=new _i([di,gi,vi],"+");var Di=new _i([Symbol["for"]("symbol")],"?");var Ei=new _i([Symbol["for"]("symbol")],"*");var Ai=[di,Ei,vi];var Fi=new _i([di,Symbol["for"]("symbol"),gi,vi],"+");var xi=Oi("define","lambda","define-macro","syntax-rules");var Ci=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/;var ki=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;function Oi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}hi.rules=[[[wi],0,yi],[[di,Oi("begin","cond-expand")],1],[[di,ki,Di,di,Fi,vi],1],[[di,ki,Di,bi],1,yi],[[di,ki,di,Fi],1,yi],[[di,Ci,new _i([/[^()[\]]/],"+"),wi],1,yi],[[di,wi],1,yi],[[di,mi,wi],1,yi],[[di,Oi("lambda","if"),mi],1,yi],[[di,Oi("while"),mi,wi],1,yi],[[di,Oi("if"),mi,gi],1],[[di,xi,Ai],0,yi],[[di,xi,Ai,Fn],0,yi],[[di,xi,Ai,Fn,wi],0,yi],[[di,xi,Ai,wi],0,yi]];hi.prototype["break"]=function(){var e=this.__code__.replace(/\n[ \t]*/g,"\n ").replace(/^\s+/,"");var t=function e(t){if(t.token.match(Fn)||t.token.match(zr)){return t.token}else{return t.token.replace(/\s+/," ")}};var r=function e(t){for(var r=t.length;r--;){var n=t[r];if(n.trim()&&!Vn(n)){return t.length-r-1}}};var n=In(e,true).map(t).filter(function(e){return e!=="\n"});var i=hi.rules;e:for(var u=1;u<n.length;++u){if(!n[u].trim()){continue}var a=n.slice(0,u);var o={};i.map(function(e){return e[1]}).forEach(function(e){e=e.valueOf();if(e>0&&!o[e]){o[e]=ci(a,e)}});var s=Cr(i),c;try{for(s.s();!(c=s.n()).done;){var f=A(c.value,3),l=f[0],h=f[1],p=f[2];h=h.valueOf();var _=h>0?o[h]:a;var d=_.filter(function(e){return e.trim()&&!Vn(e)});var v=r(_);var m=li(l,d);var y=n.slice(u).find(function(e){return e.trim()&&!Vn(e)});if(m&&(p instanceof pi&&p.match(y)||!p)){var g=u-v;if(n[g]!=="\n"){if(!n[g].trim()){n[g]="\n"}else{n.splice(g,0,"\n");u++}}u+=v;continue e}}}catch(e){s.e(e)}finally{s.f()}}this.__code__=n.join("");return this};hi.prototype._spaces=function(e){return new Array(e+1).join(" ")};hi.prototype.format=function e(t){var r=this.__code__.replace(/[ \t]*\n[ \t]*/g,"\n ");var n=In(r,true);var i=this._options(t);var u=0;var a=0;for(var o=0;o<n.length;++o){var s=n[o];if(s.token==="\n"){u=this._indent(n.slice(0,o),i);a+=u;if(n[o+1]){n[o+1].token=this._spaces(u);u--;a--;for(var c=o+2;c<n.length;++c){n[c].offset+=a;n[c].col+=u;if(n[c].token==="\n"){o=c-1;break}}}}}return n.map(function(e){if(e.token.match(Fn)){if(e.token.match(/\n/)){var t=new Array(e.col+1).join(" ");var r=e.token.split("\n");e.token=[r[0]].concat(r.slice(1).map(function(e){return t+e})).join("\n")}}return e.token}).join("")};function Si(e,t){var r=Object.prototype.toString;var n="[object Array]";var i=[];var u=t&&e||e.slice();var a;if(!e.length){return i}a=u.pop();do{if(r.call(a)===n){u.push.apply(u,a)}else{i.push(a)}}while(u.length&&(a=u.pop())!==undefined);i.reverse();return i}function Bi(){}Bi.prototype.toString=function(){return"()"};Bi.prototype.valueOf=function(){return undefined};Bi.prototype.serialize=function(){return 0};Bi.prototype.to_object=function(){return{}};Bi.prototype.append=function(e){return new Ii(e,ji)};Bi.prototype.to_array=function(){return[]};var ji=new Bi;function Ii(e,t){if(typeof this!=="undefined"&&this.constructor!==Ii||typeof this==="undefined"){return new Ii(e,t)}this.car=e;this.cdr=t}function Pi(u,a){return function e(t){vo(u,t,["pair","nil"]);if(t===ji){return[]}var r=[];var n=t;while(true){if(n instanceof Ii){if(n.haveCycles("cdr")){break}var i=n.car;if(a&&i instanceof Ii){i=this.get(u).call(this,i)}r.push(i);n=n.cdr}else if(n===ji){break}else{throw new Error("".concat(u,": can't convert improper list"))}}return r}}Ii.prototype.flatten=function(){return Ii.fromArray(Si(this.to_array()))};Ii.prototype.length=function(){var e=0;var t=this;while(true){if(!t||t===ji||!(t instanceof Ii)||t.haveCycles("cdr")){break}e++;t=t.cdr}return e};Ii.match=function(e,t){if(e instanceof Rn){return Rn.is(e,t)}else if(e instanceof Ii){return Ii.match(e.car,t)||Ii.match(e.cdr,t)}else if(Array.isArray(e)){return e.some(function(e){return Ii.match(e,t)})}else if(Ri(e)){return Object.values(e).some(function(e){return Ii.match(e,t)})}return false};Ii.prototype.find=function(e){return Ii.match(this,e)};Ii.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=new Map;function i(e){if(e instanceof Ii){if(n.has(e)){return n.get(e)}var t=new Ii;n.set(e,t);if(r){t.car=i(e.car)}else{t.car=e.car}t.cdr=i(e.cdr);t[Pu]=e[Pu];return t}return e}return i(this)};Ii.prototype.last_pair=function(){var e=this;while(true){if(e.cdr===ji){return e}e=e.cdr}};Ii.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=[];if(this.car instanceof Ii){if(e){t.push(this.car.to_array())}else{t.push(this.car)}}else{t.push(this.car.valueOf())}if(this.cdr instanceof Ii){t=t.concat(this.cdr.to_array())}return t};Ii.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof Ii||r&&e instanceof Array&&e[ju]){return e}if(t===false){var n=ji;for(var i=e.length;i--;){n=new Ii(e[i],n)}return n}if(e.length&&!(e instanceof Array)){e=k(e)}var u=ji;var a=e.length;while(a--){var o=e[a];if(o instanceof Array){o=Ii.fromArray(o,t,r)}else if(typeof o==="string"){o=aa(o)}else if(typeof o==="number"&&!Number.isNaN(o)){o=pa(o)}u=new Ii(o,u)}return u};Ii.prototype.to_object=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this;var r={};while(true){if(t instanceof Ii&&t.car instanceof Ii){var n=t.car;var i=n.car;if(i instanceof Rn){i=i.__name__}if(i instanceof aa){i=i.valueOf()}var u=n.cdr;if(u instanceof Ii){u=u.to_object(e)}if(yo(u)){if(!e){u=u.valueOf()}}r[i]=u;t=t.cdr}else{break}}return r};Ii.fromPairs=function(e){return e.reduce(function(e,t){return new Ii(new Ii(new Rn(t[0]),t[1]),e)},ji)};Ii.fromObject=function(t){var e=Object.keys(t).map(function(e){return[e,t[e]]});return Ii.fromPairs(e)};Ii.prototype.reduce=function(e){var t=this;var r=ji;while(true){if(t!==ji){r=e(r,t.car);t=t.cdr}else{break}}return r};Ii.prototype.reverse=function(){if(this.haveCycles()){throw new Error("You can't reverse list that have cycles")}var e=this;var t=ji;while(e!==ji){var r=e.cdr;e.cdr=t;t=e;e=r}return t};Ii.prototype.transform=function(n){function i(e){if(e instanceof Ii){if(e.replace){delete e.replace;return e}var t=n(e.car);if(t instanceof Ii){t=i(t)}var r=n(e.cdr);if(r instanceof Ii){r=i(r)}return new Ii(t,r)}return e}return i(this)};Ii.prototype.map=function(e){if(typeof this.car!=="undefined"){return new Ii(e(this.car),this.cdr===ji?ji:this.cdr.map(e))}else{return ji}};var Ni=new Map;function Ri(e){return e&&_(e)==="object"&&e.constructor===Object}var Ti=Object.getOwnPropertyNames(Array.prototype);var Li=[];Ti.forEach(function(e){Li.push(Array[e],Array.prototype[e])});function Ui(e){e=Eu(e);return Li.includes(e)}function qi(e){return _u(e)&&($u(e)||e.__doc__)}function Mi(r){var e=r.constructor||Object;var n=Ri(r);var i=_u(r[Symbol.asyncIterator])||_u(r[Symbol.iterator]);var u;if(Ni.has(e)){u=Ni.get(e)}else{Ni.forEach(function(e,t){t=Eu(t);if(r.constructor===t&&(t===Object&&n&&!i||t!==Object)){u=e}})}return u}var Yi=new Map;[[true,"#t"],[false,"#f"],[null,"null"],[undefined,"#<undefined>"]].forEach(function(e){var t=A(e,2),r=t[0],n=t[1];Yi.set(r,n)});function $i(r){if(r&&_(r)==="object"){var n={};var e=Object.getOwnPropertySymbols(r);e.forEach(function(e){var t=e.toString().replace(/Symbol\(([^)]+)\)/,"$1");n[t]=Wi(r[e])});var t=Object.getOwnPropertyNames(r);t.forEach(function(e){var t=r[e];if(t&&_(t)==="object"&&t.constructor===Object){n[e]=$i(t)}else{n[e]=Wi(t)}});return n}return r}function zi(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function Vi(e,t){return e.hasOwnProperty(t)&&_u(e.toString)}function Ji(e){if(Ju(e)){return"#<procedure(native)>"}var t=e.prototype&&e.prototype.constructor;if(_u(t)&&$u(t)){if(e[Nu]&&t.hasOwnProperty("__name__")){var r=t.__name__;if(aa.isString(r)){r=r.toString();return"#<class:".concat(r,">")}return"#<class>"}}if(e.hasOwnProperty("__name__")){var n=e.__name__;if(_(n)==="symbol"){n=Tn(n)}if(typeof n==="string"){return"#<procedure:".concat(n,">")}}if(Vi(e,"toString")){return e.toString()}else if(e.name&&!$u(e)){return"#<procedure:".concat(e.name.trim(),">")}else{return"#<procedure>"}}var Gi=new Map;[[Error,function(e){return e.message}],[Ii,function(e,t){var r=t.quote,n=t.skip_cycles,i=t.pair_args;if(!n){e.markCycles()}return e.toString.apply(e,[r].concat(k(i)))}],[ua,function(e,t){var r=t.quote;if(r){return e.toString()}return e.valueOf()}],[aa,function(e,t){var r=t.quote;e=e.toString();if(r){return JSON.stringify(e).replace(/\\n/g,"\n")}return e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=A(e,2),r=t[0],n=t[1];Gi.set(r,n)});var Hi=[Rn,pa,iu,Ga,ka,Oa,Va,qn];function Wi(e,t,r){if(typeof jQuery!=="undefined"&&e instanceof jQuery.fn.init){return"#<jQuery("+e.length+")>"}if(Yi.has(e)){return Yi.get(e)}if(Qi(e)){return"#<prototype>"}if(e){var n=e.constructor;if(Gi.has(n)){for(var i=arguments.length,u=new Array(i>3?i-3:0),a=3;a<i;a++){u[a-3]=arguments[a]}return Gi.get(n)(e,{quote:t,skip_cycles:r,pair_args:u})}}var o=Cr(Hi),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;if(e instanceof c){return e.toString(t)}}}catch(e){o.e(e)}finally{o.f()}if([ji,Ma].includes(e)){return e.toString()}if(_u(e)){return Ji(e)}if(e===jr){return"#<js:global>"}if(e===null){return"null"}if(_(e)==="object"){var f=e.constructor;if(!f){f=Object}var l;if(typeof f.__class__==="string"){l=f.__class__}else{var h=Mi(e);if(h){if(_u(h)){return h(e,t)}else{throw new Error("toString: Invalid repr value")}}l=f.name}if(_u(e.toString)&&$u(e.toString)){return e.toString().valueOf()}if(wo(e)==="instance"){if($u(f)&&f.__name__){l=f.__name__.valueOf()}else if(!Ju(f)){l="instance"}}if(bo(e,Symbol.iterator)){if(l){return"#<iterator(".concat(l,")>")}return"#<iterator>"}if(bo(e,Symbol.asyncIterator)){if(l){return"#<asyncIterator(".concat(l,")>")}return"#<asyncIterator>"}if(l!==""){return"#<"+l+">"}return"#<Object>"}if(typeof e!=="string"){return e.toString()}return e}function Qi(e){return e&&_(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor==="function"&&e.constructor.prototype===e}Ii.prototype.markCycles=function(){Zi(this);return this};Ii.prototype.haveCycles=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){return this.haveCycles("car")||this.haveCycles("cdr")}return!!(this[Pu]&&this[Pu][e])};function Zi(e){var t=[];var i=[];var u=[];function a(e){if(!t.includes(e)){t.push(e)}}function o(e,t,r,n){if(r instanceof Ii){if(n.includes(r)){if(!u.includes(r)){u.push(r)}if(!e[Pu]){e[Pu]={}}e[Pu][t]=r;if(!i.includes(e)){i.push(e)}return true}}}var s=Bn(function e(t,r){if(t instanceof Ii){delete t.ref;delete t[Pu];a(t);r.push(t);var n=o(t,"car",t.car,r);var i=o(t,"cdr",t.cdr,r);if(!n){s(t.car,r.slice())}if(!i){return new Sn(function(){return e(t.cdr,r.slice())})}}});function r(e,t){if(e[Pu][t]instanceof Ii){var r=n.indexOf(e[Pu][t]);e[Pu][t]="#".concat(r,"#")}}s(e,[]);var n=t.filter(function(e){return u.includes(e)});n.forEach(function(e,t){e[Iu]="#".concat(t,"=")});i.forEach(function(e){r(e,"car");r(e,"cdr")})}Ii.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.nested,n=r===void 0?false:r;var i=[];if(this[Iu]){i.push(this[Iu]+"(")}else if(!n){i.push("(")}var u;if(this[Pu]&&this[Pu].car){u=this[Pu].car}else{u=Wi(this.car,e,true)}if(u!==undefined){i.push(u)}if(this.cdr instanceof Ii){if(this[Pu]&&this[Pu].cdr){i.push(" . ");i.push(this[Pu].cdr)}else{if(this.cdr[Iu]){i.push(" . ")}else{i.push(" ")}var a=this.cdr.toString(e,{nested:true});i.push(a)}}else if(this.cdr!==ji){i=i.concat([" . ",Wi(this.cdr,e,true)])}if(!n||this[Iu]){i.push(")")}return i.join("")};Ii.prototype.set=function(e,t){this[e]=t;if(t instanceof Ii){this.markCycles()}};Ii.prototype.append=function(e){if(e instanceof Array){return this.append(Ii.fromArray(e))}var t=this;if(t.car===undefined){if(e instanceof Ii){this.car=e.car;this.cdr=e.cdr}else{this.car=e}}else if(e!==ji){while(true){if(t instanceof Ii&&t.cdr!==ji){t=t.cdr}else{break}}t.cdr=e}return this};Ii.prototype.serialize=function(){return[this.car,this.cdr]};Ii.prototype[Symbol.iterator]=function(){var r=this;return{next:function e(){var t=r;r=t.cdr;if(t===ji){return{value:undefined,done:true}}else{return{value:t.car,done:false}}}}};function Ki(e){return e<0?-e:e}function Xi(e,t){var r=h(t),n=r[0],i=r.slice(1);while(i.length>0){var u=i,a=A(u,1),o=a[0];if(!e(n,o)){return false}var s=i;var c=h(s);n=c[0];i=c.slice(1)}return true}function eu(e,t){if(_u(e)){return _u(t)&&Eu(e)===Eu(t)}else if(e instanceof pa){if(!(t instanceof pa)){return false}var r;if(e.__type__===t.__type__){if(e.__type__==="complex"){r=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__}else{r=true}if(r&&e.cmp(t)===0){if(e.valueOf()===0){return Object.is(e.valueOf(),t.valueOf())}return true}}return false}else if(typeof e==="number"){if(typeof t!=="number"){return false}if(Number.isNaN(e)){return Number.isNaN(t)}if(e===Number.NEGATIVE_INFINITY){return t===Number.NEGATIVE_INFINITY}if(e===Number.POSITIVE_INFINITY){return t===Number.POSITIVE_INFINITY}return eu(pa(e),pa(t))}else if(e instanceof ua){if(!(t instanceof ua)){return false}return e.__char__===t.__char__}else{return e===t}}function tu(e,t){if(wo(e)!==wo(t)){return false}if(!ru(e)){return false}if(e instanceof RegExp){return e.source===t.source}if(e instanceof aa){return e.valueOf()===t.valueOf()}return eu(e,t)}function ru(e){return e instanceof Rn||aa.isString(e)||e===ji||e===null||e instanceof ua||e instanceof pa||e===true||e===false}var nu=function(){if(Math.trunc){return Math.trunc}else{return function(e){if(e===0){return 0}else if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}}}();function iu(e,t,r,n){if(typeof this!=="undefined"&&this.constructor!==iu||typeof this==="undefined"){return new iu(e,t)}vo("Macro",e,"string",1);vo("Macro",t,"function",2);if(r){if(n){this.__doc__=r}else{this.__doc__=si(r)}}this.__name__=e;this.__fn__=t}iu.defmacro=function(e,t,r,n){var i=new iu(e,t,r,n);i.__defmacro__=true;return i};iu.prototype.invoke=function(e,t,r){var n=t.env,i=t.dynamic_scope,u=t.error;var a={dynamic_scope:i,error:u,macro_expand:r};var o=this.__fn__.call(n,e,a,this.__name__);return o};iu.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var uu="define-macro";var au=-1e4;function ou(c){return function(){var r=O(j.mark(function e(r,y){var u,g,n,i,a,b,w,D,E,A,F,x,o,C,s;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:s=function e(){s=O(j.mark(function e(r,n,i){var u,a,o,s,c,f,l,h,p,_,d,v,m;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r instanceof Ii&&r.car instanceof Rn)){t.next=50;break}if(!r[ju]){t.next=3;break}return t.abrupt("return",r);case 3:u=r.car.valueOf();a=i.get(r.car,{throwError:false});o=b(r.car);s=o||w(a,r)||D(a);if(!(s&&r.cdr.car instanceof Ii)){t.next=28;break}if(!o){t.next=15;break}g=A(r.cdr.car);t.next=12;return x(r.cdr.car,n);case 12:c=t.sent;t.next=17;break;case 15:g=E(r.cdr.car);c=r.cdr.car;case 17:t.t0=Ii;t.t1=r.car;t.t2=Ii;t.t3=c;t.next=23;return C(r.cdr.cdr,n,i);case 23:t.t4=t.sent;t.t5=new t.t2(t.t3,t.t4);return t.abrupt("return",new t.t0(t.t1,t.t5));case 28:if(!F(u,a)){t.next=50;break}f=a instanceof su?r:r.cdr;t.next=32;return a.invoke(f,Br(Br({},y),{},{env:i}),true);case 32:l=t.sent;if(!(a instanceof su)){t.next=41;break}h=l,p=h.expr,_=h.scope;if(!(p instanceof Ii)){t.next=40;break}if(!(n!==-1&&n<=1||n<au)){t.next=38;break}return t.abrupt("return",p);case 38:if(n!==-1){n=n-1}return t.abrupt("return",C(p,n,_));case 40:l=p;case 41:if(!(l instanceof Rn)){t.next=43;break}return t.abrupt("return",Ha(l));case 43:if(!(l instanceof Ii)){t.next=48;break}if(!(n!==-1&&n<=1||n<au)){t.next=46;break}return t.abrupt("return",l);case 46:if(n!==-1){n=n-1}return t.abrupt("return",C(l,n,i));case 48:if(!ru(l)){t.next=50;break}return t.abrupt("return",l);case 50:d=r.car;if(!(d instanceof Ii)){t.next=55;break}t.next=54;return C(d,n,i);case 54:d=t.sent;case 55:v=r.cdr;if(!(v instanceof Ii)){t.next=60;break}t.next=59;return C(v,n,i);case 59:v=t.sent;case 60:m=new Ii(d,v);return t.abrupt("return",m);case 62:case"end":return t.stop()}}},e)}));return s.apply(this,arguments)};C=function e(t,r,n){return s.apply(this,arguments)};o=function e(){o=O(j.mark(function e(r,n){var i;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(r===ji)){t.next=2;break}return t.abrupt("return",ji);case 2:i=r.car;t.t0=Ii;t.t1=Ii;t.t2=i.car;t.next=8;return C(i.cdr,n,u);case 8:t.t3=t.sent;t.t4=new t.t1(t.t2,t.t3);t.next=12;return x(r.cdr);case 12:t.t5=t.sent;return t.abrupt("return",new t.t0(t.t4,t.t5));case 14:case"end":return t.stop()}}},e)}));return o.apply(this,arguments)};x=function e(t,r){return o.apply(this,arguments)};F=function e(t,r){return r instanceof iu&&r.__defmacro__&&!g.includes(t)};A=function e(t){return[].concat(k(g),k(t.to_array(false).map(function(e){if(e instanceof Ii){return e.car.valueOf()}throw new Error("macroexpand: Invalid let binding")})))};E=function e(t){var r=[];while(true){if(t!==ji){if(t instanceof Rn){r.push(t.valueOf());break}r.push(t.car.valueOf());t=t.cdr}else{break}}return[].concat(k(g),r)};D=function e(t){return t===i};w=function e(t,r){return t===a&&r.cdr.car instanceof Ii};b=function e(t){var r=t.valueOf();return n.includes(r)};u=y["env"]=this;g=[];n=["let","let*","letrec"];i=ro.get("lambda");a=ro.get("define");if(!(r.cdr instanceof Ii&&pa.isNumber(r.cdr.car))){t.next=21;break}t.t0=Ha;t.next=19;return C(r,r.cdr.car.valueOf(),u);case 19:t.t1=t.sent.car;return t.abrupt("return",(0,t.t0)(t.t1));case 21:if(!c){t.next=27;break}t.t2=Ha;t.next=25;return C(r,1,u);case 25:t.t3=t.sent.car;return t.abrupt("return",(0,t.t2)(t.t3));case 27:t.t4=Ha;t.next=30;return C(r,-1,u);case 30:t.t5=t.sent.car;return t.abrupt("return",(0,t.t4)(t.t5));case 32:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()}function su(e,t){this.__env__=t;this.__fn__=e;this.__defmacro__=true}su.__merge_env__=Symbol["for"]("merge");su.prototype=Object.create(iu.prototype);su.prototype.invoke=function(e,t,r){var n=t.error,i=t.env;var u={error:n,env:i,dynamic_scope:this.__env__,macro_expand:r};return this.__fn__.call(i,e,u,this.__name__||"syntax")};su.prototype.constructor=su;su.prototype.toString=function(){if(this.__name__){return"#<syntax:".concat(this.__name__,">")}return"#<syntax>"};su.className="syntax";var cu=function(e){u(r,e);var t=Fr(r);function r(){y(this,r);return t.apply(this,arguments)}return r}(su);su.Parameter=cu;function fu(e,t,w,D){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var E={"...":{symbols:{},lists:[]},symbols:{}};var A=r.expansion,F=r.define;function x(e){if(Ur()){console.log(e)}}x(w);function C(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;x({code:t&&Wi(t,true),pattern:e&&Wi(e,true)});if(ru(e)&&!(e instanceof Rn)){return tu(e,t)}if(e instanceof Rn&&w.includes(e.literal())){var i=A.ref(t);if(Rn.is(t,e)){if(typeof i==="undefined"){return true}return i===F||i===ro}return false}if(e instanceof Ii&&e.car instanceof Ii&&e.car.cdr instanceof Ii&&Rn.is(e.car.cdr.car,D)){x(">> 0");if(t===ji){x({pattern:e.toString()});if(e.car.car instanceof Rn){if(e.car.cdr instanceof Ii&&Rn.is(e.car.cdr.car,D)){var u=e.car.car.valueOf();var a=e.last_pair();if(Rn.is(a.car,D)){E["..."].symbols[u]=null;return true}else{return false}}var o=e.car.car.valueOf();if(E["..."].symbols[o]){throw new Error("syntax: named ellipsis can only "+"appear onces")}E["..."].symbols[o]=t}}}if(e instanceof Ii&&e.cdr instanceof Ii&&Rn.is(e.cdr.car,D)){if(e.cdr.cdr!==ji){if(e.cdr.cdr instanceof Ii){var s=e.cdr.cdr.length();var c=t.length();var f=t;while(c-1>s){f=f.cdr;c--}var l=f.cdr;f.cdr=ji;if(!C(e.cdr.cdr,l,r,n)){return false}}}if(e.car instanceof Rn){var h=e.car.__name__;if(E["..."].symbols[h]&&!r.includes(h)&&!n){throw new Error("syntax: named ellipsis can only appear onces")}x(">> 1");if(t===ji){x(">> 2");if(n){x("NIL");E["..."].symbols[h]=ji}else{x("NULL");E["..."].symbols[h]=null}}else if(t instanceof Ii&&(t.car instanceof Ii||t.car===ji)){x(">> 3 "+n);if(n){if(E["..."].symbols[h]){var p=E["..."].symbols[h];if(p===ji){p=new Ii(ji,new Ii(t,ji))}else{p=p.append(new Ii(t,ji))}E["..."].symbols[h]=p}else{E["..."].symbols[h]=new Ii(t,ji)}}else{x(">> 4");E["..."].symbols[h]=new Ii(t,ji)}}else{x(">> 6");if(t instanceof Ii){x(">> 7 "+n);r.push(h);if(!E["..."].symbols[h]){E["..."].symbols[h]=new Ii(t,ji)}else{var _=E["..."].symbols[h];E["..."].symbols[h]=_.append(new Ii(t,ji))}x({IIIIII:E["..."].symbols[h].toString()})}else{x(">> 8");return false}}return true}else if(e.car instanceof Ii){var d=k(r);if(t===ji){x(">> 9");E["..."].lists.push(ji);return true}x(">> 10");var v=t;while(v instanceof Ii){if(!C(e.car,v.car,d,true)){return false}v=v.cdr}return true}return false}if(e instanceof Rn){if(Rn.is(e,D)){throw new Error("syntax: invalid usage of ellipsis")}x(">> 11");var m=e.__name__;if(w.includes(m)){return true}x({name:m,ellipsis:n});if(n){E["..."].symbols[m]=E["..."].symbols[m]||[];E["..."].symbols[m].push(t)}E.symbols[m]=t;if(!E.symbols[m]);return true}if(e instanceof Ii&&t instanceof Ii){x(">> 12");x({a:12,code:t&&t.toString(),pattern:e.toString()});if(t.cdr===ji){var y=e.car instanceof Rn&&e.cdr instanceof Rn;if(y){if(!C(e.car,t.car,r,n)){return false}x(">> 12 | 1");var g=e.cdr.valueOf();if(!(g in E.symbols)){E.symbols[g]=ji}g=e.car.valueOf();if(!(g in E.symbols)){E.symbols[g]=t.car}return true}}x({pattern:e.toString(),code:t.toString()});if(e.cdr instanceof Ii&&e.car instanceof Rn&&e.cdr.cdr instanceof Ii&&e.cdr.car instanceof Rn&&Rn.is(e.cdr.cdr.car,D)&&e.cdr.cdr.cdr instanceof Ii&&!Rn.is(e.cdr.cdr.cdr.car,D)&&C(e.car,t.car,r,n)&&C(e.cdr.cdr.cdr,t.cdr,r,n)){var b=e.cdr.car.__name__;x({pattern:e.car.toString(),code:t.car.toString(),name:b});if(w.includes(b)){return true}E["..."].symbols[b]=null;return true}x("recur");if(C(e.car,t.car,r,n)&&C(e.cdr,t.cdr,r,n)){return true}}else if(e===ji&&(t===ji||t===undefined)){return true}else if(e.car instanceof Ii&&Rn.is(e.car.car,D)){throw new Error("syntax: invalid usage of ellipsis")}else{return false}}if(C(e,t)){return E}}function lu(e,i){function u(t){if(t instanceof Ii){if(!i.length){return t}var e=u(t.car);var r=u(t.cdr);return new Ii(e,r)}else if(t instanceof Rn){var n=i.find(function(e){return e.gensym===t});if(n){return Rn(n.name)}return t}else{return t}}return u(e)}function hu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var O=e.bindings,t=e.expr,S=e.scope,a=e.symbols,c=e.names,B=e.ellipsis;var f={};function o(e){if(e instanceof Rn){return true}return["string","symbol"].includes(_(e))}function j(e){if(!o(e)){var t=wo(e);throw new Error("syntax: internal error, need symbol got ".concat(t))}var r=e.valueOf();if(r===B){throw new Error("syntax: internal error, ellipis not transformed")}var n=_(r);if(["string","symbol"].includes(n)){if(r in O.symbols){return O.symbols[r]}else if(n==="string"&&r.match(/\./)){var i=r.split(".");var u=i[0];if(u in O.symbols){return Ii.fromArray([Rn("."),O.symbols[u]].concat(i.slice(1).map(function(e){return aa(e)})))}}}if(a.includes(r)){return Rn(r)}return s(r)}function I(e){if(Ur()){console.log(e)}}function s(e){if(!f[e]){var t=S.ref(e);var r=Un(e);if(t){var n=S.get(e);S.set(r,n)}else{var i=S.get(e,{throwError:false});if(typeof i!=="undefined"){S.set(r,i)}}c.push({name:e,gensym:r});f[e]=r;if(typeof e==="string"&&e.match(/\./)){var u=e.split(".").filter(Boolean),a=h(u),o=a[0],s=a.slice(1);if(f[o]){Mu(r,"__object__",[f[o]].concat(k(s)))}}}return f[e]}function P(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var i=r.nested;I(" ==> "+e.toString(true));I(t);if(e instanceof Rn){var u=e.valueOf();I("[t 1");if(t[u]){if(t[u]instanceof Ii){var a=t[u],o=a.car,s=a.cdr;if(i){var c=o.car,f=o.cdr;if(f!==ji){n(u,new Ii(f,ji))}return c}if(s!==ji){n(u,s)}return o}else if(t[u]instanceof Array){n(u,t[u].slice(1));return t[u][0]}}return j(u)}if(e instanceof Ii){if(e.car instanceof Rn&&e.cdr instanceof Ii&&Rn.is(e.cdr.car,B)){I("[t 2");var l=e.car.valueOf();var h=t[l];I({expr:e.toString(true),name:l,bindings:t,item:h});if(h===null){return}else if(h){I({b:t[l].toString()});if(h instanceof Ii){I("[t 2 Pair "+i);I({______:h.toString()});var p=h.car,_=h.cdr;if(i){if(_!==ji){I("|| next 1");n(l,_)}I({car:p.toString()});return p}else{if(p.cdr!==ji){I("|| next 2");n(l,new Ii(p.cdr,_))}I({car:p.car.toString()});return p.car}}else if(h instanceof Array){I("[t 2 Array "+i);if(i){n(l,h.slice(1));return Ii.fromArray(h)}else{var d=h.slice(1);if(d.length){n(l,d)}return h[0]}}else{return h}}}I("[t 3 recur "+e.toString());var v=P(e.car,t,r,n);var m=P(e.cdr,t,r,n);return new Ii(v,m)}return e}function N(t,r){var e=Object.values(t);var n=Object.getOwnPropertySymbols(t);if(n.length){e.push.apply(e,k(n.map(function(e){return t[e]})))}return e.length&&e.every(function(e){if(e===null){return!r}return e instanceof Ii||e===ji||e instanceof Array&&e.length})}function R(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function T(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},t=e.disabled;I("traverse>> "+i.toString());if(i instanceof Ii){if(!t&&i.car instanceof Ii&&Rn.is(i.car.car,B)){return T(i.car.cdr,{disabled:true})}if(i.cdr instanceof Ii&&Rn.is(i.cdr.car,B)&&!t){I(">> 1");var r=O["..."].symbols;var n=Object.values(r);if(n.length&&n.every(function(e){return e===null})){return T(i.cdr.cdr,{disabled:t})}var u=R(r);var a=i.car instanceof Rn&&Rn.is(i.cdr.cdr.car,B);if(i.car instanceof Ii||a){if(O["..."].lists[0]===ji){return ji}var o=i.car;if(a){o=new Ii(i.car,new Ii(i.cdr.car,ji))}I(">> 2");var s;if(u.length){I(">> 2 (a)");var c=Br({},r);s=ji;var f=function e(){if(!N(c)){return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(o,c,{nested:true},t);if(r!==undefined){if(a){if(s===ji){s=r}else{s=s.append(r)}}else{s=new Ii(r,s)}}c=n};while(true){var l=f();if(l==="break")break}if(s!==ji&&!a){s=s.reverse()}if(i.cdr.cdr!==ji&&!Rn.is(i.cdr.cdr.car,B)){var h=T(i.cdr.cdr,{disabled:t});return s.append(h)}return s}else{I(">> 3");var p=P(i.car,r,{nested:true});if(p){return new Ii(p,ji)}return ji}}else if(i.car instanceof Rn){I(">> 4");if(Rn.is(i.cdr.cdr.car,B)){I(">> 4 (a)")}else{I(">> 4 (b)")}var _=i.car.__name__;var d=L({},_,r[_]);var v=r[_]===null;var m=ji;var y=function e(){if(!N(d,true)){I({bind:d});return"break"}var n={};var t=function e(t,r){n[t]=r};var r=P(i,d,{nested:false},t);I({value:r.toString()});if(typeof r!=="undefined"){m=new Ii(r,m)}d=n};while(true){var g=y();if(g==="break")break}if(m!==ji){m=m.reverse()}if(i.cdr instanceof Ii){if(i.cdr.cdr instanceof Ii||i.cdr.cdr instanceof Rn){var b=T(i.cdr.cdr,{disabled:t});if(v){return b}I("<<<< 1");m.append(b)}}I("<<<< 2");return m}}var w=T(i.car,{disabled:t});var D;var E;if(i.car instanceof Rn){var A=S.get(i.car,{throwError:false});E=A instanceof iu&&A.__name__==="syntax-rules"}if(E){if(i.cdr.car instanceof Rn){D=new Ii(T(i.cdr.car,{disabled:t}),new Ii(i.cdr.cdr.car,T(i.cdr.cdr.cdr,{disabled:t})))}else{D=new Ii(i.cdr.car,T(i.cdr.cdr,{disabled:t}))}I("REST >>>> "+D.toString())}else{D=T(i.cdr,{disabled:t})}I({a:true,car:Wi(i.car),cdr:Wi(i.cdr),head:Wi(w),rest:Wi(D)});return new Ii(w,D)}if(i instanceof Rn){if(t&&Rn.is(i,B)){return i}var F=Object.keys(O["..."].symbols);var x=i.literal();if(F.includes(x)){var C="missing ellipsis symbol next to name `".concat(x,"'");throw new Error("syntax-rules: ".concat(C))}var k=j(i);if(typeof k!=="undefined"){return k}}return i}return T(t,{})}function pu(e){return yu(e)||e===ji||e===null}function _u(e){return typeof e==="function"&&typeof e.bind==="function"}function du(e){return e instanceof ko}function vu(e){return _u(e)||du(e)}function mu(e){if(e instanceof qn){return false}if(e instanceof Promise){return true}return e&&_u(e.then)}function yu(e){return typeof e==="undefined"}function gu(e){switch(_(e)){case"string":return aa(e);case"bigint":return pa(e);case"number":if(Number.isNaN(e)){return eo}else{return pa(e)}}return e}function bu(n,i){var e=Object.getOwnPropertyNames(n);var t=Object.getOwnPropertySymbols(n);e.concat(t).forEach(function(e){var t=i(n[e]);var r=Object.getOwnPropertyDescriptor(n,e);if(!r||r.writable&&n[e]!==t){n[e]=t}});return n}function wu(t){var e=[aa,ua,pa].some(function(e){return t instanceof e});if(e){return t.valueOf()}if(t instanceof Array){return t.map(wu)}if(t instanceof qn){delete t.then}if(Ri(t)){return bu(t,wu)}return t}function Du(e,t){if(e instanceof Ii){e.markCycles();return Ha(e)}if(_u(e)){if(t){return Au(e,t)}}return gu(e)}function Eu(e){if(xu(e)){return e[Bu]}return e}function Au(e,t){if(e[Symbol["for"]("__bound__")]){return e}var r=e.bind(t);var n=Object.getOwnPropertyNames(e);var i=Cr(n),u;try{for(i.s();!(u=i.n()).done;){var a=u.value;if(qu(a)){try{r[a]=e[a]}catch(e){}}}}catch(e){i.e(e)}finally{i.f()}Mu(r,"__fn__",e);Mu(r,"__context__",t);Mu(r,"__bound__",true);if(Ju(e)){Mu(r,"__native__",true)}if(Ri(t)&&$u(e)){Mu(r,"__method__",true)}r.valueOf=function(){return e};return r}function Fu(e){return xu(e)&&e[Symbol["for"]("__context__")]===Object}function xu(e){return!!(_u(e)&&e[Bu])}function Cu(e){if(_u(e)){var t=e[Su];if(t&&(t===ss||t.constructor&&t.constructor.__class__)){return true}}return false}function ku(e){return e instanceof ka||e instanceof Oa}function Ou(e){if(_u(e)){if(ku(e[Su])){return true}}return false}var Su=Symbol["for"]("__context__");var Bu=Symbol["for"]("__fn__");var ju=Symbol["for"]("__data__");var Iu=Symbol["for"]("__ref__");var Pu=Symbol["for"]("__cycles__");var Nu=Symbol["for"]("__class__");var Ru=Symbol["for"]("__method__");var Tu=Symbol["for"]("__prototype__");var Lu=Symbol["for"]("__lambda__");var Uu=["name","length","caller","callee","arguments","prototype"];function qu(e){return!Uu.includes(e)}function Mu(e,t,r){Object.defineProperty(e,Symbol["for"](t),{get:function e(){return r},set:function e(){},configurable:false,enumerable:false})}function Yu(t,r){try{Object.defineProperty(t,"length",{get:function e(){return r}});return t}catch(e){var n=new Array(r).fill(0).map(function(e,t){return"a"+t}).join(",");var i=new Function("f","return function(".concat(n,") {\n                return f.apply(this, arguments);\n            };"));return i(t)}}function $u(e){return e&&e[Lu]}function zu(e){return e&&e[Ru]}function Vu(e){return $u(e)&&!e[Tu]&&!zu(e)&&!Ou(e)}function Ju(e){var t=Symbol["for"]("__native__");return _u(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===true||!e.name.match(/^bound /)&&!e[t])}function Gu(e){var g;switch(e){case Symbol["for"]("letrec"):g="letrec";break;case Symbol["for"]("let"):g="let";break;case Symbol["for"]("let*"):g="let*";break;default:throw new Error("Invalid let_macro value")}return iu.defmacro(g,function(t,e){var f=e.dynamic_scope,l=e.error,r=e.macro_expand;var h;if(t.car instanceof Rn){if(!(t.cdr.car instanceof Ii||t.cdr.car===ji)){throw new Error("let require list of pairs")}var n;if(t.cdr.car===ji){h=ji;n=ji}else{n=t.cdr.car.map(function(e){return e.car});h=t.cdr.car.map(function(e){return e.cdr.car})}return Ii.fromArray([Rn("letrec"),[[t.car,Ii(Rn("lambda"),Ii(n,t.cdr.cdr))]],Ii(t.car,h)])}else if(r){return}var p=this;h=ro.get("list->array")(t.car);var _=p.inherit(g);var d,v;if(g==="let*"){v=_}else if(g==="let"){d=[]}var m=0;function y(){var e=new Ii(new Rn("begin"),t.cdr);return So(e,{env:_,dynamic_scope:f,error:l})}return function t(){var r=h[m++];if(f){f=g==="let*"?_:p}if(!r){if(d&&d.length){var e=d.map(function(e){return e.value});var n=e.filter(mu);if(n.length){return Mn(e).then(function(e){for(var t=0,r=e.length;t<r;++t){_.set(d[t].name,e[t])}}).then(y)}else{var i=Cr(d),u;try{for(i.s();!(u=i.n()).done;){var a=u.value,o=a.name,s=a.value;_.set(o,s)}}catch(e){i.e(e)}finally{i.f()}}}return y()}else{if(g==="let"){v=p}else if(g==="letrec"){v=_}var c=So(r.cdr.car,{env:v,dynamic_scope:f,error:l});if(g==="let*"){v=_=v.inherit("let*["+m+"]")}if(d){d.push({name:r.car,value:c});return t()}else{return ti(c,function(e){_.set(r.car,e);return t()})}}}()})}function Hu(e,s){return new iu(e,function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;var i=this;if(r){r=this}var u=e;var a=[];while(u instanceof Ii){a.push(So(u.car,{env:i,dynamic_scope:r,error:n}));u=u.cdr}var o=a.filter(mu).length;if(o){return Mn(a).then(s.bind(this))}else{return s.call(this,a)}})}function Wu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(e){vo("",e,"number")});return e.apply(void 0,r)}function Qu(){var n=this;for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}i.forEach(function(e,t){vo("pipe",e,"function",t+1)});return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.reduce(function(e,t){return[t.apply(n,e)]},t)[0]}}function Zu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e,t){vo("compose",e,"function",t+1)});return Qu.apply(void 0,k(t.reverse()))}function Ku(a,o){var s=this;return function e(t,r){vo(a,t,"function");for(var n=arguments.length,i=new Array(n>2?n-2:0),u=2;u<n;u++){i[u-2]=arguments[u]}if(i.some(pu)){if(typeof r==="number"){return pa(r)}return r}else{return o.call.apply(o,[s,e,t,r].concat(i))}}}function Xu(e,t){return ia(e+1,na(Wu,t))}var ea=na(Xu,1);var ta=na(Xu,2);function ra(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(i!==null){t=[i].concat(k(t))}return t.reduce(ta(n))}}function na(u){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}vo("curry",u,"function");var a=u.length;return function(){var n=t.slice();function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}n=n.concat(t);if(n.length>=a){return u.apply(this,n)}else{return i}}return i.apply(this,arguments)}}function ia(n,i){vo("limit",i,"function",2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.apply(void 0,k(t.slice(0,n)))}}function ua(e){if(typeof this!=="undefined"&&!(this instanceof ua)||typeof this==="undefined"){return new ua(e)}if(e instanceof aa){e=e.valueOf()}var t;if(Array.from(e).length>1){e=e.toLowerCase();if(ua.__names__[e]){t=e;e=ua.__names__[e]}else{throw new Error("Internal: Unknown named character")}}else{t=ua.__rev_names__[e]}Object.defineProperty(this,"__char__",{value:e,enumerable:true});if(t){Object.defineProperty(this,"__name__",{value:t,enumerable:true})}}ua.__names__=Qr;ua.__rev_names__={};Object.keys(ua.__names__).forEach(function(e){var t=ua.__names__[e];ua.__rev_names__[t]=e});ua.prototype.toUpperCase=function(){return ua(this.__char__.toUpperCase())};ua.prototype.toLowerCase=function(){return ua(this.__char__.toLowerCase())};ua.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};ua.prototype.valueOf=ua.prototype.serialize=function(){return this.__char__};function aa(e){if(typeof this!=="undefined"&&!(this instanceof aa)||typeof this==="undefined"){return new aa(e)}if(e instanceof Array){this.__string__=e.map(function(e,t){vo("LString",e,"character",t+1);return e.toString()}).join("")}else{this.__string__=e.valueOf()}}{var oa=["length","constructor"];var sa=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!oa.includes(e)});var ca=function e(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(this.__string__,t)}};var fa=Cr(sa),la;try{for(fa.s();!(la=fa.n()).done;){var ha=la.value;aa.prototype[ha]=ca(String.prototype[ha])}}catch(e){fa.e(e)}finally{fa.f()}}aa.prototype.serialize=function(){return this.valueOf()};aa.isString=function(e){return e instanceof aa||typeof e==="string"};aa.prototype.get=function(e){vo("LString::get",e,"number");return Array.from(this.__string__)[e.valueOf()]};aa.prototype.cmp=function(e){vo("LString::cmp",e,"string");var t=this.valueOf();var r=e.valueOf();if(t<r){return-1}else if(t===r){return 0}else{return 1}};aa.prototype.lower=function(){return aa(this.__string__.toLowerCase())};aa.prototype.upper=function(){return aa(this.__string__.toUpperCase())};aa.prototype.set=function(e,t){vo("LString::set",e,"number");vo("LString::set",t,["string","character"]);e=e.valueOf();if(t instanceof ua){t=t.__char__}var r=[];if(e>0){r.push(this.__string__.substring(0,e))}r.push(t);if(e<this.__string__.length-1){r.push(this.__string__.substring(e+1))}this.__string__=r.join("")};Object.defineProperty(aa.prototype,"length",{get:function e(){return this.__string__.length}});aa.prototype.clone=function(){return aa(this.valueOf())};aa.prototype.fill=function(e){vo("LString::fill",e,["string","character"]);if(e instanceof ua){e=e.toString()}var t=this.__string__.length;this.__string__=new Array(t+1).join(e)};function pa(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof pa){return e}if(typeof this!=="undefined"&&!(this instanceof pa)||typeof this==="undefined"){return new pa(e,t)}if(typeof e==="undefined"){throw new Error("Invalid LNumber constructor call")}var r=pa.getType(e);if(pa.types[r]){return pa.types[r](e,t)}var n=e instanceof Array&&aa.isString(e[0])&&pa.isNumber(e[1]);if(e instanceof pa){return pa(e.value)}if(!pa.isNumber(e)&&!n){throw new Error("You can't create LNumber from ".concat(wo(e)))}if(e===null){e=0}var i;if(n){var u=e,a=A(u,2),o=a[0],s=a[1];if(o instanceof aa){o=o.valueOf()}if(s instanceof pa){s=s.valueOf()}var c=o.match(/^([+-])/);var f=false;if(c){o=o.replace(/^[+-]/,"");if(c[1]==="-"){f=true}}}if(Number.isNaN(e)){return wa(e)}else if(typeof BigInt!=="undefined"){if(typeof e!=="bigint"){if(n){var l;switch(s){case 8:l="0o";break;case 16:l="0x";break;case 2:l="0b";break;case 10:l="";break}if(typeof l==="undefined"){var h=BigInt(s);i=k(o).map(function(e,t){return BigInt(parseInt(e,s))*ya(h,BigInt(t))}).reduce(function(e,t){return e+t})}else{i=BigInt(l+o)}}else{i=BigInt(e)}if(f){i*=BigInt(-1)}}else{i=e}return Ca(i,true)}else if(typeof Rr!=="undefined"&&!(e instanceof Rr)){if(e instanceof Array){return Ca(p(Rr,k(e)))}return Ca(new Rr(e))}else if(n){this.constant(parseInt(o,s),"integer")}else{this.constant(e,"integer")}}pa.prototype.constant=function(e,t){Object.defineProperty(this,"__value__",{value:e,enumerable:true});Object.defineProperty(this,"__type__",{value:t,enumerable:true})};pa.types={float:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new wa(t,r)},complex:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!pa.isComplex(t)){t={im:0,re:t}}return new ba(t,r)},rational:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!pa.isRational(t)){t={num:t,denom:1}}return new xa(t,r)}};pa.prototype.serialize=function(){return this.__value__};pa.prototype.isNaN=function(){return Number.isNaN(this.__value__)};pa.prototype.gcd=function(e){var t=this.abs();e=e.abs();if(e.cmp(t)===1){var r=t;t=e;e=r}while(true){t=t.rem(e);if(t.cmp(0)===0){return e}e=e.rem(t);if(e.cmp(0)===0){return t}}};pa.isFloat=function e(t){return t instanceof wa||Number(t)===t&&t%1!==0};pa.isNumber=function(e){return e instanceof pa||pa.isNative(e)||pa.isBN(e)};pa.isComplex=function(e){if(!e){return false}var t=e instanceof ba||(pa.isNumber(e.im)||Number.isNaN(e.im))&&(pa.isNumber(e.re)||Number.isNaN(e.re));return t};pa.isRational=function(e){if(!e){return false}return e instanceof xa||pa.isNumber(e.num)&&pa.isNumber(e.denom)};pa.isInteger=function(e){if(!(pa.isNative(e)||e instanceof pa)){return false}if(pa.isFloat(e)){return false}if(pa.isRational(e)){return false}if(pa.isComplex(e)){return false}return true};pa.isNative=function(e){return typeof e==="bigint"||typeof e==="number"};pa.isBigInteger=function(e){return e instanceof Ca||typeof e==="bigint"||pa.isBN(e)};pa.isBN=function(e){return typeof Rr!=="undefined"&&e instanceof Rr};pa.getArgsType=function(e,t){if(e instanceof wa||t instanceof wa){return wa}if(e instanceof Ca||t instanceof Ca){return Ca}return pa};pa.prototype.toString=function(e){if(Number.isNaN(this.__value__)){return"+nan.0"}if(e>2&&e<36){return this.__value__.toString(e)}return this.__value__.toString()};pa.prototype.asType=function(e){var t=pa.getType(this);return pa.types[t]?pa.types[t](e):pa(e)};pa.prototype.isBigNumber=function(){return typeof this.__value__==="bigint"||typeof Rr!=="undefined"&&!(this.value instanceof Rr)};["floor","ceil","round"].forEach(function(e){pa.prototype[e]=function(){if(this["float"]||pa.isFloat(this.__value__)){return pa(Math[e](this.__value__))}else{return pa(Math[e](this.valueOf()))}}});pa.prototype.valueOf=function(){if(pa.isNative(this.__value__)){return Number(this.__value__)}else if(pa.isBN(this.__value__)){return this.__value__.toNumber()}};var _a=function(){var e=function e(t,r){return[t,r]};return{bigint:{bigint:e,float:function e(t,r){return[wa(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},integer:{integer:e,float:function e(t,r){return[wa(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},float:{bigint:function e(t,r){return[t,r&&wa(r.valueOf())]},integer:function e(t,r){return[t,r&&wa(r.valueOf())]},float:e,rational:function e(t,r){return[t,r&&wa(r.valueOf())]},complex:function e(t,r){return[{re:t,im:wa(0)},r]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function e(t,r){var n=pa.coerce(t.__re__,r.__re__),i=A(n,2),u=i[0],a=i[1];var o=pa.coerce(t.__im__,r.__im__),s=A(o,2),c=s[0],f=s[1];return[{im:c,re:u},{im:f,re:a}]}},rational:{bigint:function e(t,r){return[t,r&&{num:r,denom:1}]},integer:function e(t,r){return[t,r&&{num:r,denom:1}]},float:function e(t,r){return[wa(t.valueOf()),r]},rational:e,complex:function e(t,r){return[{im:da(t.__type__,r.__im__.__type__,0)[0],re:da(t.__type__,r.__re__.__type__,t)[0]},{im:da(t.__type__,r.__im__.__type__,r.__im__)[0],re:da(t.__type__,r.__re__.__type__,r.__re__)[0]}]}}};function t(r){return function(e,t){return[{im:da(r,e.__im__.__type__,0,e.__im__)[1],re:da(r,e.__re__.__type__,0,e.__re__)[1]},{im:da(r,e.__im__.__type__,0,0)[1],re:da(r,t.__type__,0,t)[1]}]}}}();function da(e,t,r,n){return _a[e][t](r,n)}pa.coerce=function(e,t){var r=pa.getType(e);var n=pa.getType(t);if(!_a[r]){throw new Error("LNumber::coerce unknown lhs type ".concat(r))}else if(!_a[r][n]){throw new Error("LNumber::coerce unknown rhs type ".concat(n))}var i=_a[r][n](e,t);return i.map(function(e){return pa(e,true)})};pa.prototype.coerce=function(e){if(!(typeof e==="number"||e instanceof pa)){throw new Error("LNumber: you can't coerce ".concat(wo(e)))}if(typeof e==="number"){e=pa(e)}return pa.coerce(this,e)};pa.getType=function(e){if(e instanceof pa){return e.__type__}if(pa.isFloat(e)){return"float"}if(pa.isComplex(e)){return"complex"}if(pa.isRational(e)){return"rational"}if(typeof e==="number"){return"integer"}if(typeof BigInt!=="undefined"&&typeof e!=="bigint"||typeof Rr!=="undefined"&&!(e instanceof Rr)){return"bigint"}};pa.prototype.isFloat=function(){return!!(pa.isFloat(this.__value__)||this["float"])};var va={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"};var ma={};Object.keys(va).forEach(function(t){ma[va[t]]=t;pa.prototype[t]=function(e){return this.op(va[t],e)}});pa._ops={"*":function e(t,r){return t*r},"+":function e(t,r){return t+r},"-":function e(t,r){if(typeof r==="undefined"){return-t}return t-r},"/":function e(t,r){return t/r},"%":function e(t,r){return t%r},"|":function e(t,r){return t|r},"&":function e(t,r){return t&r},"~":function e(t){return~t},">>":function e(t,r){return t>>r},"<<":function e(t,r){return t<<r}};pa.prototype.op=function(e,t){if(typeof t==="undefined"){return pa(pa._ops[e](this.valueOf()))}if(typeof t==="number"){t=pa(t)}if(Number.isNaN(this.__value__)&&!pa.isComplex(t)||!pa.isComplex(this)&&Number.isNaN(t.__value__)){return pa(NaN)}var r=this.coerce(t),n=A(r,2),i=n[0],u=n[1];if(i._op){return i._op(e,u)}return pa(pa._ops[e](i,u))};pa.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return ba({re:0,im:t})}return pa(Math.sqrt(e))};var ya=function e(t,r){var n=typeof t==="bigint"?BigInt(1):1;return new Array(Number(r)).fill(0).reduce(function(e){return e*t},n)};var ga=new Function("a,b","return a ** b");try{if(ga(2,2)===4){ya=ga}}catch(e){}pa.prototype.pow=function(e){var t;if(pa.isBN(this.__value__)){t=this.__value__.pow(e.__value__)}else{t=ya(this.__value__,e.__value__)}return pa(t)};pa.prototype.abs=function(){var e=this.__value__;if(pa.isNative(this.__value__)){if(e<0){e=-e}}else if(pa.isBN(e)){e.iabs()}return new pa(e)};pa.prototype.isOdd=function(){if(pa.isNative(this.__value__)){if(this.isBigNumber()){return this.__value__%BigInt(2)===BigInt(1)}return this.__value__%2===1}else if(pa.isBN(this.__value__)){return this.__value__.isOdd()}};pa.prototype.isEven=function(){return!this.isOdd()};pa.prototype.cmp=function(e){var t=this.coerce(e),r=A(t,2),n=r[0],i=r[1];function u(e,t){if(e.__value__<t.__value__){return-1}else if(e.__value__===t.__value__){return 0}else{return 1}}if(n.__type__==="bigint"){if(pa.isNative(n.__value__)){return u(n,i)}else if(pa.isBN(n.__value__)){return this.__value__.cmp(i.__value__)}}else if(n instanceof wa){return u(n,i)}};function ba(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof ba)||typeof this==="undefined"){return new ba(e,t)}if(e instanceof ba){return ba({im:e.__im__,re:e.__re__})}if(pa.isNumber(e)&&t){if(!t){return Number(e)}}else if(!pa.isComplex(e)){throw new Error("Invalid constructor call for LComplex")}var r=e.im instanceof pa?e.im:pa(e.im);var n=e.re instanceof pa?e.re:pa(e.re);this.constant(r,n)}ba.prototype=Object.create(pa.prototype);ba.prototype.constructor=ba;ba.prototype.constant=function(e,t){Object.defineProperty(this,"__im__",{value:e,enumerable:true});Object.defineProperty(this,"__re__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"complex",enumerable:true})};ba.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};ba.prototype.toRational=function(e){if(pa.isFloat(this.__im__)&&pa.isFloat(this.__re__)){var t=wa(this.__im__).toRational(e);var r=wa(this.__re__).toRational(e);return ba({im:t,re:r})}return this};ba.prototype.add=function(e){return this.complex_op("add",e,function(e,t,r,n){return{re:e.add(t),im:r.add(n)}})};ba.prototype.factor=function(){if(this.__im__ instanceof wa||this.__im__ instanceof wa){var e=this.__re__,t=this.__im__;var r,n;if(e instanceof wa){r=e.toRational().mul(e.toRational())}else{r=e.mul(e)}if(t instanceof wa){n=t.toRational().mul(t.toRational())}else{n=t.mul(t)}return r.add(n)}else{return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))}};ba.prototype.modulus=function(){return this.factor().sqrt()};ba.prototype.conjugate=function(){return ba({re:this.__re__,im:this.__im__.sub()})};ba.prototype.sqrt=function(){var e=this.modulus();var t,r;if(e.cmp(0)===0){t=r=e}else if(this.__re__.cmp(0)===1){t=wa(.5).mul(e.add(this.__re__)).sqrt();r=this.__im__.div(t).div(2)}else{r=wa(.5).mul(e.sub(this.__re__)).sqrt();if(this.__im__.cmp(0)===-1){r=r.sub()}t=this.__im__.div(r).div(2)}return ba({im:r,re:t})};ba.prototype.div=function(e){if(pa.isNumber(e)&&!pa.isComplex(e)){if(!(e instanceof pa)){e=pa(e)}var t=this.__re__.div(e);var r=this.__im__.div(e);return ba({re:t,im:r})}else if(!pa.isComplex(e)){throw new Error("[LComplex::div] Invalid value")}var n=this.coerce(e),i=A(n,2),u=i[0],a=i[1];var o=a.factor();var s=u.mul(a.conjugate());var c=s.__re__.op("/",o);var f=s.__im__.op("/",o);return ba({re:c,im:f})};ba.prototype.sub=function(e){return this.complex_op("sub",e,function(e,t,r,n){return{re:e.sub(t),im:r.sub(n)}})};ba.prototype.mul=function(e){return this.complex_op("mul",e,function(e,t,r,n){var i={re:e.mul(t).sub(r.mul(n)),im:e.mul(n).add(t.mul(r))};return i})};ba.prototype.complex_op=function(e,t,i){var u=this;var r=function e(t,r){var n=i(u.__re__,t,u.__im__,r);if("im"in n&&"re"in n){if(n.im.cmp(0)===0&&!pa.isFloat(n.im)){return n.re}return ba(n,true)}return n};if(typeof t==="undefined"){return r()}if(pa.isNumber(t)&&!pa.isComplex(t)){if(!(t instanceof pa)){t=pa(t)}var n=t.asType(0);t={__im__:n,__re__:t}}else if(!pa.isComplex(t)){throw new Error("[LComplex::".concat(e,"] Invalid value"))}var a=t.__re__ instanceof pa?t.__re__:this.__re__.asType(t.__re__);var o=t.__im__ instanceof pa?t.__im__:this.__im__.asType(t.__im__);return r(a,o)};ba._op={"+":"add","-":"sub","*":"mul","/":"div"};ba.prototype._op=function(e,t){var r=ba._op[e];return this[r](t)};ba.prototype.cmp=function(e){var t=this.coerce(e),r=A(t,2),n=r[0],i=r[1];var u=n.__re__.coerce(i.__re__),a=A(u,2),o=a[0],s=a[1];var c=o.cmp(s);if(c!==0){return c}else{var f=n.__im__.coerce(i.__im__),l=A(f,2),h=l[0],p=l[1];return h.cmp(p)}};ba.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};ba.prototype.toString=function(){var e;if(this.__re__.cmp(0)!==0){e=[Wi(this.__re__)]}else{e=[]}var t=this.__im__.valueOf();var r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t);var n=Wi(this.__im__);if(!r&&!Number.isNaN(t)){var i=this.__im__.cmp(0);if(i<0||i===0&&this.__im__._minus){e.push("-")}else{e.push("+")}n=n.replace(/^-/,"")}e.push(n);e.push("i");return e.join("")};function wa(e){if(typeof this!=="undefined"&&!(this instanceof wa)||typeof this==="undefined"){return new wa(e)}if(!pa.isNumber(e)){throw new Error("Invalid constructor call for LFloat")}if(e instanceof pa){return wa(e.valueOf())}if(typeof e==="number"){if(Object.is(e,-0)){Object.defineProperty(this,"_minus",{value:true})}this.constant(e,"float")}}wa.prototype=Object.create(pa.prototype);wa.prototype.constructor=wa;wa.prototype.toString=function(){if(this.__value__===Number.NEGATIVE_INFINITY){return"-inf.0"}if(this.__value__===Number.POSITIVE_INFINITY){return"+inf.0"}if(Number.isNaN(this.__value__)){return"+nan.0"}var e=this.__value__.toString();if(!pa.isFloat(this.__value__)&&!e.match(/e/i)){var t=e+".0";return this._minus?"-"+t:t}return e.replace(/^([0-9]+)e/,"$1.0e")};wa.prototype._op=function(e,t){if(t instanceof pa){t=t.__value__}var r=pa._ops[e];if(e==="/"&&this.__value__===0&&t===0){return NaN}return wa(r(this.__value__,t))};wa.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){return Da(this.__value__.valueOf())}return Ea(e.valueOf())(this.__value__.valueOf())};wa.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=wa(Math.sqrt(-e));return ba({re:0,im:t})}return wa(Math.sqrt(e))};wa.prototype.abs=function(){var e=this.valueOf();if(e<0){e=-e}return wa(e)};var Da=Ea(1e-10);function Ea(n){return function(e){var t=function e(n,t,r){var i=function e(t,r){return r<n?t:e(r,t%r)};if(Number.isNaN(t)||Number.isNaN(r)){return NaN}return i(Math.abs(t),Math.abs(r))},r=t(n?n:1/1e4,1,e);return xa({num:Math.floor(e/r),denom:Math.floor(1/r)})}}function Aa(e,t){var r=e.sub(t);var n=e.add(t);var i;if(r.cmp(n)>0){i=Fa(n,r)}else if(n.cmp(r)<=0){i=r}else if(r.cmp(0)>0){i=Fa(r,n)}else if(t.cmp(0)<0){i=pa(Fa(n.sub(),r.sub())).sub()}else{i=pa(0)}if(pa.isFloat(t)||pa.isFloat(e)){return wa(i)}return i}function Fa(e,t){var r=pa(e).floor();var n=pa(t).floor();if(e.cmp(r)<1){return r}else if(r.cmp(n)===0){var i=pa(1).div(t.sub(n));var u=pa(1).div(e.sub(r));return r.add(pa(1).div(Fa(i,u)))}else{return r.add(pa(1))}}function xa(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof xa)||typeof this==="undefined"){return new xa(e,t)}if(!pa.isRational(e)){throw new Error("Invalid constructor call for LRational")}var r,n;if(e instanceof xa){r=pa(e.__num__);n=pa(e.__denom__)}else{r=pa(e.num);n=pa(e.denom)}if(!t&&n.cmp(0)!==0){var i=r.op("%",n).cmp(0)===0;if(i){return pa(r.div(n))}}this.constant(r,n)}xa.prototype=Object.create(pa.prototype);xa.prototype.constructor=xa;xa.prototype.constant=function(e,t){Object.defineProperty(this,"__num__",{value:e,enumerable:true});Object.defineProperty(this,"__denom__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"rational",enumerable:true})};xa.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};xa.prototype.pow=function(e){var t=e.cmp(0);if(t===0){return pa(1)}if(t===-1){e=e.sub();var r=this.__denom__.pow(e);var n=this.__num__.pow(e);return xa({num:r,denom:n})}var i=this;e=e.valueOf();while(e>1){i=i.mul(this);e--}return i};xa.prototype.sqrt=function(){var e=this.__num__.sqrt();var t=this.__denom__.sqrt();if(e instanceof wa||t instanceof wa){return e.div(t)}return xa({num:e,denom:t})};xa.prototype.abs=function(){var e=this.__num__;var t=this.__denom__;if(e.cmp(0)===-1){e=e.sub()}if(t.cmp(0)!==1){t=t.sub()}return xa({num:e,denom:t})};xa.prototype.cmp=function(e){return pa(this.valueOf(),true).cmp(e)};xa.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__);var t,r;if(e.cmp(1)!==0){t=this.__num__.div(e);if(t instanceof xa){t=pa(t.valueOf(true))}r=this.__denom__.div(e);if(r instanceof xa){r=pa(r.valueOf(true))}}else{t=this.__num__;r=this.__denom__}var n=this.cmp(0)<0;if(n){if(t.abs().cmp(r.abs())===0){return t.toString()}}else if(t.cmp(r)===0){return t.toString()}return t.toString()+"/"+r.toString()};xa.prototype.valueOf=function(e){if(this.__denom__.cmp(0)===0){if(this.__num__.cmp(0)<0){return Number.NEGATIVE_INFINITY}return Number.POSITIVE_INFINITY}if(e){return pa._ops["/"](this.__num__.value,this.__denom__.value)}return wa(this.__num__.valueOf()).div(this.__denom__.valueOf())};xa.prototype.mul=function(e){if(!(e instanceof pa)){e=pa(e)}if(pa.isRational(e)){var t=this.__num__.mul(e.__num__);var r=this.__denom__.mul(e.__denom__);return xa({num:t,denom:r})}var n=pa.coerce(this,e),i=A(n,2),u=i[0],a=i[1];return u.mul(a)};xa.prototype.div=function(e){if(!(e instanceof pa)){e=pa(e)}if(pa.isRational(e)){var t=this.__num__.mul(e.__denom__);var r=this.__denom__.mul(e.__num__);return xa({num:t,denom:r})}var n=pa.coerce(this,e),i=A(n,2),u=i[0],a=i[1];var o=u.div(a);return o};xa.prototype._op=function(e,t){return this[ma[e]](t)};xa.prototype.sub=function(e){if(typeof e==="undefined"){return this.mul(-1)}if(!(e instanceof pa)){e=pa(e)}if(pa.isRational(e)){var t=e.__num__.sub();var r=e.__denom__;return this.add(xa({num:t,denom:r}))}if(!(e instanceof pa)){e=pa(e).sub()}else{e=e.sub()}var n=pa.coerce(this,e),i=A(n,2),u=i[0],a=i[1];return u.add(a)};xa.prototype.add=function(e){if(!(e instanceof pa)){e=pa(e)}if(pa.isRational(e)){var t=this.__denom__;var r=e.__denom__;var n=this.__num__;var i=e.__num__;var u,a;if(t!==r){a=r.mul(n).add(i.mul(t));u=t.mul(r)}else{a=n.add(i);u=t}return xa({num:a,denom:u})}if(pa.isFloat(e)){return wa(this.valueOf()).add(e)}var o=pa.coerce(this,e),s=A(o,2),c=s[0],f=s[1];return c.add(f)};function Ca(e,t){if(typeof this!=="undefined"&&!(this instanceof Ca)||typeof this==="undefined"){return new Ca(e,t)}if(e instanceof Ca){return Ca(e.__value__,e._native)}if(!pa.isBigInteger(e)){throw new Error("Invalid constructor call for LBigInteger")}this.constant(e,"bigint");Object.defineProperty(this,"_native",{value:t})}Ca.prototype=Object.create(pa.prototype);Ca.prototype.constructor=Ca;Ca.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};Ca.prototype.serialize=function(){return this.__value__.toString()};Ca.prototype._op=function(e,t){if(typeof t==="undefined"){if(pa.isBN(this.__value__)){e=Ca.bn_op[e];return Ca(this.__value__.clone()[e](),false)}return Ca(pa._ops[e](this.__value__),true)}if(pa.isBN(this.__value__)&&pa.isBN(t.__value__)){e=Ca.bn_op[e];return Ca(this.__value__.clone()[e](t),false)}var r=pa._ops[e](this.__value__,t.__value__);if(e==="/"){var n=this.op("%",t).cmp(0)===0;if(n){return pa(r)}return xa({num:this,denom:t})}return Ca(r,true)};Ca.prototype.sqrt=function(){var e;var t=this.cmp(0)<0;if(pa.isNative(this.__value__)){e=pa(Math.sqrt(t?-this.valueOf():this.valueOf()))}else if(pa.isBN(this.__value__)){e=t?this.__value__.neg().sqrt():this.__value__.sqrt()}if(t){return ba({re:0,im:e})}return e};pa.NaN=pa(NaN);function ka(e){var n=this;if(typeof this!=="undefined"&&!(this instanceof ka)||typeof this==="undefined"){return new ka(e)}vo("InputPort",e,"function");ii(this,"__type__",qa);var i;Object.defineProperty(this,"__parser__",{enumerable:true,get:function e(){return i},set:function e(t){vo("InputPort::__parser__",t,"parser");i=t}});this._read=e;this._with_parser=this._with_init_parser.bind(this,O(j.mark(function e(){var r;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(n.char_ready()){t.next=5;break}t.next=3;return n._read();case 3:r=t.sent;i=new Zn(r,{env:n});case 5:return t.abrupt("return",n.__parser__);case 6:case"end":return t.stop()}}},e)})));this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==Ma};this._make_defaults()}ka.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()});this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()});this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()});this.read_string=this._with_parser(function(e,t){if(!pa.isInteger(t)){var r=pa.getType(t);ho("read-string",r,"integer")}return e.__lexer__.read_string(t.valueOf())});this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};ka.prototype._with_init_parser=function(o,s){var c=this;return function(){var e=O(j.mark(function e(){var r,n,i,u,a=arguments;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return o.call(c);case 2:r=t.sent;for(n=a.length,i=new Array(n),u=0;u<n;u++){i[u]=a[u]}return t.abrupt("return",s.apply(void 0,[r].concat(i)));case 5:case"end":return t.stop()}}},e)}));return function(){return e.apply(this,arguments)}}()};ka.prototype.is_open=function(){return this._with_parser!==null};ka.prototype.close=function(){var t=this;this.__parser__=null;this._with_parser=null;["read","close","read_char","peek-char","read_line"].forEach(function(e){t[e]=function(){throw new Error("input-port: port is closed")}});this.char_ready=function(){return false}};ka.prototype.toString=function(){return"#<input-port>"};function Oa(e){if(typeof this!=="undefined"&&!(this instanceof Oa)||typeof this==="undefined"){return new Oa(e)}vo("OutputPort",e,"function");ii(this,"__type__",qa);this.write=e}Oa.prototype.is_open=function(){return this._closed!==true};Oa.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function e(){return true},set:function e(){},configurable:false,enumerable:false});this.write=function(){throw new Error("output-port: port is closed")}};Oa.prototype.flush=function(){};Oa.prototype.toString=function(){return"#<output-port>"};var Sa=function(e){u(n,e);var r=Fr(n);function n(e){var t;y(this,n);t=r.call(this,function(){var e;return(e=t)._write.apply(e,arguments)});vo("BufferedOutputPort",e,"function");ii(i(t),"_fn",e,{hidden:true});ii(i(t),"_buffer",[],{hidden:true});return t}b(n,[{key:"flush",value:function e(){if(this._buffer.length){this._fn(this._buffer.join(""));this._buffer.length=0}}},{key:"_write",value:function e(){var t=this;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}if(n.length){n.forEach(function(e){t._buffer.push(e)});var u=this._buffer[this._buffer.length-1];if(u.match(/\n$/)){this._buffer[this._buffer.length-1]=u.replace(/\n$/,"");this.flush()}}}}]);return n}(Oa);function Ba(t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Ba)||typeof this==="undefined"){return new Ba(t)}vo("OutputStringPort",t,"function");ii(this,"__type__",qa);ii(this,"__buffer__",[]);this.write=function(e){if(!aa.isString(e)){e=t(e)}else{e=e.valueOf()}r.__buffer__.push(e)}}Ba.prototype=Object.create(Oa.prototype);Ba.prototype.constructor=Ba;Ba.prototype.toString=function(){return"#<output-port (string)>"};Ba.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function ja(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof ja)||typeof this==="undefined"){return new ja(e,t)}vo("OutputFilePort",e,"string");ii(this,"__filename__",e);ii(this,"_fd",t.valueOf(),{hidden:true});ii(this,"__type__",qa);this.write=function(e){if(!aa.isString(e)){e=Wi(e)}else{e=e.valueOf()}r.fs().write(r._fd,e,function(e){if(e){throw e}})}}ja.prototype=Object.create(Oa.prototype);ja.prototype.constructor=ja;ja.prototype.fs=function(){if(!this._fs){this._fs=this.internal("fs")}return this._fs};ja.prototype.internal=function(e){return no.get("**internal-env**").get(e)};ja.prototype.close=function(){var n=this;return new Promise(function(t,r){n.fs().close(n._fd,function(e){if(e){r(e)}else{ii(n,"_fd",null,{hidden:true});Oa.prototype.close.call(n);t()}})})};ja.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function Ia(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Ia)||typeof this==="undefined"){return new Ia(e)}vo("InputStringPort",e,"string");t=t||ro;e=e.valueOf();this._with_parser=this._with_init_parser.bind(this,function(){if(!r.__parser__){r.__parser__=new Zn(e,{env:t})}return r.__parser__});ii(this,"__type__",qa);this._make_defaults()}Ia.prototype.char_ready=function(){return true};Ia.prototype=Object.create(ka.prototype);Ia.prototype.constructor=Ia;Ia.prototype.toString=function(){return"#<input-port (string)>"};function Pa(e){if(typeof this!=="undefined"&&!(this instanceof Pa)||typeof this==="undefined"){return new Pa(e)}vo("InputByteVectorPort",e,"uint8array");ii(this,"__vector__",e);ii(this,"__type__",Ua);var r=0;Object.defineProperty(this,"__index__",{enumerable:true,get:function e(){return r},set:function e(t){vo("InputByteVectorPort::__index__",t,"number");if(t instanceof pa){t=t.valueOf()}if(typeof t==="bigint"){t=Number(t)}if(Math.floor(t)!==t){throw new Error("InputByteVectorPort::__index__ value is "+"not integer")}r=t}})}Pa.prototype=Object.create(ka.prototype);Pa.prototype.constructor=Pa;Pa.prototype.toString=function(){return"#<input-port (bytevector)>"};Pa.prototype.close=function(){var t=this;ii(this,"__vector__",ji);["read_u8","close","peek_u8","read_u8_vector"].forEach(function(e){t[e]=function(){throw new Error("Input-binary-port: port is closed")}});this.char_ready=function(){return false}};Pa.prototype.u8_ready=function(){return true};Pa.prototype.peek_u8=function(){if(this.__index__>=this.__vector__.length){return Ma}return this.__vector__[this.__index__]};Pa.prototype.skip=function(){if(this.__index__<=this.__vector__.length){++this.__index__}};Pa.prototype.read_u8=function(){var e=this.peek_u8();this.skip();return e};Pa.prototype.read_u8_vector=function(e){if(typeof e==="undefined"){e=this.__vector__.length}else if(e>this.__index__+this.__vector__.length){e=this.__index__+this.__vector__.length}if(this.peek_u8()===Ma){return Ma}return this.__vector__.slice(this.__index__,e)};function Na(){if(typeof this!=="undefined"&&!(this instanceof Na)||typeof this==="undefined"){return new Na}ii(this,"__type__",Ua);ii(this,"_buffer",[],{hidden:true});this.write=function(e){vo("write",e,["number","uint8array"]);if(pa.isNumber(e)){this._buffer.push(e.valueOf())}else{var t;(t=this._buffer).push.apply(t,k(Array.from(e)))}};Object.defineProperty(this,"__buffer__",{enumerable:true,get:function e(){return Uint8Array.from(this._buffer)}})}Na.prototype=Object.create(Oa.prototype);Na.prototype.constructor=Na;Na.prototype.close=function(){Oa.prototype.close.call(this);ii(this,"_buffer",null,{hidden:true})};Na.prototype._close_guard=function(){if(this._closed){throw new Error("output-port: binary port is closed")}};Na.prototype.write_u8=function(e){vo("OutputByteVectorPort::write_u8",e,"number");this.write(e)};Na.prototype.write_u8_vector=function(e){vo("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};Na.prototype.toString=function(){return"#<output-port (bytevector)>"};Na.prototype.valueOf=function(){return this.__buffer__};function Ra(e,t){if(typeof this!=="undefined"&&!(this instanceof Ra)||typeof this==="undefined"){return new Ra(e,t)}Ia.call(this,e);vo("InputFilePort",t,"string");ii(this,"__filename__",t)}Ra.prototype=Object.create(Ia.prototype);Ra.prototype.constructor=Ra;Ra.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function Ta(e,t){if(typeof this!=="undefined"&&!(this instanceof Ta)||typeof this==="undefined"){return new Ta(e,t)}Pa.call(this,e);vo("InputBinaryFilePort",t,"string");ii(this,"__filename__",t)}Ta.prototype=Object.create(Pa.prototype);Ta.prototype.constructor=Ta;Ta.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function La(e,t){if(typeof this!=="undefined"&&!(this instanceof La)||typeof this==="undefined"){return new La(e,t)}vo("OutputBinaryFilePort",e,"string");ii(this,"__filename__",e);ii(this,"_fd",t.valueOf(),{hidden:true});ii(this,"__type__",Ua);var u,r;this.write=function(e){var n=this;vo("write",e,["number","uint8array"]);var i;if(!u){u=this.internal("fs")}if(!r){r=this.internal("Buffer")}if(pa.isNumber(e)){i=r.from([e.valueOf()])}else{i=r.from(Array.from(e))}return new Promise(function(t,r){u.write(n._fd,i,function(e){if(e){r(e)}else{t()}})})}}La.prototype=Object.create(ja.prototype);La.prototype.constructor=La;La.prototype.write_u8=function(e){vo("OutputByteVectorPort::write_u8",e,"number");this.write(e)};La.prototype.write_u8_vector=function(e){vo("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};var Ua=Symbol["for"]("binary");var qa=Symbol["for"]("text");var Ma=new Ya;function Ya(){}Ya.prototype.toString=function(){return"#<eof>"};function $a(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.stderr,i=r.stdin,u=r.stdout,a=D(r,Ar);if(typeof this!=="undefined"&&!(this instanceof $a)||typeof this==="undefined"){return new $a(e,Br({stdin:i,stdout:u,stderr:n},a))}if(typeof e==="undefined"){e="anonymous"}this.__env__=no.inherit(e,a);this.__env__.set("parent.frame",oi("parent.frame",function(){return t.__env__},ro.__env__["parent.frame"].__doc__));var o="**interaction-environment-defaults**";this.set(o,zi(a).concat(o));var s=Xa.inherit("internal-".concat(e));if(ku(i)){s.set("stdin",i)}if(ku(n)){s.set("stderr",n)}if(ku(u)){s.set("stdout",u)}io(this.__env__,s)}$a.prototype.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;vo("Interpreter::exec",e,["string","array"],1);vo("Interpreter::exec",t,"boolean",2);ro.set("**interaction-environment**",this.__env__);if(r===null){r=this.__env__}return jo(e,r,t?r:false)};$a.prototype.get=function(e){var t=this.__env__.get(e);if(_u(t)){return t.bind(this.__env__)}return t};$a.prototype.set=function(e,t){return this.__env__.set(e,t)};$a.prototype.constant=function(e,t){return this.__env__.constant(e,t)};function za(e,t){this.name="LipsError";this.message=e;this.args=t;this.stack=(new Error).stack}za.prototype=new Error;za.prototype.constructor=za;function Va(e,t,r){if(arguments.length===1){if(_(arguments[0])==="object"){e=arguments[0];t=null}else if(typeof arguments[0]==="string"){e={};t=null;r=arguments[0]}}this.__docs__=new Map;this.__env__=e;this.__parent__=t;this.__name__=r||"anonymous"}Va.prototype.list=function(){return zi(this.__env__)};Va.prototype.fs=function(){return this.get("**fs**")};Va.prototype.unset=function(e){if(e instanceof Rn){e=e.valueOf()}if(e instanceof aa){e=e.valueOf()}delete this.__env__[e]};Va.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(_(e)==="object"){t=e}if(!e||_(e)==="object"){e="child of "+(this.__name__||"unknown")}return new Va(t||{},this,e)};Va.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof Rn){e=e.__name__}if(e instanceof aa){e=e.valueOf()}if(t){if(!r){t=si(t)}this.__docs__.set(e,t);return this}if(this.__docs__.has(e)){return this.__docs__.get(e)}if(this.__parent__){return this.__parent__.doc(e)}};Va.prototype.newFrame=function(e,t){var n=this.inherit("__frame__");n.set("parent.frame",oi("parent.frame",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;e=e.valueOf();var t=n.__parent__;if(!(t instanceof Va)){return ji}if(e<=0){return t}var r=t.get("parent.frame");return r(e-1)},ro.__env__["parent.frame"].__doc__));t.callee=e;n.set("arguments",t);return n};Va.prototype._lookup=function(e){if(e instanceof Rn){e=e.__name__}if(e instanceof aa){e=e.valueOf()}if(this.__env__.hasOwnProperty(e)){return Ja(this.__env__[e])}if(this.__parent__){return this.__parent__._lookup(e)}};Va.prototype.toString=function(){return"#<environment:"+this.__name__+">"};Va.prototype.clone=function(){var t=this;var r={};Object.keys(this.__env__).forEach(function(e){r[e]=t.__env__[e]});return new Va(r,this.__parent__,this.__name__)};Va.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"merge";vo("Environment::merge",e,"environment");return this.inherit(t,e.__env__)};function Ja(e){if(typeof this!=="undefined"&&!(this instanceof Ja)||typeof this==="undefined"){return new Ja(e)}this.value=e}Ja.isUndefined=function(e){return e instanceof Ja&&typeof e.value==="undefined"};Ja.prototype.valueOf=function(){return this.value};function Ga(e){if(e.length){if(e.length===1){return e[0]}}if(typeof this!=="undefined"&&!(this instanceof Ga)||typeof this==="undefined"){return new Ga(e)}this.__values__=e}Ga.prototype.toString=function(){return this.__values__.map(function(e){return Wi(e)}).join("\n")};Ga.prototype.valueOf=function(){return this.__values__};Va.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};vo("Environment::get",e,["symbol","string"]);var r=t.throwError,n=r===void 0?true:r;var i=e;if(i instanceof Rn||i instanceof aa){i=i.valueOf()}var u=this._lookup(i);if(u instanceof Ja){if(Ja.isUndefined(u)){return undefined}return Du(u.valueOf())}var a;if(e instanceof Rn&&e[Rn.object]){a=e[Rn.object]}else if(typeof i==="string"){a=i.split(".").filter(Boolean)}if(a&&a.length>0){var o=a,s=h(o),c=s[0],f=s.slice(1);u=this._lookup(c);if(f.length){try{if(u instanceof Ja){u=u.valueOf()}else{u=Qa(jr,c);if(_u(u)){u=Eu(u)}}if(typeof u!=="undefined"){return Qa.apply(void 0,[u].concat(k(f)))}}catch(e){throw e}}else if(u instanceof Ja){return Du(u.valueOf())}u=Qa(jr,i)}if(typeof u!=="undefined"){return u}if(n){throw new Error("Unbound variable `"+i.toString()+"'")}};Va.prototype.set=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;vo("Environment::set",e,["string","symbol"]);if(pa.isNumber(t)){t=pa(t)}if(e instanceof Rn){e=e.__name__}if(e instanceof aa){e=e.valueOf()}this.__env__[e]=t;if(r){this.doc(e,r,true)}return this};Va.prototype.constant=function(t,e){var r=this;if(this.__env__.hasOwnProperty(t)){throw new Error("Environment::constant: ".concat(t," already exists"))}if(arguments.length===1&&Ri(arguments[0])){var n=arguments[0];Object.keys(n).forEach(function(e){r.constant(t,n[e])})}else{Object.defineProperty(this.__env__,t,{value:e,enumerable:true})}return this};Va.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};Va.prototype.ref=function(e){var t=this;while(true){if(!t){break}if(t.has(e)){return t}t=t.__parent__}};Va.prototype.parents=function(){var e=this;var t=[];while(e){t.unshift(e);e=e.__parent__}return t};function Ha(e){if(mu(e)){return e.then(Ha)}if(e instanceof Ii||e instanceof Rn){e[ju]=true}return e}var Wa=Xn(In('(lambda ()\n                                          "[native code]"\n                                          (throw "Invalid Invocation"))'))[0];var Qa=oi("get",function e(t){var r;for(var n=arguments.length,i=new Array(n>1?n-1:0),u=1;u<n;u++){i[u-1]=arguments[u]}var a=i.length;while(i.length){if(_u(t)&&_(i[0])!=="symbol"){t=Eu(t)}var o=i.shift();var s=wu(o);if(s==="then"&&t instanceof qn){r=qn.prototype.then}else if(s==="__code__"&&_u(t)&&typeof t.__code__==="undefined"){r=Wa}else{r=t[s]}if(typeof r==="undefined"){if(i.length){throw new Error("Try to get ".concat(i[0]," from undefined"))}return r}else{var c;if(i.length-1<a){c=t}r=Du(r,c)}t=r}return r},"(. obj . args)\n        (get obj . args)\n\n        Function use object as base and keep using arguments to get the\n        property of JavaScript object. Arguments need to be a strings.\n        e.g. `(. console \"log\")` if you use any function inside LIPS is\n        will be weakly bind (can be rebind), so you can call this log function\n        without problem unlike in JavaScript when you use\n       `var log = console.log`.\n       `get` is an alias because . don't work in every place, e.g. you can't\n        pass it as argument.");function Za(e,t){var r=Ka(e,"**internal-env**");return r.get(t)}function Ka(e,t){var r=e.get("**interaction-environment**");return r.get(t)}var Xa=new Va({stdout:new Sa(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new Sa(function(){var e;(e=console).error.apply(e,arguments)}),stdin:ka(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined,"internal");var eo=pa(NaN);var to={true:true,false:false,"#true":true,"#false":false,"#t":true,"#f":false,nil:ji,undefined:undefined,null:null,NaN:eo,"+nan.0":eo,"-nan.0":eo};var ro=new Va({eof:Ma,undefined:undefined,"peek-char":oi("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=Za(this,"stdin")}_o("peek-char",e,"input-port");return e.peek_char()},"(peek-char port)\n\n            Function get character from string port or EOF object if no more\n            data in string port."),"read-line":oi("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=Za(this,"stdin")}_o("read-line",e,"input-port");return e.read_line()},"(read-char port)\n\n            Function read next character from input port."),"read-char":oi("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=Za(this,"stdin")}_o("read-char",e,"input-port");return e.read_char()},"(read-char port)\n\n            Function read next character from input port."),read:oi("read",function(){var e=O(j.mark(function e(){var r,n,i,u,a,o,s,c,f,l=arguments;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=l.length>0&&l[0]!==undefined?l[0]:null;if(!aa.isString(r)){t.next=35;break}n=true;i=false;t.prev=4;a=F(Xn(r,this));case 6:t.next=8;return a.next();case 8:o=t.sent;n=o.done;t.next=12;return o.value;case 12:s=t.sent;if(n){t.next=19;break}c=s;return t.abrupt("return",c);case 16:n=true;t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21;t.t0=t["catch"](4);i=true;u=t.t0;case 25:t.prev=25;t.prev=26;if(!(!n&&a["return"]!=null)){t.next=30;break}t.next=30;return a["return"]();case 30:t.prev=30;if(!i){t.next=33;break}throw u;case 33:return t.finish(30);case 34:return t.finish(25);case 35:if(r===null){f=Za(this,"stdin")}else{f=r}_o("read",f,"input-port");return t.abrupt("return",f.read.call(this));case 38:case"end":return t.stop()}}},e,this,[[4,21,25,35],[26,,30,34]])}));function t(){return e.apply(this,arguments)}return t}(),"(read [string])\n\n            Function if used with string will parse the string and return\n            list structure of LIPS code. If called without an argument it\n            will read string from standard input (using browser prompt or\n            user defined way) and call itself with that string (parse is)\n            function can be used together with eval to evaluate code from\n            string"),pprint:oi("pprint",function e(t){if(t instanceof Ii){t=new ss.Formatter(t.toString(true))["break"]().format();ro.get("display").call(ro,t)}else{ro.get("write").call(ro,t)}ro.get("newline").call(ro)},"(pprint expression)\n\n           Pretty print list expression, if called with non-pair it just call\n           print function with passed argument."),print:oi("print",function e(){var t=ro.get("display");var r=ro.get("newline");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}i.forEach(function(e){t.call(ro,e);r.call(ro)})},"(print . args)\n\n            Function convert each argument to string and print the result to\n            standard output (by default it's console but it can be defined\n            it user code), the function call newline after printing each arg."),format:oi("format",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}vo("format",t,"string");var u=/(~[as%~])/g;var a=t.match(/(~[as])/g);if(a&&a.length>n.length){throw new Error("Not enough arguments")}var o=0;var s=ro.get("repr");t=t.replace(u,function(e){var t=e[1];if(t==="~"){return"~"}else if(t==="%"){return"\n"}else{var r=n[o++];if(t==="a"){return s(r)}else{return s(r,true)}}});a=t.match(/~([\S])/);if(a){throw new Error("format: Unrecognized escape seqence ".concat(a[1]))}return t},"(format string n1 n2 ...)\n\n            Function accepts string template and replacing any escape sequences\n            by arguments:\n\n            * ~a value as if printed with display\n            * ~s value as if printed with write\n            * ~% newline character\n            * ~~ literal tilde '~' is inserted\n\n            if there missing arguments or other escape character it throw exception."),display:oi("display",function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r===null){r=Za(this,"stdout")}else{vo("display",r,"output-port")}var n=ro.get("repr")(t);r.write.call(ro,n)},"(display arg [port])\n\n            Function send string to standard output or provied port."),"display-error":oi("display-error",function e(){var t=Za(this,"stderr");var r=ro.get("repr");for(var n=arguments.length,i=new Array(n),u=0;u<n;u++){i[u]=arguments[u]}var a=i.map(r).join(" ");t.write.call(ro,a);ro.get("newline")(t)},"(display-error . args)\n\n            Display error message."),"%same-functions":oi("%same-functions",function(e,t){if(!_u(e)){return false}if(!_u(t)){return false}return Eu(e)===Eu(t)},"(%same-functions a b)\n\n            Helper function that check if two bound functions are the same"),help:oi(new iu("help",function(e,t){var r=t.dynamic_scope,n=t.error;var i;if(e.car instanceof Rn){i=e.car}else if(e.car instanceof Ii&&e.car.car instanceof Rn){i=e.car.car}else{var u=this;if(r){r=this}var a=So(e.car,{env:u,error:n,dynamic_scope:r});if(a&&a.__doc__){return a.__doc__}return}var o;var s=this.get(i);o=s&&s.__doc__;if(o){return o}var c=this.ref(i);if(c){o=c.doc(i);if(o){return o}}}),"(help object)\n\n             Macro returns documentation for function or macro. You can save the function\n             or macro in variable and use it in context. But help for variable require\n             to pass the symbol itself."),cons:oi("cons",function e(t,r){return new Ii(t,r)},"(cons left right)\n\n            Function return new Pair out of two arguments."),car:oi("car",function e(t){vo("car",t,"pair");return t.car},"(car pair)\n\n            Function returns car (head) of the list/pair."),cdr:oi("cdr",function e(t){vo("cdr",t,"pair");return t.cdr},"(cdr pair)\n\n            Function returns cdr (tail) of the list/pair."),"set!":oi(new iu("set!",function(e){var u=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.dynamic_scope,n=t.error;if(r){r=this}var i=this;var a;var o=So(e.cdr.car,{env:this,dynamic_scope:r,error:n});o=Do(o);function s(t,r,n){if(mu(t)){return t.then(function(e){return s(t,e,n)})}if(mu(r)){return r.then(function(e){return s(t,e,n)})}if(mu(n)){return n.then(function(e){return s(t,r,e)})}i.get("set-obj!").call(i,t,r,n);return n}if(e.car instanceof Ii&&Rn.is(e.car.car,".")){var c=e.car.cdr.car;var f=e.car.cdr.cdr.car;var l=So(c,{env:this,dynamic_scope:r,error:n});var h=So(f,{env:this,dynamic_scope:r,error:n});return s(l,h,o)}if(!(e.car instanceof Rn)){throw new Error("set! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var p=e.car.valueOf();a=this.ref(e.car.__name__);return ti(o,function(e){if(!a){var t=p.split(".");if(t.length>1){var r=t.pop();var n=t.join(".");var i=u.get(n,{throwError:false});if(i){s(i,r,e);return}}throw new Error("Unbound variable `"+p+"'")}a.set(p,e)})}),"(set! name value)\n\n            Macro that can be used to set the value of the variable (mutate)\n            it search the scope chain until it finds first non emtpy slot and set it."),"unset!":oi(new iu("set!",function(e){if(!(e.car instanceof Rn)){throw new Error("unset! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var t=e.car;var r=this.ref(t);if(r){delete r.__env__[t.__name__]}}),"(unset! name)\n\n            Function delete specified name from environment."),"set-car!":oi("set-car!",function(e,t){vo("set-car!",e,"pair");e.car=t},"(set-car! obj value)\n\n            Function that set car (head) of the list/pair to specified value.\n            It can destroy the list. Old value is lost."),"set-cdr!":oi("set-cdr!",function(e,t){vo("set-cdr!",e,"pair");e.cdr=t},"(set-cdr! obj value)\n\n            Function that set cdr (tail) of the list/pair to specified value.\n            It can destroy the list. Old value is lost."),"empty?":oi("empty?",function(e){return typeof e==="undefined"||e===ji},"(empty? object)\n\n            Function return true if value is undfined empty list."),gensym:oi("gensym",Un,"(gensym)\n\n             Function generate unique symbol, to use with macros as meta name."),load:oi("load",function e(t,r){vo("load",t,"string");var n=this;if(n.__name__==="__frame__"){n=n.__parent__}if(!(r instanceof Va)){if(n===ro){r=n}else{r=this.get("**interaction-environment**")}}var i="**module-path**";var u=ro.get(i,{throwError:false});t=t.valueOf();if(!t.match(/.[^.]+$/)){t+=".scm"}var a=t.match(/\.xcb$/);function o(e){if(a){e=ns(e)}else{if(wo(e)==="buffer"){e=e.toString()}e=e.replace(/^#!.*/,"");if(e.match(/^\{/)){e=Qo(e)}}return jo(e,r)}function s(e){return jr.fetch(e).then(function(e){return a?e.arrayBuffer():e.text()}).then(function(e){if(a){e=new Uint8Array(e)}return e})}if(co()){return new Promise(function(r,n){var e=Nr("path");if(u){u=u.valueOf();t=e.join(u,t)}ro.set(i,e.dirname(t));Nr("fs").readFile(t,function(e,t){if(e){n(e);ro.set(i,u)}else{try{o(t).then(function(){r();ro.set(i,u)})["catch"](n)}catch(e){n(e)}}})})}if(u){u=u.valueOf();t=u+"/"+t.replace(/^\.?\/?/,"")}return s(t).then(function(e){ro.set(i,t.replace(/\/[^/]*$/,""));return o(e)}).then(function(){})["finally"](function(){ro.set(i,u)})},"(load filename)\n            (load filename environment)\n\n            Function fetch the file and evaluate its content as LIPS code,\n            If second argument is provided and it's environment the evaluation\n            will happen in that environment."),do:oi(new iu("do",function(){var r=O(j.mark(function e(r,n){var i,u,a,o,s,c,f,l,h,p,_;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:i=n.dynamic_scope,u=n.error;a=this;if(i){i=a}o=a.inherit("do");s=r.car;c=r.cdr.car;f=r.cdr.cdr;if(f!==ji){f=new Ii(Rn("begin"),f)}l={env:a,dynamic_scope:i,error:u};h=s;case 10:if(!(h!==ji)){t.next=21;break}p=h.car;t.t0=o;t.t1=p.car;t.next=16;return So(p.cdr.car,l);case 16:t.t2=t.sent;t.t0.set.call(t.t0,t.t1,t.t2);h=h.cdr;t.next=10;break;case 21:l={env:o,dynamic_scope:i,error:u};_=j.mark(function e(){var r,n,i,u,a;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(f!==ji)){t.next=3;break}t.next=3;return ss.evaluate(f,l);case 3:r=s;n={};case 5:if(!(r!==ji)){t.next=15;break}i=r.car;if(!(i.cdr.cdr!==ji)){t.next=12;break}t.next=10;return So(i.cdr.cdr.car,l);case 10:u=t.sent;n[i.car.valueOf()]=u;case 12:r=r.cdr;t.next=5;break;case 15:a=Object.getOwnPropertySymbols(n);Object.keys(n).concat(a).forEach(function(e){o.set(e,n[e])});case 17:case"end":return t.stop()}}},e)});case 23:t.next=25;return So(c.car,l);case 25:t.t3=t.sent;if(!(t.t3===false)){t.next=30;break}return t.delegateYield(_(),"t4",28);case 28:t.next=23;break;case 30:if(!(c.cdr!==ji)){t.next=34;break}t.next=33;return So(c.cdr.car,l);case 33:return t.abrupt("return",t.sent);case 34:case"end":return t.stop()}}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()),"(do ((<var> <init> <next>)) (test expression) . body)\n\n             Iteration macro that evaluate the expression body in scope of the variables.\n             On Eeach loop it increase the variables according to next expression and run\n             test to check if the loop should continue. If test is signle call the macro\n             will not return anything. If the test is pair of expression and value the\n             macro will return that value after finish."),if:oi(new iu("if",function(r,e){var n=e.dynamic_scope,i=e.error;if(n){n=this}var u=this;var t=function e(t){if(t===false){return So(r.cdr.cdr.car,{env:u,dynamic_scope:n,error:i})}else{return So(r.cdr.car,{env:u,dynamic_scope:n,error:i})}};if(r===ji){throw new Error("too few expressions for `if`")}var a=So(r.car,{env:u,dynamic_scope:n,error:i});return ti(a,t)}),"(if cond true-expr false-expr)\n\n            Macro evaluate condition expression and if the value is true, it\n            evaluate and return true expression if not it evaluate and return\n            false expression"),"let-env":new iu("let-env",function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=e.dynamic_scope,n=e.error;vo("let-env",t,"pair");var i=So(t.car,{env:this,dynamic_scope:r,error:n});return ti(i,function(e){vo("let-env",e,"environment");return So(Ii(Rn("begin"),t.cdr),{env:e,dynamic_scope:r,error:n})})},"(let-env env . body)\n\n            Special macro that evaluate body in context of given environment\n            object."),letrec:oi(Gu(Symbol["for"]("letrec")),"(letrec ((a value-a) (b value-b)) body)\n\n             Macro that creates new environment, then evaluate and assign values to\n             names and then evaluate the body in context of that environment.\n             Values are evaluated sequentialy and next value can access to\n             previous values/names."),"letrec*":oi(Gu(Symbol["for"]("letrec")),"(letrec* ((a value-a) (b value-b)) body)\n\n             Same as letrec but the order of execution of the binding is guaranteed,\n             so use can use recursive code as well as reference previous binding.\n             In LIPS both letrec and letrec* behave the same."),"let*":oi(Gu(Symbol["for"]("let*")),"(let* ((a value-a) (b value-b)) body)\n\n             Macro similar to `let` but next argument get environment\n             from previous let variable, so they you can define one variable,\n             and use in next argument."),let:oi(Gu(Symbol["for"]("let")),"(let ((a value-a) (b value-b)) body)\n\n             Macro that creates new environment, then evaluate and assign values to\n             names and then evaluate the body in context of that environment.\n             Values are evaluated sequentialy but you can't access\n             previous values/names when next are evaluated. You can only get them\n             from body of let expression."),"begin*":oi(Hu("begin*",function(e){return e.pop()}),"(begin* . expr)\n\n             This macro is parallel version of begin. It evaluate each expression and\n             if it's a promise it will evaluate it in parallel and return value\n             of last expression."),begin:oi(new iu("begin",function(e,t){var n=Object.assign({},t);var i=ro.get("list->array")(e);if(n.dynamic_scope){n.dynamic_scope=this}n.env=this;var u;return function t(){if(i.length){var e=i.shift();var r=So(e,n);return ti(r,function(e){u=e;return t()})}else{return u}}()}),"(begin . args)\n\n             Macro runs list of expression and return valuate of the list one.\n             It can be used in place where you can only have single exression,\n             like if expression."),ignore:new iu("ignore",function(e,t){var r=t.dynamic_scope,n=t.error;var i={env:this,error:n};if(r){i.dynamic_scope=this}So(new Ii(new Rn("begin"),e),i)},"(ignore expression)\n\n            Macro that will evaluate expression and swallow any promises that may\n            be created. It wil run and ignore any value that may be returned by\n            expression. The code should have side effects and/or when it's promise\n            it should resolve to undefined."),"call/cc":oi(iu.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Br({env:this},t);return ti(So(e.car,r),function(e){if(_u(e)){return e(new ko(null))}})}),"(call/cc proc)\n\n              TODO"),define:oi(iu.defmacro("define",function(r,e){var n=this;if(r.car instanceof Ii&&r.car.car instanceof Rn){var t=new Ii(new Rn("define"),new Ii(r.car.car,new Ii(new Ii(new Rn("lambda"),new Ii(r.car.cdr,r.cdr)))));return t}else if(e.macro_expand){return}if(e.dynamic_scope){e.dynamic_scope=this}e.env=n;var i=r.cdr.car;var u;if(i instanceof Ii){i=So(i,e);u=true}else if(i instanceof Rn){i=n.get(i)}vo("define",r.car,"symbol");return ti(i,function(e){if(n.__name__===su.__merge_env__){n=n.__parent__}if(u&&(_u(e)&&$u(e)||e instanceof su)){e.__name__=r.car.valueOf();if(e.__name__ instanceof aa){e.__name__=e.__name__.valueOf()}}var t;if(r.cdr.cdr instanceof Ii&&aa.isString(r.cdr.cdr.car)){t=r.cdr.cdr.car.valueOf()}n.set(r.car,e,t,true)})}),'(define name expression)\n             (define name expression "doc string")\n             (define (function-name . args) body)\n\n             Macro for defining values. It can be used to define variables,\n             or function. If first argument is list it will create function\n             with name beeing first element of the list. The macro evalute\n             code `(define function (lambda args body))`'),"set-obj!":oi("set-obj!",function(e,t,r){var n=_(e);if(pu(e)||n!=="object"&&n!=="function"){var i=ho("set-obj!",wo(e),["object","function"]);throw new Error(i)}vo("set-obj!",t,["string","symbol","number"]);e=Eu(e);t=t.valueOf();if(arguments.length===2){delete e[t]}else if(Qi(e)&&_u(r)){e[t]=Eu(r);e[t][Tu]=true}else if(_u(r)||yo(r)||r===ji){e[t]=r}else{e[t]=r&&!Qi(r)?r.valueOf():r}},"(set-obj! obj key value)\n\n            Function set property of JavaScript object"),"null-environment":oi("null-environment",function(){return ro.inherit("null")},"(null-environment)\n\n            Function return new base environment with std lib."),values:oi("values",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return Ga(r)},"(values a1 a2 ...)\n\n            If called with more then one elment it will create special\n            Values object that can be used in call-with-values function"),"call-with-values":oi("call-with-values",function(e,t){vo("call-with-values",e,"function",1);vo("call-with-values",t,"function",2);var r=e();if(r instanceof Ga){return t.apply(void 0,k(r.valueOf()))}return t(r)},"(call-with-values producer consumer)\n\n            Calls its producer argument with no values and a continuation that,\n            when passed some values, calls the consumer procedure with those\n            values as arguments."),"current-environment":oi("current-environment",function(){if(this.__name__==="__frame__"){return this.__parent__}return this},"(current-environment)\n\n            Function return current environement."),"parent.frame":oi("parent.frame",function(){return no},"(parent.frame)\n\n            Return parent environment if called from inside function.\n            If no parent frame found it return nil."),eval:oi("eval",function(e,t){var n=this;t=t||this.get("current-environment").call(this);return So(e,{env:t,error:function e(t){var e=ro.get("display-error");e.call(n,t.message);if(t.code){var r=t.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}).join("\n");e.call(n,r)}}})},"(eval expr)\n            (eval expr environment)\n\n            Function evalute LIPS Scheme code."),lambda:new iu("lambda",function(l){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},h=e.dynamic_scope,p=e.error;var _=this;var d;if(l.cdr instanceof Ii&&aa.isString(l.cdr.car)&&l.cdr.cdr!==ji){d=l.cdr.car.valueOf()}function v(){var e;if(h){if(!(this instanceof Va)){e=_}else{e=this}}else{e=_}e=e.inherit("lambda");var t=l.car;var r=0;var n;if(typeof this!=="undefined"&&!(this instanceof Va)){if(this&&!this.__instance__){Object.defineProperty(this,"__instance__",{enumerable:false,get:function e(){return true},set:function e(){},configurable:false})}e.set("this",this)}for(var i=arguments.length,u=new Array(i),a=0;a<i;a++){u[a]=arguments[a]}if(this instanceof Va){var o={throwError:false};e.set("arguments",this.get("arguments",o));e.set("parent.frame",this.get("parent.frame",o))}else{var s=u.slice();s.callee=v;s.env=e;e.set("arguments",s)}if(t instanceof Rn||t!==ji){while(true){if(t.car!==ji){if(t instanceof Rn){n=Ha(Ii.fromArray(u.slice(r),false));e.__env__[t.__name__]=n;break}else{n=u[r];e.__env__[t.car.__name__]=n}}if(t.cdr===ji){break}r++;t=t.cdr}}if(h){h=e}var c=d?l.cdr.cdr:l.cdr;var f=new Ii(new Rn("begin"),c);return So(f,{env:e,dynamic_scope:h,error:p})}var t=l.car instanceof Ii?l.car.length():null;v.__code__=new Ii(new Rn("lambda"),l);v[Lu]=true;if(!(l.car instanceof Ii)){return oi(v,d,true)}return oi(Yu(v,t),d,true)},"(lambda (a b) body)\n            (lambda args body)\n            (lambda (a b . rest) body)\n\n            Macro lambda create new anonymous function, if first element of the body\n            is string and there is more elements it will be documentation, that can\n            be read using (help fn)"),macroexpand:new iu("macroexpand",ou()),"macroexpand-1":new iu("macroexpand-1",ou(true)),"define-macro":oi(new iu(uu,function(o,e){var s=e.dynamic_scope,c=e.error;if(o.car instanceof Ii&&o.car.car instanceof Rn){var t=o.car.car.__name__;var f;if(aa.isString(o.cdr.car)&&o.cdr.cdr instanceof Ii){f=o.cdr.car.valueOf()}var r=iu.defmacro(t,function(e){var t=new Va({},this,"defmacro");var r=o.car.cdr;var n=e;while(true){if(r===ji){break}if(r instanceof Rn){t.__env__[r.__name__]=n;break}else if(r.car!==ji){if(n===ji){t.__env__[r.car.__name__]=ji}else{if(n.car instanceof Ii){n.car[ju]=true}t.__env__[r.car.__name__]=n.car}}if(r.cdr===ji){break}if(n!==ji){n=n.cdr}r=r.cdr}if(s){s=t}var i={env:t,dynamic_scope:s,error:c};if(o.cdr instanceof Ii){var u=f?o.cdr.cdr:o.cdr;var a=u.reduce(function(e,t){return So(t,i)});return ti(a,function(e){if(_(e)==="object"){delete e[ju]}return e})}},f,true);r.__code__=new Ii(new Rn("define-macro"),o);this.set(t,r)}}),"(define-macro (name . args) body)\n\n             Meta macro, macro that create new macros, if return value is list structure\n             it will be evaluated when macro is invoked. You can use quasiquote ` and\n             unquote , and unquote-splicing ,@ inside to create expression that will be\n             evaluated on runtime. Macros works like this: if you pass any expression to\n             macro the arguments will not be evaluated unless macro itself evaluate it.\n             Because of this macro can manipulate expression (arguments) as lists."),"syntax-rules":new iu("syntax-rules",function(m,e){var y=e.dynamic_scope,g=e.error;var b=this;function w(e){var t=[];while(e!==ji){var r=e.car;t.push(r.valueOf());e=e.cdr}return t}function t(e){while(e!==ji){var t=e.car;if(!(t instanceof Rn)){throw new Error("syntax-rules: wrong identifier")}e=e.cdr}}if(m.car instanceof Rn){t(m.cdr.car)}else{t(m.car)}var r=new su(function(e,t){var r=t.macro_expand;var n=b.inherit("syntax");if(y){y=n}var i=this;if(i.__name__===su.__merge_env__){var u=Object.getOwnPropertySymbols(i.__env__);u.forEach(function(e){i.__parent__.set(e,i.__env__[e])});i=i.__parent__}var a={env:n,dynamic_scope:y,error:g};var o,s,c;if(m.car instanceof Rn){o=m.car;c=w(m.cdr.car);s=m.cdr.cdr}else{o="...";c=w(m.car);s=m.cdr}try{while(s!==ji){var f=s.car.car;var l=s.car.cdr.car;Lr(f);var h=fu(f,e,c,o,{expansion:this,define:b});if(h){if(Ur()){console.log(JSON.stringify($i(h),true,2));console.log("PATTERN: "+f.toString(true));console.log("MACRO: "+e.toString(true))}var p=[];var _=hu({bindings:h,expr:l,symbols:c,scope:n,lex_scope:i,names:p,ellipsis:o});Lr("OUPUT>>> "+_.toString());if(_){l=_}var d=i.merge(n,su.__merge_env__);if(r){return{expr:l,scope:d}}var v=So(l,Br(Br({},a),{},{env:d}));return lu(v,p)}s=s.cdr}}catch(e){e.message+=" in macro: ".concat(m.toString(true));throw e}throw new Error("Invalid Syntax ".concat(e.toString(true)))},b);r.__code__=m;return r},"(syntax-rules () (pattern expression) ...)\n\n            Base of Hygienic macro, it will return new syntax expander\n            that works like lisp macros."),quote:oi(new iu("quote",function(e){return Ha(e.car)}),"(quote expression)\n\n             Macro that return single lips expression as data (it don't evaluate its\n             argument). It will return list of pairs if put in front of lips code.\n             And if put in fron of symbol it will return that symbol not value\n             associated with that name."),"unquote-splicing":oi("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},"(unquote-splicing code)\n\n            Special form to be used in quasiquote macro, parser is processing special\n            characters ,@ and create call to this pseudo function. It can be used\n            to evalute expression inside and return the value without parenthesis.\n            the value will be joined to the output list structure."),unquote:oi("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},"(unquote code)\n\n            Special form to be used in quasiquote macro, parser is processing special\n            characters , and create call to this pseudo function. It can be used\n            to evalute expression inside and return the value, the output is inserted\n            into list structure created by queasiquote."),quasiquote:iu.defmacro("quasiquote",function(e,t){var o=t.dynamic_scope,s=t.error;var c=this;if(o){o=c}function u(e){return e instanceof Ii||Ri(e)||Array.isArray(e)}function f(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:u;if(e instanceof Ii){var n=e.car;var i=e.cdr;if(r(n)){n=t(n)}if(r(i)){i=t(i)}if(mu(n)||mu(i)){return Mn([n,i]).then(function(e){var t=A(e,2),r=t[0],n=t[1];return new Ii(r,n)})}else{return new Ii(n,i)}}return e}function a(e,t){if(e instanceof Ii){if(t!==ji){e.append(t)}}else{e=new Ii(e,t)}return e}function r(e){return!!e.filter(function(e){return e instanceof Ii&&Rn.is(e.car,/^(unquote|unquote-splicing)$/)}).length}function l(e,n,i){return e.reduce(function(e,t){if(!(t instanceof Ii)){e.push(t);return e}if(Rn.is(t.car,"unquote-splicing")){var r;if(n+1<i){r=d(t.cdr,n+1,i)}else{r=So(t.cdr.car,{env:c,dynamic_scope:o,error:s})}if(!(r instanceof Ii)){throw new Error("Expecting list ".concat(wo(t)," found"))}return e.concat(r.to_array())}e.push(d(t,n,i));return e},[])}function h(n,i,u){var a={};i++;Object.keys(n).forEach(function(e){var t=n[e];if(t instanceof Ii){if(Rn.is(t.car,"unquote-splicing")){throw new Error("You can't call `unquote-splicing` "+"inside object")}var r;if(i<u){r=d(t.cdr.car,i,u)}else{r=So(t.cdr.car,{env:c,dynamic_scope:o,error:s})}a[e]=r}else{a[e]=t}});if(Object.isFrozen(n)){Object.freeze(a)}return a}function p(i,e,t){if(e<t){return new Ii(new Ii(i.car.car,d(i.car.cdr,e,t)),ji)}var n=[];return function e(t){var r=So(t.car,{env:c,dynamic_scope:o,error:s});n.push(r);if(t.cdr instanceof Ii){return e(t.cdr)}return ti(n,function(r){if(r.some(function(e){return!(e instanceof Ii)})){if(i.cdr instanceof Ii&&Rn.is(i.cdr.car,".")&&i.cdr.cdr instanceof Ii&&i.cdr.cdr.cdr===ji){return i.cdr.cdr.car}if(!(i.cdr===ji||i.cdr instanceof Ii)){var e="You can't splice atom inside list";throw new Error(e)}if(r.length>1){var t="You can't splice multiple atoms inside list";throw new Error(t)}if(!(i.cdr instanceof Ii&&r[0]===ji)){return r[0]}}r=r.map(function(e){if(_.has(e)){return e.clone()}else{_.add(e);return e}});var n=d(i.cdr,0,1);if(n===ji&&r[0]===ji){return undefined}return ti(n,function(e){if(r[0]===ji){return e}if(r.length===1){return a(r[0],e)}var t=r.reduce(function(e,t){return a(e,t)});return a(t,e)})})}(i.car.cdr)}var _=new Set;function d(e,t,r){if(e instanceof Ii){if(e.car instanceof Ii){if(Rn.is(e.car.car,"unquote-splicing")){return p(e,t+1,r)}if(Rn.is(e.car.car,"unquote")){if(t+2===r&&e.car.cdr instanceof Ii&&e.car.cdr.car instanceof Ii&&Rn.is(e.car.cdr.car.car,"unquote-splicing")){var n=e.car.cdr;return new Ii(new Ii(new Rn("unquote"),p(n,t+2,r)),ji)}else if(e.car.cdr instanceof Ii&&e.car.cdr.cdr!==ji){if(e.car.cdr.car instanceof Ii){var i=[];return function t(r){if(r===ji){return Ii.fromArray(i)}return ti(So(r.car,{env:c,dynamic_scope:o,error:s}),function(e){i.push(e);return t(r.cdr)})}(e.car.cdr)}else{return e.car.cdr}}}}if(Rn.is(e.car,"quasiquote")){var u=d(e.cdr,t,r+1);return new Ii(e.car,u)}if(Rn.is(e.car,"quote")){return new Ii(e.car,d(e.cdr,t,r))}if(Rn.is(e.car,"unquote")){t++;if(t<r){return new Ii(new Rn("unquote"),d(e.cdr,t,r))}if(t>r){throw new Error("You can't call `unquote` outside "+"of quasiquote")}if(e.cdr instanceof Ii){if(e.cdr.cdr!==ji){if(e.cdr.car instanceof Ii){var a=[];return function t(r){if(r===ji){return Ii.fromArray(a)}return ti(So(r.car,{env:c,dynamic_scope:o,error:s}),function(e){a.push(e);return t(r.cdr)})}(e.cdr)}else{return e.cdr}}else{return So(e.cdr.car,{env:c,dynamic_scope:o,error:s})}}else{return e.cdr}}return f(e,function(e){return d(e,t,r)})}else if(Ri(e)){return h(e,t,r)}else if(e instanceof Array){return l(e,t,r)}return e}function n(e){if(e instanceof Ii){delete e[ju];if(!e.haveCycles("car")){n(e.car)}if(!e.haveCycles("cdr")){n(e.cdr)}}}if(Ri(e.car)&&!r(Object.values(e.car))){return Ha(e.car)}if(Array.isArray(e.car)&&!r(e.car)){return Ha(e.car)}if(e.car instanceof Ii&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote")){return Ha(e.car)}var i=d(e.car,0,1);return ti(i,function(e){n(e);return Ha(e)})},"(quasiquote list ,value ,@value)\n\n            Similar macro to `quote` but inside it you can use special\n            expressions unquote abbreviated to , that will evaluate expresion inside\n            and return its value or unquote-splicing abbreviated to ,@ that will\n            evaluate expression but return value without parenthesis (it will join)\n            the list with its value. Best used with macros but it can be used outside"),clone:oi("clone",function e(t){vo("clone",t,"pair");return t.clone()},"(clone list)\n\n            Function return clone of the list."),append:oi("append",function e(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n=n.map(function(e){if(e instanceof Ii){return e.clone()}return e});return(t=ro.get("append!")).call.apply(t,[this].concat(k(n)))},"(append item ...)\n\n            Function will create new list with eac argument appended to the end.\n            It will always return new list and not modify it's arguments."),"append!":oi("append!",function(){var r=ro.get("list?");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.reduce(function(e,t){vo("append!",e,["nil","pair"]);if((t instanceof Ii||t===ji)&&!r(t)){throw new Error("append!: Invalid argument, value is not a list")}if(pu(t)){return e}if(e===ji){if(t===ji){return ji}return t}return e.append(t)},ji)},"(append! arg1 ...)\n\n             Destructive version of append, it modify the list in place. It return\n             new list where each argument is appened to the end. It may modify\n             lists added as arguments."),reverse:oi("reverse",function e(t){vo("reverse",t,["array","pair","nil"]);if(t===ji){return ji}if(t instanceof Ii){var r=ro.get("list->array")(t).reverse();return ro.get("array->list")(r)}else if(!(t instanceof Array)){throw new Error(ho("reverse",wo(t),"array or pair"))}else{return t.reverse()}},"(reverse list)\n\n            Function will reverse the list or array. If value is not a list\n            or array it will throw exception."),nth:oi("nth",function e(t,r){vo("nth",t,"number");vo("nth",r,["array","pair"]);if(r instanceof Ii){var n=r;var i=0;while(i<t){if(!n.cdr||n.cdr===ji||n.haveCycles("cdr")){return ji}n=n.cdr;i++}return n.car}else if(r instanceof Array){return r[t]}else{throw new Error(ho("nth",wo(r),"array or pair",2))}},"(nth index obj)\n\n            Function return nth element of the list or array. If used with different\n            value it will throw exception"),list:oi("list",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return r.reverse().reduce(function(e,t){return new Ii(t,e)},ji)},"(list . args)\n\n            Function create new list out of its arguments."),substring:oi("substring",function e(t,r,n){vo("substring",t,"string");vo("substring",r,"number");vo("substring",n,["number","undefined"]);return t.substring(r.valueOf(),n&&n.valueOf())},"(substring string start end)\n\n            Function return part of the string starting at start ending with end."),concat:oi("concat",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(function(e,t){return vo("concat",e,"string",t+1)});return r.join("")},"(concat . strings)\n\n            Function create new string by joining its arguments"),join:oi("join",function e(t,r){vo("join",t,"string");vo("join",r,["pair","nil"]);return ro.get("list->array")(r).join(t)},"(join separator list)\n\n            Function return string by joining elements of the list"),split:oi("split",function e(t,r){vo("split",t,["regex","string"]);vo("split",r,"string");return ro.get("array->list")(r.split(t))},"(split separator string)\n\n            Function create list by splitting string by separatar that can\n            be a string or regular expression."),replace:oi("replace",function e(t,r,n){vo("replace",t,["regex","string"]);vo("replace",r,["string","function"]);vo("replace",n,"string");return n.replace(t,r)},"(replace pattern replacement string)\n\n            Function change pattern to replacement inside string. Pattern can be string\n            or regex and replacement can be function or string."),match:oi("match",function e(t,r){vo("match",t,["regex","string"]);vo("match",r,"string");var n=r.match(t);return n?ro.get("array->list")(n):false},"(match pattern string)\n\n            function return match object from JavaScript as list or #f if not match."),search:oi("search",function e(t,r){vo("search",t,["regex","string"]);vo("search",r,"string");return r.search(t)},"(search pattern string)\n\n            Function return first found index of the pattern inside a string"),repr:oi("repr",function e(t,r){return Wi(t,r)},"(repr obj)\n\n            Function return string LIPS representation of an object as string."),"escape-regex":oi("escape-regex",function(e){vo("escape-regex",e,"string");return xn(e.valueOf())},"(escape-regex string)\n\n            Function return new string where all special operators used in regex,\n            are escaped with slash so they can be used in RegExp constructor\n            to match literal string"),env:oi("env",function e(e){e=e||this;var t=Object.keys(e.__env__).map(Rn);var r;if(t.length){r=Ii.fromArray(t)}else{r=ji}if(e.__parent__ instanceof Va){return ro.get("env")(e.__parent__).append(r)}return r},"(env)\n            (env obj)\n\n            Function return list of values (functions, macros and variables)\n            inside environment and it's parents."),new:oi("new",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var i=p(Eu(e),k(r.map(function(e){return wu(e)})));return i},"(new obj . args)\n\n            Function create new JavaScript instance of an object."),typecheck:oi(vo,"(typecheck label value type [position])\n\n             Function check type and throw exception if type don't match.\n             Type can be string or list of strings. Position optional argument\n             is used to created proper error message."),"unset-special!":oi("unset-special!",function(e){vo("remove-special!",e,"string");delete zn.remove(e.valueOf())},"(unset-special! name)\n\n            Function remove special symbol from parser. Added by `set-special!`,\n            name must be a string."),"set-special!":oi("set-special!",function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:zn.LITERAL;vo("set-special!",e,"string",1);vo("set-special!",t,"symbol",2);zn.append(e.valueOf(),t,r)},'(set-special! symbol name [type])\n\n            Add special symbol to the list of transforming operators by the parser.\n            e.g.: `(add-special! "#" \'x)` will allow to use `#(1 2 3)` and it will be\n            transformed into (x (1 2 3)) so you can write x macro that will process\n            the list. 3rd argument is optional and it can be constant value\n            lips.specials.SPLICE if this constant is used it will transform\n            `#(1 2 3)` into (x 1 2 3) that is required by # that define vectors.'),get:Qa,".":Qa,unbind:oi(Eu,"(unbind fn)\n\n             Function remove bidning from function so you can get props from it."),type:oi(wo,"(type object)\n\n             Function return type of an object as string."),debugger:oi("debugger",function(){debugger},"(debugger)\n\n            Function stop JavaScript code in debugger."),in:oi("in",function(e,t){if(e instanceof Rn||e instanceof aa||e instanceof pa){e=e.valueOf()}return e in wu(t)},"(in key value)\n\n            Function use is in operator to check if value is in object."),instanceof:oi("instanceof",function(e,t){return t instanceof Eu(e)},"(instanceof type obj)\n\n            Function check of object is instance of object."),"prototype?":oi("prototype?",Qi,"(prototype? obj)\n\n             Function check if value is JavaScript Object prototype."),"macro?":oi("macro?",function(e){return e instanceof iu},"(macro? expression)\n\n            Function check if value is a macro."),"function?":oi("function?",_u,"(function? expression)\n\n             Function check if value is a function."),"real?":oi("real?",function(e){if(wo(e)!=="number"){return false}if(e instanceof pa){return e.isFloat()}return pa.isFloat(e)},"(real? number)\n\n            Function check if value is real number."),"number?":oi("number?",function(e){return Number.isNaN(e)||pa.isNumber(e)},"(number? expression)\n\n            Function check if value is a number or NaN value."),"string?":oi("string?",function(e){return aa.isString(e)},"(string? expression)\n\n            Function check if value is a string."),"pair?":oi("pair?",function(e){return e instanceof Ii},"(pair? expression)\n\n            Function check if value is a pair or list structure."),"regex?":oi("regex?",function(e){return e instanceof RegExp},"(regex? expression)\n\n            Function check if value is regular expression."),"null?":oi("null?",function(e){return pu(e)},"(null? expression)\n\n            Function check if value is nulish."),"boolean?":oi("boolean?",function(e){return typeof e==="boolean"},"(boolean? expression)\n\n            Function check if value is boolean."),"symbol?":oi("symbol?",function(e){return e instanceof Rn},"(symbol? expression)\n\n            Function check if value is LIPS symbol"),"array?":oi("array?",function(e){return e instanceof Array},"(array? expression)\n\n            Function check if value is an arrray."),"object?":oi("object?",function(e){return e!==ji&&e!==null&&!(e instanceof ua)&&!(e instanceof RegExp)&&!(e instanceof aa)&&!(e instanceof Ii)&&!(e instanceof pa)&&_(e)==="object"&&!(e instanceof Array)},"(object? expression)\n\n            Function check if value is an plain object."),flatten:oi("flatten",function e(t){vo("flatten",t,"pair");return t.flatten()},"(flatten list)\n\n            Return shallow list from tree structure (pairs)."),"array->list":oi("array->list",function(e){vo("array->list",e,"array");return Ii.fromArray(e)},"(array->list array)\n\n            Function convert JavaScript array to LIPS list."),"tree->array":oi("tree->array",Pi("tree->array",true),"(tree->array list)\n\n             Function convert LIPS list structure into JavaScript array."),"list->array":oi("list->array",Pi("list->array"),"(list->array list)\n\n             Function convert LIPS list into JavaScript array."),apply:oi("apply",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}vo("apply",t,"function",1);var u=n.pop();vo("apply",u,["pair","nil"],n.length+2);n=n.concat(ro.get("list->array").call(this,u));return t.apply(this,xo(t,n))},"(apply fn list)\n\n            Function that call function with list of arguments."),length:oi("length",function e(t){if(!t||t===ji){return 0}if(t instanceof Ii){return t.length()}if("length"in t){return t.length}},"(length expression)\n\n            Function return length of the object, the object can be list\n            or any object that have length property."),"string->number":oi("string->number",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;vo("string->number",e,"string",1);vo("string->number",t,"number",2);e=e.valueOf();t=t.valueOf();if(e.match(sn)||e.match(un)){return pn(e,t)}else if(e.match(cn)||e.match(nn)){return vn(e,t)}else{var r=t===10&&!e.match(/e/i)||t===16;if(e.match(on)&&r||e.match(an)){return _n(e,t)}if(e.match(Gr)){return gn(e)}}return false},"(string->number number [radix])\n\n           Function convert string to number."),try:oi(new iu("try",function(t,e){var c=this;var f=e.dynamic_scope,l=e.error;return new Promise(function(i,n){var u,a;if(Rn.is(t.cdr.car.car,"catch")){u=t.cdr.car;if(t.cdr.cdr instanceof Ii&&Rn.is(t.cdr.cdr.car.car,"finally")){a=t.cdr.cdr.car}}else if(Rn.is(t.cdr.car.car,"finally")){a=t.cdr.car}if(!(a||u)){throw new Error("try: invalid syntax")}var o=i;if(a){o=function e(t,r){o=n;ti(So(new Ii(new Rn("begin"),a.cdr),s),function(){r(t)})}}var s={env:c,error:function e(t){var r=c.inherit("try");if(u){r.set(u.cdr.car.car,t);var n={env:r,error:l};if(f){n.dynamic_scope=c}ti(So(new Ii(new Rn("begin"),u.cdr.cdr),n),function(e){o(e,i)})}else{o(t,l)}}};if(f){s.dynamic_scope=c}var e=So(t.car,s);if(mu(e)){e.then(function(e){o(e,i)})["catch"](s.error)}else{o(e,i)}})}),"(try expr (catch (e) code))\n             (try expr (catch (e) code) (finally code))\n             (try expr (finally code))\n\n             Macro execute user code and catch exception. If catch is provided\n             it's executed when expression expr throw error. If finally is provide\n             it's always executed at the end."),raise:oi("raise",function(e){throw e},"(raise obj)\n\n            Throws new exception with given object."),throw:oi("throw",function(e){throw new Error(e)},"(throw string)\n\n            Throws new expection."),find:oi("find",function t(r,n){vo("find",r,["regex","function"]);vo("find",n,["pair","nil"]);if(pu(n)){return ji}var e=ai("find",r);return ti(e(n.car),function(e){if(e&&e!==ji){return n.car}return t(r,n.cdr)})},"(find fn list)\n            (find regex list)\n\n            Higher order Function find first value for which function return true.\n            If called with regex it will create matcher function."),"for-each":oi("for-each",function(e){var t;vo("for-each",e,"function");for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}n.forEach(function(e,t){vo("for-each",e,["pair","nil"],t+1)});var u=(t=ro.get("map")).call.apply(t,[this,e].concat(n));if(mu(u)){return u.then(function(){})}},"(for-each fn . lists)\n\n            Higher order function that call function `fn` by for each\n            value of the argument. If you provide more then one list as argument\n            it will take each value from each list and call `fn` function\n            with that many argument as number of list arguments."),map:oi("map",function e(r){var n=this;for(var t=arguments.length,i=new Array(t>1?t-1:0),u=1;u<t;u++){i[u-1]=arguments[u]}vo("map",r,"function");var a=ro.get("list?");i.forEach(function(e,t){vo("map",e,["pair","nil"],t+1);if(e instanceof Ii&&!a.call(n,e)){throw new Error("map: argument ".concat(t+1," is not a list"))}});if(i.length===0){return ji}if(i.some(function(e){return e===ji})){return ji}var o=i.map(function(e){return e.car});var s=this.get("parent.frame");var c=this.newFrame(r,o);c.set("parent.frame",s);return ti(r.call.apply(r,[c].concat(k(o))),function(t){return ti(e.call.apply(e,[n,r].concat(k(i.map(function(e){return e.cdr})))),function(e){return new Ii(t,e)})})},"(map fn . lists)\n\n            Higher order function that call function `fn` by for each\n            value of the argument. If you provide more then one list as argument\n            it will take each value from each list and call `fn` function\n            with that many argument as number of list arguments. The return\n            values of the function call is acumulated in result list and\n            returned by the call to map."),"list?":oi("list?",function(e){var t=e;while(true){if(t===ji){return true}if(!(t instanceof Ii)){return false}if(t.haveCycles("cdr")){return false}t=t.cdr}},'(list? obj)\n\n            Function test if value is proper linked list structure.\n            The car of each pair can be any value. It return false on cycles."'),some:oi("some",function t(r,n){vo("some",r,"function");vo("some",n,["pair","nil"]);if(pu(n)){return false}else{return ti(r(n.car),function(e){return e||t(r,n.cdr)})}},"(some fn list)\n\n            Higher order function that call argument on each element of the list.\n            It stops when function fn return true for a value if so it will\n            return true. If none of the values give true, the function return false"),fold:oi("fold",Ku("fold",function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),u=3;u<n;u++){i[u-3]=arguments[u]}vo("fold",t,"function");i.forEach(function(e,t){vo("fold",e,["pair","nil"],t+1)});if(i.some(function(e){return e===ji})){return r}var a=e.call.apply(e,[this,t,r].concat(k(i.map(function(e){return e.cdr}))));return ti(a,function(e){return t.apply(void 0,k(i.map(function(e){return e.car})).concat([e]))})}),"(fold fn init . lists)\n\n             Function fold is reverse of the reduce. it call function `fn`\n             on each elements of the list and return single value.\n             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))\n             for: (fold fn '() alist blist)"),pluck:oi("pluck",function e(){for(var t=arguments.length,u=new Array(t),r=0;r<t;r++){u[r]=arguments[r]}return function(t){u=u.map(function(e){return e instanceof Rn?e.__name__:e});if(u.length===0){return ji}else if(u.length===1){var e=u,r=A(e,1),n=r[0];return t[n]}var i={};u.forEach(function(e){i[e]=t[e]});return i}},"(pluck . string)\n\n            If called with single string it will return function that will return\n            key from object. If called with more then one argument function will\n            return new object by taking all properties from given object."),reduce:oi("reduce",Ku("reduce",function(t,r,e){var n=this;for(var i=arguments.length,u=new Array(i>3?i-3:0),a=3;a<i;a++){u[a-3]=arguments[a]}vo("reduce",r,"function");u.forEach(function(e,t){vo("reduce",e,["pair","nil"],t+1)});if(u.some(function(e){return e===ji})){return e}return ti(r.apply(void 0,k(u.map(function(e){return e.car})).concat([e])),function(e){return t.call.apply(t,[n,r,e].concat(k(u.map(function(e){return e.cdr}))))})}),"(reduce fn init list . lists)\n\n             Higher order function take each element of the list and call\n             the function with result of previous call or init and next element\n             on the list until each element is processed and return single value\n             as result of last call to `fn` function.\n             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))\n             for (reduce fn init alist blist)"),filter:oi("filter",function e(t,r){vo("filter",t,["regex","function"]);vo("filter",r,["pair","nil"]);var i=ro.get("list->array")(r);var u=[];var a=ai("filter",t);return function t(r){function e(e){if(e&&e!==ji){u.push(n)}return t(++r)}if(r===i.length){return Ii.fromArray(u)}var n=i[r];return ti(a(n),e)}(0)},"(filter fn list)\n            (filter regex list)\n\n            Higher order function that call `fn` for each element of the list\n            and return list for only those elements for which funtion return\n            true value. If called with regex it will create matcher function."),compose:oi(Zu,"(compose . fns)\n\n             Higher order function and create new function that apply all functions\n             From right to left and return it's value. Reverse of compose.\n             e.g.:\n             ((compose (curry + 2) (curry * 3)) 3)\n             11\n            "),pipe:oi(Qu,"(pipe . fns)\n\n             Higher order function and create new function that apply all functions\n             From left to right and return it's value. Reverse of compose.\n             e.g.:\n             ((pipe (curry + 2) (curry * 3)) 3)\n             15"),curry:oi(na,"(curry fn . args)\n\n             Higher order function that create curried version of the function.\n             The result function will have parially applied arguments and it\n             will keep returning functions until all arguments are added\n\n             e.g.:\n             (define (add a b c d) (+ a b c d))\n             (define add1 (curry add 1))\n             (define add12 (add 2))\n             (display (add12 3 4))"),gcd:oi("gcd",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}po("lcm",r,"number");return r.reduce(function(e,t){return e.gcd(t)})},"(gcd n1 n2 ...)\n\n            Function return the greatest common divisor of their arguments."),lcm:oi("lcm",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}po("lcm",r,"number");var i=r.length,u=Ki(r[0]);for(var a=1;a<i;a++){var o=Ki(r[a]),s=u;while(u&&o){u>o?u%=o:o%=u}u=Ki(s*r[a])/(u+o)}return pa(u)},"(lcm n1 n2 ...)\n\n            Function return the least common multiple of their arguments."),"odd?":oi("odd?",ea(function(e){return pa(e).isOdd()}),"(odd? number)\n\n             Function check if number os odd."),"even?":oi("even?",ea(function(e){return pa(e).isEven()}),"(even? number)\n\n             Function check if number is even."),"*":oi("*",ra(function(e,t){return pa(e).mul(t)},pa(1)),"(* . numbers)\n\n        Multiplicate all numbers passed as arguments. If single value is passed\n        it will return that value."),"+":oi("+",ra(function(e,t){return pa(e).add(t)},pa(0)),"(+ . numbers)\n\n        Sum all numbers passed as arguments. If single value is passed it will\n        return that value."),"-":oi("-",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("-: procedure require at least one argument")}po("-",t,"number");if(t.length===1){return pa(t[0]).sub()}if(t.length){return t.reduce(ta(function(e,t){return pa(e).sub(t)}))}},"(- n1 n2 ...)\n            (- n)\n\n            Substract number passed as argument. If only one argument is passed\n            it will negate the value."),"/":oi("/",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("/: procedure require at least one argument")}po("/",t,"number");if(t.length===1){return pa(1).div(t[0])}return t.reduce(ta(function(e,t){return pa(e).div(t)}))},"(/ n1 n2 ...)\n            (/ n)\n\n            Divide number passed as arguments one by one. If single argument\n            is passed it will calculate (/ 1 n1)."),abs:oi("abs",ea(function(e){return pa(e).abs()}),"(abs number)\n\n             Function create absolute value from number."),truncate:oi("truncate",function(e){vo("truncate",e,"number");if(pa.isFloat(e)){if(e instanceof pa){e=e.valueOf()}return wa(nu(e))}return e},"(truncate n)\n\n            Function return integer value from real number."),sqrt:oi("sqrt",ea(function(e){return pa(e).sqrt()}),"(sqrt number)\n\n             Function return square root of the number."),"**":oi("**",ta(function(e,t){e=pa(e);t=pa(t);if(t.cmp(0)===-1){return wa(1).div(e).pow(t.sub())}return e.pow(t)}),"(** a b)\n\n            Function calculate number a to to the power of b."),"1+":oi("1+",ea(function(e){return pa(e).add(1)}),"(1+ number)\n\n             Function add 1 to the number and return result."),"1-":oi(ea(function(e){return pa(e).sub(1)}),"(1- number)\n\n             Function substract 1 from the number and return result."),"%":oi("%",function(e,t){po("%",[e,t],"number");return pa(e).rem(t)},"(% n1 n2)\n\n             Function get reminder of it's arguments."),"==":oi("==",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}po("==",t,"number");return Xi(function(e,t){return pa(e).cmp(t)===0},t)},"(== x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are equal"),">":oi(">",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}po(">",t,"number");return Xi(function(e,t){return pa(e).cmp(t)===1},t)},"(> x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically increasing"),"<":oi("<",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}po("<",t,"number");return Xi(function(e,t){return pa(e).cmp(t)===-1},t)},"(< x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically decreasing"),"<=":oi("<=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}po("<=",t,"number");return Xi(function(e,t){return[0,-1].includes(pa(e).cmp(t))},t)},"(<= x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically nonincreasing"),">=":oi(">=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}po(">=",t,"number");return Xi(function(e,t){return[0,1].includes(pa(e).cmp(t))},t)},"(>= x1 x2 ...)\n\n            Function compare its numerical arguments and check if they are\n            monotonically nondecreasing"),"eq?":oi("eq?",eu,"(eq? a b)\n\n             Function compare two values if they are identical."),or:oi(new iu("or",function(e,t){var i=t.dynamic_scope,u=t.error;var a=ro.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return false}var s;return function t(){function e(e){s=e;if(s!==false){return s}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=So(r,{env:o,dynamic_scope:i,error:u});return ti(n,e)}}()}),"(or . expressions)\n\n             Macro execute the values one by one and return the one that is truthy value.\n             If there are no expression that evaluate to true it return false."),and:oi(new iu("and",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=t.dynamic_scope,u=t.error;var a=ro.get("list->array")(e);var o=this;if(i){i=o}if(!a.length){return true}var s;return function t(){function e(e){s=e;if(s===false){return false}else{return t()}}if(!a.length){if(s!==false){return s}else{return false}}else{var r=a.shift();var n=So(r,{env:o,dynamic_scope:i,error:u});return ti(n,e)}}()}),"(and . expressions)\n\n             Macro evalute each expression in sequence if any value return false it will\n             return false. If each value return true it will return the last value.\n             If it's called without arguments it will return true."),"|":oi("|",function(e,t){return pa(e).or(t)},"(| a b)\n\n            Function calculate or bit operation."),"&":oi("&",function(e,t){return pa(e).and(t)},"(& a b)\n\n            Function calculate and bit operation."),"~":oi("~",function(e){return pa(e).neg()},"(~ number)\n\n            Function negate the value."),">>":oi(">>",function(e,t){return pa(e).shr(t)},"(>> a b)\n\n            Function right shit the value a by value b."),"<<":oi("<<",function(e,t){return pa(e).shl(t)},"(<< a b)\n\n            Function left shit the value a by value b."),not:oi("not",function e(t){if(pu(t)){return true}return!t},"(not object)\n\n            Function return negation of the argument.")},undefined,"global");var no=ro.inherit("user-env");function io(e,t){e.constant("**internal-env**",t);e.doc("**internal-env**","**internal-env**\n\n            Constant used to hide stdin, stdout and stderr so they don't interfere\n            with variables with the same name. Constants are internal type\n            of variables that can't be redefined, defining variable with same name\n            will throw an error.");ro.set("**interaction-environment**",e)}io(no,Xa);ro.doc("**interaction-environment**","**interaction-environment**\n\n        Internal dynamic, global variable used to find interpreter environment.\n        It's used so the read and write functions can locate **internal-env**\n        that contain references to stdin, stdout and stderr.");(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var r=e[t]?e[t]:t;ro.set(r,oi(r,function(e){vo(r,e,"number");if(e instanceof pa){return e[t]()}},"(".concat(r," number)\n\n                Function calculate ").concat(r," of a number.")))})})();function uo(e){if(e.length===1){return e[0]}else{var t=[];var r=uo(e.slice(1));for(var n=0;n<r.length;n++){for(var i=0;i<e[0].length;i++){t.push(e[0][i]+r[n])}}return t}}function ao(e,t,r){var n=[];for(var i=t;i<=r;++i){var u=[];for(var a=0;a<i;++a){u.push(e)}n=n.concat(uo(u))}return n}ao(["d","a"],2,5).forEach(function(e){var t=e.split("");var r=t.slice().reverse();var n=t.map(function(e){return"(c".concat(e,"r")}).join(" ")+" arg"+")".repeat(t.length);var i="c"+e+"r";ro.set(i,oi(i,function(e){return r.reduce(function(e,t){vo(i,e,"pair");if(t==="a"){return e.car}else{return e.cdr}},e)},"(".concat(i," arg)\n\n            Function calculate ").concat(n)))});function oo(e,t){var r=e.split(Pr.sep).filter(Boolean);for(var n=r.length;n--;){var i;var u=(i=Pr).join.apply(i,["/"].concat(k(r.slice(0,n+1))));if(t(u)){return u}}}function so(e){return oo(e,function(e){return Ir.existsSync(Pr.join(e,"node_modules"))})}function co(){return typeof global!=="undefined"&&global.global===global}function fo(){return lo.apply(this,arguments)}function lo(){lo=O(j.mark(function e(){var r,n,i,u,a;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return Promise.resolve().then(function(){return fs});case 2:r=t.sent;n=r.createRequire;Nr=n(typeof document==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);t.next=7;return Promise.resolve().then(function(){return fs});case 7:Ir=t.sent;t.next=10;return Promise.resolve().then(function(){return Cs});case 10:Pr=t.sent;ro.set("global",global);ro.set("self",global);ro.set("window",undefined);i=new URL(typeof document==="undefined"?new(require("u"+"rl").URL)("file:"+a).href:document.currentScript&&document.currentScript.src||new URL("lips.js",document.baseURI).href);u=Pr.dirname(i.pathname);a=Pr.basename(i.pathname);ro.set("__dirname",u);ro.set("__filename",a);ro.set("require.resolve",oi("require.resolve",function(e){vo("require.resolve",e,"string");var t=e.valueOf();return Nr.resolve(t)},"(require.resolve path)\n\n           Return path relative the current module."));ro.set("require",oi("require",function(t){vo("require",t,"string");t=t.valueOf();var e=process.cwd();var r;try{if(t.match(/^\s*\./)){r=Nr(Pr.join(e,t))}else{var n=so(e);if(n){r=Nr(Pr.join(n,"node_modules",t))}else{r=Nr(t)}}}catch(e){r=Nr(t)}return Du(r,global)},"(require module)\n\n            Function to be used inside Node.js to import the module."));case 21:case"end":return t.stop()}}},e)}));return lo.apply(this,arguments)}if(co()){fo()}else if(typeof window!=="undefined"&&window===jr){ro.set("window",window);ro.set("global",undefined);ro.set("self",window)}else if(typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"){ro.set("self",self);ro.set("window",undefined);ro.set("global",undefined)}function ho(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=e?" in expression `".concat(e,"`"):"";if(n!==null){i+=" (argument ".concat(n,")")}if(_u(r)){return"Invalid type got ".concat(t).concat(i)}if(r instanceof Array){if(r.length===1){r=r[0]}else{var u=r[r.length-1];r=r.slice(0,-1).join(", ")+" or "+u}}return"Expecting ".concat(r,", got ").concat(t).concat(i)}function po(r,e,n){e.forEach(function(e,t){vo(r,e,n,t+1)})}function _o(e,t,r){vo(e,t,r);if(t.__type__===Ua){throw new Error(ho(e,"binary-port","textual-port"))}}function vo(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;e=e.valueOf();var i=wo(t).toLowerCase();if(_u(r)){if(!r(t)){throw new Error(ho(e,i,r,n))}return}var u=false;if(r instanceof Ii){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){u=true}}else{r=r.valueOf().toLowerCase()}if(!u&&i!==r){throw new Error(ho(e,i,r,n))}}function mo(e){var t=_(e);return["string","function"].includes(t)||_(e)==="symbol"||e instanceof qn||e instanceof Rn||e instanceof pa||e instanceof aa||e instanceof RegExp}function yo(e){return e instanceof pa||e instanceof aa||e instanceof ua}function go(e,t){if(e===null){return false}return _(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function bo(e,t){if(go(e,t)||go(e.__proto__,t)){return _u(e[t])}}function wo(e){var t={pair:Ii,symbol:Rn,character:ua,values:Ga,"input-port":ka,"output-port":Oa,number:pa,regex:RegExp,syntax:su,macro:iu,string:aa,array:Array,"native-symbol":Symbol};if(Number.isNaN(e)){return"NaN"}if(e===ji){return"nil"}if(e===null){return"null"}for(var r=0,n=Object.entries(t);r<n.length;r++){var i=A(n[r],2),u=i[0],a=i[1];if(e instanceof a){return u}}if(_(e)==="object"){if(e.__instance__){e.__instance__=false;if(e.__instance__){if(_u(e.toType)){return e.toType()}return"instance"}}if(e.constructor){if(e.constructor.__class__){return e.constructor.__class__}if(e.constructor===Object){if(bo(e,Symbol.iterator)){return"iterator"}if(bo(e,Symbol.asyncIterator)){return"async-iterator"}}return e.constructor.name.toLowerCase()}}return _(e)}function Do(e){var t=[];r(e);if(t.length){return u(e)}return e;function r(e){if(mu(e)){t.push(e)}else if(e instanceof Ii){if(!e.haveCycles("car")){r(e.car)}if(!e.haveCycles("cdr")){r(e.cdr)}}else if(e instanceof Array){e.forEach(r)}}function n(e){return i.apply(this,arguments)}function i(){i=O(j.mark(function e(r){var n;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.t0=Ii;if(!r.haveCycles("car")){t.next=5;break}t.t1=r.car;t.next=8;break;case 5:t.next=7;return u(r.car);case 7:t.t1=t.sent;case 8:t.t2=t.t1;if(!r.haveCycles("cdr")){t.next=13;break}t.t3=r.cdr;t.next=16;break;case 13:t.next=15;return u(r.cdr);case 15:t.t3=t.sent;case 16:t.t4=t.t3;n=new t.t0(t.t2,t.t4);if(r[ju]){n[ju]=true}return t.abrupt("return",n);case 20:case"end":return t.stop()}}},e)}));return i.apply(this,arguments)}function u(e){if(e instanceof Array){return Mn(e.map(u))}if(e instanceof Ii&&t.length){return n(e)}return e}}function Eo(e,t){var r=t.env,n=t.dynamic_scope,i=t.error;var u=[];var a=e;Zi(a);function o(){return u}return function t(){if(a instanceof Ii){var e=So(a.car,{env:r,dynamic_scope:n,error:i});if(n){e=ti(e,function(e){if(Ju(e)){return e.bind(n)}return e})}return ti(Do(e),function(e){u.push(e);if(a.haveCycles("cdr")){return o()}a=a.cdr;return t()})}else if(a===ji){return o()}else{throw new Error("Syntax Error: improper list found in apply")}}()}function Ao(e,t,r){var n=e.invoke(t,r);return ti(Do(n),function(e){if(e instanceof Ii){e.markCycles()}return Ha(e)})}function Fo(e,t,r){function n(e){if(e instanceof Ii){e.markCycles();return e}return Ha(e)}var i=e.invoke(t,r);return ti(Do(i),function e(t){if(!t||t&&t[ju]||mo(t)){return t}else{return ti(So(t,r),n)}})}function xo(e,t){if(xu(e)&&!Fu(e)&&(!Cu(e)||Ou(e))){t=t.map(wu)}if(!Vu(e)&&t.some(qi)&&!qi(e)&&!Ui(e)){var r=[],n=t.length;var i=function e(){var i=t[n];if(qi(i)){u=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return ti(i.apply(this,r),wu)};Mu(u,"__bound__",true);Mu(u,"__fn__",i);u.prototype=i.prototype;r[n]=u}else{r[n]=i}};while(n--){var u;i()}t=r}return t}function Co(i,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u=t.env,a=t.dynamic_scope,r=t.error,o=r===void 0?function(){}:r;e=Eo(e,{env:u,dynamic_scope:a,error:o});return ti(e,function(e){if(Vu(i)){i=Eu(i)}e=xo(i,e);var t=e.slice();var r=(a||u).newFrame(i,t);var n=Do(i.apply(r,e));return ti(n,function(e){if(e instanceof Ii){e.markCycles();return Ha(e)}return gu(e)},o)})}var ko=function(){function t(e){y(this,t);this.__value__=e}b(t,[{key:"invoke",value:function e(){if(this.__value__===null){throw new Error("Continuations are not implemented yet")}}},{key:"toString",value:function e(){return"#<Continuation>"}}]);return t}();var Oo=function e(){};function So(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=e.env,n=e.dynamic_scope,i=e.error,u=i===void 0?Oo:i;try{if(n===true){r=n=r||ro}else if(r===true){r=n=ro}else{r=r||ro}var a={env:r,dynamic_scope:n,error:u};var o;if(pu(t)){return t}if(t instanceof Rn){return r.get(t)}if(!(t instanceof Ii)){return t}var s=t.car;var c=t.cdr;if(s instanceof Ii){o=Do(So(s,a));if(mu(o)){return o.then(function(e){return So(new Ii(e,t.cdr),a)})}else if(!vu(o)){throw new Error(wo(o)+" "+r.get("repr")(o)+" is not callable while evaluating "+t.toString())}}if(s instanceof Rn){o=r.get(s)}else if(_u(s)){o=s}var f;if(o instanceof su){f=Ao(o,t,a)}else if(o instanceof iu){f=Fo(o,c,a)}else if(_u(o)){f=Co(o,c,a)}else if(du(o)){f=o.invoke()}else if(t instanceof Ii){o=s&&s.toString();throw new Error("".concat(wo(s)," ").concat(o," is not a function"))}else{return t}var l=r.get(Symbol["for"]("__promise__"),{throwError:false});if(l===true&&mu(f)){f=f.then(function(e){if(e instanceof Ii&&!o[ju]){return So(e,a)}return e});return new qn(f)}return f}catch(e){u&&u.call(r,e,t)}}var Bo=Io(function(e){return e});var jo=Io(function(e,t){return t});function Io(d){return function(){var n=O(j.mark(function e(r,n,i){var u,a,o,s,c,f,l,h,p,_;return j.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(i===true){n=i=n||no}else if(n===true){n=i=no}else{n=n||no}u=[];a=Array.isArray(r)?r:Xn(r);o=true;s=false;t.prev=5;f=F(a);case 7:t.next=9;return f.next();case 9:l=t.sent;o=l.done;t.next=13;return l.value;case 13:h=t.sent;if(o){t.next=32;break}p=h;_=So(p,{env:n,dynamic_scope:i,error:function e(t,r){if(t&&t.message){if(t.message.match(/^Error:/)){var n=/^(Error:)\s*([^:]+:\s*)/;t.message=t.message.replace(n,"$1 $2")}if(r){if(!(t.__code__ instanceof Array)){t.__code__=[]}t.__code__.push(r.toString(true))}}throw t}});if(mu(_)){t.next=21;break}u.push(d(p,_));t.next=29;break;case 21:t.t0=u;t.t1=d;t.t2=p;t.next=26;return _;case 26:t.t3=t.sent;t.t4=(0,t.t1)(t.t2,t.t3);t.t0.push.call(t.t0,t.t4);case 29:o=true;t.next=7;break;case 32:t.next=38;break;case 34:t.prev=34;t.t5=t["catch"](5);s=true;c=t.t5;case 38:t.prev=38;t.prev=39;if(!(!o&&f["return"]!=null)){t.next=43;break}t.next=43;return f["return"]();case 43:t.prev=43;if(!s){t.next=46;break}throw c;case 46:return t.finish(43);case 47:return t.finish(38);case 48:return t.abrupt("return",u);case 49:case"end":return t.stop()}}},e,null,[[5,34,38,48],[39,,43,47]])}));function e(e,t,r){return n.apply(this,arguments)}return e}()}function Po(e){var t={"[":"]","(":")"};var r;if(typeof e==="string"){r=In(e)}else{r=e.map(function(e){return e&&e.token?e.token:e})}var n=Object.keys(t);var i=Object.values(t).concat(n);r=r.filter(function(e){return i.includes(e)});var u=new Cn;var a=Cr(r),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;if(n.includes(s)){u.push(s)}else if(!u.is_empty()){var c=u.top();var f=t[c];if(s===f){u.pop()}else{throw new Error("Syntax error: missing closing ".concat(f))}}else{throw new Error("Syntax error: not matched closing ".concat(s))}}}catch(e){a.e(e)}finally{a.f()}return u.is_empty()}function No(e){var t="("+e.toString()+")()";var r=window.URL||window.webkitURL;var n;try{n=new Blob([t],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;n=new i;n.append(t);n=n.getBlob()}return new jr.Worker(r.createObjectURL(n))}function Ro(){return ss.version.match(/^(\{\{VER\}\}|DEV)$/)}function To(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t="dist/std.xcb";if(e===""){if(Ro()){e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/".concat(t)}else{e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(ss.version,"/").concat(t)}}var r=ro.get("load");return r.call(no,e,ro)}function Lo(e){this.url=e;var a=this.worker=No(function(){var a;var o;self.addEventListener("message",function(e){var r=e.data;var t=r.id;if(r.type!=="RPC"||t===null){return}function n(e){self.postMessage({id:t,type:"RPC",result:e})}function i(e){self.postMessage({id:t,type:"RPC",error:e})}if(r.method==="eval"){if(!o){i("Worker RPC: LIPS not initilized, call init first");return}o.then(function(){var e=r.params[0];var t=r.params[1];a.exec(e,t).then(function(e){e=e.map(function(e){return e&&e.valueOf()});n(e)})["catch"](function(e){i(e)})})}else if(r.method==="init"){var u=r.params[0];if(typeof u!=="string"){i("Worker RPC: url is not a string")}else{importScripts("".concat(u,"/dist/lips.min.js"));a=new ss.Interpreter("worker");o=To(u);o.then(function(){n(true)})}}})});this.rpc=function(){var n=0;return function e(t,r){var u=++n;return new Promise(function(n,i){a.addEventListener("message",function e(t){var r=t.data;if(r&&r.type==="RPC"&&r.id===u){if(r.error){i(r.error)}else{n(r.result)}a.removeEventListener("message",e)}});a.postMessage({type:"RPC",method:t,id:u,params:r})})}}();this.rpc("init",[e])["catch"](function(e){console.error(e)});this.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.rpc("eval",[e,t])}}var Uo={pair:function e(t){var r=A(t,2),n=r[0],i=r[1];return Ii(n,i)},number:function e(t){if(aa.isString(t)){return pa([t,10])}return pa(t)},regex:function e(t){var r=A(t,2),n=r[0],i=r[1];return new RegExp(n,i)},nil:function e(){return ji},symbol:function e(t){if(aa.isString(t)){return Rn(t)}else if(Array.isArray(t)){return Rn(Symbol["for"](t[0]))}},string:aa,character:ua};var qo=Object.keys(Uo);var Mo={};for(var Yo=0,$o=Object.entries(qo);Yo<$o.length;Yo++){var zo=A($o[Yo],2),Vo=zo[0],Jo=zo[1];Mo[Jo]=+Vo}function Go(e){return Mo[e]}function Ho(e){return qo[e]}function Wo(e){return JSON.stringify(e,function(e,t){var r=this[e];if(r){if(r instanceof RegExp){return{"@":Go("regex"),"#":[r.source,r.flags]}}var n=Go(r.constructor.__class__);if(!yu(n)){return{"@":n,"#":r.serialize()}}}return t})}function Qo(e){return JSON.parse(e,function(e,t){if(t&&_(t)==="object"){if(!yu(t["@"])){var r=Ho(t["@"]);if(Uo[r]){return Uo[r](t["#"])}}}return t})}var Zo=function(){var e={pair:Ii,symbol:Rn,number:pa,string:aa,character:ua,nil:ji.constructor,regex:RegExp};function t(e,t){return{deserialize:t,Class:e}}var r=new Qt;var u={};for(var n=0,i=Object.entries(Uo);n<i.length;n++){var a=A(i[n],2),o=a[0],s=a[1];var c=e[o];u[o]=t(c,s)}var f=43311;Object.keys(u).forEach(function(e){var t=u[e];if(typeof t==="function"){var r=t;tr({Class:r,tag:f,encode:function e(t,r){r(t.serialize())},decode:function e(t){return new r(t)}})}else{var n=t.deserialize,i=t.Class;tr({Class:i,tag:f,encode:function e(t,r){if(t instanceof RegExp){return r([t.source,t.flags])}r(t.serialize())},decode:function e(t){return n(t)}})}f++});return r}();function Ko(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length>1){var n=t.reduce(function(e,t){return e+t.length},0);var i=new Uint8Array(n);var u=0;t.forEach(function(e){i.set(e,u);u+=e.length});return i}else if(t.length){return t[0]}}function Xo(){var e=1;var t=new TextEncoder("utf-8");return t.encode("LIPS".concat(e.toString().padStart(3," ")))}var es=7;function ts(e){var t=new TextDecoder("utf-8");var r=t.decode(e.slice(0,es));var n=r.substring(0,4);if(n==="LIPS"){var i=r.match(/^(....).*([0-9]+)$/);if(i){return{type:i[1],version:Number(i[2])}}}return{type:"unknown"}}function rs(e){var t=Xo();var r=Zo.encode(e);return Ko(t,br(r,{magic:false}))}function ns(e){var t=ts(e),r=t.type,n=t.version;if(r==="CBOR"&&n===1){return Zo.decode(e.slice(es))}else if(r==="CBRZ"&&n===1){var i=wr(e.slice(es),{magic:false});return Zo.decode(i)}else{throw new Error("Invalid file format ".concat(r))}}function is(e){console.error(e.message||e);if(e.code){console.error(e.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}))}}function us(){var a=["text/x-lips","text/x-scheme"];var o;function s(r){return new Promise(function(t){var e=r.getAttribute("src");if(e){return fetch(e).then(function(e){return e.text()}).then(jo).then(t)["catch"](function(e){is(e);t()})}else{return jo(r.innerHTML).then(t)["catch"](function(e){is(e);t()})}})}function e(){return new Promise(function(i){var u=Array.from(document.querySelectorAll("script"));return function e(){var t=u.shift();if(!t){i()}else{var r=t.getAttribute("type");if(a.includes(r)){var n=t.getAttribute("bootstrap");if(!o&&typeof n==="string"){To(n).then(function(){return s(t)}).then(e)}else{s(t).then(e)}}else if(r&&r.match(/lips|lisp/)){console.warn("Expecting "+a.join(" or ")+" found "+r)}return e()}}()})}if(!window.document){return Promise.resolve()}else if(as){var t=as;var r=t.getAttribute("bootstrap");if(typeof r==="string"){return To(r).then(function(){o=true;return e()})}}return e()}var as=typeof window!=="undefined"&&window.document&&document.currentScript;if(typeof window!=="undefined"){Tr(window,us)}var os=function(){var e=aa("Sun, 31 Oct 2021 09:03:02 +0000").valueOf();var t=e==="{{"+"DATE}}"?new Date:new Date(e);var r=function e(t){return t.toString().padStart(2,"0")};var n=t.getFullYear();var i=[n,r(t.getMonth()+1),r(t.getDate())].join("-");var u="\n  __ __                          __\n / / \\ \\       _    _  ___  ___  \\ \\\n| |   \\ \\     | |  | || . \\/ __>  | |\n| |    > \\    | |_ | ||  _/\\__ \\  | |\n| |   / ^ \\   |___||_||_|  <___/  | |\n \\_\\ /_/ \\_\\                     /_/\n\nLIPS Interpreter 1.0.0-beta.14 (".concat(i,") <https://lips.js.org>\nCopyright (c) 2018-").concat(n," Jakub T. Jankiewicz\n\nType (env) to see environment with functions macros and variables. You can also\nuse (help name) to display help for specic function or macro, (apropos name)\nto display list of matched names in environment and (dir object) to list\nproperties of an object.\n").replace(/^.*\n/,"");return u}();ii(pi,"__class__","ahead");ii(Ii,"__class__","pair");ii(Bi,"__class__","nil");ii(_i,"__class__","pattern");ii(hi,"__class__","formatter");ii(iu,"__class__","macro");ii(su,"__class__","syntax");ii(Va,"__class__","environment");ii(ka,"__class__","input-port");ii(Oa,"__class__","output-port");ii(Sa,"__class__","output-port");ii(Ba,"__class__","output-string-port");ii(Ia,"__class__","input-string-port");ii(Ra,"__class__","input-file-port");ii(ja,"__class__","output-file-port");ii(za,"__class__","lips-error");[pa,ba,xa,wa,Ca].forEach(function(e){ii(e,"__class__","number")});ii(ua,"__class__","character");ii(Rn,"__class__","symbol");ii(aa,"__class__","string");ii(qn,"__class__","promise");var ss={version:"1.0.0-beta.14",banner:os,date:"Sun, 31 Oct 2021 09:03:02 +0000",exec:jo,parse:Zu(ui,Xn),tokenize:In,evaluate:So,compile:Bo,serialize:Wo,unserialize:Qo,serialize_bin:rs,unserialize_bin:ns,bootstrap:To,Environment:Va,env:no,Worker:Lo,Interpreter:$a,balanced_parenthesis:Po,balancedParenthesis:Po,balanced:Po,Macro:iu,Syntax:su,Pair:Ii,Values:Ga,QuotedPromise:qn,Error:za,quote:Ha,InputPort:ka,OutputPort:Oa,BufferedOutputPort:Sa,InputFilePort:Ra,OutputFilePort:ja,InputStringPort:Ia,OutputStringPort:Ba,InputByteVectorPort:Pa,OutputByteVectorPort:Na,InputBinaryFilePort:Ta,OutputBinaryFilePort:La,Formatter:hi,Parser:Zn,Lexer:Wn,specials:zn,repr:Ni,nil:ji,eof:Ma,LSymbol:Rn,LNumber:pa,LFloat:wa,LComplex:ba,LRational:xa,LBigInteger:Ca,LCharacter:ua,LString:aa,rationalize:Aa};ro.set("lips",ss);var cs={};var fs=Object.freeze({__proto__:null,default:cs});function ls(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var hs=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var ps=function(e){return hs.exec(e).slice(1)};function _s(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}e=n+"/"+e;t=n.charAt(0)==="/"}e=ls(Fs(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."}function ds(e){var t=vs(e),r=xs(e,-1)==="/";e=ls(Fs(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e}function vs(e){return e.charAt(0)==="/"}function ms(){var e=Array.prototype.slice.call(arguments,0);return ds(Fs(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}function ys(e,t){e=_s(e).substr(1);t=_s(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var n=r(e.split("/"));var i=r(t.split("/"));var u=Math.min(n.length,i.length);var a=u;for(var o=0;o<u;o++){if(n[o]!==i[o]){a=o;break}}var s=[];for(var o=a;o<n.length;o++){s.push("..")}s=s.concat(i.slice(a));return s.join("/")}var gs="/";var bs=":";function ws(e){var t=ps(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n}function Ds(e,t){var r=ps(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r}function Es(e){return ps(e)[3]}var As={extname:Es,basename:Ds,dirname:ws,sep:gs,delimiter:bs,relative:ys,join:ms,isAbsolute:vs,normalize:ds,resolve:_s};function Fs(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var xs="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)};var Cs=Object.freeze({__proto__:null,resolve:_s,normalize:ds,isAbsolute:vs,join:ms,relative:ys,sep:gs,delimiter:bs,dirname:ws,basename:Ds,extname:Es,default:As});return ss});